(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[997],{54748:(F,A,n)=>{"use strict";n.d(A,{M:()=>E});var x=n(58837),c=n(71677),h=n(14041),y=n(72501);const b=(0,x.A)({container:{overflow:"visible !important"},typo:{fontSize:"inherit",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":({line:L})=>L||1,"-webkit-box-orient":"vertical"}},{name:"BackstageOverflowTooltip"});function E(L){const K=b(L);return h.createElement(c.Ay,{title:L.title??(L.text||""),placement:L.placement},h.createElement(y.A,{className:K.typo,variant:"inherit"},L.text))}},80997:(F,A,n)=>{"use strict";n.r(A),n.d(A,{GroupProfileCard:()=>yt,MembersListCard:()=>it,MyGroupsSidebarItem:()=>Ht.k,OwnershipCard:()=>Kt,UserProfileCard:()=>$t});var x=n(55488),c=n(78560),h=n(37281),y=n(16400),b=n(30043),E=n(77125),L=n(42899),K=n(73643),B=n(72501),I=n(58837),v=n(99703),s=n(89575),u=n(39850),t=n(14041),N=n(9546),z=n(7031),M=n(83705),Ue=n(90689),Oe=n(45065);function ke(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=a.boundaryCount,o=e===void 0?1:e,r=a.componentName,i=r===void 0?"usePagination":r,d=a.count,l=d===void 0?1:d,m=a.defaultPage,f=m===void 0?1:m,g=a.disabled,$=g===void 0?!1:g,p=a.hideNextButton,O=p===void 0?!1:p,C=a.hidePrevButton,P=C===void 0?!1:C,w=a.onChange,S=a.page,R=a.showFirstButton,k=R===void 0?!1:R,W=a.showLastButton,H=W===void 0?!1:W,te=a.siblingCount,V=te===void 0?1:te,ie=(0,u.A)(a,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),G=(0,Oe.A)({controlled:S,default:f,name:i,state:"page"}),Q=(0,Ue.A)(G,2),U=Q[0],le=Q[1],X=function(Y,J){S||le(J),w&&w(Y,J)},D=function(Y,J){var Xt=J-Y+1;return Array.from({length:Xt},function(Jt,Yt){return Y+Yt})},ae=D(1,Math.min(o,l)),j=D(Math.max(l-o+1,o+1),l),pe=Math.max(Math.min(U-V,l-o-V*2-1),o+2),we=Math.min(Math.max(U+V,o+V*2+2),j[0]-2),Qt=[].concat((0,M.A)(k?["first"]:[]),(0,M.A)(P?[]:["previous"]),(0,M.A)(ae),(0,M.A)(pe>o+2?["start-ellipsis"]:o+1<l-o?[o+1]:[]),(0,M.A)(D(pe,we)),(0,M.A)(we<l-o-1?["end-ellipsis"]:l-o>o?[l-o]:[]),(0,M.A)(j),(0,M.A)(O?[]:["next"]),(0,M.A)(H?["last"]:[])),Ge=function(Y){switch(Y){case"first":return 1;case"previous":return U-1;case"next":return U+1;case"last":return l;default:return null}},jt=Qt.map(function(T){return typeof T=="number"?{onClick:function(J){X(J,T)},type:"page",page:T,selected:T===U,disabled:$,"aria-current":T===U?"true":void 0}:{onClick:function(J){X(J,Ge(T))},type:T,page:Ge(T),selected:!1,disabled:$||T.indexOf("ellipsis")===-1&&(T==="next"||T==="last"?U>=l:U<=1)}});return(0,s.A)({items:jt},ie)}var Z=n(268),We=n(54917),De=n(97740),ce=n(38483);const xe=(0,ce.A)(t.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Le=(0,ce.A)(t.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Pe=(0,ce.A)(t.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Ne=(0,ce.A)(t.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");var ge=n(11192),Fe=function(e){return{root:(0,s.A)({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:e.palette.text.primary}),page:{transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:e.palette.action.focus},"&$selected":{backgroundColor:e.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:(0,Z.X4)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:1,color:e.palette.action.disabled,backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:e.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:e.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15),"& $icon":{fontSize:e.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}},"&$disabled":{color:e.palette.action.disabled}}},textSecondary:{"&$selected":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}},"&$disabled":{color:e.palette.action.disabled}}},outlined:{border:"1px solid ".concat(e.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:e.palette.primary.main,border:"1px solid ".concat((0,Z.X4)(e.palette.primary.main,.5)),backgroundColor:(0,Z.X4)(e.palette.primary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,Z.X4)(e.palette.primary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:e.palette.secondary.main,border:"1px solid ".concat((0,Z.X4)(e.palette.secondary.main,.5)),backgroundColor:(0,Z.X4)(e.palette.secondary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,Z.X4)(e.palette.secondary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},rounded:{borderRadius:e.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:e.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:e.typography.pxToRem(20),margin:"0 -8px"}}},Ve=t.forwardRef(function(e,o){var r=e.classes,i=e.className,d=e.color,l=d===void 0?"standard":d,m=e.component,f=e.disabled,g=f===void 0?!1:f,$=e.page,p=e.selected,O=p===void 0?!1:p,C=e.shape,P=C===void 0?"round":C,w=e.size,S=w===void 0?"medium":w,R=e.type,k=R===void 0?"page":R,W=e.variant,H=W===void 0?"text":W,te=(0,u.A)(e,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),V=(0,We.A)(),ie=V.direction==="rtl"?{previous:Ne,next:Pe,last:xe,first:Le}:{previous:Pe,next:Ne,first:xe,last:Le},G=ie[k];return k==="start-ellipsis"||k==="end-ellipsis"?t.createElement("div",{ref:o,className:(0,N.default)(r.root,r.ellipsis,g&&r.disabled,S!=="medium"&&r["size".concat((0,ge.A)(S))])},"\u2026"):t.createElement(De.A,(0,s.A)({ref:o,component:m,disabled:g,focusVisibleClassName:r.focusVisible,className:(0,N.default)(r.root,r.page,r[H],r[P],i,l!=="standard"&&r["".concat(H).concat((0,ge.A)(l))],g&&r.disabled,O&&r.selected,S!=="medium"&&r["size".concat((0,ge.A)(S))])},te),k==="page"&&$,G?t.createElement(G,{className:r.icon}):null)});const Ke=(0,z.A)(Fe,{name:"MuiPaginationItem"})(Ve);var He={root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}};function Qe(a,e,o){return a==="page"?"".concat(o?"":"Go to ","page ").concat(e):"Go to ".concat(a," page")}var je=t.forwardRef(function(e,o){var r=e.boundaryCount,i=e.classes,d=e.className,l=e.color,m=l===void 0?"standard":l,f=e.count,g=e.defaultPage,$=e.disabled,p=e.getItemAriaLabel,O=p===void 0?Qe:p,C=e.hideNextButton,P=e.hidePrevButton,w=e.onChange,S=e.page,R=e.renderItem,k=R===void 0?function(j){return t.createElement(Ke,j)}:R,W=e.shape,H=W===void 0?"round":W,te=e.showFirstButton,V=e.showLastButton,ie=e.siblingCount,G=e.size,Q=G===void 0?"medium":G,U=e.variant,le=U===void 0?"text":U,X=(0,u.A)(e,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),D=ke((0,s.A)({},e,{componentName:"Pagination"})),ae=D.items;return t.createElement("nav",(0,s.A)({"aria-label":"pagination navigation",className:(0,N.default)(i.root,d),ref:o},X),t.createElement("ul",{className:i.ul},ae.map(function(j,pe){return t.createElement("li",{key:pe},k((0,s.A)({},j,{color:m,"aria-label":O(j.type,j.page,j.selected),shape:H,size:Q,variant:le})))})))});const Xe=(0,z.A)(He,{name:"MuiPagination"})(je);var he=n(73466),Ye=n(19087);function Je(a){let e=0;for(let r=0;r<a.length;r++)e=a.charCodeAt(r)+((e<<5)-e);let o="#";for(let r=0;r<3;r++){const i=e>>r*8&255;o+=`00${i.toString(16)}`.slice(-2)}return o}function Ze(a){const e=a.trim().split(" "),o=e[0]??"",r=e.length>1?e[e.length-1]:"";return o&&r?`${o.charAt(0)}${r.charAt(0)}`:o.charAt(0)}var qe=n(53373),Re=n.n(qe);const _e=(0,I.A)(a=>({avatar:{width:"4rem",height:"4rem",color:a.palette.common.white,backgroundColor:e=>e.backgroundColor},avatarText:{fontWeight:a.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function fe(a){const{displayName:e,picture:o,customStyles:r}=a,i={...r},d={fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight},l=_e(o?{}:{backgroundColor:Je(e||"")}),m=Re()(a.classes?.avatar,l.avatar),f=Re()(a.classes?.avatarText,l.avatarText);return t.createElement(Ye.A,{alt:e,src:o,className:m,style:i},e&&t.createElement(B.A,{variant:"h6",component:"span",className:f,style:d},Ze(e)))}var q=n(75202),ve=n(54748),ye=n(96872),ze=n(99424),de=n(21332),ue=n(18139),ne=n(97214),re=n(699);const et=async(a,e,o="memberof")=>(a.length===0?{items:[]}:await e.getEntities({filter:{kind:"User",[`relations.${o.toLocaleLowerCase("en-US")}`]:a.map(i=>(0,c.U2)({kind:"group",namespace:i.namespace.toLocaleLowerCase("en-US"),name:i.name.toLocaleLowerCase("en-US")}))}})).items,tt=async(a,e)=>{const o=new Map,i=[{kind:a.kind,namespace:a.metadata.namespace??x.oQ,name:a.metadata.name}],d=[];for(;i.length>0;){const l=i.shift(),m=await e.getEntityByRef(l);o.set((0,c.U2)(l),!0);const f=(0,re.t)(m,ne.Kx,{kind:"Group"}).filter(g=>!o.has((0,c.U2)(g)));f.forEach(g=>o.set((0,c.U2)(g),!0)),i.push(...f),d.push(...f)}return d},at=async(a,e,o="memberof")=>et(await tt(a,e),e,o),nt=a=>{const e=new Map;return a.filter(o=>{const r=(0,c.U2)(o),i=e.has(r);return e.set(r,!0),!i})},rt=(0,I.A)(a=>(0,v.A)({card:{border:`1px solid ${a.palette.divider}`,boxShadow:a.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:a.spacing(4,1,1),flex:"1",minWidth:"0px"},avatar:{position:"absolute",top:"-2rem"}}),{name:"PluginOrgMemberComponent"}),ot=a=>{const e=rt(),{metadata:{name:o,description:r},spec:{profile:i}}=a.member,d=i?.displayName??o;return t.createElement(E.A,{className:e.card},t.createElement(E.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},t.createElement(fe,{displayName:d,picture:i?.picture,classes:e}),t.createElement(E.A,{pt:2,sx:{width:"100%"},textAlign:"center"},t.createElement(B.A,{variant:"h6"},t.createElement(h.z,{"data-testid":"user-link",entityRef:a.member,title:d})),i?.email&&t.createElement(q.N_,{to:`mailto:${i.email}`},t.createElement(ve.M,{text:i.email})),r&&t.createElement(B.A,{variant:"subtitle2"},t.createElement(ve.M,{text:r,line:5})))))},st=(0,I.A)(a=>({root:{height:"100%"},cardContent:{overflow:"auto"},memberList:{display:"grid",gap:a.spacing(1.5),gridTemplateColumns:`repeat(auto-fit, minmax(auto, ${a.spacing(34)}px))`}}),{name:"PluginOrgMembersListCardComponent"}),it=a=>{const{memberDisplayTitle:e="Members",pageSize:o=50,showAggregateMembersToggle:r,relationType:i="memberof"}=a,d=a.relationAggregation??a.relationsType??"direct",l=st(),{entity:m}=(0,y.tN)(),{metadata:{name:f,namespace:g},spec:{profile:$}}=m,p=(0,ue.gf)(b.v),O=$?.displayName??f,C=g||x.oQ,[P,w]=t.useState(1),S=(D,ae)=>{w(ae)},[R,k]=(0,t.useState)(d==="aggregated"),{loading:W,value:H}=(0,he.A)(async()=>R?await at(m,p,i):[],[p,m,R]),{loading:te,error:V,value:ie}=(0,he.A)(async()=>(await p.getEntities({filter:{kind:"User",[`relations.${i.toLocaleLowerCase("en-US")}`]:[(0,c.U2)({kind:"group",namespace:C.toLocaleLowerCase("en-US"),name:f.toLocaleLowerCase("en-US")})]}})).items,[p,m]),G=nt([...ie??[],...H&&R?H:[]].sort((D,ae)=>(0,c.U2)(D).localeCompare((0,c.U2)(ae))));if(te)return t.createElement(ye.k,null);if(V)return t.createElement(ze._,{error:V});const Q=Math.ceil((G?.length||0)/o),U=Q<2?"":`, page ${P} of ${Q}`,le=t.createElement(Xe,{count:Q,page:P,onChange:S,showFirstButton:!0,showLastButton:!0});let X;return G&&G.length>0?X=t.createElement(E.A,{className:l.memberList},G.slice(o*(P-1),o*P).map(D=>t.createElement(ot,{member:D,key:(0,c.U2)(D)}))):X=t.createElement(E.A,{p:2},t.createElement(B.A,null,"This group has no ",e.toLocaleLowerCase(),".")),t.createElement(L.A,{item:!0,className:l.root},t.createElement(de.n,{title:`${e} (${G?.length||0}${U})`,subheader:`of ${O}`,...Q<=1?{}:{actions:le},className:l.root,cardClassName:l.cardContent},r&&t.createElement(t.Fragment,null,"Direct Members",t.createElement(K.A,{color:"primary",checked:R,onChange:()=>{k(!R)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),R&&W?t.createElement(ye.k,null):X))};var lt=n(98890),me=n(29365),Ee=n(58007),_=n(8109),oe=n(46423),ee=n(5951),se=n(71677),Ae=n(14158),ct=n(34477),dt=n(86486),Se=n(74219),ut=n(74011),$e=n(75625),Me=n(85121),be=n(47966),mt=n(95208),Ce=n(23127),pt=n(37197);const gt=({href:a,Icon:e,text:o})=>t.createElement(_.A,{key:a},t.createElement(oe.A,null,e?t.createElement(e,null):t.createElement(Ce.A,null)),t.createElement(ee.A,null,t.createElement(q.N_,{to:a},o))),Ie=({links:a})=>{const e=(0,mt.n)(),o=r=>r?e.getSystemIcon(r)??Ce.A:Ce.A;return a===void 0?null:t.createElement(t.Fragment,null,t.createElement(pt.A,null),a.map(r=>t.createElement(gt,{key:r.url,href:r.url,text:r.title,Icon:o(r.icon)})))};var ht=n(56299),ft=n(71913);const vt=a=>t.createElement(E.A,{display:"flex",alignItems:"center"},t.createElement(be.A,{fontSize:"inherit"}),t.createElement(E.A,{ml:1},a.title)),yt=a=>{const e=(0,ue.gf)(b.v),o=(0,ue.gf)(ct.k),{entity:r}=(0,y.tN)(),{allowed:i}=(0,ht.A)(ft.tS),d=(0,t.useCallback)(async()=>{await e.refreshEntity((0,c.U2)(r)),o.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[e,o,r]);if(!r)return t.createElement(Se.A,{severity:"error"},"Group not found");const{metadata:{name:l,description:m,title:f,annotations:g,links:$},spec:{profile:p}}=r,O=(0,re.t)(r,ne.Kx,{kind:"Group"}),C=(0,re.t)(r,ne.Qz,{kind:"group"}),P=g?.[lt.Eo],w=P?.startsWith("url:")||P?.startsWith("file:"),S=r.metadata.annotations?.[x.P],R=p?.displayName??f??l,k=p?.email?`mailto:${p.email}`:"#",W=S?t.createElement(me.A,{"aria-label":"Edit",title:"Edit Metadata",component:q.N_,to:S},t.createElement($e.A,null)):t.createElement(me.A,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},t.createElement($e.A,null));return t.createElement(de.n,{title:t.createElement(vt,{title:R}),subheader:m,variant:a.variant,action:t.createElement(t.Fragment,null,w&&i&&t.createElement(me.A,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:d},t.createElement(ut.A,null)),W)},t.createElement(L.A,{container:!0,spacing:3},t.createElement(L.A,{item:!0,xs:12,sm:2,xl:1},t.createElement(fe,{displayName:R,picture:p?.picture})),t.createElement(L.A,{item:!0,md:10,xl:11},t.createElement(Ee.A,null,p?.email&&t.createElement(_.A,null,t.createElement(oe.A,null,t.createElement(se.Ay,{title:"Email"},t.createElement(Me.A,null))),t.createElement(ee.A,{primary:t.createElement(q.N_,{to:k},p.email),secondary:"Email"})),t.createElement(_.A,null,t.createElement(oe.A,null,t.createElement(se.Ay,{title:"Parent Group"},t.createElement(dt.A,null))),t.createElement(ee.A,{primary:C.length?t.createElement(Ae.i,{entityRefs:C,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),t.createElement(_.A,null,t.createElement(oe.A,null,t.createElement(se.Ay,{title:"Child Groups"},t.createElement(be.A,null))),t.createElement(ee.A,{primary:O.length?t.createElement(Ae.i,{entityRefs:O,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),a?.showLinks&&t.createElement(Ie,{links:$})))))};var Et=n(48108);const At=a=>a.title?t.createElement(E.A,{display:"flex",alignItems:"center"},t.createElement(Et.A,{fontSize:"inherit"}),t.createElement(E.A,{ml:1},a.title)):null,$t=a=>{const{entity:e}=(0,y.tN)();if(!e)return t.createElement(Se.A,{severity:"error"},"User not found");const o=e.metadata.annotations?.[x.P],{metadata:{name:r,description:i,links:d},spec:{profile:l}}=e,m=l?.displayName??r,f=l?.email?`mailto:${l.email}`:void 0,g=(0,re.t)(e,ne.u0,{kind:"Group"});return t.createElement(de.n,{title:t.createElement(At,{title:m}),subheader:i,variant:a.variant,action:t.createElement(t.Fragment,null,o&&t.createElement(me.A,{"aria-label":"Edit",title:"Edit Metadata",component:q.N_,to:o},t.createElement($e.A,null)))},t.createElement(L.A,{container:!0,spacing:3,alignItems:"flex-start"},t.createElement(L.A,{item:!0,xs:12,sm:2,xl:1},t.createElement(fe,{displayName:m,picture:l?.picture})),t.createElement(L.A,{item:!0,md:10,xl:11},t.createElement(Ee.A,null,l?.email&&t.createElement(_.A,null,t.createElement(oe.A,null,t.createElement(se.Ay,{title:"Email"},t.createElement(Me.A,null))),t.createElement(ee.A,null,t.createElement(q.N_,{to:f??""},l.email))),t.createElement(_.A,null,t.createElement(oe.A,null,t.createElement(se.Ay,{title:"Member of"},t.createElement(be.A,null))),t.createElement(ee.A,null,t.createElement(Ae.i,{entityRefs:g,defaultKind:"Group"}))),a?.showLinks&&t.createElement(Ie,{links:d})))))};var bt=n(65569),Ct=n(72814),xt=n(65398),Lt=n.n(xt),Pt=n(14920),Nt=n(53318),Rt=n(50308),zt=n.n(Rt),St=n(45810),Mt=n.n(St),Te=n(45250);const It=zt()(5),Tt=(a,e)=>{const{kind:o,type:r}=e,i=a.map(l=>(0,Nt.S)((0,c.KU)(l),{defaultKind:"group"})),d={kind:o.toLocaleLowerCase("en-US"),type:r,owners:i,user:"all"};return Mt().stringify({filters:d},{arrayFormat:"repeat"})},Bt=a=>[...(0,re.t)(a,ne.u0,{kind:"Group"}).map(({kind:r,namespace:i,name:d})=>(0,c.U2)({kind:r,namespace:i,name:d})),(0,c.U2)(a)],wt=a=>a!==void 0,Be=async(a,e,o=[])=>{const r=(0,re.t)(a,ne.Kx,{kind:"Group"}),i=r.length>0,d=(0,c.U2)(a);if(i){const l=r.map(p=>(0,c.U2)(p)),g=(await It(()=>e.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:l}))).items.filter(wt).filter(p=>!o.includes((0,c.U2)(p))),$=(await Promise.all(g.map(p=>Be(p,e,[...o,d])))).flatMap(p=>p);return(0,Te.uniq)([...$,d])}return[d]},Gt=async(a,e,o)=>{const r=a.kind==="Group",i=e==="aggregated",d=a.kind==="User";return i&&r?Be(a,o):i&&d?Bt(a):[(0,c.U2)(a)]},Ut=a=>new Promise(e=>setTimeout(e,a)),Ot=async(a,e,o,r=100,i=100)=>{const d=[];for(let l=0;l<a.length;l+=r){const m=a.slice(l,l+r),f=await o.getEntities({filter:[{kind:e,"relations.ownedBy":m}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});d.push(...f.items),l+r<a.length&&await Ut(i)}return(0,Te.uniqBy)(d,c.U2)};function kt(a,e,o,r=6){const i=(0,ue.gf)(b.v),d=o??["Component","API","System"],{loading:l,error:m,value:f}=(0,he.A)(async()=>{const g=await Gt(a,e,i);return(await Ot(g,d,i)).reduce((C,P)=>{const w=C.find(S=>S.kind===P.kind&&S.type===P.spec?.type);return w?w.count+=1:C.push({kind:P.kind,type:P.spec?.type?.toString(),count:1}),C},[]).sort((C,P)=>P.count-C.count).slice(0,r).map(C=>({counter:C.count,type:C.type,kind:C.kind,queryParams:Tt(g,C)}))},[i,a,e]);return{componentsWithCounters:f,loading:l,error:m}}const Wt=(0,I.A)(a=>(0,v.A)({card:{border:`1px solid ${a.palette.divider}`,boxShadow:a.shadows[2],borderRadius:"4px",padding:a.spacing(2),transition:`${a.transitions.duration.standard}ms`,"&:hover":{boxShadow:a.shadows[4]},height:"100%"},bold:{fontWeight:a.typography.fontWeightBold},smallFont:{fontSize:a.typography.body2.fontSize},entityTypeBox:{background:e=>a.getPageTheme({themeId:e.type}).backgroundImage,color:e=>a.getPageTheme({themeId:e.type}).fontColor}})),Dt=({counter:a,type:e,kind:o,url:r})=>{const i=Wt({type:e??o}),d=e??o,l=d.length>10,m=t.createElement(E.A,{className:`${i.card} ${i.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(B.A,{className:i.bold,variant:"h6"},a),t.createElement(E.A,{sx:{width:"100%",textAlign:"center"}},t.createElement(B.A,{className:`${i.bold} ${l&&i.smallFont}`,variant:"h6"},t.createElement(ve.M,{text:Lt()(d.toLocaleUpperCase("en-US"),a)}))),e&&t.createElement(B.A,{variant:"subtitle1"},o));return r?t.createElement(q.N_,{to:r,variant:"body2"},m):m},Ft=({className:a,entity:e,relationsType:o,relationAggregation:r,entityFilterKind:i,entityLimit:d=6})=>{const l=(0,Ct.S)(Pt.E);if(!o&&!r)throw new Error("The relationAggregation property must be set as an EntityRelationAggregation type.");const{componentsWithCounters:m,loading:f,error:g}=kt(e,r??o,i,d);return f?t.createElement(ye.k,null):g?t.createElement(ze._,{error:g}):t.createElement(L.A,{container:!0,className:a},m?.map($=>t.createElement(L.A,{item:!0,xs:6,md:6,lg:4,key:$.type??$.kind},t.createElement(Dt,{counter:$.counter,kind:$.kind,type:$.type,url:l&&`${l()}/?${$.queryParams}`}))))},Vt=(0,I.A)(a=>({card:{maxHeight:"100%"},cardContent:{display:"flex",flexDirection:"column",overflow:"hidden"},list:{[a.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[a.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[a.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}},grid:{overflowY:"auto",marginTop:0}})),Kt=a=>{const{variant:e,entityFilterKind:o,hideRelationsToggle:r,entityLimit:i=6}=a,d=a.relationAggregation??a.relationsType,l=r===void 0?!1:r,m=Vt(),{entity:f}=(0,y.tN)(),g=f.kind==="User"?"aggregated":"direct",[$,p]=(0,t.useState)(d??g);return(0,t.useEffect)(()=>{d||p(g)},[p,g,d]),t.createElement(de.n,{title:"Ownership",variant:e,className:m.card,cardClassName:m.cardContent},!l&&t.createElement(Ee.A,{dense:!0},t.createElement(_.A,{className:m.list},t.createElement(ee.A,{className:m.listItemText}),t.createElement(bt.A,{className:m.listItemSecondaryAction},"Direct Relations",t.createElement(se.Ay,{placement:"top",arrow:!0,title:`${$==="direct"?"Direct":"Aggregated"} Relations`},t.createElement(K.A,{color:"primary",checked:$!=="direct",onChange:()=>{p($==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),t.createElement(Ft,{className:m.grid,entity:f,entityLimit:i,relationAggregation:$,entityFilterKind:o}))};var Ht=n(75103)},86486:(F,A,n)=>{"use strict";var x,c=n(4293),h=n(78920);x={value:!0},A.A=void 0;var y=h(n(14041)),b=c(n(74044)),E=(0,b.default)(y.createElement("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree");A.A=E},74011:(F,A,n)=>{"use strict";var x,c=n(4293),h=n(78920);x={value:!0},A.A=void 0;var y=h(n(14041)),b=c(n(74044)),E=(0,b.default)(y.createElement("path",{d:"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached");A.A=E},47966:(F,A,n)=>{"use strict";var x,c=n(4293),h=n(78920);x={value:!0},A.A=void 0;var y=h(n(14041)),b=c(n(74044)),E=(0,b.default)(y.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");A.A=E},23127:(F,A,n)=>{"use strict";var x,c=n(4293),h=n(78920);x={value:!0},A.A=void 0;var y=h(n(14041)),b=c(n(74044)),E=(0,b.default)(y.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"Language");A.A=E},50308:(F,A,n)=>{"use strict";const x=n(25192),c=h=>{if(!((Number.isInteger(h)||h===1/0)&&h>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const y=new x;let b=0;const E=()=>{b--,y.size>0&&y.dequeue()()},L=async(I,v,...s)=>{b++;const u=(async()=>I(...s))();v(u);try{await u}catch{}E()},K=(I,v,...s)=>{y.enqueue(L.bind(null,I,v,...s)),(async()=>(await Promise.resolve(),b<h&&y.size>0&&y.dequeue()()))()},B=(I,...v)=>new Promise(s=>{K(I,s,...v)});return Object.defineProperties(B,{activeCount:{get:()=>b},pendingCount:{get:()=>y.size},clearQueue:{value:()=>{y.clear()}}}),B};F.exports=c},65398:function(F){(function(A,n){F.exports=n()})(this,function(){var A=[],n=[],x={},c={},h={};function y(s){return typeof s=="string"?new RegExp("^"+s+"$","i"):s}function b(s,u){return s===u?u:s===s.toLowerCase()?u.toLowerCase():s===s.toUpperCase()?u.toUpperCase():s[0]===s[0].toUpperCase()?u.charAt(0).toUpperCase()+u.substr(1).toLowerCase():u.toLowerCase()}function E(s,u){return s.replace(/\$(\d{1,2})/g,function(t,N){return u[N]||""})}function L(s,u){return s.replace(u[0],function(t,N){var z=E(u[1],arguments);return b(t===""?s[N-1]:t,z)})}function K(s,u,t){if(!s.length||x.hasOwnProperty(s))return u;for(var N=t.length;N--;){var z=t[N];if(z[0].test(u))return L(u,z)}return u}function B(s,u,t){return function(N){var z=N.toLowerCase();return u.hasOwnProperty(z)?b(N,z):s.hasOwnProperty(z)?b(N,s[z]):K(z,N,t)}}function I(s,u,t,N){return function(z){var M=z.toLowerCase();return u.hasOwnProperty(M)?!0:s.hasOwnProperty(M)?!1:K(M,M,t)===M}}function v(s,u,t){var N=u===1?v.singular(s):v.plural(s);return(t?u+" ":"")+N}return v.plural=B(h,c,A),v.isPlural=I(h,c,A),v.singular=B(c,h,n),v.isSingular=I(c,h,n),v.addPluralRule=function(s,u){A.push([y(s),u])},v.addSingularRule=function(s,u){n.push([y(s),u])},v.addUncountableRule=function(s){if(typeof s=="string"){x[s.toLowerCase()]=!0;return}v.addPluralRule(s,"$0"),v.addSingularRule(s,"$0")},v.addIrregularRule=function(s,u){u=u.toLowerCase(),s=s.toLowerCase(),h[s]=u,c[u]=s},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(s){return v.addIrregularRule(s[0],s[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(s){return v.addPluralRule(s[0],s[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(s){return v.addSingularRule(s[0],s[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(v.addUncountableRule),v})},25192:F=>{class A{constructor(c){this.value=c,this.next=void 0}}class n{constructor(){this.clear()}enqueue(c){const h=new A(c);this._head?(this._tail.next=h,this._tail=h):(this._head=h,this._tail=h),this._size++}dequeue(){const c=this._head;if(c)return this._head=this._head.next,this._size--,c.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let c=this._head;for(;c;)yield c.value,c=c.next}}F.exports=n}}]);})();

//# sourceMappingURL=997.ec876a86.chunk.js.map