(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9165],{56420:(_,D,n)=>{"use strict";n.d(D,{Y:()=>ge});var e=n(95208),W=n(18139),K=n(54195),k=n(77125),M=n(64947),j=n(93453),oe=n(29365),R=n(46423),$=n(5951),S=n(26343),le=n(28233),se=n(55197),ee=n(58837),ie=n(72501),d=n(5893),u=n(14041),te=n(45250),xe=n.n(te),b=n(70209),F=n(92483),ce=n(75202),me=n(89475),ue=n(10265);const pe=(0,ee.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),Y=({icon:A})=>{const T=(0,e.n)(),B=A?T.getSystemIcon(A)??F.NT:F.NT;return u.createElement(B,null)},ne=({link:A})=>u.createElement(ce.N_,{to:A.url},A.title??A.url),de=({item:A})=>u.createElement(S.A,{button:!1},u.createElement(R.A,null,u.createElement(Y,{icon:A.icon})),u.createElement($.A,{primary:A.title,secondary:A.links?.reduce((T,B,O)=>[...T,O>0&&u.createElement("br",{key:O}),u.createElement(ne,{link:B,key:B.url})],[])}));function ge(A){const{t:T}=(0,ue.i)(me.O),{title:B,items:O,children:U}=A,{items:w}=(0,b.l)(),[Ee,Q]=(0,u.useState)(!1),[J,X]=(0,u.useState)(null),N=pe(),z=(0,W.gf)(K.U).getOptionalConfig("app.support"),ve=(0,d.A)(x=>x.breakpoints.down("sm")),G=x=>{X(x.currentTarget),Q(!0)},H=()=>{Q(!1)};return z?u.createElement(u.Fragment,null,u.createElement(k.A,{display:"flex",ml:1},ve?u.createElement(oe.A,{color:"primary",size:"small",onClick:G,"data-testid":"support-button","aria-label":"Support"},u.createElement(F.NT,null)):u.createElement(M.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:G,startIcon:u.createElement(F.NT,null)},T("supportButton.title"))),u.createElement(se.Ay,{"data-testid":"support-button-popover",open:Ee,anchorEl:J,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:H},u.createElement(le.A,{className:N.popoverList,autoFocusItem:!!J},B&&u.createElement(S.A,{button:!1,alignItems:"flex-start",className:N.menuItem},u.createElement(ie.A,{variant:"subtitle1"},B)),u.Children.map(U,(x,Z)=>u.createElement(S.A,{button:!1,alignItems:"flex-start",key:`child-${Z}`,className:N.menuItem},x)),(O??w).map((x,Z)=>u.createElement(de,{item:x,key:`item-${Z}`}))),u.createElement(j.A,null,u.createElement(M.A,{color:"primary",onClick:H,"aria-label":"Close"},T("supportButton.close"))))):null}},39165:(_,D,n)=>{"use strict";n.r(D),n.d(D,{ImportPage:()=>ut});var e=n(14041),W=n(18690),K=n(82326),k=n(79182),M=n(16454),j=n(17138),oe=n(56420),R=n(18139),$=n(54195),S=n(42899),le=n(5893),se=n(54917),ee=n(21332),ie=n(67720),d=n(72501),u=n(5336),te=n(92939),xe=n(52536),b=n(3969);function F(){const t=(0,R.gf)($.U);return(0,b.J7)(t)}const ce=t=>{const{exampleLocationUrl:a="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:r="https://github.com/backstage/backstage"}=t,o=(0,R.gf)($.U),l=o.getOptionalString("app.title")||"Backstage",i=(0,R.gf)(u.g),c=o.has("integrations.github"),s=F();return e.createElement(ee.n,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},e.createElement(d.A,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",l,"."),e.createElement(d.A,{component:"h4",variant:"h6"},"Link to an existing entity file"),e.createElement(d.A,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",e.createElement("code",null,a)),e.createElement(d.A,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",l," catalog."),c&&e.createElement(e.Fragment,null,e.createElement(d.A,{component:"h4",variant:"h6"},"Link to a repository"," ",e.createElement(ie.A,{label:"GitHub only",variant:"outlined",size:"small"})),e.createElement(d.A,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",e.createElement("code",null,r)),e.createElement(d.A,{variant:"body2",paragraph:!0},"The wizard discovers all ",e.createElement("code",null,s)," files in the repository, previews the entities, and adds them to the ",l," ","catalog."),i.preparePullRequest&&e.createElement(d.A,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",e.createElement("code",null,s)," and prepares the ",l," catalog to load all entities as soon as the Pull Request is merged.")))};var me=n(21619),ue=n(41045),pe=n(78733),Y=n(58837);function ne(t){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:t,previousStates:[]}}function de(t,a){switch(a.type){case"onAnalysis":{if(t.activeState!=="analyze")return t;const{activeState:r,previousStates:o}=t,[l,i,c,s]=a.args;return{...t,analysisUrl:i,activeFlow:l,analyzeResult:c,prepareResult:s?.prepareResult,activeState:s?.prepareResult===void 0?"prepare":"review",previousStates:o.concat(r)}}case"onPrepare":{if(t.activeState!=="prepare")return t;const{activeState:r,previousStates:o}=t,[l,i]=a.args;return{...t,prepareResult:l,activeState:"review",previousStates:i?.notRepeatable?[]:o.concat(r)}}case"onReview":{if(t.activeState!=="review")return t;const{activeState:r,previousStates:o}=t,[l]=a.args;return{...t,reviewResult:l,activeState:"finish",previousStates:o.concat(r)}}case"onGoBack":{const{activeState:r,previousStates:o}=t;return{...t,activeState:o.length>0?o[o.length-1]:r,previousStates:o.slice(0,o.length-1)}}case"onReset":return{...ne(a.initialUrl),prepareResult:t.prepareResult};default:throw new Error}}const ge=t=>{const[a,r]=(0,e.useReducer)(de,t?.initialUrl,ne),{activeFlow:o,activeState:l,analysisUrl:i,previousStates:c}=a;return{activeFlow:o,activeState:l,activeStepNumber:["analyze","prepare","review","finish"].indexOf(l),analysisUrl:i,analyzeResult:a.analyzeResult,prepareResult:a.prepareResult,reviewResult:a.reviewResult,onAnalysis:(s,g,p,f)=>r({type:"onAnalysis",args:[s,g,p,f]}),onPrepare:(s,g)=>r({type:"onPrepare",args:[s,g]}),onReview:s=>r({type:"onReview",args:[s]}),onGoBack:c.length>0?()=>r({type:"onGoBack"}):void 0,onReset:()=>r({type:"onReset",initialUrl:t?.initialUrl})}};var A=n(77125),T=n(69076),B=n(86901),O=n(51253),U=n(37877),w=n(16249),Ee=n(87318),Q=n(64947),J=n(78467);const X=(0,Y.A)(t=>({wrapper:{marginTop:t.spacing(1),marginRight:t.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:t.spacing(1),marginRight:t.spacing(1)}})),N=t=>{const{loading:a,...r}=t,o=X();return e.createElement("div",{className:o.wrapper},e.createElement(Q.A,{color:"primary",variant:"contained",...r,disabled:t.disabled||t.loading}),t.loading&&e.createElement(J.A,{size:"1.5rem",className:o.buttonProgress}),t.loading)},z=t=>{const a=X();return e.createElement(Q.A,{variant:"outlined",className:a.button,...t},t.children||"Back")},ve=t=>{const a=X();return e.createElement(Ee.z,{color:"primary",variant:"contained",className:a.button,...t},t.children)};var G=n(52755),H=n(78560),x=n(91072),Z=n(37281),De=n(45809),Me=n(69621),be=n(29365),fe=n(58007),he=n(8109),Ce=n(46423),Fe=n(65569),ye=n(5951),Ne=n(23164),ze=n(6924);const We=(0,Y.A)(t=>({nested:{paddingLeft:t.spacing(4)}})),q=t=>{const{locations:a,collapsed:r=!1,locationListItemIcon:o,onItemClick:l,firstListItem:i,withLinks:c=!1}=t,s=We(),g=(0,R.gf)(x.n),[p,f]=(0,e.useState)([]),E=m=>{f(h=>h.includes(m)?h.filter(y=>y!==m):h.concat(m))};function v(m){return m.sort((h,y)=>g.forEntity((0,H.U2)(h)).snapshot.entityRef.localeCompare(g.forEntity((0,H.U2)(y)).snapshot.entityRef))}return e.createElement(fe.A,null,i,a.map(m=>e.createElement(e.Fragment,{key:m.target},e.createElement(he.A,{dense:!0,button:!!l,onClick:()=>l?.(m.target)},e.createElement(Ce.A,null,o(m.target)),e.createElement(ye.A,{primary:m.target,secondary:`Entities: ${m.entities.length}`}),r&&e.createElement(Fe.A,null,e.createElement(be.A,{edge:"end",onClick:()=>E(m.target)},p.includes(m.target)?e.createElement(Ne.A,null):e.createElement(ze.A,null)))),e.createElement(Me.A,{in:!r||p.includes(m.target),timeout:"auto",unmountOnExit:!0},e.createElement(fe.A,{component:"div",disablePadding:!0,dense:!0},v(m.entities).map(h=>e.createElement(he.A,{key:(0,H.U2)(h),className:s.nested,...c?{component:Z.z,entityRef:h,button:c}:{}},e.createElement(ye.A,{primary:e.createElement(De.d,{entityRef:h})}))))))))};var Re=n(75202),Ke=n(19953),Pe=n.n(Ke),ke=n(55488),we=n(20987),Ge=n(72814);const He=t=>{for(const a of t)for(const r of a.entities)if(["component","api","resource"].includes(r.kind.toLocaleLowerCase("en-US")))return{kind:r.kind.toLocaleLowerCase("en-US"),namespace:r.namespace?.toLocaleLowerCase("en-US")??ke.oQ,name:r.name};return null},Ve=({prepareResult:t,onReset:a})=>{const r=(0,Ge.S)(we.s);if(t.type==="repository")return e.createElement(e.Fragment,null,e.createElement(d.A,{paragraph:!0},"The following Pull Request has been opened:"," ",e.createElement(Re.N_,{to:t.pullRequest.url,target:"_blank",rel:"noreferrer"},t.pullRequest.url)),e.createElement(d.A,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),e.createElement(S.A,{container:!0,spacing:0},e.createElement(z,{onClick:a},"Register another")));const[o,l]=Pe()(t.locations,c=>c.exists),i=He(l);return e.createElement(e.Fragment,null,l.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"The following entities have been added to the catalog:"),e.createElement(q,{locations:l,locationListItemIcon:()=>e.createElement(G.A,null),withLinks:!0})),o.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"A refresh was triggered for the following locations:"),e.createElement(q,{locations:o,locationListItemIcon:()=>e.createElement(G.A,null),withLinks:!0})),e.createElement(S.A,{container:!0,spacing:0},i&&e.createElement(ve,{to:r(i)},"View Component"),e.createElement(z,{onClick:a},"Register another")))};var Se=n(24453),ae=n(80824);const $e=t=>{const{onAnalysis:a,analysisUrl:r="",disablePullRequest:o=!1,exampleLocationUrl:l="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=t,i=(0,R.gf)(Se.m),c=(0,R.gf)(u.g),{register:s,handleSubmit:g,formState:{errors:p},watch:f}=(0,ae.mN)({mode:"onTouched",defaultValues:{url:r}}),[E,v]=(0,e.useState)(!1),[m,h]=(0,e.useState)(void 0),y=(0,e.useCallback)(async({url:C})=>{v(!0);try{const P=await c.analyzeUrl(C);switch(P.type){case"repository":!o&&P.generatedEntities.length>0?a("no-location",C,P):(h("Couldn't generate entities for your repository"),v(!1));break;case"locations":{P.locations.length===1?a("single-location",C,P,{prepareResult:P}):P.locations.length>1?a("multiple-locations",C,P):(h("There are no entities at this location"),v(!1));break}default:{const re=`Received unknown analysis result of type ${P.type}. Please contact the support team.`;h(re),v(!1),i.post(new Error(re));break}}}catch(P){h(P?.data?.error?.message??P.message),v(!1)}},[c,o,i,a]);return e.createElement("form",{onSubmit:g(y)},e.createElement(w.A,{...(0,b.eO)(s("url",{required:!0,validate:{httpsValidator:C=>typeof C=="string"&&C.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"URL",placeholder:l,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:!!p.url,required:!0}),p.url&&e.createElement(O.A,{error:!0},p.url.message),m&&e.createElement(O.A,{error:!0},m),e.createElement(S.A,{container:!0,spacing:0},e.createElement(N,{disabled:!!p.url||!f("url"),loading:E,type:"submit"},"Analyze")))};var Ye=n(61783);const je=t=>{const{name:a,options:r,required:o,errors:l,rules:i,loading:c=!1,loadingText:s,helperText:g,errorHelperText:p,textFieldProps:f={}}=t;return e.createElement(ae.xI,{name:a,rules:i,render:({field:{onChange:E}})=>e.createElement(Ye.Ay,{loading:c,loadingText:s,options:r||[],autoSelect:!0,freeSolo:!0,onChange:(v,m)=>E(m),renderInput:v=>e.createElement(w.A,{...v,helperText:l?.[a]&&p||g,error:!!l?.[a],margin:"normal",variant:"outlined",required:o,InputProps:{...v.InputProps,endAdornment:e.createElement(e.Fragment,null,c?e.createElement(J.A,{color:"inherit",size:"1em"}):null,v.InputProps.endAdornment)},...f})})})};var Qe=n(45250),Le=n(67457),Ie=n(30043),Je=n(53318),Te=n(73466);const Xe=t=>{const{defaultValues:a,onSubmit:r,render:o}=t,l=(0,ae.mN)({mode:"onTouched",defaultValues:a}),{handleSubmit:i,watch:c,control:s,register:g,formState:p,setValue:f}=l;return e.createElement(ae.Op,{...l},e.createElement("form",{onSubmit:i(r)},o({values:c(),formState:p,register:g,control:s,setValue:f})))};var Oe=n(40703),Be=n(48653),Ue=n(45685),Ze=n(62112);const qe=t=>{const{repositoryUrl:a,entities:r,classes:o}=t,l=F();return e.createElement(Oe.A,{variant:"outlined",className:o?.card},e.createElement(Ue.A,{title:e.createElement("code",null,`${(0,Qe.trimEnd)(a,"/")}/${l}`)}),e.createElement(Be.A,{className:o?.cardContent},e.createElement(Ze.z,{text:r.map(i=>te.Ay.stringify(i)).join(`---
`).trim(),language:"yaml"})))};var _e=n(28364);const et=t=>{const{title:a,description:r,classes:o}=t;return e.createElement(Oe.A,{variant:"outlined",className:o?.card},e.createElement(Ue.A,{title:a,subheader:"Create a new Pull Request"}),e.createElement(Be.A,{className:o?.cardContent},e.createElement(_e.h,{content:r})))},tt=(0,Y.A)(t=>({previewCard:{marginTop:t.spacing(1)},previewCardContent:{paddingTop:0}}));function Ae(t,a,r){return t.map(o=>({...o,apiVersion:o.apiVersion,kind:o.kind,metadata:{...o.metadata,name:a},spec:{...o.spec,...r?{owner:r}:{}}}))}const nt=t=>{const{analyzeResult:a,onPrepare:r,onGoBack:o,renderFormFields:l}=t,i=tt(),c=(0,R.gf)(Ie.v),s=(0,R.gf)(u.g),g=(0,R.gf)(Se.m),[p,f]=(0,e.useState)(!1),[E,v]=(0,e.useState)(),m=F(),{loading:h,value:y,error:C}=(0,Te.A)(()=>s.preparePullRequest(),[s.preparePullRequest]);(0,e.useEffect)(()=>{C&&g.post(C)},[C,g]);const{loading:P,value:re}=(0,Te.A)(async()=>(await c.getEntities({filter:{kind:"group"}})).items.map(I=>(0,Je.S)(I,{defaultKind:"group"})).sort()),pt=(0,e.useCallback)(async L=>{f(!0);try{const I=await s.submitPullRequest({repositoryUrl:a.url,title:L.title,body:L.body,fileContent:Ae(a.generatedEntities,L.componentName,L.owner).map(V=>te.Ay.stringify(V)).join(`---
`)});r({type:"repository",url:a.url,integrationType:a.integrationType,pullRequest:{url:I.link},locations:[{target:I.location,entities:Ae(a.generatedEntities,L.componentName,L.owner).map(V=>({kind:V.kind,namespace:V.metadata.namespace,name:V.metadata.name}))}]},{notRepeatable:!0})}catch(I){(0,Le.t)(I),v(I.message),f(!1)}},[a.generatedEntities,a.integrationType,a.url,s,r]);return e.createElement(e.Fragment,null,e.createElement(d.A,null,"You entered a link to a ",a.integrationType," repository but a"," ",e.createElement("code",null,m)," could not be found. Use this form to open a Pull Request that creates one."),!h&&e.createElement(Xe,{onSubmit:pt,defaultValues:{title:y?.title??"",body:y?.body??"",owner:a.generatedEntities[0]?.spec?.owner||"",componentName:a.generatedEntities[0]?.metadata?.name||"",useCodeowners:!1},render:({values:L,formState:I,register:V,setValue:dt})=>e.createElement(e.Fragment,null,l({values:L,formState:I,register:V,setValue:dt,groups:re??[],groupsLoading:P}),e.createElement(A.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Preview Pull Request")),e.createElement(et,{title:L.title,description:L.body,classes:{card:i.previewCard,cardContent:i.previewCardContent}}),e.createElement(A.A,{marginTop:2,marginBottom:1},e.createElement(d.A,{variant:"h6"},"Preview Entities")),e.createElement(qe,{entities:Ae(a.generatedEntities,L.componentName,L.owner),repositoryUrl:a.url,classes:{card:i.previewCard,cardContent:i.previewCardContent}}),E&&e.createElement(O.A,{error:!0},E),e.createElement(S.A,{container:!0,spacing:0},o&&e.createElement(z,{onClick:o,disabled:p}),e.createElement(N,{type:"submit",disabled:!!(I.errors.title||I.errors.body||I.errors.owner),loading:p},"Create PR")))}))},at=({analyzeResult:t,prepareResult:a,onPrepare:r,onGoBack:o})=>{const[l,i]=(0,e.useState)(a?.locations.map(E=>E.target)||[]),[c,s]=Pe()(t?.locations,E=>E.exists),g=(0,e.useCallback)(async()=>{r({type:"locations",locations:s.filter(E=>l.includes(E.target))})},[s,r,l]),p=E=>{i(v=>v.includes(E)?v.filter(m=>m!==E):v.concat(E))},f=()=>{i(E=>E.length<s.length?s.map(v=>v.target):[])};return e.createElement(e.Fragment,null,s.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"Select one or more locations that are present in your git repository:"),e.createElement(q,{firstListItem:e.createElement(he.A,{dense:!0,button:!0,onClick:f},e.createElement(Ce.A,null,e.createElement(T.A,{edge:"start",checked:l.length===s.length,indeterminate:l.length>0&&l.length<s.length,tabIndex:-1,disableRipple:!0})),e.createElement(ye.A,{primary:"Select All"})),onItemClick:p,locations:s,locationListItemIcon:E=>e.createElement(T.A,{edge:"start",checked:l.includes(E),tabIndex:-1,disableRipple:!0}),collapsed:!0})),c.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"These locations already exist in the catalog:"),e.createElement(q,{locations:c,locationListItemIcon:()=>e.createElement(G.A,null),withLinks:!0,collapsed:!0})),e.createElement(S.A,{container:!0,spacing:0},o&&e.createElement(z,{onClick:o}),e.createElement(N,{disabled:l.length===0,onClick:g},"Review")))};var rt=n(52262);const ot=({prepareResult:t,onReview:a,onGoBack:r})=>{const o=(0,R.gf)(Ie.v),l=(0,R.gf)($.U),i=(0,rt.s)(),c=l.getOptionalString("app.title")||"Backstage",[s,g]=(0,e.useState)(!1),[p,f]=(0,e.useState)(),E=!!(t.type==="locations"&&t.locations.some(m=>m.exists)),v=(0,e.useCallback)(async()=>{g(!0),i.captureEvent("click","import entity");try{let m=new Array;t.type==="locations"&&(m=await Promise.all(t.locations.filter(y=>y.exists).map(async y=>{const C=(0,H.U2)(y.entities[0]??y);return await o.refreshEntity(C),{target:y.target}})));const h=await Promise.all(t.locations.filter(y=>!y.exists).map(async y=>{const C=await o.addLocation({type:"url",target:y.target});return{target:C.location.target,entities:C.entities}}));a({...t,refreshed:m,locations:h})}catch(m){(0,Le.t)(m),t.type==="repository"&&m.message.startsWith("Location was added but has no entities specified yet")?a({...t,locations:t.locations.map(h=>({target:h.target,entities:[]}))}):(f(m.message),g(!1))}},[t,a,o,i]);return e.createElement(e.Fragment,null,t.type==="repository"&&e.createElement(e.Fragment,null,e.createElement(d.A,{paragraph:!0},"The following Pull Request has been opened:"," ",e.createElement(Re.N_,{to:t.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},t.pullRequest.url)),e.createElement(d.A,{paragraph:!0},"You can already import the location and ",c," will fetch the entities as soon as the Pull Request is merged.")),e.createElement(d.A,null,E?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),e.createElement(q,{locations:t.locations,locationListItemIcon:()=>e.createElement(G.A,null)}),p&&e.createElement(O.A,{error:!0},p),e.createElement(S.A,{container:!0,spacing:0},r&&e.createElement(z,{onClick:r,disabled:s}),e.createElement(N,{disabled:s,loading:s,onClick:()=>v()},E?"Refresh":"Import")))};function lt(t,a){switch(t){case"single-location":return{...a,prepare:()=>({stepLabel:e.createElement(U.A,{optional:e.createElement(d.A,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:e.createElement(e.Fragment,null)})};case"multiple-locations":return{...a,prepare:(r,o)=>r.analyzeResult.type!=="locations"?a.prepare(r,o):{stepLabel:e.createElement(U.A,{optional:e.createElement(d.A,{variant:"caption"},"Discovered Locations: ",r.analyzeResult.locations.length)},"Select Locations"),content:e.createElement(at,{analyzeResult:r.analyzeResult,prepareResult:r.prepareResult,onPrepare:r.onPrepare,onGoBack:r.onGoBack})}};case"no-location":return{...a,prepare:(r,o)=>r.analyzeResult.type!=="repository"?a.prepare(r,o):{stepLabel:e.createElement(U.A,null,"Create Pull Request"),content:e.createElement(nt,{analyzeResult:r.analyzeResult,onPrepare:r.onPrepare,onGoBack:r.onGoBack,renderFormFields:({values:l,setValue:i,formState:c,groupsLoading:s,groups:g,register:p})=>e.createElement(e.Fragment,null,e.createElement(A.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Pull Request Details")),e.createElement(w.A,{...(0,b.eO)(p("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.title,required:!0}),e.createElement(w.A,{...(0,b.eO)(p("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.body,multiline:!0,required:!0}),e.createElement(A.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Entity Configuration")),e.createElement(w.A,{...(0,b.eO)(p("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.componentName,required:!0}),!l.useCodeowners&&e.createElement(je,{name:"owner",errors:c.errors,options:g||[],loading:s,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),e.createElement(B.A,{control:e.createElement(T.A,{...(0,b.eO)(p("useCodeowners")),onChange:(f,E)=>{E&&i("owner","")}}),label:e.createElement(e.Fragment,null,"Use ",e.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),e.createElement(O.A,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return a}}const st={analyze:(t,{apis:a})=>({stepLabel:e.createElement(U.A,null,"Select URL"),content:e.createElement($e,{key:"analyze",analysisUrl:t.analysisUrl,onAnalysis:t.onAnalysis,disablePullRequest:!a.catalogImportApi.preparePullRequest})}),prepare:t=>({stepLabel:e.createElement(U.A,{optional:e.createElement(d.A,{variant:"caption"},"Optional")},"Import Actions"),content:e.createElement(z,{onClick:t.onGoBack})}),review:t=>({stepLabel:e.createElement(U.A,null,"Review"),content:e.createElement(ot,{prepareResult:t.prepareResult,onReview:t.onReview,onGoBack:t.onGoBack})}),finish:t=>({stepLabel:e.createElement(U.A,null,"Finish"),content:e.createElement(Ve,{prepareResult:t.prepareResult,onReset:t.onReset})})},it=(0,Y.A)(()=>({stepperRoot:{padding:0}})),ct=t=>{const{initialUrl:a,generateStepper:r=lt,variant:o}=t,l=(0,R.gf)(u.g),i=it(),c=ge({initialUrl:a}),s=(0,e.useMemo)(()=>r(c.activeFlow,st),[r,c.activeFlow]),g=p=>e.createElement(me.A,null,p.stepLabel,e.createElement(ue.A,null,p.content));return e.createElement(ee.n,{variant:o},e.createElement(pe.A,{classes:{root:i.stepperRoot},activeStep:c.activeStepNumber,orientation:"vertical"},g(s.analyze(c,{apis:{catalogImportApi:l}})),g(s.prepare(c,{apis:{catalogImportApi:l}})),g(s.review(c,{apis:{catalogImportApi:l}})),g(s.finish(c,{apis:{catalogImportApi:l}}))))},mt=()=>{const t=(0,se.A)(),a=(0,R.gf)($.U),r=(0,le.A)(t.breakpoints.down("sm")),o=a.getOptionalString("app.title")||"Backstage",l=`Start tracking your component in ${o} by adding it to the software catalog.`,i=[e.createElement(S.A,{key:0,item:!0,xs:12,md:4,lg:6,xl:8},e.createElement(ce,null)),e.createElement(S.A,{key:1,item:!0,xs:12,md:8,lg:6,xl:4},e.createElement(ct,null))];return e.createElement(K.Y,{themeId:"home"},e.createElement(k.Y,{title:"Register an existing component"}),e.createElement(M.U,null,e.createElement(j.d,{title:`Start tracking your component in ${o}`},e.createElement(oe.Y,null,l)),e.createElement(S.A,{container:!0,spacing:2},r?i:i.reverse())))},ut=()=>(0,W.P1)()||e.createElement(mt,null)},23164:(_,D,n)=>{"use strict";var e,W=n(4293),K=n(78920);e={value:!0},D.A=void 0;var k=K(n(14041)),M=W(n(74044)),j=(0,M.default)(k.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");D.A=j},19953:(_,D,n)=>{var e=n(72195),W=e(function(K,k,M){K[M?0:1].push(k)},function(){return[[],[]]});_.exports=W}}]);})();

//# sourceMappingURL=9165.6884e7dd.chunk.js.map