(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4840],{45575:(ie,H,S)=>{"use strict";S.d(H,{f:()=>W});var T=S(77125),g=S(99703),Y=S(58837),R=S(72501),Z=S(14041);const N=C=>(0,g.A)({root:{color:C.palette.common.white,padding:C.spacing(2,2,3),backgroundImage:C.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),B=(0,Y.A)(N,{name:"BackstageItemCardHeader"});function W(C){const{title:F,subtitle:J,children:Q}=C,_=B(C);return Z.createElement(T.A,{className:_.root},J&&Z.createElement(R.A,{variant:"subtitle2",component:"h3"},J),F&&Z.createElement(R.A,{variant:"h6",component:"h4"},F),Q)}},99409:(ie,H,S)=>{"use strict";S.d(H,{m:()=>V});var T=S(81252),g=S(18139),Y=S(34477),R=S(77125),Z=S(14041),N=S(49724),B=S(18453),W=S(46343),C=S(40074),F=S(46123),J=S(96403),Q=S(73466),_=S(30043);function te(){const v=(0,g.gf)(_.v),{error:O,loading:D,value:I}=(0,Q.A)(async()=>await v.getEntityFacets({facets:["kind"]}).then(G=>G.facets.kind?.map(j=>j.value).sort()||[]),[v]);return{loading:D,error:O,allKinds:I??[]}}function ne(v,O,D){let I=v;return O&&(I=I.filter(G=>O.some(j=>j.toLocaleLowerCase("en-US")===G.toLocaleLowerCase("en-US")))),D&&!v.some(G=>G.toLocaleLowerCase("en-US")===D.toLocaleLowerCase("en-US"))&&(I=I.concat([D])),I.sort().reduce((G,j)=>(G[j.toLocaleLowerCase("en-US")]=j,G),{})}var q=S(80084),K=S(10265);function P(v){const{filters:O,queryParameters:{kind:D},updateFilters:I}=(0,B.nK)(),M=(0,Z.useMemo)(()=>[D].flat()[0],[D]),[G,j]=(0,Z.useState)(M??O.kind?.value??v.initialFilter);(0,Z.useEffect)(()=>{M&&j(M)},[M]),(0,Z.useEffect)(()=>{O.kind?.value&&j(O.kind?.value)},[O.kind]),(0,Z.useEffect)(()=>{I({kind:G?new N.gM(G):void 0})},[G,I]);const{allKinds:se,loading:ae,error:le}=te();return{loading:ae,error:le,allKinds:se??[],selectedKind:G,setSelectedKind:j}}const V=v=>{const{allowedKinds:O,hidden:D,initialFilter:I="component"}=v,{t:M}=(0,K.i)(q.j),G=(0,g.gf)(Y.k),{error:j,allKinds:se,selectedKind:ae,setSelectedKind:le}=P({initialFilter:I});if((0,Z.useEffect)(()=>{j&&G.post({message:M("entityKindPicker.errorMessage"),severity:"error"})},[j,G,M]),j)return null;const re=ne(se,O,ae),pe=Object.keys(re).map(Fe=>({value:Fe,label:re[Fe]}));return D?null:Z.createElement(R.A,{pb:1,pt:1},Z.createElement(T.w,{label:M("entityKindPicker.title"),items:pe,selected:ae.toLocaleLowerCase("en-US"),onChange:Fe=>le(String(Fe))}))}},79533:(ie,H,S)=>{"use strict";S.d(H,{l:()=>q});var T=S(95061),g=S(29365),Y=S(63301),R=S(34839),Z=S(75173),N=S(58837),B=S(64704),W=S(45917),C=S(14041),F=S(16983),J=S(18453),Q=S(49724),_=S(80084),te=S(10265);const ne=(0,N.A)(K=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),q=()=>{const K=ne(),{t:P}=(0,te.i)(_.j),{updateFilters:V,queryParameters:{text:v}}=(0,J.nK)(),O=(0,C.useMemo)(()=>[v].flat()[0],[v]),[D,I]=(0,C.useState)(O??"");return(0,F.A)(()=>{V({text:D.length?new Q.V3(D):void 0})},250,[D,V]),(0,C.useEffect)(()=>{O&&I(O)},[O]),C.createElement(Z.A,{className:K.searchToolbar},C.createElement(T.A,null,C.createElement(Y.A,{"aria-label":"search",id:"input-with-icon-adornment",className:K.input,placeholder:P("entitySearchBar.placeholder"),autoComplete:"off",onChange:M=>I(M.target.value),value:D,startAdornment:C.createElement(R.A,{position:"start"},C.createElement(W.A,null)),endAdornment:C.createElement(R.A,{position:"end"},C.createElement(g.A,{"aria-label":"clear search",onClick:()=>I(""),edge:"end",disabled:D.length===0},C.createElement(B.A,null)))})))}},57278:(ie,H,S)=>{"use strict";S.d(H,{j:()=>J});var T=S(14041),g=S(73466),Y=S(46343),R=S.n(Y),Z=S(40074),N=S.n(Z),B=S(18139),W=S(30043),C=S(18453),F=S(49724);function J(){const Q=(0,B.gf)(W.v),{filters:{kind:_,type:te},queryParameters:{type:ne},updateFilters:q}=(0,C.nK)(),K=(0,T.useMemo)(()=>[ne].flat().filter(Boolean),[ne]),[P,V]=(0,T.useState)(K.length?K:te?.getTypes()??[]);(0,T.useEffect)(()=>{K.length&&V(K)},[K]);const[v,O]=(0,T.useState)([]),D=(0,T.useMemo)(()=>_?.value,[_]),{error:I,loading:M,value:G}=(0,g.A)(async()=>D?await Q.getEntityFacets({filter:{kind:D},facets:["spec.type"]}).then(ae=>ae.facets["spec.type"]||[]):[],[D,Q]),j=(0,T.useRef)(G);return(0,T.useEffect)(()=>{const se=j.current;if(j.current=G,M||!D||se===G||!G)return;const ae=[...new Set(N()(G,re=>-re.count).map(re=>re.value.toLocaleLowerCase("en-US")))];O(ae);const le=P.filter(re=>ae.includes(re));R()(P,le)||V(le)},[M,D,P,V,G]),(0,T.useEffect)(()=>{q({type:P.length?new F.qA(P):void 0})},[P,q]),{loading:M,error:I,availableTypes:v,selectedTypes:P,setSelectedTypes:V}}},74840:(ie,H,S)=>{"use strict";S.r(H),S.d(H,{Router:()=>z$});var T={};S.r(T),S.d(T,{DescriptionField:()=>YO});var g=S(14041),Y=S(18690),R=S(77026),Z=S(75706);const N=s=>(0,R.O)(s,e=>e.selectByComponentData({key:Z.R}).findComponentData({key:Z.b})),B="scaffolder.layout.v1",W="scaffolder.layouts.wrapper.v1",C=s=>(0,R.O)(s,e=>e.selectByComponentData({key:W}).findComponentData({key:B}));var F=S(97909),J=S(17875),Q=S(79541),_=S(62416),te=S(7793),ne=S(6451),q=S(36611),K=S(77795),P=S(9739),V=S(34861),v=S(28364),O=S(95061),D=S(58837);const I=(0,D.A)(s=>({markdownDescription:{fontSize:s.typography.caption.fontSize,margin:0,color:s.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),M=s=>{const{children:e,displayLabel:i=!0,rawErrors:l=[],errors:a,help:c,rawDescription:u,required:f,disabled:d}=s,h=I();return g.createElement(O.A,{fullWidth:!0,error:!!l.length,required:f,disabled:d},e,i&&u?g.createElement(v.h,{content:u,linkTarget:"_blank",className:h.markdownDescription}):null,a,c)};var G=S(16249);const j=s=>{const{setSecrets:e,secrets:i}=(0,F.Z)(),{name:l,onChange:a,schema:{title:c,minLength:u,maxLength:f},required:d,disabled:h}=s;return g.createElement(G.A,{id:c,label:c,"aria-describedby":c,onChange:m=>{a(Array(m.target.value.length).fill("*").join("")),e({[l]:m.target.value})},value:i[l]??"",type:"password",autoComplete:"off",required:d,disabled:h,inputProps:{minLength:u,maxLength:f}})},se=s=>{const{schema:{description:e},rawErrors:i,disabled:l,errors:a,required:c}=s;return g.createElement(M,{rawErrors:i,rawDescription:e,disabled:l,errors:a,required:c},g.createElement(j,{...s}))};var ae=S(22139),le=S(78080),re=S(58464),pe=S(95201),Fe=S(71004),ze=S(8886),Ze=S(87948),Me=S(63653),Pe=S(19742),gt=S(63374),ot=S(23654);const un=[{component:J.q,name:"EntityPicker",schema:pe.f2},{component:Q.R,name:"EntityNamePicker",validation:_._,schema:Fe.a},{component:te.t,name:"EntityTagsPicker",schema:ze.u},{component:q.e,name:"RepoUrlPicker",validation:K._,schema:Ze.d},{component:ne.u,name:"OwnerPicker",schema:Me.h},{component:P.F,name:"OwnedEntityPicker",schema:Pe.M},{component:V.T,name:"MyGroupsPicker",schema:gt.M},{component:se,name:"Secret"},{component:ae.RT,name:"MultiEntityPicker",schema:ot.mG,validation:ae.eR},{component:le.z,name:"RepoBranchPicker",schema:re._}];var Ue=S(23986),En=S(41544),An=S(73466),Ke=S(63163),Ki=S(8973),Ur=S(91567),xe=S(29655),Ee=S(77125),Ye=S(69621),Ne=S(42899),at=S(4321),Vt=S(61009),Hr=S(13677),ft=S(54801),er=S(10985),zn=S(47625),nn=S(9719),Ge=S(72501),mr=S(53373),ct=S.n(mr),fn=S(6924),Un=S(23164),pr=S(86613),Ss=S(61783),fo=S(34839),ho=S(45917),Nt=S(18139),yt=S(72814),MS=S(62112),mo=S(96872),Hl=S(12554),pm=S(65995),Es=S(75202),Kr=S(82326),Gr=S(79182),gr=S(16454),ou=S(67720),Rn=S(29365),wn=S(46423),Cn=S(5951),Qt=S(26343),lu=S(28233),au=S(55197),gm=S(25534),cu=S(4832),ym=S(75625),IS=S(20353),uu=S(71407),yr=S(90712),dn=S(31627);const RS=(0,D.A)(s=>({button:{color:s.page.fontColor}}));function fu(s){const{onEditorClicked:e,onActionsClicked:i,onTasksClicked:l,onCreateClicked:a}=s,c=RS(),[u,f]=(0,g.useState)(),{allowed:d}=(0,yr.J)({permission:dn.Xw}),{allowed:h}=(0,yr.J)({permission:dn.$});if(!e&&!i&&!l&&!a)return null;const m=y=>{f(y.currentTarget)},p=()=>{f(void 0)};return g.createElement(g.Fragment,null,g.createElement(Rn.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!u,"aria-haspopup":"true",role:"button",onClick:m,"data-testid":"menu-button",color:"inherit",className:c.button},g.createElement(uu.A,null)),g.createElement(au.Ay,{"aria-labelledby":"long-menu",open:!!u,onClose:p,anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(lu.A,null,a&&g.createElement(Qt.A,{onClick:a},g.createElement(wn.A,null,g.createElement(gm.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:"Create"})),e&&h&&g.createElement(Qt.A,{onClick:e},g.createElement(wn.A,null,g.createElement(ym.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:"Manage Templates"})),i&&g.createElement(Qt.A,{onClick:i},g.createElement(wn.A,null,g.createElement(cu.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:"Installed Actions"})),l&&d&&g.createElement(Qt.A,{onClick:l},g.createElement(wn.A,null,g.createElement(IS.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:"Task List"})))))}var mt=S(10265),pt=S(30268);const LS=(0,D.A)(s=>({code:{fontFamily:"Menlo, monospace",padding:s.spacing(1),backgroundColor:s.palette.type==="dark"?s.palette.grey[700]:s.palette.grey[300],display:"inline-block",borderRadius:5,border:`1px solid ${s.palette.grey[500]}`,position:"relative"},codeRequired:{"&::after":{position:"absolute",content:'"*"',top:0,right:s.spacing(.5),fontWeight:"bolder",color:s.palette.error.light}},link:{paddingLeft:s.spacing(1)}})),FS=s=>g.createElement(Ne.A,{container:!0},s.examples.map((e,i)=>g.createElement(g.Fragment,{key:`example-${i}`},g.createElement(Ne.A,{item:!0,lg:3},g.createElement(Ee.A,{padding:4},g.createElement(Ge.A,null,e.description))),g.createElement(Ne.A,{item:!0,lg:9},g.createElement(Ee.A,{padding:1},g.createElement(MS.z,{text:e.example,showLineNumbers:!0,showCopyCodeButton:!0,language:"yaml"})))))),vm=()=>{const s=(0,Nt.gf)(Ke.z),{t:e}=(0,mt.i)(pt.W),i=LS(),{loading:l,value:a=[],error:c}=(0,An.A)(async()=>s.listActions(),[s]),[u,f]=(0,g.useState)(null),[d,h]=(0,g.useState)({});if((0,g.useEffect)(()=>{a.length&&window.location.hash&&document.querySelector(window.location.hash)?.scrollIntoView()},[a]),l)return g.createElement(mo.k,null);if(c)return g.createElement(g.Fragment,null,g.createElement(Hl.b,{error:c}),g.createElement(pm.p,{missing:"info",title:e("actionsPage.content.emptyState.title"),description:e("actionsPage.content.emptyState.description")}));const m=x=>!x||x.length<1?g.createElement(Ge.A,null,e("actionsPage.content.noRowsDescription")):g.createElement(er.A,{component:at.A},g.createElement(Vt.A,{size:"small"},g.createElement(zn.A,null,g.createElement(nn.A,null,g.createElement(ft.A,null,e("actionsPage.content.tableCell.name")),g.createElement(ft.A,null,e("actionsPage.content.tableCell.title")),g.createElement(ft.A,null,e("actionsPage.content.tableCell.description")),g.createElement(ft.A,null,e("actionsPage.content.tableCell.type")))),g.createElement(Hr.A,null,x))),p=x=>x.type?x.type!=="array"?[x.type].flat():[`${x.type}(${x.items?.type??"unknown"})`]:["unknown"],y=(x,A)=>{const E=A?.properties;if(E)return Object.entries(E).map(w=>{const[k]=w,L=`${x}.${k}`,z=w[1],U=ct()(i.code,{[i.codeRequired]:A.required?.includes(k)}),X=p(z);return g.createElement(g.Fragment,{key:L},g.createElement(nn.A,{key:L},g.createElement(ft.A,null,g.createElement("div",{className:U},k)),g.createElement(ft.A,null,z.title),g.createElement(ft.A,null,z.description),g.createElement(ft.A,null,X.map(ee=>ee.includes("object")?g.createElement(ou.A,{label:ee,key:ee,icon:d[L]?g.createElement(Un.A,null):g.createElement(fn.A,null),variant:"outlined",onClick:()=>h(oe=>{const ue={...oe};return ue[L]=!oe[L],ue})}):g.createElement(ou.A,{label:ee,key:ee,variant:"outlined"})))),g.createElement(nn.A,null,g.createElement(ft.A,{style:{paddingBottom:0,paddingTop:0},colSpan:6},g.createElement(Ye.A,{in:d[L],timeout:"auto",unmountOnExit:!0},g.createElement(Ee.A,{sx:{margin:1}},g.createElement(Ge.A,{variant:"h6",component:"div"},k),m(y(L,z.type==="array"?{properties:z.items?.properties??{}}:z)))))))})},b=(x,A,E)=>{if(E)return g.createElement(g.Fragment,null,g.createElement(Ge.A,{variant:"h6",component:"h4"},x),E.map((w,k)=>g.createElement("div",{key:k},m(y(`${A}.${k}`,w)))))};return g.createElement(g.Fragment,null,g.createElement(Ee.A,{pb:3},g.createElement(Ss.Ay,{id:"actions-autocomplete",options:a,loading:l,getOptionLabel:x=>x.id,renderInput:x=>g.createElement(G.A,{...x,"aria-label":e("actionsPage.content.searchFieldPlaceholder"),placeholder:e("actionsPage.content.searchFieldPlaceholder"),variant:"outlined",InputProps:{...x.InputProps,startAdornment:g.createElement(fo.A,{position:"start"},g.createElement(ho.A,null))}}),onChange:(x,A)=>{f(A)},fullWidth:!0})),(u?[u]:a).map(x=>{if(x.id.startsWith("legacy:"))return;const A=b("oneOf",`${x.id}.input`,x.schema?.input?.oneOf);return g.createElement(Ee.A,{pb:3,key:x.id},g.createElement(Ee.A,{display:"flex",alignItems:"center"},g.createElement(Ge.A,{id:x.id.replaceAll(":","-"),variant:"h5",component:"h2",className:i.code},x.id),g.createElement(Es.N_,{className:i.link,to:`#${x.id.replaceAll(":","-")}`},g.createElement(pr.A,null))),x.description&&g.createElement(v.h,{content:x.description}),x.schema?.input&&g.createElement(Ee.A,{pb:2},g.createElement(Ge.A,{variant:"h6",component:"h3"},e("actionsPage.action.input")),m(y(`${x.id}.input`,x?.schema?.input)),A),x.schema?.output&&g.createElement(Ee.A,{pb:2},g.createElement(Ge.A,{variant:"h5",component:"h3"},e("actionsPage.action.output")),m(y(`${x.id}.output`,x?.schema?.output))),x.examples&&g.createElement(Ki.A,null,g.createElement(xe.A,{expandIcon:g.createElement(fn.A,null)},g.createElement(Ge.A,{variant:"h6",component:"h3"},e("actionsPage.action.examples"))),g.createElement(Ur.A,null,g.createElement(Ee.A,{pb:2},g.createElement(FS,{examples:x.examples})))))}))},NS=s=>{const e=(0,Y.Zp)(),i=(0,yt.S)(Ue.Dg),l=(0,yt.S)(Ue.JX),a=(0,yt.S)(Ue.rQ),{t:c}=(0,mt.i)(pt.W),u={onEditorClicked:s?.contextMenu?.editor!==!1?()=>e(i()):void 0,onActionsClicked:void 0,onTasksClicked:s?.contextMenu?.tasks!==!1?()=>e(l()):void 0,onCreateClicked:s?.contextMenu?.create!==!1?()=>e(a()):void 0};return g.createElement(Kr.Y,{themeId:"home"},g.createElement(Gr.Y,{pageTitleOverride:c("actionsPage.pageTitle"),title:c("actionsPage.title"),subtitle:c("actionsPage.subtitle")},g.createElement(fu,{...u})),g.createElement(gr.U,null,g.createElement(vm,null)))};var BS=S(29021),As=S(77509),ws=S(40703),po=S(58007),$S=S(9684),jS=S(53364);const WS=(0,D.A)(s=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:s.spacing(1,0,1,0)},title:{margin:s.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:s.palette.text.primary},menuItem:{minHeight:s.spacing(6)},groupWrapper:{margin:s.spacing(1,1,2,1)}}),{name:"ScaffolderReactOwnerListPicker"});function VS(s){return[{name:s("ownerListPicker.title"),items:[{id:"owned",label:s("ownerListPicker.options.owned"),icon:$S.A},{id:"all",label:s("ownerListPicker.options.all"),icon:jS.A}]}]}const zS=s=>{const{filter:e,onSelectOwner:i}=s,l=WS(),{t:a}=(0,mt.i)(pt.W),c=VS(a);return g.createElement(ws.A,{className:l.root},c.map(u=>g.createElement(g.Fragment,{key:u.name},g.createElement(Ge.A,{variant:"subtitle2",component:"span",className:l.title},u.name),g.createElement(ws.A,{className:l.groupWrapper},g.createElement(po.A,{disablePadding:!0,dense:!0,role:"menu"},u.items.map((f,d)=>g.createElement(Qt.A,{key:f.id,divider:d!==u.items.length-1,ContainerProps:{role:"menuitem"},onClick:()=>i(f.id),selected:f.id===e,className:l.menuItem,"data-testid":`owner-picker-${f.id}`},f.icon&&g.createElement(wn.A,{className:l.listIcon},g.createElement(f.icon,{fontSize:"small"})),g.createElement(Cn.A,null,g.createElement(Ge.A,{variant:"body1"},f.label)))))))))};var tr=S(52950);const US=({createdAt:s,locale:e})=>{const i=tr.c9.fromISO(s),l=e||window.navigator.language||"en-US",a=i.setLocale(l).toLocaleString({...tr.c9.DATETIME_SHORT_WITH_SECONDS});return g.createElement(Ge.A,{paragraph:!0},a)};var Kl=S(30043),bm=S(37281),nr=S(78560);const HS=({entityRef:s})=>{const e=(0,Nt.gf)(Kl.v),{value:i,loading:l,error:a}=(0,An.A)(()=>e.getEntityByRef(s||""),[e,s]);return s?l||a?null:g.createElement(bm.z,{entityRef:(0,nr.KU)(s),title:i?.spec?.profile?.displayName??i?.metadata.name}):g.createElement(Ge.A,{paragraph:!0},"Unknown")};var du=S(25673);const KS=({status:s})=>{switch(s){case"processing":return g.createElement(du.Ek,null,s);case"completed":return g.createElement(du.z3,null,s);case"error":default:return g.createElement(du.Xs,null,s)}},GS=({entityRef:s})=>{const e=(0,Nt.gf)(Ke.z),{value:i,loading:l,error:a}=(0,An.A)(()=>e.getTemplateParameterSchema(s||""),[e,s]);return l||a||!s?null:g.createElement(bm.z,{entityRef:(0,nr.KU)(s),title:i?.title})},YS=s=>{const{initiallySelectedFilter:e="owned"}=s,{t:i}=(0,mt.i)(pt.W),[l,a]=(0,g.useState)(5),[c,u]=(0,g.useState)(0),f=(0,Nt.gf)(Ke.z),d=(0,yt.S)(Ue.rQ),[h,m]=(0,g.useState)(e),{value:p,loading:y,error:b}=(0,An.A)(()=>f.listTasks?f.listTasks?.({filterByOwnership:h,limit:l,offset:c*l}):(console.warn("listTasks is not implemented in the scaffolderApi, please make sure to implement this method."),Promise.resolve({tasks:[],totalTasks:0})),[f,h,l,c]);return y?g.createElement(mo.k,null):b?g.createElement(g.Fragment,null,g.createElement(Hl.b,{error:b}),g.createElement(pm.p,{missing:"info",title:i("listTaskPage.content.emptyState.title"),description:i("listTaskPage.content.emptyState.description")})):g.createElement(As.GI,null,g.createElement(As.GI.Filters,null,g.createElement(zS,{filter:h,onSelectOwner:x=>m(x)})),g.createElement(As.GI.Content,null,g.createElement(BS.X,{onRowsPerPageChange:x=>{u(0),a(x)},onPageChange:x=>u(x),options:{pageSize:l,emptyRowsWhenPaging:!1},data:p?.tasks??[],page:c,totalCount:p?.totalTasks??0,title:i("listTaskPage.content.tableTitle"),columns:[{title:i("listTaskPage.content.tableCell.taskID"),field:"id",render:x=>g.createElement(Es.N_,{to:`${d()}/tasks/${x.id}`},x.id)},{title:i("listTaskPage.content.tableCell.template"),field:"spec.templateInfo.entity.metadata.title",render:x=>g.createElement(GS,{entityRef:x.spec.templateInfo?.entityRef})},{title:i("listTaskPage.content.tableCell.created"),field:"createdAt",render:x=>g.createElement(US,{createdAt:x.createdAt})},{title:i("listTaskPage.content.tableCell.owner"),field:"createdBy",render:x=>g.createElement(HS,{entityRef:x.spec?.user?.ref})},{title:i("listTaskPage.content.tableCell.status"),field:"status",render:x=>g.createElement(KS,{status:x.status})}]})))},JS=s=>{const e=(0,Y.Zp)(),i=(0,yt.S)(Ue.Dg),l=(0,yt.S)(Ue.GF),a=(0,yt.S)(Ue.rQ),{t:c}=(0,mt.i)(pt.W),u={onEditorClicked:s?.contextMenu?.editor!==!1?()=>e(i()):void 0,onActionsClicked:s?.contextMenu?.actions!==!1?()=>e(l()):void 0,onTasksClicked:void 0,onCreateClicked:s?.contextMenu?.create!==!1?()=>e(a()):void 0};return g.createElement(Kr.Y,{themeId:"home"},g.createElement(Gr.Y,{pageTitleOverride:c("listTaskPage.pageTitle"),title:c("listTaskPage.title"),subtitle:c("listTaskPage.subtitle")},g.createElement(fu,{...u})),g.createElement(gr.U,null,g.createElement(YS,{...s})))};var go=S(95208),xm=S(92483),Sm=S(17138),XS=S(56420),Em=S(18453),ZS=S(79533),QS=S(99409),qS=S(30117),_S=S(56829),eE=S(40941),tE=S(56005),nE=S.n(tE),hu=S(69076),Gl=S(86901),rE=S(44148),iE=S(41260),sE=S(57278),Am=S(34477);const oE=g.createElement(iE.A,{fontSize:"small"}),lE=g.createElement(rE.A,{fontSize:"small"}),aE=(0,D.A)({root:{},label:{}},{name:"ScaffolderReactTemplateCategoryPicker"}),cE=()=>{const s=aE(),e=(0,Nt.gf)(Am.k),{error:i,loading:l,availableTypes:a,selectedTypes:c,setSelectedTypes:u}=(0,sE.j)();return l?g.createElement(mo.k,null):i?(e.post({message:`Failed to load entity types with error: ${i}`,severity:"error"}),null):a?g.createElement(Ee.A,{className:s.root,pb:1,pt:1},g.createElement(Ge.A,{className:s.label,variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),g.createElement(Ss.Ay,{PopperComponent:f=>g.createElement("div",{...f},f.children),multiple:!0,id:"categories-picker",options:a,value:c,onChange:(f,d)=>u(d),renderOption:(f,{selected:d})=>g.createElement(Gl.A,{control:g.createElement(hu.A,{icon:oE,checkedIcon:lE,checked:d}),label:nE()(f)}),size:"small",popupIcon:g.createElement(fn.A,null),renderInput:f=>g.createElement(G.A,{...f,variant:"outlined"})})):null};var uE=S(45281),wm=S(24453),fE=S(17174),dE=S(97214),yo=S(52262),hE=S(699),mE=S(14158),pE=S(59469),Yl=S(48653),Yr=S(37197),Bt=S(64947),vo=S(23127),mu=S(54917),gE=S(45575),yE=S(25999);const vE=(0,D.A)(()=>({header:{backgroundImage:({cardBackgroundImage:s})=>s,color:({cardFontColor:s})=>s},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),bE=s=>{const{template:{metadata:{title:e,name:i},spec:{type:l}}}=s,{getPageTheme:a}=(0,mu.A)(),c=a({themeId:l}),u=vE({cardFontColor:c.fontColor,cardBackgroundImage:c.backgroundImage}),f=g.createElement("div",{className:u.subtitleWrapper},g.createElement("div",null,l),g.createElement("div",null,g.createElement(yE.u,{entity:s.template,style:{padding:0}})));return g.createElement(gE.f,{title:e??i,subtitle:f,classes:{root:u.header}})},xE=(0,D.A)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),Cm=({icon:s,text:e,url:i})=>{const l=xE();return g.createElement("div",{className:l.linkText},g.createElement(s,{fontSize:"small"}),g.createElement(Es.N_,{style:{marginLeft:"8px"},to:i},e||i))},SE=(0,D.A)(s=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:s.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:s.palette.link}})),EE=s=>{const{onSelected:e,template:i}=s,l=SE(),a=(0,yo.s)(),c=(0,hE.t)(i,dE.vv),u=(0,go.n)(),f=b=>b?u.getSystemIcon(b)??vo.A:vo.A,d=!!i.metadata.tags?.length,h=!!s.additionalLinks?.length||!!i.metadata.links?.length,m=!d&&!h,{allowed:p}=(0,yr.J)({permission:dn.X6}),y=(0,g.useCallback)(()=>{a.captureEvent("click","Template has been opened"),e?.(i)},[a,e,i]);return g.createElement(ws.A,null,g.createElement(bE,{template:i}),g.createElement(Yl.A,null,g.createElement(Ne.A,{container:!0,spacing:2},g.createElement(Ne.A,{item:!0,xs:12},g.createElement(Ee.A,{className:l.box},g.createElement(v.h,{className:l.markdown,content:i.metadata.description??"No description"}))),m&&g.createElement(Ne.A,{item:!0,xs:12},g.createElement(Yr.A,{"data-testid":"template-card-separator"})),d&&g.createElement(g.Fragment,null,g.createElement(Ne.A,{item:!0,xs:12},g.createElement(Yr.A,{"data-testid":"template-card-separator--tags"})),g.createElement(Ne.A,{item:!0,xs:12},g.createElement(Ne.A,{container:!0,spacing:2},i.metadata.tags?.map(b=>g.createElement(Ne.A,{key:`grid-${b}`,item:!0},g.createElement(ou.A,{style:{margin:0},size:"small",label:b,key:b})))))),h&&g.createElement(g.Fragment,null,g.createElement(Ne.A,{item:!0,xs:12},g.createElement(Yr.A,{"data-testid":"template-card-separator--links"})),g.createElement(Ne.A,{item:!0,xs:12},g.createElement(Ne.A,{container:!0,spacing:2},s.additionalLinks?.map(({icon:b,text:x,url:A},E)=>g.createElement(Ne.A,{className:l.linkText,item:!0,xs:6,key:E},g.createElement(Cm,{icon:b,text:x,url:A}))),i.metadata.links?.map(({url:b,icon:x,title:A},E)=>g.createElement(Ne.A,{className:l.linkText,item:!0,xs:6,key:E},g.createElement(Cm,{icon:f(x),text:A||b,url:b})))))))),g.createElement(pE.A,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},g.createElement("div",{className:l.footer},g.createElement("div",{className:l.ownedBy},c.length>0&&g.createElement(g.Fragment,null,g.createElement(xm.ny,{fontSize:"small"}),g.createElement(mE.i,{style:{marginLeft:"8px"},entityRefs:c,defaultKind:"Group",hideIcons:!0}))),p?g.createElement(Bt.A,{size:"small",variant:"outlined",color:"primary",onClick:y},"Choose"):null)))},AE=s=>{const{templates:e,title:i,components:{CardComponent:l}={},onSelected:a}=s,c=typeof i=="string"?g.createElement(Sm.d,{title:i}):i;if(e.length===0)return null;const u=l||EE;return g.createElement(gr.U,null,c,g.createElement(fE.s,null,e.map(({template:f,additionalLinks:d})=>g.createElement(u,{key:(0,nr.U2)(f),additionalLinks:d,template:f,onSelected:a}))))},wE=s=>{const{loading:e,error:i,entities:l}=(0,Em.nK)(),{groups:a,templateFilter:c,TemplateCardComponent:u,onTemplateSelected:f}=s,d=(0,Nt.gf)(wm.m),h=(0,g.useCallback)(m=>{f?.(m)},[f]);return e?g.createElement(mo.k,null):i?(d.post(i),null):!l||!l.length?g.createElement(Ge.A,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",g.createElement(Es.N_,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):g.createElement(g.Fragment,null,a.map(({title:m,filter:p},y)=>{const b=l.filter(uE.c).filter(x=>c?c(x):!0).filter(p).map(x=>{const A=s.additionalLinksForEntity?.(x)??[];return{template:x,additionalLinks:A}});return g.createElement(AE,{key:y,templates:b,title:m,components:{CardComponent:u},onSelected:h})}))};var CE=S(5893),Om=S(73657),OE=S(71913);const kE=s=>{const{title:e,to:i}=s,{allowed:l}=(0,yr.J)({permission:OE.C4}),a=(0,CE.A)(c=>c.breakpoints.down("xs"));return!i||!l?null:a?g.createElement(Rn.A,{component:Om.N_,color:"primary",title:e,size:"small",to:i},g.createElement(gm.A,null)):g.createElement(Bt.A,{component:Om.N_,variant:"outlined",color:"primary",to:i},e)},PE=(s,e)=>[...s,{title:e("templateListPage.templateGroups.otherTitle"),filter:i=>![...s].some(({filter:l})=>l(i))}],TE=s=>{const e=(0,yt.S)(Ue.J0),{TemplateCardComponent:i,groups:l=[],templateFilter:a,headerOptions:c}=s,u=(0,Y.Zp)(),f=(0,yt.S)(Ue.Dg),d=(0,yt.S)(Ue.GF),h=(0,yt.S)(Ue.JX),m=(0,yt.S)(Ue.UJ),p=(0,yt.S)(Ue.sP),y=(0,go.n)(),{t:b}=(0,mt.i)(pt.W),x=l.length?PE(l,b):[{title:b("templateListPage.templateGroups.defaultTitle"),filter:()=>!0}],A={onEditorClicked:s?.contextMenu?.editor!==!1?()=>u(f()):void 0,onActionsClicked:s?.contextMenu?.actions!==!1?()=>u(d()):void 0,onTasksClicked:s?.contextMenu?.tasks!==!1?()=>u(h()):void 0},E=(0,g.useCallback)(k=>{const{kind:L,namespace:z,name:U}=(0,nr.KU)((0,nr.U2)(k));return k.metadata.annotations?.["backstage.io/techdocs-ref"]&&m?[{icon:y.getSystemIcon("docs")??xm.Vf,text:b("templateListPage.additionalLinksForEntity.viewTechDocsTitle"),url:m({kind:L,namespace:z,name:U})}]:[]},[y,m,b]),w=(0,g.useCallback)(k=>{const{namespace:L,name:z}=(0,nr.KU)((0,nr.U2)(k));u(p({namespace:L,templateName:z}))},[u,p]);return g.createElement(Em.B9,null,g.createElement(Kr.Y,{themeId:"home"},g.createElement(Gr.Y,{pageTitleOverride:b("templateListPage.pageTitle"),title:b("templateListPage.title"),subtitle:b("templateListPage.subtitle"),...c},g.createElement(fu,{...A})),g.createElement(gr.U,null,g.createElement(Sm.d,null,g.createElement(kE,{title:b("templateListPage.contentHeader.registerExistingButtonTitle"),to:e&&e()}),g.createElement(XS.Y,null,b("templateListPage.contentHeader.supportButtonTitle"))),g.createElement(As.GI,null,g.createElement(As.GI.Filters,null,g.createElement(ZS.l,null),g.createElement(QS.m,{initialFilter:"template",hidden:!0}),g.createElement(qS.y,{initialFilter:"all",availableFilters:["all","starred"]}),g.createElement(cE,null),g.createElement(_S.m,null),g.createElement(eE.t,null)),g.createElement(As.GI.Content,null,g.createElement(wE,{groups:x,templateFilter:a,TemplateCardComponent:i,onTemplateSelected:w,additionalLinksForEntity:E}))))))};var DE=S(55488),ME=S(76888),IE=S(19224),km=S(21332);const RE=s=>{const e=(0,Nt.gf)(Ke.z),{value:i,loading:l,error:a}=(0,An.A)(()=>e.getTemplateParameterSchema(s),[e,s]);return{manifest:i,loading:l,error:a}};var pu=S(78733),Jl=S(21619),Xl=S(37877),gu=S(88951);const Pm={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},LE=Object.prototype.toString;function lt(s){const e=LE.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const FE="object",NE="array";function BE(s,e={}){return s.replace(/\{\{\w+\}\}/g,i=>{const l=i.replace(/[{}]/g,""),a=e[l],c=lt(a);return c===FE||c===NE?JSON.stringify(a):a})}function $E(s,e,i=s){var l;const a=(l=Pm[s])!==null&&l!==void 0?l:i;return BE(a,e)}function jE(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function WE(s,e){return{type:"error",name:s,code:jE(s),message:$E(s,e),data:e}}function Be(s){return WE.bind(null,s)}function bo(s,e=[]){for(let i=0;i<s.length;i+=1){const l=s[i];Array.isArray(l)?bo(l,e):e.push(l)}return e}const Gi={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function xo(s,e,i){const l={...e};return Object.defineProperty(l,"getOneOfOrigin",{enumerable:!1,value:()=>({index:i,schema:s})}),l}function Ln(s){return s?.type==="error"}function VE(s){return s instanceof Promise}function Zl(s){return Ln(s)||VE(s)}function X$(s){return isJsonError(s)}const{DECLARATOR_ONEOF:Cs}=Gi;function yu(s,e,i=s.rootSchema,l="#"){if(e!=null&&i[Cs]){const u=[],f=i[Cs],d=e[i[Cs]];if(d===void 0)return s.errors.missingOneOfPropertyError({property:f,pointer:l,schema:i,value:e});for(let h=0;h<i.oneOf.length;h+=1){const m=s.resolveRef(i.oneOf[h]),p=s.step(f,m,e,l);if(Ln(p))return p;let y=bo(s.validate(d,p,l));if(y=y.filter(Zl),y.length>0)u.push(...y);else return xo(i,m,h)}return s.errors.oneOfPropertyError({property:f,value:d,pointer:l,schema:i,errors:u})}const a=[],c=[];for(let u=0;u<i.oneOf.length;u+=1){const f=s.resolveRef(i.oneOf[u]);let d=bo(s.validate(e,f,l));d=d.filter(Zl),d.length>0?c.push(...d):a.push({index:u,schema:f})}return a.length===1?xo(i,a[0].schema,a[0].index):a.length>1?s.errors.multipleOneOfError({value:e,pointer:l,schema:i,matches:a}):s.errors.oneOfError({value:JSON.stringify(e),pointer:l,schema:i,oneOf:i.oneOf,errors:c})}function zE(s,e,i,l){if(i==null||e.properties==null)return-1;let a=0;const c=Object.keys(e.properties);for(let u=0;u<c.length;u+=1){const f=c[u];i[f]!=null&&s.isValid(i[f],e.properties[f],l)&&(a+=1)}return a}function Ql(s,e,i=s.rootSchema,l="#"){if(e!=null&&i[Cs]){const c=[],u=i[Cs],f=e[i[Cs]];if(f===void 0)return s.errors.missingOneOfPropertyError({property:u,pointer:l,schema:i,value:e});for(let d=0;d<i.oneOf.length;d+=1){const h=s.resolveRef(i.oneOf[d]),m=s.step(u,h,e,l);if(Ln(m))return m;let p=bo(s.validate(f,m,l));if(p=p.filter(Zl),p.length>0)c.push(...p);else return xo(i,h,d)}return s.errors.oneOfPropertyError({property:u,value:f,pointer:l,schema:i,errors:c})}const a=[];for(let c=0;c<i.oneOf.length;c+=1){const u=s.resolveRef(i.oneOf[c]);s.isValid(e,u,l)&&a.push({schema:u,index:c})}if(a.length===1)return xo(i,a[0].schema,a[0].index);if(lt(e)==="object"){let c,u=-1,f=0;for(let d=0;d<i.oneOf.length;d+=1){const h=s.resolveRef(i.oneOf[d]),m=zE(s,h,e);f<m&&(f=m,c=i.oneOf[d],u=d)}return c===void 0?s.errors.oneOfError({value:JSON.stringify(e),pointer:l,schema:i,oneOf:i.oneOf}):xo(i,c,u)}return a.length>1?s.errors.multipleOneOfError({matches:a,pointer:l,schema:i,value:e}):s.errors.oneOfError({value:JSON.stringify(e),pointer:l,schema:i,oneOf:i.oneOf})}const UE=(s,e,i,l)=>{if(Array.isArray(e.oneOf)){const a=s.resolveOneOf(i,e,l);if(Ln(a))return a}};var HE=S(52743),Tm=S.n(HE);const KE=(s,e)=>e,So=(s,e)=>Tm()(s,e,{arrayMerge:KE}),GE=(s,e)=>{const i=s.concat(e);return i.filter((l,a)=>i.indexOf(l)===a)},YE=(s,e)=>Tm()(s,e,{arrayMerge:GE});function hn(s,e){const i=lt(s),l=lt(e);if(i!==l)return s;const a=YE(s,e);return s.getOneOfOrigin?Object.defineProperty(a,"getOneOfOrigin",{enumerable:!1,value:s.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(a,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),a}function Eo(s,...e){const i={};return Object.keys(s).forEach(l=>{e.includes(l)||(i[l]=s[l])}),s.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:s.getOneOfOrigin}),i}var JE=Function.prototype.toString,vu=Object.create,XE=Object.prototype.toString,ZE=function(){function s(){this._keys=[],this._values=[]}return s.prototype.has=function(e){return!!~this._keys.indexOf(e)},s.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},s.prototype.set=function(e,i){this._keys.push(e),this._values.push(i)},s}();function QE(){return new ZE}function qE(){return new WeakMap}var _E=typeof WeakMap<"u"?qE:QE;function bu(s){if(!s)return vu(null);var e=s.constructor;if(e===Object)return s===Object.prototype?{}:vu(s);if(e&&~JE.call(e).indexOf("[native code]"))try{return new e}catch{}return vu(s)}function eA(s){var e="";return s.global&&(e+="g"),s.ignoreCase&&(e+="i"),s.multiline&&(e+="m"),s.unicode&&(e+="u"),s.sticky&&(e+="y"),e}function tA(s){return s.flags}var nA=/test/g.flags==="g"?tA:eA;function Dm(s){var e=XE.call(s);return e.substring(8,e.length-1)}function rA(s){return s[Symbol.toStringTag]||Dm(s)}var iA=typeof Symbol<"u"?rA:Dm,sA=Object.defineProperty,oA=Object.getOwnPropertyDescriptor,Mm=Object.getOwnPropertyNames,xu=Object.getOwnPropertySymbols,Im=Object.prototype,Rm=Im.hasOwnProperty,lA=Im.propertyIsEnumerable,Lm=typeof xu=="function";function aA(s){return Mm(s).concat(xu(s))}var cA=Lm?aA:Mm;function ql(s,e,i){for(var l=cA(s),a=0,c=l.length,u=void 0,f=void 0;a<c;++a)if(u=l[a],!(u==="callee"||u==="caller")){if(f=oA(s,u),!f){e[u]=i.copier(s[u],i);continue}!f.get&&!f.set&&(f.value=i.copier(f.value,i));try{sA(e,u,f)}catch{e[u]=f.value}}return e}function uA(s,e){var i=new e.Constructor;e.cache.set(s,i);for(var l=0,a=s.length;l<a;++l)i[l]=e.copier(s[l],e);return i}function fA(s,e){var i=new e.Constructor;return e.cache.set(s,i),ql(s,i,e)}function Fm(s,e){return s.slice(0)}function dA(s,e){return s.slice(0,s.size,s.type)}function hA(s,e){return new e.Constructor(Fm(s.buffer))}function mA(s,e){return new e.Constructor(s.getTime())}function Nm(s,e){var i=new e.Constructor;return e.cache.set(s,i),s.forEach(function(l,a){i.set(a,e.copier(l,e))}),i}function pA(s,e){return ql(s,Nm(s,e),e)}function gA(s,e){var i=bu(e.prototype);e.cache.set(s,i);for(var l in s)Rm.call(s,l)&&(i[l]=e.copier(s[l],e));return i}function yA(s,e){var i=bu(e.prototype);e.cache.set(s,i);for(var l in s)Rm.call(s,l)&&(i[l]=e.copier(s[l],e));for(var a=xu(s),c=0,u=a.length,f=void 0;c<u;++c)f=a[c],lA.call(s,f)&&(i[f]=e.copier(s[f],e));return i}var vA=Lm?yA:gA;function bA(s,e){var i=bu(e.prototype);return e.cache.set(s,i),ql(s,i,e)}function Su(s,e){return new e.Constructor(s.valueOf())}function xA(s,e){var i=new e.Constructor(s.source,nA(s));return i.lastIndex=s.lastIndex,i}function _l(s,e){return s}function Bm(s,e){var i=new e.Constructor;return e.cache.set(s,i),s.forEach(function(l){i.add(e.copier(l,e))}),i}function SA(s,e){return ql(s,Bm(s,e),e)}var EA=Array.isArray,Eu=Object.assign,AA=Object.getPrototypeOf||function(s){return s.__proto__},$m={array:uA,arrayBuffer:Fm,blob:dA,dataView:hA,date:mA,error:_l,map:Nm,object:vA,regExp:xA,set:Bm},wA=Eu({},$m,{array:fA,map:pA,object:bA,set:SA});function CA(s){return{Arguments:s.object,Array:s.array,ArrayBuffer:s.arrayBuffer,Blob:s.blob,Boolean:Su,DataView:s.dataView,Date:s.date,Error:s.error,Float32Array:s.arrayBuffer,Float64Array:s.arrayBuffer,Int8Array:s.arrayBuffer,Int16Array:s.arrayBuffer,Int32Array:s.arrayBuffer,Map:s.map,Number:Su,Object:s.object,Promise:_l,RegExp:s.regExp,Set:s.set,String:Su,WeakMap:_l,WeakSet:_l,Uint8Array:s.arrayBuffer,Uint8ClampedArray:s.arrayBuffer,Uint16Array:s.arrayBuffer,Uint32Array:s.arrayBuffer,Uint64Array:s.arrayBuffer}}function jm(s){var e=Eu({},$m,s),i=CA(e),l=i.Array,a=i.Object;function c(u,f){if(f.prototype=f.Constructor=void 0,!u||typeof u!="object")return u;if(f.cache.has(u))return f.cache.get(u);if(f.prototype=AA(u),f.Constructor=f.prototype&&f.prototype.constructor,!f.Constructor||f.Constructor===Object)return a(u,f);if(EA(u))return l(u,f);var d=i[iA(u)];return d?d(u,f):typeof u.then=="function"?u:a(u,f)}return function(f){return c(f,{Constructor:void 0,cache:_E(),copier:c,prototype:void 0})}}function OA(s){return jm(Eu({},wA,s))}var Z$=OA({}),kA=jm({});const ea=kA;function ta(s,e,i){if(e.if!=null){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const l=s.validate(i,s.resolveRef(e.if));if(l.length===0&&e.then)return s.resolveRef(e.then);if(l.length!==0&&e.else)return s.resolveRef(e.else)}}}const PA=(s,e,i,l)=>{const a=ta(s,e,i);if(a)return s.validate(i,a,l)};function Wm(s,e,i){var l;const a={...(l=s.resolveRef(e))!==null&&l!==void 0?l:{}},c=ta(s,a,i);return c||Eo(a,"if","then","else")}function Au(s,e,i=s.rootSchema){let l=ea(i);for(let a=0;a<i.allOf.length;a+=1){const c=Wm(s,i.allOf[a],e);l=hn(l,c)}return delete l.allOf,l}function Vm(s,e){const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;let l={};return i.forEach(a=>{l=hn(l,s.resolveRef(a))}),l}const TA=(s,e,i,l)=>{const{allOf:a}=e;if(!Array.isArray(a)||a.length===0)return;const c=[];return e.allOf.forEach(u=>{c.push(...s.validate(i,u,l))}),c};function DA(s){return s.filter((e,i)=>s.indexOf(e)===i)}function hi(s){return lt(s)==="object"}function zm(s,e,i){const{dependencies:l}=e;if(!hi(l)||!hi(i))return;let a=!1,c={required:[]};if(Object.keys(l).forEach(u=>{var f,d;if(i[u]==null&&!(!((f=e.required)===null||f===void 0)&&f.includes(u)||!((d=c.required)===null||d===void 0)&&d.includes(u)))return;const h=l[u];if(Array.isArray(h)){a=!0,c.required.push(...h);return}if(hi(h)){a=!0,c=hn(c,s.resolveRef(h));return}}),a)return c.required=DA(c.required),c}const MA=(s,e,i,l)=>{if(lt(e.dependencies)!=="object")return;const a=[];return Object.keys(i).forEach(c=>{if(e.dependencies[c]===void 0||e.dependencies[c]===!0)return;if(e.dependencies[c]===!1){a.push(s.errors.missingDependencyError({pointer:l,schema:e,value:i}));return}let u;const f=lt(e.dependencies[c]);if(f==="array")u=e.dependencies[c].filter(d=>i[d]===void 0).map(d=>s.errors.missingDependencyError({missingProperty:d,pointer:l,schema:e,value:i}));else if(f==="object")u=s.validate(i,e.dependencies[c],l);else throw new Error(`Invalid dependency definition for ${l}/${c}. Must be string[] or schema`);a.push(...u)}),a.length>0?a:void 0};function Um(s,e,i){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let l;return e.anyOf.forEach(a=>{a=s.resolveRef(a),s.isValid(i,a)&&(l=l?hn(l,a):a)}),l}function wu(s,e,i=s.rootSchema,l="#"){const{anyOf:a}=i;if(!Array.isArray(a)||a.length===0)return i;const c=Um(s,i,e);if(c==null)return s.errors.anyOfError({pointer:l,schema:i,value:e,anyOf:JSON.stringify(a)});const u=hn(i,c);return Eo(u,"anyOf")}const IA=(s,e,i,l)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let a=0;a<e.anyOf.length;a+=1)if(s.isValid(i,e.anyOf[a]))return;return s.errors.anyOfError({pointer:l,schema:e,value:i,anyOf:e.anyOf})}},Hm=["allOf","anyOf","oneOf","dependencies","if","then","else"],RA=["allOf","anyOf","oneOf","dependencies","if"];function LA(s){const e=Object.keys(s);return RA.findIndex(i=>e.includes(i))!==-1}function Cu(s,e,i,l){let a,c;if(e=s.resolveRef(e),e.oneOf){const m=Ql(s,i,e,l);Ln(m)?c=m:m&&(a=hn(a??{},m))}if(Array.isArray(e.allOf)){const m=e.allOf.map(p=>{if(LA(p)){let y=Cu(s,p,i,l);return y?(y=hn(p,y),Eo(y,...Hm)):void 0}return p});if(m.length>0){const p=Vm(s,{allOf:m});a=hn(a??{},p)}}const u=Um(s,e,i);u&&(a=hn(a??{},u));const f=zm(s,e,i);f&&(a=hn(a??{},f));const d=ta(s,e,i);if(d&&(a=hn(a??{},d)),a==null)return c;const h=Cu(s,a,i,l);return h&&(a=hn(a,h)),Eo(a,...Hm)}const FA=["allOf","anyOf","oneOf","dependencies","if","then","else"];function Km(s,e,i,l){let a=Cu(s,e,i,l);return a?(a=hn(e,a),Eo(a,...FA)):e}class na{constructor(e,i){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=ea(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(i)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,i){this.config.addRemoteSchema(this,e,i)}compileSchema(e){var i;return this.config.compileSchema(this,e,(i=this.rootSchema)!==null&&i!==void 0?i:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,i,l,a){return this.config.each(this,e,i,l,a)}eachSchema(e,i=this.rootSchema){return this.config.eachSchema(i,e)}getChildSchemaSelection(e,i){return this.config.getChildSchemaSelection(this,e,i)}getSchema(e){return this.config.getSchema(this,e)}getTemplate(e,i,l=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,i,l)}isValid(e,i,l){return this.config.isValid(this,e,i,l)}resolveAnyOf(e,i,l){return this.config.resolveAnyOf(this,e,i,l)}resolveAllOf(e,i){return this.config.resolveAllOf(this,e,i)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,i,l){return this.config.resolveOneOf(this,e,i,l)}setSchema(e){this.rootSchema=e}step(e,i,l,a){return this.config.step(this,e,i,l,a)}validate(e,i,l){return this.config.validate(this,e,i,l)}}function Ou(s,e,i){i.id=i.id||e,s.remotes[e]=s.compileSchema(i)}var Jr=S(95716),Ao=S.n(Jr),NA=S(22193);const Gm="[^?/{}*,()#]+",BA=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${Gm}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,$A=/(children|text|type|start|end|rest|errors|fullText|\d+)/,jA=/(children|text|type|\d+)/,Q$=s=>JSON.stringify(s,(e,i)=>e===""||$A.test(e)?i:void 0,2),WA=s=>JSON.stringify(s,(e,i)=>e===""||e==="rest"&&i!==""||jA.test(e)?i:void 0,2),VA=new NA.A.Parser(BA),Ym=s=>VA.getAST(s),q$=s=>JSON.parse(WA(s)),On=0,_$=1,Jm=2,Yi=3,ra=(s,e)=>`${s}/${e}`,Xm=Object.prototype.toString,zA=/Object|Array/,ku=s=>zA.test(Xm.call(s)),UA=s=>Xm.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase();function Zm(s){return new RegExp(s.text.replace(/(^{|}$)/g,""))}function HA(s,e){Array.isArray(s)?s.forEach(e):Object.prototype.toString.call(s)==="[object Object]"&&Object.keys(s).forEach(function(i){e(s[i],i,s)})}function Qm(s){return Array.isArray(s)?s.map(function(e,i){return`${i}`}):Object.prototype.toString.call(s)==="[object Object]"?Object.keys(s):[]}const mi={mem:[],get(s,e){const i=s[On][e];if(!mi.mem.includes(i))return ku(i)&&mi.mem.push(i),[i,e,s[On],ra(s[Yi],e)]},reset(){mi.mem.length=0}},Pu={any(s,e){const i=e[On];return Qm(i).map(l=>[i[l],l,i,ra(e[Yi],l)])},all(s,e){const i=[e];return HA(e[On],(l,a)=>{const c=mi.get(e,a);c&&i.push(...Pu.all(s,c))}),i},regex(s,e){const i=Zm(s),l=e[On];return Qm(l).filter(a=>i.test(a)).map(a=>[l[a],a,l,ra(e[Yi],a)])}},ia={escaped:(s,e)=>ia.property(s,e),property:(s,e)=>{const i=s.text;if(e[On]&&e[On][i]!==void 0)return[e[On][i],i,e[On],ra(e[Yi],i)]},typecheck:(s,e)=>{const i=s.text.replace(/^\?:/,"");if(i==="value")return ku(e[On])?void 0:e;if(UA(e[On])===i)return e},lookahead:(s,e)=>{let i=!0,l=!1;return s.children.forEach(a=>{if(a.type==="expression"){const c=ia.expression(a,e)!==void 0;i=l===!0?i||c:i&&c}else l=a.type==="orExpr"}),i?e:void 0},expression:(s,e)=>{const i=s.children[0].text,l=s.children[1],a=s.children[2],c=e[On];if(ku(c)!==!1)return KA(c[i],l,a)?e:void 0}};function KA(s,e,i){if(e===void 0)return s!==void 0;let l;const a=`${s}`;return i.type==="regex"?l=Zm(i).test(a):l=a===i.text,e.type==="isnot"&&(l=l===!1&&s!==void 0),l}function GA(s,e,i,l){const a=[];for(let c=0,u=e.length;c<u;c+=1)a.push(...s(i,e[c],i,l));return a}function YA(s,e,i,l){const a=[];for(let c=0,u=e.length;c<u;c+=1){const f=s(i,e[c],l);f&&a.push(f)}return a}function JA(s,e,i){let l=s;return e.children.forEach(a=>{if(Pu[a.type])l=GA(Pu[a.type],l,a,i);else if(ia[a.type])l=YA(ia[a.type],l,a,i);else throw new Error(`Unknown filter ${a.type}`)}),l}function XA(s,e,i){const l=[];let a=s;return e.children.forEach(c=>{if(c.type==="orPattern"){l.push(...a),a=s;return}a=Tu(a,c,i)}),l.push(...a),l}function ZA(s){if(s==null)return 1;if(s==="*"||s==="+")return 1/0;const e=parseInt(s);return isNaN(e)?1:e}function QA(s,e,i){const l=[],a=e.children.find(d=>d.type==="quantifier"),c=ZA(a&&a.text);let u=s;a&&a.text==="*"&&l.push(...u);let f=0;for(;u.length>0&&f<c;)u=XA(u,e,i),l.push(...u),f+=1;return l}function qA(s,e,i){let l=s;return e.children.forEach(a=>l=Tu(l,a,i)),l}function Tu(s,e,i){let l;return e.type==="query"?l=JA(s,e,i):e.type==="pattern"?l=QA(s,e,i):l=qA(s,e,i),mi.reset(),mi.mem.push(s),l}function _A(s,e){return mi.reset(),mi.mem.push(s),Tu([[s,null,null,"#"]],e)}const qm={value:s=>s.map(e=>e[On]),pointer:s=>s.map(e=>e[Yi]),all:s=>s,map:s=>{const e={};return s.forEach(i=>e[i[Yi]]=i[On]),e}};var vr;(function(s){s.POINTER="pointer",s.VALUE="value",s.ALL="all",s.MAP="map"})(vr||(vr={})),pi.POINTER=vr.POINTER,pi.VALUE=vr.VALUE,pi.ALL=vr.ALL,pi.MAP=vr.MAP;function pi(s,e,i=vr.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const l=Ym(e);if(l==null)throw new Error(`empty ast for '${e}'`);if(l.rest!=="")throw new Error(`Failed parsing queryString from: '${l.rest}'`);const a=_A(s,l);return typeof i=="function"?a.map(c=>i(...c)):qm[i]?qm[i](a):a}const ew=["root","recursion"];function _m(s,e=[]){return ew.includes(s.type)?(s.children.forEach(i=>_m(i,e)),e):(e.push(s.text),e)}function ep(s){if(s==null||s==="")return[];const e=Ym(s);return _m(e)}const Du=s=>JSON.parse(JSON.stringify(s)),tw=Object.prototype.toString,Os=s=>tw.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase(),tp=new RegExp(`^("[^"]+"|${Gm})$`),nw=["string","number","boolean","null"],rw=/^\[\d*\]$/,np=/^\[(\d+)\]$/,iw=/^".+"$/,rp=/(^\[\d*\]$|^\d+$)/;function ip(s){return parseInt(s.replace(/^(\[|\]$)/,""))}function sp(s){return iw.test(s)?s.replace(/(^"|"$)/g,""):s}function sw(s,e,i){s.length<=e?s[e]=i:s.splice(e,0,i)}function ow(s,e){const i=[];return s.forEach(l=>i.push(...pi(l[0],e,vr.ALL))),i}function op(s,e,i,l){const a=s[0];if(/^\[\]$/.test(e)){a.push(i);const c=a.length-1;return[a[c],c,a,`${s[3]}/${c}}`]}if(l==null&&Os(a[e])==="object"&&Os(i)==="object")return Object.assign(a[e],i),[a[e],e,a,`${s[3]}/${e}}`];if(l===wo.INSERT_ITEMS||l==null&&np.test(e)){const c=ip(e);return sw(a,c,i),[a[c],c,a,`${s[3]}/${c}}`]}if(l===wo.REPLACE_ITEMS||l==null){const c=ip(e);return a[c]=i,[a[c],c,a,`${s[3]}/${c}}`]}throw new Error(`Unknown array index '${e}' with force-option '${l}'`)}function lw(s,e,i,l){return e=sp(e),s.filter(a=>Array.isArray(a[0])&&rp.test(e)?!0:nw.includes(Os(a[0][e]))===!1).map(a=>{const c=i?[]:{},u=a[0],f=Os(c),d=Os(u[e]);return Array.isArray(u)&&d!==f?op(a,e,c,l):(u[e]=u[e]||c,[u[e],e,u,`${a[3]}/${e}`])})}var sa;(function(s){s.REPLACE_ITEMS="replace",s.INSERT_ITEMS="insert"})(sa||(sa={})),wo.REPLACE_ITEMS=sa.REPLACE_ITEMS,wo.INSERT_ITEMS=sa.INSERT_ITEMS;function wo(s,e,i,l){if(e==null)return Du(s);if(e=e.replace(/(\/$)/g,""),e==="")return Du(i);const a=Du(s);let c=[[a,null,null,"#"]];const u=ep(e),f=u.pop(),d=rw.test(f)&&np.test(f)===!1;if(tp.test(f)===!1||d)throw new Error(`Unsupported query '${e}' ending with non-property`);return u.forEach((h,m)=>{if(h==="__proto__"||h==="prototyped"||h==="constructor")return;if(tp.test(h)===!1){c=ow(c,h);return}const p=m>=u.length-1?f:u[m+1],y=rp.test(p);c=lw(c,h,y,l)}),c.forEach(h=>{let m=i;Os(i)==="function"&&(m=i(h[3],f,h[0],`${h[3]}/${f}`));const p=h[0];if(Array.isArray(p))op(h,f,m,l);else{const y=sp(f);if(y==="__proto__"||y==="prototyped"||y==="constructor")return;p[y]=m}}),a}function aw(s,e,i=!1){const l=[],a=pi(s,e,vr.ALL);return a.forEach(function(c){l.push(c[0]),(0,Jr.remove)(s,c[Yi],!0)}),a.forEach(function(c){Array.isArray(c[Jm])&&(0,Jr.removeUndefinedItems)(c[Jm])}),i?l:s}const ej={get:pi,set:wo,split:ep,remove:aw,ReturnType:vr},Xr={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},cw=Object.keys(Xr).filter(s=>Xr[s].type===!1),lp=Object.prototype.hasOwnProperty;function ap(s){if(hi(s)===!1)return;if(s.enum)return"enum";const e=s.type;if(Array.isArray(e)||Xr[e])return e;const i=cw.filter(l=>s[l]);if(i.length===1)return i[0];if(i.length===0){for(let l=0,a=Xr.object.keywords.length;l<a;l+=1){const c=Xr.object.keywords[l];if(lp.call(s,c))return"object"}for(let l=0,a=Xr.array.keywords.length;l<a;l+=1){const c=Xr.array.keywords[l];if(lp.call(s,c))return"array"}return}throw new Error(`Mutiple typeIds [${i.join(", ")}] matched in ${JSON.stringify(s)}`)}function uw(s){const e=[],i=ap(s);if(i==null)return e;let l;if(Array.isArray(i)){l={};for(let a=0,c=i.length;a<c;a+=1)Object.assign(l,Xr[i[a]])}else l=Xr[i];return l.definitions==null||l.definitions.forEach(a=>{pi(s,a,(c,u,f,d)=>{hi(c)&&ap(c)&&e.push({pointer:Ao().join(Ao().split(d),!1),def:c})})}),e}function fw(s,e){if(this.callback(s,e)===!0)return;uw(s).forEach(l=>this.nextTypeDefs(l.def,Ao().join(e,l.pointer,!1)))}function oa(s,e,i,l="definitions"){const a=e[l];Object.keys(a).forEach(c=>{if(a[c]===!1||hi(a[c])){s.nextTypeDefs(a[c],Ao().join(i,l,c,!1));return}})}function Co(s,e,i="#"){const l={callback:e,nextTypeDefs:fw};l.nextTypeDefs(s,i),s.definitions!=null&&(l.callback=(a,c)=>{e(a,c),a.definitions!=null&&oa(l,a,c)},oa(l,s,i)),s.$defs!=null&&(l.callback=(a,c)=>{e(a,c),a.definitions!=null&&oa(l,a,c)},oa(l,s,i,"$defs"))}const dw=/(#|\/)+$/,la=/#$/,hw=/^[^:]+:\/\/[^/]+\//,mw=/\/[^/]*$/,pw=/#.*$/;function aa(s,e){return s==null&&e==null?"#":e==null?s.replace(la,""):s==null?e.replace(la,""):e[0]==="#"?`${s.replace(pw,"")}${e.replace(dw,"")}`:hw.test(e)?e.replace(la,""):`${s.replace(mw,"")}/${e.replace(la,"")}`}const Oo=/(#|\/)+$/g,gw=["",null,"#"];function yw(s){if(gw.includes(s))return[];if(s=s.replace(Oo,""),s.indexOf("#")===-1)return[s.replace(Oo,"")];if(s.indexOf("#")===0)return[s.replace(Oo,"")];const e=s.split("#");return e[0]=e[0].replace(Oo,""),e[1]=`#${e[1].replace(Oo,"")}`,e}const vw=/(#|\/)+$/g,bw=s=>lt(s)==="object";function Zr(s,e,i){if(bw(i)&&(i=i.__ref||i.$ref),i==null)return e;let l;const a=i.replace(vw,"");if(s.remotes[a])return l=s.remotes[a],l&&l.$ref?Zr(s,e,l.$ref):l;if(s.ids[i])return l=(0,Jr.get)(e,s.ids[i]),l&&l.$ref?Zr(s,e,l.$ref):l;const c=yw(i);if(c.length===0)return e;if(c.length===1){if(i=c[0],s.remotes[i])return l=s.remotes[i],Zr(s,e,l.$ref);if(s.ids[i])return l=(0,Jr.get)(e,s.ids[i]),l&&l.$ref?Zr(s,e,l.$ref):l}if(c.length===2){const u=c[0];if(i=c[1],s.remotes[u])return s.remotes[u].getRef?s.remotes[u].getRef(i):Zr(s,s.remotes[u],i);if(s.ids[u])return Zr(s,(0,Jr.get)(e,s.ids[u]),i)}return l=(0,Jr.get)(e,s.ids[i]||i),l&&l.$ref?Zr(s,e,l.$ref):l}const cp="__compiled",up="__ref",xw="getRef",Sw="getRoot",Ew=/(#|\/)+$/g;function Aw(s,e,i=e,l=!1){if(!e||e[cp]!==void 0)return e;const a={ids:{},remotes:s.remotes},c=JSON.stringify(e),u=JSON.parse(c);if(Object.defineProperty(u,cp,{enumerable:!1,value:!0}),Object.defineProperty(u,xw,{enumerable:!1,value:Zr.bind(null,a,u)}),l===!1&&c.includes("$ref")===!1)return u;e!==i&&Object.defineProperty(u,"definitions",{enumerable:!1,value:Object.assign({},i.definitions,i.$defs,e.definitions,e.$defs)});const f={},d=()=>u;return Co(u,(h,m)=>{var p;if(h.id){if(h.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(m)){const E=m.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),w=(0,Jr.get)(u,E);h.id=(p=w.id)!==null&&p!==void 0?p:h.id}a.ids[h.id.replace(Ew,"")]=m}m=`#${m}`.replace(/##+/,"#");const y=m.replace(/\/[^/]+$/,""),b=m.replace(/\/[^/]+\/[^/]+$/,""),x=f[y]||f[b],A=aa(x,h.id);f[m]=A,a.ids[A]==null&&(a.ids[A]=m),h.$ref&&!h[up]&&(Object.defineProperty(h,up,{enumerable:!1,value:aa(A,h.$ref)}),Object.defineProperty(h,Sw,{enumerable:!1,value:d}))}),u}const ww=Aw;function Mu(s,e,i,l=s.rootSchema,a="#"){l=s.resolveRef(l),i(l,e,a);const c=lt(e);c==="object"?Object.keys(e).forEach(u=>{const f=s.step(u,l,e,a),d=e[u];s.each(d,i,f,`${a}/${u}`)}):c==="array"&&e.forEach((u,f)=>{const d=s.step(f,l,e,a);s.each(u,i,d,`${a}/${f}`)})}const Iu={additionalItemsError:Be("AdditionalItemsError"),additionalPropertiesError:Be("AdditionalPropertiesError"),anyOfError:Be("AnyOfError"),allOfError:Be("AllOfError"),constError:Be("ConstError"),containsError:Be("ContainsError"),containsArrayError:Be("ContainsArrayError"),containsAnyError:Be("ContainsAnyError"),enumError:Be("EnumError"),forbiddenPropertyError:Be("ForbiddenPropertyError"),formatURLError:Be("FormatURLError"),formatURIError:Be("FormatURIError"),formatURIReferenceError:Be("FormatURIReferenceError"),formatURITemplateError:Be("FormatURITemplateError"),formatDateError:Be("FormatDateError"),formatDateTimeError:Be("FormatDateTimeError"),formatEmailError:Be("FormatEmailError"),formatHostnameError:Be("FormatHostnameError"),formatIPV4Error:Be("FormatIPV4Error"),formatIPV4LeadingZeroError:Be("FormatIPV4LeadingZeroError"),formatIPV6Error:Be("FormatIPV6Error"),formatIPV6LeadingZeroError:Be("FormatIPV6LeadingZeroError"),formatJsonPointerError:Be("FormatJsonPointerError"),formatRegExError:Be("FormatRegExError"),formatTimeError:Be("FormatTimeError"),invalidSchemaError:Be("InvalidSchemaError"),invalidDataError:Be("InvalidDataError"),invalidTypeError:Be("InvalidTypeError"),invalidPropertyNameError:Be("InvalidPropertyNameError"),maximumError:Be("MaximumError"),maxItemsError:Be("MaxItemsError"),maxLengthError:Be("MaxLengthError"),maxPropertiesError:Be("MaxPropertiesError"),minimumError:Be("MinimumError"),minItemsError:Be("MinItemsError"),minItemsOneError:Be("MinItemsOneError"),minLengthError:Be("MinLengthError"),minLengthOneError:Be("MinLengthOneError"),minPropertiesError:Be("MinPropertiesError"),missingDependencyError:Be("MissingDependencyError"),missingOneOfPropertyError:Be("MissingOneOfPropertyError"),multipleOfError:Be("MultipleOfError"),multipleOneOfError:Be("MultipleOneOfError"),noAdditionalPropertiesError:Be("NoAdditionalPropertiesError"),notError:Be("NotError"),oneOfError:Be("OneOfError"),oneOfPropertyError:Be("OneOfPropertyError"),patternError:Be("PatternError"),patternPropertiesError:Be("PatternPropertiesError"),requiredPropertyError:Be("RequiredPropertyError"),schemaWarning:Be("SchemaWarning"),typeError:Be("TypeError"),undefinedValueError:Be("UndefinedValueError"),uniqueItemsError:Be("UniqueItemsError"),unknownPropertyError:Be("UnknownPropertyError"),valueNotEmptyError:Be("ValueNotEmptyError")};var Cw=S(47112),fp=S.n(Cw),Ow=S(96542);const kw=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),Pw=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,Tw=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,Dw=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,Mw=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Iw=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Rw=[0,31,28,31,30,31,30,31,31,30,31,30,31],Lw=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Fw=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Nw=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Bw=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Ru={date:(s,e,i,l)=>{if(typeof i!="string"||i==="")return;const a=i.match(Mw);if(!a)return s.errors.formatDateTimeError({value:i,pointer:l,schema:e});const c=+a[1],u=+a[2],f=+a[3],d=c%4===0&&(c%100!==0||c%400===0);if(!(u>=1&&u<=12&&f>=1&&f<=(u==2&&d?29:Rw[u])))return s.errors.formatDateError({value:i,pointer:l,schema:e})},"date-time":(s,e,i,l)=>{if(!(typeof i!="string"||i===""))return i===""||kw.test(i)?new Date(i).toString()==="Invalid Date"?s.errors.formatDateTimeError({value:i,pointer:l,schema:e}):void 0:s.errors.formatDateTimeError({value:i,pointer:l,schema:e})},email:(s,e,i,l)=>{if(typeof i!="string"||i==="")return;if(i[0]==='"')return s.errors.formatEmailError({value:i,pointer:l,schema:e});const[a,c,...u]=i.split("@");if(!a||!c||u.length!==0||a.length>64||c.length>253)return s.errors.formatEmailError({value:i,pointer:l,schema:e});if(a[0]==="."||a.endsWith(".")||a.includes(".."))return s.errors.formatEmailError({value:i,pointer:l,schema:e});if(!/^[a-z0-9.-]+$/i.test(c)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(a))return s.errors.formatEmailError({value:i,pointer:l,schema:e});if(!c.split(".").every(f=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(f)))return s.errors.formatEmailError({value:i,pointer:l,schema:e})},"idn-email":(s,e,i,l)=>{if(!(typeof i!="string"||i===""))try{(0,Ow.parse)(i);return}catch{return s.errors.formatEmailError({value:i,pointer:l,schema:e})}},hostname:(s,e,i,l)=>{if(typeof i=="string"&&!(i===""||Dw.test(i)))return s.errors.formatHostnameError({value:i,pointer:l,schema:e})},ipv4:(s,e,i,l)=>{if(!(typeof i!="string"||i==="")){if(i&&i[0]==="0")return s.errors.formatIPV4LeadingZeroError({value:i,pointer:l,schema:e});if(!(i.length<=15&&Pw.test(i)))return s.errors.formatIPV4Error({value:i,pointer:l,schema:e})}},ipv6:(s,e,i,l)=>{if(!(typeof i!="string"||i==="")){if(i&&i[0]==="0")return s.errors.formatIPV6LeadingZeroError({value:i,pointer:l,schema:e});if(!(i.length<=45&&Tw.test(i)))return s.errors.formatIPV6Error({value:i,pointer:l,schema:e})}},"json-pointer":(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!Lw.test(i))return s.errors.formatJsonPointerError({value:i,pointer:l,schema:e})},"relative-json-pointer":(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!Fw.test(i))return s.errors.formatJsonPointerError({value:i,pointer:l,schema:e})},regex:(s,e,i,l)=>{if(typeof i=="string"&&/\\Z$/.test(i)===!1){try{new RegExp(i);return}catch{}return s.errors.formatRegExError({value:i,pointer:l,schema:e})}if(!(typeof i=="object"||typeof i=="number"||Array.isArray(i)))return s.errors.formatRegExError({value:i,pointer:l,schema:e})},time:(s,e,i,l)=>typeof i!="string"||i===""||i.match(Iw)?void 0:s.errors.formatDateTimeError({value:i,pointer:l,schema:e}),uri:(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!fp().isUri(i))return s.errors.formatURIError({value:i,pointer:l,schema:e})},"uri-reference":(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!Nw.test(i))return s.errors.formatURIReferenceError({value:i,pointer:l,schema:e})},"uri-template":(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!Bw.test(i))return s.errors.formatURITemplateError({value:i,pointer:l,schema:e})},url:(s,e,i,l)=>{if(!(i===""||fp().isWebUri(i)))return s.errors.formatURLError({value:i,pointer:l,schema:e})}},dp={};function Lu(s,e=dp){const{pointer:i="#",data:l,schema:a=s.rootSchema,withSchemaWarning:c=!1}=e,u=Ao().split(i),f=hp(s,s.resolveRef(a),u,"#",l);if(!(!c&&f?.code==="schema-warning"))return f}function hp(s,e,i,l,a=dp){if(i.length===0)return s.resolveRef(e);const c=i.shift();return e=s.step(c,e,a,l),Ln(e)?e:(a=a[c],hp(s,e,i,`${l}/${c}`,a))}function $w(s){switch(lt(s)){case"string":case"array":return s?.length===0;case"null":case"undefined":return!0;case"object":return Object.keys(s).length===0;default:return!1}}const mp=Gi.templateDefaultOptions;let Qr;function Fu(s,e){const{$ref:i}=s;return i==null?!0:(Qr[e]==null||Qr[e][i]==null?0:Qr[e][i])<Gi.GET_TEMPLATE_RECURSION_LIMIT}function pp(s,e,i){const{$ref:l}=e;return l==null?e:(Qr[i]=Qr[i]||{},Qr[i][l]=Qr[i][l]||0,Qr[i][l]+=1,s.resolveRef(e))}function jw(s,e){if(s==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===s)return e}catch{}return null}function gp(s,e,i,l,a){if(lt(e)!=="object")return Object.assign({pointer:l},e);if(Fu(e,l)===!1&&i==null)return!1;let c=ea(pp(s,e,l));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(Fu(e.anyOf[0],`${l}/anyOf/0`)){const u=pp(s,e.anyOf[0],`${l}/anyOf/0`);c=So(c,u),c.pointer=e.anyOf[0].$ref||c.pointer}delete c.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((f,d)=>Fu(f,`${l}/allOf/${d}`)).reduceRight((f,d)=>f&&d,!0)){const f=[];let d=ea(i);for(let m=0;m<e.allOf.length;m+=1)f.push(Wm(s,e.allOf[m],d)),d=rr(s,d,{type:e.type,...f[m]},`${l}/allOf/${m}`,a);const h=Vm(s,{allOf:f});h&&(c=hn(c,h))}return c.pointer=c.pointer||e.$ref||l,c}const yp=s=>s&&typeof s=="object";function rr(s,e,i,l,a){var c;if(i==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(l==null)throw new Error("Missing pointer");let u=gp(s,i,e,l,a);if(!yp(u))return;if(l=u.pointer,u?.const)return u.const;if(Array.isArray(u.oneOf))if($w(e)){const m=u.oneOf[0].type||u.type||u.const&&typeof u.const||lt(e);u={...u.oneOf[0],type:m}}else{const m=Ql(s,e,u);if(Ln(m)){if(e!=null&&a.removeInvalidData!==!0)return e;u=u.oneOf[0],e=void 0}else m.type=(c=m.type)!==null&&c!==void 0?c:u.type,u=m}if(!yp(u)||u.type==null)return;if(e instanceof File)return e;const f=Array.isArray(u.type)?Ww(u.type,e,u.default):u.type,d=lt(e);return e!=null&&d!==f&&!(d==="number"&&f==="integer")&&(e=jw(f,e)),vp[f]==null?a.removeInvalidData?void 0:e:vp[f](s,u,e,l,a)}function Ww(s,e,i){if(e==null){if(i!=null){const a=lt(i);if(s.includes(a))return a}return s[0]}const l=lt(e);return s.includes(l)?l:s[0]}const vp={null:(s,e,i)=>ko(e,i,null),string:(s,e,i)=>ko(e,i,""),number:(s,e,i)=>ko(e,i,0),integer:(s,e,i)=>ko(e,i,0),boolean:(s,e,i)=>ko(e,i,!1),object:(s,e,i,l,a)=>{var c;const u=e.default===void 0?{}:e.default,f={},d=a.extendDefaults===!1&&e.default!==void 0?[]:(c=e.required)!==null&&c!==void 0?c:[];e.properties&&Object.keys(e.properties).forEach(p=>{const y=i==null||i[p]==null?u[p]:i[p],b=d.includes(p);(y!=null||b||a.addOptionalProps)&&(f[p]=rr(s,y,e.properties[p],`${l}/properties/${p}`,a))});let h=zm(s,e,f);if(h){h=hn(e,h),delete h.dependencies;const p=rr(s,i,h,`${l}/dependencies`,a);Object.assign(f,p)}i&&(a.removeInvalidData===!0&&(e.additionalProperties===!1||lt(e.additionalProperties)==="object")?lt(e.additionalProperties)==="object"&&Object.keys(i).forEach(p=>{f[p]==null&&s.isValid(i[p],e.additionalProperties)&&(f[p]=i[p])}):Object.keys(i).forEach(p=>f[p]==null&&(f[p]=i[p])));const m=ta(s,e,f);if(m){const p=rr(s,f,{type:"object",...m},l,a);Object.assign(f,p)}return f},array:(s,e,i,l,a)=>{var c,u;if(e.items==null)return i||[];const f=e.default===void 0?[]:e.default,d=i||f,h=a.extendDefaults===!1&&e.default!==void 0?0:e.minItems||0;if(Array.isArray(e.items)){for(let p=0,y=Math.max(h??0,(u=(c=e.items)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0);p<y;p+=1)d[p]=rr(s,d[p]==null?f[p]:d[p],e.items[p],`${l}/items/${p}`,a);return d}if(lt(e.items)!=="object")return d;const m=gp(s,e.items,i,l,a);if(m===!1)return d;if(l=m.pointer||l,m.oneOf&&d.length===0){const p=m.oneOf[0];for(let y=0;y<h;y+=1)d[y]=rr(s,d[y]==null?f[y]:d[y],p,`${l}/oneOf/0`,a);return d}if(m.oneOf&&d.length>0){const p=Math.max(h,d.length);for(let y=0;y<p;y+=1){let b=d[y]==null?f[y]:d[y],x=Ql(s,b,m);x==null||Ln(x)?b!=null&&a.removeInvalidData!==!0?d[y]=b:(b=void 0,x=m.oneOf[0],d[y]=rr(s,b,x,`${l}/oneOf/${y}`,a)):d[y]=rr(s,b,x,`${l}/oneOf/${y}`,a)}return d}if(m.type){for(let p=0,y=Math.max(h,d.length);p<y;p+=1)d[p]=rr(s,d[p]==null?f[p]:d[p],m,`${l}/items`,a);return d}return d}};function ko(s,e,i){return e??(s.const?s.const:s.default===void 0&&Array.isArray(s.enum)?s.enum[0]:s.default===void 0?i:s.default)}const Nu=(s,e,i=s.rootSchema,l)=>(Qr={},l?rr(s,e,i,"#",{...mp,...l}):rr(s,e,i,"#",mp));function Bu(s,e,i=s.rootSchema,l="#"){return s.validate(e,i,l).length===0}function bp(s){const e=[];let i=0;const l=s.length;for(;i<l;){const a=s.charCodeAt(i++);if(a>=55296&&a<=56319&&i<l){const c=s.charCodeAt(i++);(c&64512)==56320?e.push(((a&1023)<<10)+(c&1023)+65536):(e.push(a),i--)}else e.push(a)}return e}function xp(s){const e=`${s}`,i=e.indexOf(".");return i===-1?0:e.length-(i+1)}var Vw=S(38792),Sp=S.n(Vw);const zw=Object.prototype.hasOwnProperty,Ep=(s,e)=>!(s[e]===void 0||!zw.call(s,e)),Ap={additionalProperties:(s,e,i,l)=>{if(e.additionalProperties===!0||e.additionalProperties==null||lt(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const a=[];let c=Object.keys(i).filter(f=>Gi.propertyBlacklist.includes(f)===!1);const u=Object.keys(e.properties||{});if(lt(e.patternProperties)==="object"){const f=Object.keys(e.patternProperties).map(d=>new RegExp(d));c=c.filter(d=>{for(let h=0;h<f.length;h+=1)if(f[h].test(d))return!1;return!0})}for(let f=0,d=c.length;f<d;f+=1){const h=c[f];if(u.indexOf(h)===-1){const m=hi(e.additionalProperties);if(m&&Array.isArray(e.additionalProperties.oneOf)){const p=s.resolveOneOf(i[h],e.additionalProperties,`${l}/${h}`);Ln(p)?a.push(s.errors.additionalPropertiesError({pointer:l,schema:e.additionalProperties,value:i,property:c[f],properties:u,errors:p.data.errors})):a.push(...s.validate(i[h],p,l))}else m?a.push(...s.validate(i[h],e.additionalProperties,`${l}/${h}`)):a.push(s.errors.noAdditionalPropertiesError({pointer:l,schema:e,value:i,property:c[f],properties:u}))}}return a},allOf:TA,anyOf:IA,dependencies:MA,enum:(s,e,i,l)=>{const a=lt(i);if(a==="object"||a==="array"){const c=JSON.stringify(i);for(let u=0;u<e.enum.length;u+=1)if(JSON.stringify(e.enum[u])===c)return}else if(e.enum.includes(i))return;return s.errors.enumError({pointer:l,schema:e,value:i,values:e.enum})},format:(s,e,i,l)=>{if(s.validateFormat[e.format])return s.validateFormat[e.format](s,e,i,l)},items:(s,e,i,l)=>{if(e.items===!1)return Array.isArray(i)&&i.length===0?void 0:s.errors.invalidDataError({pointer:l,value:i,schema:e});const a=[];for(let c=0;c<i.length;c+=1){const u=i[c],f=s.step(c,e,i,l);if(Ln(f))return[f];const d=s.validate(u,f,`${l}/${c}`);a.push(...d)}return a},maximum:(s,e,i,l)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<i)return s.errors.maximumError({maximum:e.maximum,length:i,value:i,pointer:l,schema:e});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===i)return s.errors.maximumError({maximum:e.maximum,length:i,pointer:l,schema:e,value:i})}},maxItems:(s,e,i,l)=>{if(!isNaN(e.maxItems)&&e.maxItems<i.length)return s.errors.maxItemsError({maximum:e.maxItems,length:i.length,schema:e,value:i,pointer:l})},maxLength:(s,e,i,l)=>{if(isNaN(e.maxLength))return;const a=bp(i).length;if(e.maxLength<a)return s.errors.maxLengthError({maxLength:e.maxLength,length:a,pointer:l,schema:e,value:i})},maxProperties:(s,e,i,l)=>{const a=Object.keys(i).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<a)return s.errors.maxPropertiesError({maxProperties:e.maxProperties,length:a,pointer:l,schema:e,value:i})},minLength:(s,e,i,l)=>{if(isNaN(e.minLength))return;const a=bp(i).length;if(e.minLength>a)return e.minLength===1?s.errors.minLengthOneError({minLength:e.minLength,length:a,pointer:l,schema:e,value:i}):s.errors.minLengthError({minLength:e.minLength,length:a,pointer:l,schema:e,value:i})},minimum:(s,e,i,l)=>{if(!isNaN(e.minimum)){if(e.minimum>i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:l,schema:e,value:i});if(e.exclusiveMinimum===!0&&e.minimum===i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:l,schema:e,value:i})}},minItems:(s,e,i,l)=>{if(!isNaN(e.minItems)&&e.minItems>i.length)return e.minItems===1?s.errors.minItemsOneError({minItems:e.minItems,length:i.length,pointer:l,schema:e,value:i}):s.errors.minItemsError({minItems:e.minItems,length:i.length,pointer:l,schema:e,value:i})},minProperties:(s,e,i,l)=>{if(isNaN(e.minProperties))return;const a=Object.keys(i).length;if(e.minProperties>a)return s.errors.minPropertiesError({minProperties:e.minProperties,length:a,pointer:l,schema:e,value:i})},multipleOf:(s,e,i,l)=>{if(isNaN(e.multipleOf)||typeof i!="number")return;const a=xp(i),c=xp(e.multipleOf);if(a>c)return s.errors.multipleOfError({multipleOf:e.multipleOf,value:i,pointer:l,schema:e});const u=Math.pow(10,c),f=Math.round(i*u),d=Math.round(e.multipleOf*u);if(f%d/u!==0)return s.errors.multipleOfError({multipleOf:e.multipleOf,value:i,pointer:l,schema:e})},not:(s,e,i,l)=>{const a=[];return s.validate(i,e.not,l).length===0&&a.push(s.errors.notError({value:i,not:e.not,pointer:l,schema:e})),a},oneOf:UE,pattern:(s,e,i,l)=>{if(new RegExp(e.pattern,"u").test(i)===!1)return s.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:i,schema:e,value:i,pointer:l})},patternProperties:(s,e,i,l)=>{const a=e.properties||{},c=e.patternProperties;if(lt(c)!=="object")return;const u=[],f=Object.keys(i),d=Object.keys(c).map(h=>({regex:new RegExp(h),patternSchema:c[h]}));return f.forEach(h=>{let m=!1;for(let p=0,y=d.length;p<y;p+=1)if(d[p].regex.test(h)){m=!0;const b=s.validate(i[h],d[p].patternSchema,`${l}/${h}`);b&&b.length>0&&u.push(...b)}a[h]||m===!1&&e.additionalProperties===!1&&u.push(s.errors.patternPropertiesError({key:h,pointer:l,schema:e,value:i,patterns:Object.keys(c).join(",")}))}),u},properties:(s,e,i,l)=>{const a=[],c=Object.keys(e.properties||{});for(let u=0;u<c.length;u+=1){const f=c[u];if(Ep(i,f)){const d=s.step(f,e,i,l),h=s.validate(i[f],d,`${l}/${f}`);a.push(...h)}}return a},propertiesRequired:(s,e,i,l)=>{const a=[],c=Object.keys(e.properties||{});for(let u=0;u<c.length;u+=1){const f=c[u];if(i[f]===void 0)a.push(s.errors.requiredPropertyError({key:f,pointer:l,schema:e,value:i}));else{const d=s.step(f,e,i,l),h=s.validate(i[f],d,`${l}/${f}`);a.push(...h)}}return a},required:(s,e,i,l)=>{if(Array.isArray(e.required)!==!1)return e.required.map(a=>{if(!Ep(i,a))return s.errors.requiredPropertyError({key:a,pointer:l,schema:e,value:i})})},requiredNotEmpty:(s,e,i,l)=>{if(Array.isArray(e.required)!==!1)return e.required.map(a=>{if(i[a]==null||i[a]==="")return s.errors.valueNotEmptyError({property:a,pointer:`${l}/${a}`,schema:e,value:i})})},uniqueItems:(s,e,i,l)=>{if((Array.isArray(i)&&e.uniqueItems)===!1)return;const a=[],c=[];return i.forEach((u,f)=>{for(let d=f+1;d<i.length;d+=1)Sp()(u,i[d])&&!a.includes(d)&&(c.push(s.errors.uniqueItemsError({pointer:`${l}/${d}`,duplicatePointer:`${l}/${f}`,arrayPointer:l,value:JSON.stringify(u),schema:e})),a.push(d))}),c}};function $u(s,e){return s==null||s.$ref==null?s:s.getRoot?s.getRoot().getRef(s):e.getRef(s)}function ir(s){if(s===void 0)return;const e={type:lt(s)};return e.type==="object"&&hi(s)&&(e.properties={},Object.keys(s).forEach(i=>e.properties[i]=ir(s[i]))),e.type==="array"&&Array.isArray(s)&&(s.length===1?e.items=ir(s[0]):e.items=s.map(ir)),e}const Uw={array:(s,e,i,l,a)=>{const c=l?.[e],u=lt(i.items);if(u==="object")return Km(s,i.items,c,`${a}/${e}`)||s.resolveRef(i.items);if(u==="array"){if(i.items[e]===!0)return ir(c);if(i.items[e]===!1)return s.errors.invalidDataError({key:e,value:c,pointer:a,schema:i});if(i.items[e])return s.resolveRef(i.items[e]);if(i.additionalItems===!1)return s.errors.additionalItemsError({key:e,value:c,pointer:a,schema:i});if(i.additionalItems===!0||i.additionalItems===void 0)return ir(c);if(lt(i.additionalItems)==="object")return i.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(i,null,2)} for ${JSON.stringify(l,null,2)}`)}return i.additionalItems!==!1&&c?ir(c):new Error(`Invalid array schema for ${e} at ${a}`)},object:(s,e,i,l,a)=>{var c;i=Km(s,i,l,a);const u=(c=i?.properties)===null||c===void 0?void 0:c[e];if(u!==void 0){if(u===!1)return s.errors.forbiddenPropertyError({property:e,value:l,pointer:a,schema:i});if(u===!0)return ir(l?.[e]);const h=s.resolveRef(u);if(Ln(h))return h;if(h&&Array.isArray(h.oneOf)){const m=s.resolveOneOf(l[e],h,`${a}/${e}`);for(const p in h)p!=="oneOf"&&m[p]===void 0&&(m[p]=h[p]);return m}if(h)return h}const{patternProperties:f}=i;if(lt(f)==="object"){let h;const m=Object.keys(f);for(let p=0,y=m.length;p<y;p+=1)if(h=new RegExp(m[p]),h.test(e))return f[m[p]]}const{additionalProperties:d}=i;return lt(d)==="object"?i.additionalProperties:l&&(d===void 0||d===!0)?ir(l[e]):s.errors.unknownPropertyError({property:e,value:l,pointer:`${a}`,schema:i})}};function ju(s,e,i,l,a="#"){var c;const u=lt(l);let f=(c=i.type)!==null&&c!==void 0?c:u;if(Array.isArray(f)){if(!f.includes(u))return s.errors.typeError({value:l,pointer:a,expected:i.type,received:u,schema:i});f=u}const d=Uw[f];if(d){const h=d(s,`${e}`,i,l,a);return h===void 0?s.errors.schemaWarning({pointer:a,value:l,schema:i,key:e}):h}return new Error(`Unsupported schema type ${i.type} for key ${e}`)}function Wu(s,e,i=s.rootSchema){var l;if(i.oneOf)return i.oneOf.map(c=>s.resolveRef(c));if(!((l=i.items)===null||l===void 0)&&l.oneOf)return i.items.oneOf.map(c=>s.resolveRef(c));const a=s.step(e,i,{},"#");return Ln(a)?a:[a]}const Hw={array:(s,e,i,l)=>s.typeKeywords.array.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),object:(s,e,i,l)=>s.typeKeywords.object.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),string:(s,e,i,l)=>s.typeKeywords.string.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),integer:(s,e,i,l)=>s.typeKeywords.number.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),number:(s,e,i,l)=>s.typeKeywords.number.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),boolean:(s,e,i,l)=>s.typeKeywords.boolean.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),null:(s,e,i,l)=>s.typeKeywords.null.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l))};function Kw(s,e){const i=lt(s);return i==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(s)||isNaN(s)?"integer":"number":i}function Vu(s,e,i=s.rootSchema,l="#"){if(i=s.resolveRef(i),lt(i)==="boolean")return i?[]:[s.errors.invalidDataError({pointer:l,schema:i,value:e})];if(Ln(i))return[i];if(i.const!==void 0)return Sp()(i.const,e)?[]:[s.errors.constError({pointer:l,schema:i,value:e,expected:i.const})];const a=Kw(e,i.type),c=i.type||a;return a!==c&&(!Array.isArray(c)||!c.includes(a))?[s.errors.typeError({pointer:l,schema:i,value:e,received:a,expected:c})]:s.validateType[a]==null?[s.errors.invalidTypeError({pointer:l,schema:i,value:e,receivedType:a})]:bo(s.validateType[a](s,i,e,l)).filter(Zl)}const Gw={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:Ap,validateType:Hw,validateFormat:Ru,errors:Iu,addRemoteSchema:Ou,compileSchema:ww,createSchemaOf:ir,each:Mu,eachSchema:Co,getChildSchemaSelection:Wu,getSchema:Lu,getTemplate:Nu,isValid:Bu,resolveAllOf:Au,resolveAnyOf:wu,resolveOneOf:yu,resolveRef:$u,step:ju,validate:Vu,templateDefaultOptions:Gi.templateDefaultOptions};class oj extends na{constructor(e,i={}){super(So(Gw,i),e)}}const wp="__compiled",Cp="__ref",Yw="getRef",Jw="getRoot",Xw=/(#|\/)+$/g;function Op(s,e,i=e,l=!1){if(e===!0||e===!1||e===void 0||e[wp]!==void 0)return e;const a={ids:{},remotes:s.remotes},c=JSON.stringify(e),u=JSON.parse(c);if(Object.defineProperty(u,wp,{enumerable:!1,value:!0}),Object.defineProperty(u,Yw,{enumerable:!1,value:Zr.bind(null,a,u)}),l===!1&&c.includes("$ref")===!1)return u;u!==i&&Object.defineProperty(u,"$defs",{enumerable:!0,value:Object.assign({},i.definitions,i.$defs,u.definitions,u.$defs)});const f={},d=()=>u;return Co(u,(h,m)=>{var p;if(h.$id){if(h.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(m)){const E=m.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),w=(0,Jr.get)(u,E);h.$id=(p=w.$id)!==null&&p!==void 0?p:h.$id}a.ids[h.$id.replace(Xw,"")]=m}m=`#${m}`.replace(/##+/,"#");const y=m.replace(/\/[^/]+$/,""),b=m.replace(/\/[^/]+\/[^/]+$/,""),x=f[y]||f[b],A=aa(x,h.$id);f[m]=A,a.ids[A]==null&&(a.ids[A]=m),h.$ref&&!h[Cp]&&(Object.defineProperty(h,Cp,{enumerable:!1,value:aa(A,h.$ref)}),Object.defineProperty(h,Jw,{enumerable:!1,value:d}))}),u}const kp={...Ap,contains:(s,e,i,l)=>{if(e.contains===!1)return s.errors.containsArrayError({pointer:l,value:i,schema:e});if(e.contains===!0)return Array.isArray(i)&&i.length===0?s.errors.containsAnyError({pointer:l,value:i,schema:e}):void 0;if(lt(e.contains)==="object"){for(let a=0;a<i.length;a+=1)if(s.isValid(i[a],e.contains))return;return s.errors.containsError({pointer:l,schema:e,value:i})}},exclusiveMaximum:(s,e,i,l)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=i)return s.errors.maximumError({maximum:e.exclusiveMaximum,length:i,pointer:l,schema:e,value:i})},exclusiveMinimum:(s,e,i,l)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=i)return s.errors.minimumError({minimum:e.exclusiveMinimum,length:i,pointer:l,schema:e,value:i})},if:PA,maximum:(s,e,i,l)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<i)return s.errors.maximumError({maximum:e.maximum,length:i,pointer:l,schema:e,value:i})},minimum:(s,e,i,l)=>{if(!isNaN(e.minimum)&&e.minimum>i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:l,schema:e,value:i})},patternProperties:(s,e,i,l)=>{const a=e.properties||{},c=e.patternProperties;if(lt(c)!=="object")return;const u=[],f=Object.keys(i),d=Object.keys(c).map(h=>({regex:new RegExp(h),patternSchema:c[h]}));return f.forEach(h=>{let m=!1;for(let p=0,y=d.length;p<y;p+=1)if(d[p].regex.test(h)){if(m=!0,d[p].patternSchema===!1){u.push(s.errors.patternPropertiesError({key:h,pointer:l,patterns:Object.keys(c).join(","),schema:e,value:i}));return}const b=s.validate(i[h],d[p].patternSchema,`${l}/${h}`);b&&b.length>0&&u.push(...b)}a[h]||m===!1&&e.additionalProperties===!1&&u.push(s.errors.patternPropertiesError({key:h,pointer:l,patterns:Object.keys(c).join(","),schema:e,value:i}))}),u},propertyNames:(s,e,i,l)=>{if(e.propertyNames===!1)return Object.keys(i).length===0?void 0:s.errors.invalidPropertyNameError({property:Object.keys(i),pointer:l,value:i,schema:e});if(e.propertyNames===!0||lt(e.propertyNames)!=="object")return;const a=[],c=Object.keys(i),u={...e.propertyNames,type:"string"};return c.forEach(f=>{const d=s.validate(f,u,`${l}/${f}`);d.length>0&&a.push(s.errors.invalidPropertyNameError({property:f,pointer:l,validationError:d[0],value:i[f],schema:e}))}),a}},Pp={array:(s,e,i,l)=>s.typeKeywords.array.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),object:(s,e,i,l)=>s.typeKeywords.object.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),string:(s,e,i,l)=>s.typeKeywords.string.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),integer:(s,e,i,l)=>s.typeKeywords.number.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),number:(s,e,i,l)=>s.typeKeywords.number.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),boolean:(s,e,i,l)=>s.typeKeywords.boolean.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),null:(s,e,i,l)=>s.typeKeywords.null.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l))},Zw={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["enum","exclusiveMaximum","exclusiveMinimum","format","maximum","minimum","multipleOf","not","oneOf","allOf","anyOf","if"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:kp,validateType:Pp,validateFormat:Ru,errors:Iu,addRemoteSchema:Ou,compileSchema:Op,createSchemaOf:ir,each:Mu,eachSchema:Co,getChildSchemaSelection:Wu,getSchema:Lu,getTemplate:Nu,isValid:Bu,resolveAllOf:Au,resolveAnyOf:wu,resolveOneOf:yu,resolveRef:$u,step:ju,validate:Vu,templateDefaultOptions:Gi.templateDefaultOptions};class cj extends na{constructor(e,i={}){super(So(Zw,i),e)}}const Tp={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:kp,validateType:Pp,validateFormat:Ru,errors:Iu,addRemoteSchema:Ou,compileSchema:Op,createSchemaOf:ir,each:Mu,eachSchema:Co,getChildSchemaSelection:Wu,getSchema:Lu,getTemplate:Nu,isValid:Bu,resolveAllOf:Au,resolveAnyOf:wu,resolveOneOf:yu,resolveRef:$u,step:ju,validate:Vu,templateDefaultOptions:Gi.templateDefaultOptions};class zu extends na{constructor(e,i={}){super(So(Tp,i),e)}}function Qw(s,e){if(s==null||s.$ref==null)return s;const i=e.getRef(s),l=Object.assign({},i,s);return delete l.$ref,Object.defineProperty(l,"__ref",{enumerable:!1,value:s.__ref}),Object.defineProperty(l,"getRoot",{enumerable:!1,value:s.getRoot}),l}const qw={...Tp,resolveOneOf:Ql,resolveRef:Qw};class uj extends na{constructor(e,i={}){super(So(qw,i),e)}}const fj={strings:Pm},{parse:Dp,stringify:Mp}=JSON,{keys:_w}=Object,Po=String,Ip="string",Rp={},ca="object",Lp=(s,e)=>e,eC=s=>s instanceof Po?Po(s):s,tC=(s,e)=>typeof e===Ip?new Po(e):e,Fp=(s,e,i,l)=>{const a=[];for(let c=_w(i),{length:u}=c,f=0;f<u;f++){const d=c[f],h=i[d];if(h instanceof Po){const m=s[h];typeof m===ca&&!e.has(m)?(e.add(m),i[d]=Rp,a.push({k:d,a:[s,e,m,l]})):i[d]=l.call(i,d,m)}else i[d]!==Rp&&(i[d]=l.call(i,d,h))}for(let{length:c}=a,u=0;u<c;u++){const{k:f,a:d}=a[u];i[f]=l.call(i,f,Fp.apply(null,d))}return i},Np=(s,e,i)=>{const l=Po(e.push(i)-1);return s.set(i,l),l},Bp=(s,e)=>{const i=Dp(s,tC).map(eC),l=i[0],a=e||Lp,c=typeof l===ca&&l?Fp(i,new Set,l,a):l;return a.call({"":c},"",c)},$p=(s,e,i)=>{const l=e&&typeof e===ca?(m,p)=>m===""||-1<e.indexOf(m)?p:void 0:e||Lp,a=new Map,c=[],u=[];let f=+Np(a,c,l.call({"":s},"",s)),d=!f;for(;f<c.length;)d=!0,u[f]=Mp(c[f++],h,i);return"["+u.join(",")+"]";function h(m,p){if(d)return d=!d,p;const y=l.call(this,m,p);switch(typeof y){case ca:if(y===null)return y;case Ip:return a.get(y)||Np(a,c,y)}return y}},dj=s=>Dp($p(s)),hj=s=>Bp(Mp(s));function Hn(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function qr(s,e){if(!Hn(s))return;const{properties:i,items:l,anyOf:a,oneOf:c,allOf:u,dependencies:f,then:d,else:h}=s;for(const m in s)s.hasOwnProperty(m)&&m.startsWith("ui:")&&(e[m]=s[m],delete s[m]);if(Hn(i))for(const m in i){if(!i.hasOwnProperty(m))continue;const p=i[m];if(Hn(p)){if(!Hn(e[m])){const y={};e[m]=y}qr(p,e[m])}}if(Hn(l)){const m={};e.items=m,qr(l,m)}if(Array.isArray(a))for(const m of a)Hn(m)&&qr(m,e);if(Array.isArray(c))for(const m of c)Hn(m)&&qr(m,e);if(Array.isArray(u))for(const m of u)Hn(m)&&qr(m,e);if(Hn(f))for(const m of Object.keys(f)){const p=f[m];Hn(p)&&qr(p,e)}Hn(d)&&qr(d,e),Hn(h)&&qr(h,e)}const Uu=s=>{const e={},i=Bp($p(s));return qr(i,e),{uiSchema:e,schema:i}},nC=()=>{const s={__errors:[],addError:e=>{s.__errors?.push(e)}};return s};function rC(s){return!!s&&"__errors"in s}function jp(s){if(!s)return!1;for(const e of Object.values(s)){if(rC(e)){if((e.__errors??[]).length>0)return!0;continue}if(jp(e))return!0}return!1}function iC(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}const sC=s=>"type"in s&&s.type==="error",Wp=(s,e,i)=>{async function l(a,c="#",u=a){const f=new zu(s),d={},h=async(m,p,y,b,x)=>{const A=e[m];if(A){const E=nC();try{await A(y,E,{...i,formData:a,schema:b,uiSchema:x})}catch(w){E.addError(w.message)}d[p]=E}};for(const[m,p]of Object.entries(u)){const y=`${c}/${m}`,b=f.getSchema({pointer:y,data:a});if(!b)continue;if(sC(b))throw new Error(b.message);const{schema:x,uiSchema:A}=Uu(b),E=b&&b.items,w=async(L,z,U)=>{await h(L["ui:field"],m,p,z,U)},k=async L=>{if("ui:field"in L){const{schema:z,uiSchema:U}=Uu(b.items);await w(L,z,U)}};if("ui:field"in b)await w(b,x,A);else if(E&&"ui:field"in b.items)await k(b.items);else if(E&&b.items.type==="object"){const L=b.items?.properties??[];for(const[,z]of Object.entries(L))await k(z)}else iC(p)&&(d[m]=await l(a,y,p))}return d}return async a=>await l(a)};var oC=S(67562),Vp=S(45250);function zp(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function lC(s){return s.split("/").filter(Boolean).map(i=>(0,Vp.startCase)(i)).join(" > ")}function aC(s,e,i){for(const l of e){const a=l.mergedSchema,c={};if(a.dependencies&&zp(a.dependencies))for(const d in a.dependencies)i.hasOwnProperty(d)&&(c[d]=i[d]);if(new zu(a).getSchema({pointer:`#/${s}`,data:c}))return l}return null}function Up(s,e,i,l){const c=new zu(i.mergedSchema).getSchema({pointer:`#/${s}`,data:l}),u=c?.["ui:backstage"]?.review?.name??c?.title??s;if(c){const f=c["ui:backstage"]?.review;if(f){if(f.mask)return[[u,f.mask]];if(f.show===!1)return[]}if(c["ui:widget"]==="password"||c["ui:field"]?.toLocaleLowerCase("en-us")==="secret")return[[u,"******"]];if(c.enum&&c.enumNames)return[[u,c.enumNames[c.enum.indexOf(e)]||e]];if(f?.explode!==!1&&zp(e))return Object.entries(e).flatMap(([d,h])=>Up(`${s}/${d}`,h,i,l))}return[[u,e]]}const cC=s=>{const e=Object.fromEntries(Object.entries(s.formState).flatMap(([l,a])=>{const c=aC(l,s.schemas,s.formState);return c?Up(l,a,c,s.formState):[[l,a]]}).filter(l=>l.length>0)),i={titleFormat:lC};return g.createElement(oC.t,{metadata:e,options:i})};var uC=S(45810),Hp=S.n(uC);const fC=s=>(0,g.useState)(()=>{if(s)return s;const e=Hp().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(e.formData)}catch{return{}}});var Kp=S(86702);const dC=s=>{const e=(0,Nt.gf)(Kp.B),l=s.steps.map(({title:a,description:c,schema:u})=>({title:a,description:c,mergedSchema:u,...Uu(u)})).filter(a=>{const c=a.uiSchema["ui:backstage"]?.featureFlag;return c?e.isActive(c):!0}).map(a=>{const c={...a,schema:{...a.schema,title:void 0}};return(a.schema?.properties||!a.schema?.dependencies)&&(c.schema.properties=Object.fromEntries(Object.entries(a.schema?.properties??{}).filter(([u])=>{const f=a.uiSchema[u]?.["ui:backstage"]?.featureFlag;return f?e.isActive(f):!0}))),c});return{presentation:s.presentation,steps:l}};var hC=S(46108),Hu=S.n(hC);function kt(s){return typeof File<"u"&&s instanceof File||typeof Date<"u"&&s instanceof Date?!1:typeof s=="object"&&s!==null&&!Array.isArray(s)}function mC(s){return s.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),kt(s.additionalItems)}function Gp(s){if(s==="")return;if(s===null)return null;if(/\.$/.test(s)||/\.0$/.test(s)||/\.\d*0$/.test(s))return s;const e=Number(s);return typeof e=="number"&&!Number.isNaN(e)?e:s}const ks="__additional_property",Ku="additionalProperties",To="allOf",br="anyOf",Yp="const",pC="default",mj="definitions",ua="dependencies",gC="enum",sr="__errors",gi="$id",yC="if",yi="items",vC="_$junk_option_schema_id$_",fa="$name",Kn="oneOf",Lt="properties",bC="required",da="submitButtonOptions",zt="$ref",pj="__rjsf_additionalProperties",Gu="__rjsf_additionalProperties",Jp="__rjsf_rootSchema",xC="ui:field",Yu="ui:widget",Do="ui:options",SC="ui:globalOptions";function et(s={},e={}){return Object.keys(s).filter(i=>i.indexOf("ui:")===0).reduce((i,l)=>{const a=s[l];return l===Yu&&kt(a)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),i):l===Do&&kt(a)?{...i,...a}:{...i,[l.substring(3)]:a}},{...e})}function Xp(s,e={},i){if(!s.additionalProperties)return!1;const{expandable:l=!0}=et(e);return l===!1?l:s.maxProperties!==void 0&&i?Object.keys(i).length<s.maxProperties:!0}var EC=S(48360),Ju=S.n(EC);function Xu(s){const e={[sr]:[],addError(i){this[sr].push(i)}};if(Array.isArray(s))return s.reduce((i,l,a)=>({...i,[a]:Xu(l)}),e);if(Ju()(s)){const i=s;return Object.keys(i).reduce((l,a)=>({...l,[a]:Xu(i[a])}),e)}return e}var AC=S(40575),wC=S.n(AC);function mn(s,e){return wC()(s,e,(i,l)=>{if(typeof i=="function"&&typeof l=="function")return!0})}var CC=S(46123),Le=S.n(CC),OC=S(3514),vi=S.n(OC),kC=S(45838),PC=S(3326),ha=S.n(PC);function Zu(s,e){const i=e[s];return[ha()(e,[s]),i]}function Zp(s,e={},i=[]){const l=s||"";let a;if(l.startsWith("#"))a=decodeURIComponent(l.substring(1));else throw new Error(`Could not find a definition for ${s}.`);const c=kC.get(e,a);if(c===void 0)throw new Error(`Could not find a definition for ${s}.`);const u=c[zt];if(u){if(i.includes(u)){if(i.length===1)throw new Error(`Definition for ${s} is a circular reference`);const[m,...p]=i,y=[...p,l,m].join(" -> ");throw new Error(`Definition for ${m} contains a circular reference through ${y}`)}const[f,d]=Zu(zt,c),h=Zp(d,e,[...i,l]);return Object.keys(f).length>0?{...f,...h}:h}return c}function Qp(s,e={}){return Zp(s,e,[])}var TC=S(52103),pn=S.n(TC),DC=S(60986),qp=S.n(DC),MC=S(41580),or=S.n(MC),IC=S(8138),Qu=S.n(IC),RC=S(90769),LC=S.n(RC),FC=S(55009),_p=S.n(FC);function eg(s,e,i){var l;if(s&&i){const a=Le()(s,i);if(a===void 0)return;for(let c=0;c<e.length;c++){const u=e[c],f=Le()(u,[Lt,i],{});if(!(f.type==="object"||f.type==="array")&&(f.const===a||!((l=f.enum)===null||l===void 0)&&l.includes(a)))return c}}}function tg(s,e,i,l,a){if(e===void 0)return 0;const c=eg(e,i,a);if(qp()(c))return c;for(let u=0;u<i.length;u++){const f=i[u];if(a&&pn()(f,[Lt,a])){const d=Le()(e,a),h=Le()(f,[Lt,a],{});if(s.isValid(h,d,l))return u}else if(f[Lt]){const d={anyOf:Object.keys(f[Lt]).map(m=>({required:[m]}))};let h;if(f.anyOf){const{...m}=f;m.allOf?m.allOf=m.allOf.slice():m.allOf=[],m.allOf.push(d),h=m}else h=Object.assign({},f,d);if(delete h.required,s.isValid(h,e,l))return u}else if(s.isValid(f,e,l))return u}return 0}function qu(s,e,i,l,a){return tg(s,e,i,l,a)}var NC=S(46343),Ji=S.n(NC),BC=S(41263),gn=S.n(BC),$C=S(2011),jC=S.n($C),WC=S(82451),VC=S.n(WC),zC=S(53435),UC=S.n(zC),HC=S(82438),KC=S.n(HC),GC=S(587),YC=S.n(GC);function Ps(s){let e;const i=Le()(s,"discriminator.propertyName",void 0);return Qu()(i)?e=i:i!==void 0&&console.warn(`Expecting discriminator to be a string, got "${typeof i}" instead`),e}function Mo(s){return Array.isArray(s)?"array":typeof s=="string"?"string":s==null?"null":typeof s=="boolean"?"boolean":isNaN(s)?typeof s=="object"?"object":"string":"number"}var JC=S(55620),XC=S.n(JC);function bi(s){let{type:e}=s;return!e&&s.const?Mo(s.const):!e&&s.enum?"string":!e&&(s.properties||s.additionalProperties)?"object":(Array.isArray(e)&&(e.length===2&&e.includes("null")?e=e.find(i=>i!=="null"):e=e[0]),e)}function _r(s,e){const i=Object.assign({},s);return Object.keys(e).reduce((l,a)=>{const c=s?s[a]:{},u=e[a];return s&&a in s&&kt(u)?l[a]=_r(c,u):s&&e&&(bi(s)==="object"||bi(e)==="object")&&a===bC&&Array.isArray(c)&&Array.isArray(u)?l[a]=XC()(c,u):l[a]=u,l},i)}function Fn(s,e,i={},l){return xr(s,e,i,l)[0]}function ZC(s,e,i,l,a,c){const{if:u,then:f,else:d,...h}=e,m=s.isValid(u,c||{},i);let p=[h],y=[];if(l)f&&typeof f!="boolean"&&(y=y.concat(xr(s,f,i,c,l,a))),d&&typeof d!="boolean"&&(y=y.concat(xr(s,d,i,c,l,a)));else{const b=m?f:d;b&&typeof b!="boolean"&&(y=y.concat(xr(s,b,i,c,l,a)))}return y.length&&(p=y.map(b=>_r(h,b))),p.flatMap(b=>xr(s,b,i,c,l,a))}function ng(s){return s.reduce((i,l)=>l.length>1?l.flatMap(a=>_p()(i.length,c=>[...i[c]].concat(a))):(i.forEach(a=>a.push(l[0])),i),[[]])}function QC(s,e,i,l,a,c){const u=rg(s,e,i,l,a,c);if(u.length>1||u[0]!==e)return u;if(ua in e)return ig(s,e,i,l,a,c).flatMap(d=>xr(s,d,i,c,l,a));if(To in e&&Array.isArray(e.allOf)){const f=e.allOf.map(h=>xr(s,h,i,c,l,a));return ng(f).map(h=>({...e,allOf:h}))}return[e]}function rg(s,e,i,l,a,c){const u=Io(e,i,a);return u!==e?xr(s,u,i,c,l,a):[e]}function Io(s,e,i){if(!kt(s))return s;let l=s;if(zt in l){const{$ref:a,...c}=l;if(i.includes(a))return l;i.push(a),l={...Qp(a,e),...c}}if(Lt in l){const a=[],c=jC()(l[Lt],(u,f,d)=>{const h=[...i];u[d]=Io(f,e,h),a.push(h)},{});VC()(i,KC()(UC()(a))),l={...l,[Lt]:c}}return yi in l&&!Array.isArray(l.items)&&typeof l.items!="boolean"&&(l={...l,items:Io(l.items,e,i)}),Ji()(s,l)?s:l}function qC(s,e,i,l){const a={...e,properties:{...e.properties}},c=l&&kt(l)?l:{};return Object.keys(c).forEach(u=>{if(u in a.properties)return;let f={};typeof a.additionalProperties!="boolean"?zt in a.additionalProperties?f=Fn(s,{$ref:Le()(a.additionalProperties,[zt])},i,c):"type"in a.additionalProperties?f={...a.additionalProperties}:br in a.additionalProperties||Kn in a.additionalProperties?f={type:"object",...a.additionalProperties}:f={type:Mo(Le()(c,[u]))}:f={type:Mo(Le()(c,[u]))},a.properties[u]=f,gn()(a.properties,[u,ks],!0)}),a}function xr(s,e,i,l,a=!1,c=[]){return kt(e)?QC(s,e,i,a,c,l).flatMap(f=>{var d;let h=f;if(yC in h)return ZC(s,h,i,a,c,l);if(To in h){if(a){const{allOf:p,...y}=h;return[...p,y]}try{const p=[],y=[];(d=h.allOf)===null||d===void 0||d.forEach(b=>{typeof b=="object"&&b.contains?p.push(b):y.push(b)}),p.length&&(h={...h,allOf:y}),h=YC()(h,{deep:!1}),p.length&&(h.allOf=p)}catch(p){console.warn(`could not merge subschemas in allOf:
`,p);const{allOf:y,...b}=h;return b}}return Ku in h&&h.additionalProperties!==!1?qC(s,h,i,l):h}):[{}]}function _C(s,e,i,l,a){let c;const{oneOf:u,anyOf:f,...d}=e;if(Array.isArray(u)?c=u:Array.isArray(f)&&(c=f),c){const h=a===void 0&&l?{}:a,m=Ps(e);c=c.map(y=>Io(y,i,[]));const p=qu(s,h,c,i,m);if(l)return c.map(y=>_r(d,y));e=_r(d,c[p])}return[e]}function ig(s,e,i,l,a,c){const{dependencies:u,...f}=e;return _C(s,f,i,l,c).flatMap(h=>sg(s,u,h,i,l,a,c))}function sg(s,e,i,l,a,c,u){let f=[i];for(const d in e){if(!a&&Le()(u,[d])===void 0||i.properties&&!(d in i.properties))continue;const[h,m]=Zu(d,e);return Array.isArray(m)?f[0]=eO(i,m):kt(m)&&(f=tO(s,i,l,d,m,a,c,u)),f.flatMap(p=>sg(s,h,p,l,a,c,u))}return f}function eO(s,e){if(!e)return s;const i=Array.isArray(s.required)?Array.from(new Set([...s.required,...e])):e;return{...s,required:i}}function tO(s,e,i,l,a,c,u,f){return xr(s,a,i,f,c,u).flatMap(h=>{const{oneOf:m,...p}=h;if(e=_r(e,p),m===void 0)return e;const y=m.map(x=>typeof x=="boolean"||!(zt in x)?[x]:rg(s,x,i,c,u,f));return ng(y).flatMap(x=>nO(s,e,i,l,x,c,u,f))})}function nO(s,e,i,l,a,c,u,f){const d=a.filter(h=>{if(typeof h=="boolean"||!h||!h.properties)return!1;const{[l]:m}=h.properties;if(m){const p={type:"object",properties:{[l]:m}};return s.isValid(p,f,i)||c}return!1});return!c&&d.length!==1?(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[e]):d.flatMap(h=>{const m=h,[p]=Zu(l,m.properties),y={...m,properties:p};return xr(s,y,i,f,c,u).map(x=>_r(e,x))})}const rO={type:"object",$id:vC,properties:{__not_really_there__:{type:"number"}}};function _u(s,e,i,l={}){let a=0;return i&&(or()(i.properties)?a+=LC()(i.properties,(c,u,f)=>{const d=Le()(l,f);if(typeof u=="boolean")return c;if(pn()(u,zt)){const h=Fn(s,u,e,d);return c+_u(s,e,h,d||{})}if((pn()(u,Kn)||pn()(u,br))&&d){const h=pn()(u,Kn)?Kn:br,m=Ps(u);return c+Ro(s,e,d,Le()(u,h),-1,m)}if(u.type==="object")return c+_u(s,e,u,d||{});if(u.type===Mo(d)){let h=c+1;return u.default?h+=d===u.default?1:-1:u.const&&(h+=d===u.const?1:-1),h}return c},0):Qu()(i.type)&&i.type===Mo(l)&&(a+=1)),a}function Ro(s,e,i,l,a=-1,c){const u=l.map(p=>Io(p,e,[])),f=eg(i,l,c);if(qp()(f))return f;const d=u.reduce((p,y,b)=>(qu(s,i,[rO,y],e,c)===1&&p.push(b),p),[]);if(d.length===1)return d[0];d.length||_p()(u.length,p=>d.push(p));const h=new Set,{bestIndex:m}=d.reduce((p,y)=>{const{bestScore:b}=p,x=u[y],A=_u(s,e,x,i);return h.add(A),A>b?{bestIndex:y,bestScore:A}:p},{bestIndex:a,bestScore:0});return h.size===1&&a>=0?a:m}function ef(s){return Array.isArray(s.items)&&s.items.length>0&&s.items.every(e=>kt(e))}function ma(s,e,i=!1){if(Array.isArray(e)){const l=Array.isArray(s)?s:[],a=e.map((c,u)=>l[u]?ma(l[u],c,i):c);return i&&a.length<l.length&&a.push(...l.slice(a.length)),a}if(kt(e)){const l=Object.assign({},s);return Object.keys(e).reduce((a,c)=>(a[c]=ma(s?Le()(s,c):{},Le()(e,c),i),a),l)}return e}function xi(s,e,i=!1){return Object.keys(e).reduce((l,a)=>{const c=s?s[a]:{},u=e[a];if(s&&a in s&&kt(u))l[a]=xi(c,u,i);else if(i&&Array.isArray(c)&&Array.isArray(u)){let f=u;i==="preventDuplicates"&&(f=u.reduce((d,h)=>(c.includes(h)||d.push(h),d),[])),l[a]=c.concat(f)}else l[a]=u;return l},Object.assign({},s))}function iO(s){return Array.isArray(s.enum)&&s.enum.length===1||Yp in s}function og(s,e,i={}){const l=Fn(s,e,i,void 0),a=l.oneOf||l.anyOf;return Array.isArray(l.enum)?!0:Array.isArray(a)?a.every(c=>typeof c!="boolean"&&iO(c)):!1}function tf(s,e,i){return!e.uniqueItems||!e.items||typeof e.items=="boolean"?!1:og(s,e.items,i)}var Ts;(function(s){s[s.Ignore=0]="Ignore",s[s.Invert=1]="Invert",s[s.Fallback=2]="Fallback"})(Ts||(Ts={}));function nf(s,e=Ts.Ignore,i=-1){if(i>=0){if(Array.isArray(s.items)&&i<s.items.length){const l=s.items[i];if(typeof l!="boolean")return l}}else if(s.items&&!Array.isArray(s.items)&&typeof s.items!="boolean")return s.items;return e!==Ts.Ignore&&kt(s.additionalItems)?s.additionalItems:{}}function lg(s,e,i,l,a,c=[],u={}){const{emptyObjectFields:f="populateAllDefaults"}=u;if(l)s[e]=i;else if(f!=="skipDefaults")if(kt(i)){const d=a===void 0?c.includes(e):a;f==="skipEmptyDefaults"?vi()(i)||(s[e]=i):(!vi()(i)||c.includes(e))&&(d||f!=="populateRequiredDefaults")&&(s[e]=i)}else i!==void 0&&(f==="populateAllDefaults"||f==="skipEmptyDefaults"||c.includes(e))&&(s[e]=i)}function Si(s,e,i={}){const{parentDefaults:l,rawFormData:a,rootSchema:c={},includeUndefinedValues:u=!1,_recurseList:f=[],experimental_defaultFormStateBehavior:d=void 0,required:h}=i,m=kt(a)?a:{},p=kt(e)?e:{};let y=l,b=null,x=f;if(kt(y)&&kt(p.default))y=xi(y,p.default);else if(pC in p)y=p.default;else if(zt in p){const E=p[zt];f.includes(E)||(x=f.concat(E),b=Qp(E,c))}else if(ua in p){const E={...m,...ag(s,p,i,y)};b=ig(s,p,c,!1,[],E)[0]}else if(ef(p))y=p.items.map((E,w)=>Si(s,E,{rootSchema:c,includeUndefinedValues:u,_recurseList:f,experimental_defaultFormStateBehavior:d,parentDefaults:Array.isArray(l)?l[w]:void 0,rawFormData:m,required:h}));else if(Kn in p){const{oneOf:E,...w}=p;if(E.length===0)return;const k=Ps(p);b=E[Ro(s,c,vi()(m)?void 0:m,E,0,k)],b=_r(w,b)}else if(br in p){const{anyOf:E,...w}=p;if(E.length===0)return;const k=Ps(p);b=E[Ro(s,c,vi()(m)?void 0:m,E,0,k)],b=_r(w,b)}if(b)return Si(s,b,{rootSchema:c,includeUndefinedValues:u,_recurseList:x,experimental_defaultFormStateBehavior:d,parentDefaults:y,rawFormData:m,required:h});y===void 0&&(y=p.default);const A=ag(s,p,i,y);return A??y}function sO(s,e,{rawFormData:i,rootSchema:l={},includeUndefinedValues:a=!1,_recurseList:c=[],experimental_defaultFormStateBehavior:u=void 0,required:f}={},d){{const h=kt(i)?i:{},m=e,p=u?.allOf==="populateDefaults"&&To in m?Fn(s,m,l,h):m,y=Object.keys(p.properties||{}).reduce((b,x)=>{var A;const E=Si(s,Le()(p,[Lt,x]),{rootSchema:l,_recurseList:c,experimental_defaultFormStateBehavior:u,includeUndefinedValues:a===!0,parentDefaults:Le()(d,[x]),rawFormData:Le()(h,[x]),required:(A=p.required)===null||A===void 0?void 0:A.includes(x)});return lg(b,x,E,a,f,p.required,u),b},{});if(p.additionalProperties){const b=kt(p.additionalProperties)?p.additionalProperties:{},x=new Set;kt(d)&&Object.keys(d).filter(E=>!p.properties||!p.properties[E]).forEach(E=>x.add(E));const A=[];Object.keys(h).filter(E=>!p.properties||!p.properties[E]).forEach(E=>{x.add(E),A.push(E)}),x.forEach(E=>{var w;const k=Si(s,b,{rootSchema:l,_recurseList:c,experimental_defaultFormStateBehavior:u,includeUndefinedValues:a===!0,parentDefaults:Le()(d,[E]),rawFormData:Le()(h,[E]),required:(w=p.required)===null||w===void 0?void 0:w.includes(E)});lg(y,E,k,a,f,A)})}return y}}function oO(s,e,{rawFormData:i,rootSchema:l={},_recurseList:a=[],experimental_defaultFormStateBehavior:c=void 0,required:u}={},f){var d,h,m,p;const y=e,b=((d=c?.arrayMinItems)===null||d===void 0?void 0:d.populate)==="never",x=((h=c?.arrayMinItems)===null||h===void 0?void 0:h.populate)==="requiredOnly",A=c?.emptyObjectFields==="skipEmptyDefaults",E=(p=(m=c?.arrayMinItems)===null||m===void 0?void 0:m.computeSkipPopulate)!==null&&p!==void 0?p:()=>!1,w=A?void 0:[];if(Array.isArray(f)&&(f=f.map((ee,oe)=>{const ue=nf(y,Ts.Fallback,oe);return Si(s,ue,{rootSchema:l,_recurseList:a,experimental_defaultFormStateBehavior:c,parentDefaults:ee,required:u})})),Array.isArray(i)){const ee=nf(y);b?f=i:f=i.map((oe,ue)=>Si(s,ee,{rootSchema:l,_recurseList:a,experimental_defaultFormStateBehavior:c,rawFormData:oe,parentDefaults:Le()(f,[ue]),required:u}))}if(b)return f??w;if(x&&!u)return f||void 0;const k=Array.isArray(f)?f.length:0;if(!y.minItems||tf(s,y,l)||E(s,y,l)||y.minItems<=k)return f||w;const L=f||[],z=nf(y,Ts.Invert),U=z.default,X=new Array(y.minItems-k).fill(Si(s,z,{parentDefaults:U,rootSchema:l,_recurseList:a,experimental_defaultFormStateBehavior:c,required:u}));return L.concat(X)}function ag(s,e,i={},l){switch(bi(e)){case"object":return sO(s,e,i,l);case"array":return oO(s,e,i,l)}}function cg(s,e,i,l,a=!1,c){if(!kt(e))throw new Error("Invalid schema: "+e);const u=Fn(s,e,l,i),f=Si(s,u,{rootSchema:l,includeUndefinedValues:a,experimental_defaultFormStateBehavior:c,rawFormData:i});if(i==null||typeof i=="number"&&isNaN(i))return f;const{mergeExtraDefaults:d}=c?.arrayMinItems||{};return kt(i)||Array.isArray(i)?ma(f,i,d):i}function ug(s={}){return"widget"in et(s)&&et(s).widget!=="hidden"}function fg(s,e,i={},l){if(i[Yu]==="files")return!0;if(e.items){const a=Fn(s,e.items,l);return a.type==="string"&&a.format==="data-url"}return!1}function lO(s,e,i={},l,a){const c=et(i,a),{label:u=!0}=c;let f=!!u;const d=bi(e);return d==="array"&&(f=tf(s,e,l)||fg(s,e,i,l)||ug(i)),d==="object"&&(f=!1),d==="boolean"&&!i[Yu]&&(f=!1),i[xC]&&(f=!1),f}function aO(s,e,i){if(!i)return e;const{errors:l,errorSchema:a}=e;let c=s.toErrorList(i),u=i;return vi()(a)||(u=xi(a,i,!0),c=[...l].concat(c)),{errorSchema:u,errors:c}}const Ds=Symbol("no Value");function rf(s,e,i,l,a={}){let c;if(pn()(i,Lt)){const u={};if(pn()(l,Lt)){const h=Le()(l,Lt,{});Object.keys(h).forEach(m=>{pn()(a,m)&&(u[m]=void 0)})}const f=Object.keys(Le()(i,Lt,{})),d={};f.forEach(h=>{const m=Le()(a,h);let p=Le()(l,[Lt,h],{}),y=Le()(i,[Lt,h],{});pn()(p,zt)&&(p=Fn(s,p,e,m)),pn()(y,zt)&&(y=Fn(s,y,e,m));const b=Le()(p,"type"),x=Le()(y,"type");if(!b||b===x)if(pn()(u,h)&&delete u[h],x==="object"||x==="array"&&Array.isArray(m)){const A=rf(s,e,y,p,m);(A!==void 0||x==="array")&&(d[h]=A)}else{const A=Le()(y,"default",Ds),E=Le()(p,"default",Ds);A!==Ds&&A!==m&&(E===m?u[h]=A:Le()(y,"readOnly")===!0&&(u[h]=void 0));const w=Le()(y,"const",Ds),k=Le()(p,"const",Ds);w!==Ds&&w!==m&&(u[h]=k===m?w:void 0)}}),c={...typeof a=="string"||Array.isArray(a)?void 0:a,...u,...d}}else if(Le()(l,"type")==="array"&&Le()(i,"type")==="array"&&Array.isArray(a)){let u=Le()(l,"items"),f=Le()(i,"items");if(typeof u=="object"&&typeof f=="object"&&!Array.isArray(u)&&!Array.isArray(f)){pn()(u,zt)&&(u=Fn(s,u,e,a)),pn()(f,zt)&&(f=Fn(s,f,e,a));const d=Le()(u,"type"),h=Le()(f,"type");if(!d||d===h){const m=Le()(i,"maxItems",-1);h==="object"?c=a.reduce((p,y)=>{const b=rf(s,e,f,u,y);return b!==void 0&&(m<0||p.length<m)&&p.push(b),p},[]):c=m>0&&a.length>m?a.slice(0,m):a}}else typeof u=="boolean"&&typeof f=="boolean"&&u===f&&(c=a)}return c}function pa(s,e,i,l,a,c,u,f=[]){if(zt in e||ua in e||To in e){const m=Fn(s,e,c,u);if(f.findIndex(y=>Ji()(y,m))===-1)return pa(s,m,i,l,a,c,u,f.concat(m))}if(yi in e&&!Le()(e,[yi,zt]))return pa(s,Le()(e,yi),i,l,a,c,u,f);const h={$id:a||i};if(bi(e)==="object"&&Lt in e)for(const m in e.properties){const p=Le()(e,[Lt,m]),y=h[gi]+l+m;h[m]=pa(s,kt(p)?p:{},i,l,y,c,Le()(u,[m]),f)}return h}function cO(s,e,i,l,a,c="root",u="_"){return pa(s,e,c,u,i,l,a)}function Xi(s,e,i,l,a,c=[]){if(zt in e||ua in e||To in e){const f=Fn(s,e,l,a);if(c.findIndex(h=>Ji()(h,f))===-1)return Xi(s,f,i,l,a,c.concat(f))}let u={[fa]:i.replace(/^\./,"")};if(Kn in e||br in e){const f=Kn in e?e.oneOf:e.anyOf,d=Ps(e),h=Ro(s,l,a,f,0,d),m=f[h];u={...u,...Xi(s,m,i,l,a,c)}}if(Ku in e&&e[Ku]!==!1&&gn()(u,Gu,!0),yi in e&&Array.isArray(a)){const{items:f,additionalItems:d}=e;Array.isArray(f)?a.forEach((h,m)=>{f[m]?u[m]=Xi(s,f[m],`${i}.${m}`,l,h,c):d?u[m]=Xi(s,d,`${i}.${m}`,l,h,c):console.warn(`Unable to generate path schema for "${i}.${m}". No schema defined for it`)}):a.forEach((h,m)=>{u[m]=Xi(s,f,`${i}.${m}`,l,h,c)})}else if(Lt in e)for(const f in e.properties){const d=Le()(e,[Lt,f]);u[f]=Xi(s,d,`${i}.${f}`,l,Le()(a,[f]),c)}return u}function uO(s,e,i="",l,a){return Xi(s,e,i,l,a)}class fO{constructor(e,i,l){this.rootSchema=i,this.validator=e,this.experimental_defaultFormStateBehavior=l}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,i,l={}){return!e||!i?!1:this.validator!==e||!mn(this.rootSchema,i)||!mn(this.experimental_defaultFormStateBehavior,l)}getDefaultFormState(e,i,l=!1){return cg(this.validator,e,i,this.rootSchema,l,this.experimental_defaultFormStateBehavior)}getDisplayLabel(e,i,l){return lO(this.validator,e,i,this.rootSchema,l)}getClosestMatchingOption(e,i,l,a){return Ro(this.validator,this.rootSchema,e,i,l,a)}getFirstMatchingOption(e,i,l){return qu(this.validator,e,i,this.rootSchema,l)}getMatchingOption(e,i,l){return tg(this.validator,e,i,this.rootSchema,l)}isFilesArray(e,i){return fg(this.validator,e,i,this.rootSchema)}isMultiSelect(e){return tf(this.validator,e,this.rootSchema)}isSelect(e){return og(this.validator,e,this.rootSchema)}mergeValidationData(e,i){return aO(this.validator,e,i)}retrieveSchema(e,i){return Fn(this.validator,e,this.rootSchema,i)}sanitizeDataForNewSchema(e,i,l){return rf(this.validator,this.rootSchema,e,i,l)}toIdSchema(e,i,l,a="root",c="_"){return cO(this.validator,e,i,this.rootSchema,l,a,c)}toPathSchema(e,i,l){return uO(this.validator,e,i,this.rootSchema,l)}}function dO(s,e,i={}){return new fO(s,e,i)}function hO(s){var e;if(s.indexOf("data:")===-1)throw new Error("File is invalid: URI must be a dataURI");const l=s.slice(5).split(";base64,");if(l.length!==2)throw new Error("File is invalid: dataURI must be base64");const[a,c]=l,[u,...f]=a.split(";"),d=u||"",h=decodeURI(((e=f.map(m=>m.split("=")).find(([m])=>m==="name"))===null||e===void 0?void 0:e[1])||"unknown");try{const m=atob(c),p=new Array(m.length);for(let b=0;b<m.length;b++)p[b]=m.charCodeAt(b);return{blob:new window.Blob([new Uint8Array(p)],{type:d}),name:h}}catch(m){throw new Error("File is invalid: "+m.message)}}function Ei(s,e){let i=String(s);for(;i.length<e;)i="0"+i;return i}function dg(s,e){if(s<=0&&e<=0)s=new Date().getFullYear()+s,e=new Date().getFullYear()+e;else if(s<0||e<0)throw new Error(`Both start (${s}) and stop (${e}) must both be <= 0 or > 0, got one of each`);if(s>e)return dg(e,s).reverse();const i=[];for(let l=s;l<=e;l++)i.push({value:l,label:Ei(l,2)});return i}function mO(s,e){let i=s;if(Array.isArray(e)){const l=i.split(/(%\d)/);e.forEach((a,c)=>{const u=l.findIndex(f=>f===`%${c+1}`);u>=0&&(l[u]=a)}),i=l.join("")}return i}function pO(s,e){return mO(s,e)}function Jt(s,e=[],i){if(Array.isArray(s))return s.map(c=>Jt(c,e)).filter(c=>c!==i);const l=s===""||s===null?-1:Number(s),a=e[l];return a?a.value:i}function hg(s,e,i=[]){const l=Jt(s,i);return Array.isArray(e)?e.filter(a=>!Ji()(a,l)):Ji()(l,e)?void 0:e}function ga(s,e){return Array.isArray(e)?e.some(i=>Ji()(i,s)):Ji()(e,s)}function sf(s,e=[],i=!1){const l=e.map((a,c)=>ga(a.value,s)?String(c):void 0).filter(a=>typeof a<"u");return i?l:l[0]}var gO=S(3668),mg=S.n(gO);function pg(s,e,i=[]){const l=Jt(s,i);if(!mg()(l)){const a=i.findIndex(f=>l===f.value),c=i.map(({value:f})=>f);return e.slice(0,a).concat(l,e.slice(a)).sort((f,d)=>+(c.indexOf(f)>c.indexOf(d)))}return e}var yO=S(92551),vO=S.n(yO);class bO{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let l=Array.isArray(e)&&e.length>0||typeof e=="string"?Le()(this.errorSchema,e):this.errorSchema;return!l&&e&&(l={},vO()(this.errorSchema,e,l,Object)),l}resetAllErrors(e){return this.errorSchema=e?Hu()(e):{},this}addErrors(e,i){const l=this.getOrCreateErrorBlock(i);let a=Le()(l,sr);return Array.isArray(a)||(a=[],l[sr]=a),Array.isArray(e)?a.push(...e):a.push(e),this}setErrors(e,i){const l=this.getOrCreateErrorBlock(i),a=Array.isArray(e)?[...e]:[e];return gn()(l,sr,a),this}clearErrors(e){const i=this.getOrCreateErrorBlock(e);return gn()(i,sr,[]),this}}function xO(s,e,i=[1900,new Date().getFullYear()+2],l="YMD"){const{day:a,month:c,year:u,hour:f,minute:d,second:h}=s,m={type:"day",range:[1,31],value:a},p={type:"month",range:[1,12],value:c},y={type:"year",range:i,value:u},b=[];switch(l){case"MDY":b.push(p,m,y);break;case"DMY":b.push(m,p,y);break;case"YMD":default:b.push(y,p,m)}return e&&b.push({type:"hour",range:[0,23],value:f},{type:"minute",range:[0,59],value:d},{type:"second",range:[0,59],value:h}),b}function gg(s){const e={};return s.multipleOf&&(e.step=s.multipleOf),(s.minimum||s.minimum===0)&&(e.min=s.minimum),(s.maximum||s.maximum===0)&&(e.max=s.maximum),e}function yg(s,e,i={},l=!0){const a={type:e||"text",...gg(s)};return i.inputType?a.type=i.inputType:e||(s.type==="number"?(a.type="number",l&&a.step===void 0&&(a.step="any")):s.type==="integer"&&(a.type="number",a.step===void 0&&(a.step=1))),i.autocomplete&&(a.autoComplete=i.autocomplete),a}const vg={props:{disabled:!1},submitText:"Submit",norender:!1};function bg(s={}){const e=et(s);if(e&&e[da]){const i=e[da];return{...vg,...i}}return vg}function Qe(s,e,i={}){const{templates:l}=e;return s==="ButtonTemplates"?l[s]:i[s]||l[s]}var $=S(31085),xg=S(524);const of={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function SO(s){let e=Le()(s,"MergedWidget");if(!e){const i=s.defaultProps&&s.defaultProps.options||{};e=({options:l,...a})=>(0,$.jsx)(s,{options:{...i,...l},...a}),gn()(s,"MergedWidget",e)}return e}function ei(s,e,i={}){const l=bi(s);if(typeof e=="function"||e&&xg.isForwardRef((0,g.createElement)(e))||xg.isMemo(e))return SO(e);if(typeof e!="string")throw new Error(`Unsupported widget definition: ${typeof e}`);if(e in i){const a=i[e];return ei(s,a,i)}if(typeof l=="string"){if(!(l in of))throw new Error(`No widget for type '${l}'`);if(e in of[l]){const a=i[of[l][e]];return ei(s,a,i)}}throw new Error(`No widget '${e}' for type '${l}'`)}function EO(s){let e=0;for(let i=0;i<s.length;i+=1){const l=s.charCodeAt(i);e=(e<<5)-e+l,e=e&e}return e.toString(16)}function AO(s){const e=new Set;return JSON.stringify(s,(i,l)=>(e.add(i),l)),EO(JSON.stringify(s,Array.from(e).sort()))}function wO(s,e,i={}){try{return ei(s,e,i),!0}catch(l){const a=l;if(a.message&&(a.message.startsWith("No widget")||a.message.startsWith("Unsupported widget")))return!1;throw l}}function Lo(s,e){return`${Qu()(s)?s:s[gi]}__${e}`}function Zi(s){return Lo(s,"description")}function lf(s){return Lo(s,"error")}function Fo(s){return Lo(s,"examples")}function af(s){return Lo(s,"help")}function cf(s){return Lo(s,"title")}function Nn(s,e=!1){const i=e?` ${Fo(s)}`:"";return`${lf(s)} ${Zi(s)} ${af(s)}${i}`}function ya(s,e){return`${s}-${e}`}function Qi(s,e,i){return e?i:s}function CO(s){return s?new Date(s).toJSON():void 0}function OO(s){if(gC in s&&Array.isArray(s.enum)&&s.enum.length===1)return s.enum[0];if(Yp in s)return s.const;throw new Error("schema cannot be inferred as a constant")}function va(s,e){const i=s;if(s.enum){let c;if(e){const{enumNames:u}=et(e);c=u}return!c&&i.enumNames&&(c=i.enumNames),s.enum.map((u,f)=>({label:c?.[f]||String(u),value:u}))}let l,a;return s.anyOf?(l=s.anyOf,a=e?.anyOf):s.oneOf&&(l=s.oneOf,a=e?.oneOf),l&&l.map((c,u)=>{const{title:f}=et(a?.[u]),d=c,h=OO(d),m=f||d.title||String(h);return{schema:d,label:m,value:h}})}function kO(s,e){if(!Array.isArray(e))return s;const i=m=>m.reduce((p,y)=>(p[y]=!0,p),{}),l=m=>m.length>1?`properties '${m.join("', '")}'`:`property '${m[0]}'`,a=i(s),c=e.filter(m=>m==="*"||a[m]),u=i(c),f=s.filter(m=>!u[m]),d=c.indexOf("*");if(d===-1){if(f.length)throw new Error(`uiSchema order list does not contain ${l(f)}`);return c}if(d!==c.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const h=[...c];return h.splice(d,1,...f),h}function uf(s,e=!0){if(!s)return{year:-1,month:-1,day:-1,hour:e?-1:0,minute:e?-1:0,second:e?-1:0};const i=new Date(s);if(Number.isNaN(i.getTime()))throw new Error("Unable to parse date "+s);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:e?i.getUTCHours():0,minute:e?i.getUTCMinutes():0,second:e?i.getUTCSeconds():0}}function No(s){if(s.const||s.enum&&s.enum.length===1&&s.enum[0]===!0)return!0;if(s.anyOf&&s.anyOf.length===1)return No(s.anyOf[0]);if(s.oneOf&&s.oneOf.length===1)return No(s.oneOf[0]);if(s.allOf){const e=i=>No(i);return s.allOf.some(e)}return!1}function PO(s,e,i){const{props:l,state:a}=s;return!mn(l,e)||!mn(a,i)}function Sg(s,e=!0){const{year:i,month:l,day:a,hour:c=0,minute:u=0,second:f=0}=s,d=Date.UTC(i,l-1,a,c,u,f),h=new Date(d).toJSON();return e?h:h.slice(0,10)}function Bo(s,e=[]){if(!s)return[];let i=[];return sr in s&&(i=i.concat(s[sr].map(l=>{const a=`.${e.join(".")}`;return{property:a,message:l,stack:`${a} ${l}`}}))),Object.keys(s).reduce((l,a)=>{if(a!==sr){const c=s[a];Ju()(c)&&(l=l.concat(Bo(c,[...e,a])))}return l},i)}var TO=S(42613),Eg=S.n(TO);function DO(s){const e=new bO;return s.length&&s.forEach(i=>{const{property:l,message:a}=i,c=l==="."?[]:Eg()(l);c.length>0&&c[0]===""&&c.splice(0,1),a&&e.addErrors(a,c)}),e.ErrorSchema}function Ag(s){return Object.keys(s).reduce((e,i)=>{if(i==="addError")return e;{const l=s[i];return Ju()(l)?{...e,[i]:Ag(l)}:{...e,[i]:l}}},{})}function MO(s){if(!s)return"";const e=new Date(s),i=Ei(e.getFullYear(),4),l=Ei(e.getMonth()+1,2),a=Ei(e.getDate(),2),c=Ei(e.getHours(),2),u=Ei(e.getMinutes(),2),f=Ei(e.getSeconds(),2),d=Ei(e.getMilliseconds(),3);return`${i}-${l}-${a}T${c}:${u}:${f}.${d}`}function ba(s,e){if(!e)return s;const{errors:i,errorSchema:l}=s;let a=Bo(e),c=e;return vi()(l)||(c=xi(l,e,!0),a=[...i].concat(a)),{errorSchema:c,errors:a}}function IO(s){for(const e in s){const i=s,l=i[e];e===zt&&typeof l=="string"&&l.startsWith("#")?i[e]=Jp+l:i[e]=ff(l)}return s}function RO(s){for(let e=0;e<s.length;e++)s[e]=ff(s[e]);return s}function ff(s){return Array.isArray(s)?RO([...s]):or()(s)?IO({...s}):s}var st;(function(s){s.ArrayItemTitle="Item",s.MissingItems="Missing items definition",s.YesLabel="Yes",s.NoLabel="No",s.CloseLabel="Close",s.ErrorsLabel="Errors",s.NewStringDefault="New Value",s.AddButton="Add",s.AddItemButton="Add Item",s.CopyButton="Copy",s.MoveDownButton="Move down",s.MoveUpButton="Move up",s.RemoveButton="Remove",s.NowLabel="Now",s.ClearLabel="Clear",s.AriaDateLabel="Select a date",s.PreviewLabel="Preview",s.DecrementAriaLabel="Decrease value by 1",s.IncrementAriaLabel="Increase value by 1",s.UnknownFieldType="Unknown field type %1",s.OptionPrefix="Option %1",s.TitleOptionPrefix="%1 option %2",s.KeyLabel="%1 Key",s.InvalidObjectField='Invalid "%1" object field configuration: _%2_.',s.UnsupportedField="Unsupported field schema.",s.UnsupportedFieldWithId="Unsupported field schema for field `%1`.",s.UnsupportedFieldWithReason="Unsupported field schema: _%1_.",s.UnsupportedFieldWithIdAndReason="Unsupported field schema for field `%1`: _%2_.",s.FilesInfo="**%1** (%2, %3 bytes)"})(st||(st={}));var LO=S(83657),FO=S.n(LO);class gj{constructor(e){this.schemaMap={},this.rootSchema=e,this.addSchema(e,hashForSchema(e))}reset(){this.schemaMap={}}addSchema(e,i){const l=get(e,ID_KEY,i),a={...e,[ID_KEY]:l},c=this.schemaMap[l];if(!c)this.schemaMap[l]=a;else if(!isEqual(c,a))throw console.error("existing schema:",JSON.stringify(c,null,2)),console.error("new schema:",JSON.stringify(a,null,2)),new Error(`Two different schemas exist with the same key ${l}! What a bad coincidence. If possible, try adding an $id to one of the schemas`)}getSchemaMap(){return this.schemaMap}isValid(e,i,l){if(!isEqual(l,this.rootSchema))throw new Error("Unexpectedly calling isValid() with a rootSchema that differs from the construction rootSchema");return this.addSchema(e,hashForSchema(e)),!1}rawValidation(e,i){throw new Error("Unexpectedly calling the `rawValidation()` method during schema parsing")}toErrorList(e,i){throw new Error("Unexpectedly calling the `toErrorList()` method during schema parsing")}validateFormData(e,i,l,a,c){throw new Error("Unexpectedly calling the `validateFormData()` method during schema parsing")}}function df(s,e,i,l){retrieveSchemaInternal(s,l,i,void 0,!0).forEach(c=>{e.findIndex(f=>isEqual(f,c))===-1&&(e.push(c),resolveAnyOrOneOfSchemas(s,c,i,!0).forEach(d=>{PROPERTIES_KEY in d&&d[PROPERTIES_KEY]&&forEach(c[PROPERTIES_KEY],h=>{df(s,e,i,h)})}),ITEMS_KEY in c&&!Array.isArray(c.items)&&typeof c.items!="boolean"&&df(s,e,i,c.items))})}function yj(s){const e=new ParserValidator(s);return df(e,[],s,s),e.getSchemaMap()}var NO=S(11601),BO=S.n(NO),$O=S(74421),wg=S.n($O);const jO={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!1},WO=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,VO=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function zO(s,e,i={},l,a=BO()){const c=new a({...jO,...i});return l?wg()(c,l):l!==!1&&wg()(c),c.addFormat("data-url",VO),c.addFormat("color",WO),c.addKeyword(ks),c.addKeyword(Gu),Array.isArray(s)&&c.addMetaSchema(s),or()(e)&&Object.keys(e).forEach(u=>{c.addFormat(u,e[u])}),c}function UO(s=[],e){return s.map(i=>{const{instancePath:l,keyword:a,params:c,schemaPath:u,parentSchema:f,...d}=i;let{message:h=""}=d,m=l.replace(/\//g,"."),p=`${m} ${h}`.trim();if("missingProperty"in c){m=m?`${m}.${c.missingProperty}`:c.missingProperty;const y=c.missingProperty,b=et(Le()(e,`${m.replace(/^\./,"")}`)).title;if(b)h=h.replace(y,b);else{const x=Le()(f,[Lt,y,"title"]);x&&(h=h.replace(y,x))}p=h}else{const y=et(Le()(e,`${m.replace(/^\./,"")}`)).title;if(y)p=`'${y}' ${h}`.trim();else{const b=f?.title;b&&(p=`'${b}' ${h}`.trim())}}return{name:a,property:m,message:h,params:c,stack:p,schemaPath:u}})}function HO(s,e,i,l,a,c,u){const{validationError:f}=e;let d=UO(e.errors,u);f&&(d=[...d,{stack:f.message}]),typeof c=="function"&&(d=c(d,u));let h=DO(d);if(f&&(h={...h,$schema:{__errors:[f.message]}}),typeof a!="function")return{errors:d,errorSchema:h};const m=cg(s,l,i,l,!0),p=a(m,Xu(m),u),y=Ag(p);return ba({errors:d,errorSchema:h},y)}class KO{constructor(e,i){const{additionalMetaSchemas:l,customFormats:a,ajvOptionsOverrides:c,ajvFormatOptions:u,AjvClass:f}=e;this.ajv=zO(l,a,c,u,f),this.localizer=i}reset(){this.ajv.removeSchema()}toErrorList(e,i=[]){return Bo(e,i)}rawValidation(e,i){let l,a;e[gi]&&(a=this.ajv.getSchema(e[gi]));try{a===void 0&&(a=this.ajv.compile(e)),a(i)}catch(u){l=u}let c;return a&&(typeof this.localizer=="function"&&this.localizer(a.errors),c=a.errors||void 0,a.errors=null),{errors:c,validationError:l}}validateFormData(e,i,l,a,c){const u=this.rawValidation(i,e);return HO(this,u,e,i,l,a,c)}handleSchemaUpdate(e){var i,l;const a=(i=e[gi])!==null&&i!==void 0?i:Jp;this.ajv.getSchema(a)===void 0?this.ajv.addSchema(e,a):mn(e,(l=this.ajv.getSchema(a))===null||l===void 0?void 0:l.schema)||(this.ajv.removeSchema(a),this.ajv.addSchema(e,a))}isValid(e,i,l){var a;try{this.handleSchemaUpdate(l);const c=ff(e),u=(a=c[gi])!==null&&a!==void 0?a:AO(c);let f;return f=this.ajv.getSchema(u),f===void 0&&(f=this.ajv.addSchema(c,u).getSchema(u)||this.ajv.compile(c)),f(i)}catch(c){return console.warn("Error encountered compiling schema:",c),!1}}}function Cg(s={},e){return new KO(s,e)}class vj{constructor(e,i,l){this.rootSchema=i,this.validateFns=e,this.localizer=l,this.mainValidator=this.getValidator(i)}getValidator(e){const i=get(e,ID_KEY)||hashForSchema(e),l=this.validateFns[i];if(!l)throw new Error(`No precompiled validator function was found for the given schema for "${i}"`);return l}ensureSameRootSchema(e,i){if(!isEqual(e,this.rootSchema)){const l=retrieveSchema(this,this.rootSchema,this.rootSchema,i);if(!isEqual(e,l))throw new Error("The schema associated with the precompiled validator differs from the rootSchema provided for validation")}return!0}toErrorList(e,i=[]){return toErrorList(e,i)}rawValidation(e,i){this.ensureSameRootSchema(e,i),this.mainValidator(i),typeof this.localizer=="function"&&this.localizer(this.mainValidator.errors);const l=this.mainValidator.errors||void 0;return this.mainValidator.errors=null,{errors:l}}validateFormData(e,i,l,a,c){const u=this.rawValidation(i,e);return processRawValidationErrors(this,u,e,i,l,a,c)}isValid(e,i,l){return this.ensureSameRootSchema(l,i),get(e,ID_KEY)===JUNK_OPTION_ID?!1:this.getValidator(e)(i)}}function bj(s,e,i){return new AJV8PrecompiledValidator(s,e,i)}const Og=Cg(),GO=(s,e={})=>{const{layouts:i=[]}=e,l=s?.uiSchema["ui:ObjectFieldTemplate"];return(0,g.useMemo)(()=>{if(typeof l!="string")return s;const a=i.find(c=>c.name===l)?.component;return a?{...s,uiSchema:{...s.uiSchema,"ui:ObjectFieldTemplate":a}}:s},[i,l,s])},YO=({description:s})=>s&&g.createElement(v.h,{content:s,linkTarget:"_blank"});var JO=S(74874),kg=S.n(JO);let XO=s=>crypto.getRandomValues(new Uint8Array(s)),ZO=(s,e,i)=>{let l=(2<<Math.log(s.length-1)/Math.LN2)-1,a=-~(1.6*l*e/s.length);return(c=e)=>{let u="";for(;;){let f=i(a),d=a|0;for(;d--;)if(u+=s[f[d]&l]||"",u.length===c)return u}}},xj=(s,e=21)=>ZO(s,e,XO),QO=(s=21)=>crypto.getRandomValues(new Uint8Array(s)).reduce((e,i)=>(i&=63,i<36?e+=i.toString(36):i<62?e+=(i-26).toString(36).toUpperCase():i>62?e+="-":e+="_",e),"");function hf(){return QO()}function Pg(s){return Array.isArray(s)?s.map(e=>({key:hf(),item:e})):[]}function $o(s){return Array.isArray(s)?s.map(e=>e.item):[]}class qO extends g.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:a,registry:c}=this.props,{schemaUtils:u}=c;let f=a.items;return ef(a)&&mC(a)&&(f=a.additionalItems),u.getDefaultFormState(f)},this.onAddClick=a=>{this._handleAddClick(a)},this.onAddIndexClick=a=>c=>{this._handleAddClick(c,a)},this.onCopyIndexClick=a=>c=>{c&&c.preventDefault();const{onChange:u,errorSchema:f}=this.props,{keyedFormData:d}=this.state;let h;if(f){h={};for(const y in f){const b=parseInt(y);b<=a?gn()(h,[b],f[y]):b>a&&gn()(h,[b+1],f[y])}}const m={key:hf(),item:Hu()(d[a].item)},p=[...d];a!==void 0?p.splice(a+1,0,m):p.push(m),this.setState({keyedFormData:p,updatedKeyedFormData:!0},()=>u($o(p),h))},this.onDropIndexClick=a=>c=>{c&&c.preventDefault();const{onChange:u,errorSchema:f}=this.props,{keyedFormData:d}=this.state;let h;if(f){h={};for(const p in f){const y=parseInt(p);y<a?gn()(h,[y],f[p]):y>a&&gn()(h,[y-1],f[p])}}const m=d.filter((p,y)=>y!==a);this.setState({keyedFormData:m,updatedKeyedFormData:!0},()=>u($o(m),h))},this.onReorderClick=(a,c)=>u=>{u&&(u.preventDefault(),u.currentTarget.blur());const{onChange:f,errorSchema:d}=this.props;let h;if(d){h={};for(const b in d){const x=parseInt(b);x==a?gn()(h,[c],d[a]):x==c?gn()(h,[a],d[c]):gn()(h,[b],d[x])}}const{keyedFormData:m}=this.state;function p(){const b=m.slice();return b.splice(a,1),b.splice(c,0,m[a]),b}const y=p();this.setState({keyedFormData:y},()=>f($o(y),h))},this.onChangeForIndex=a=>(c,u,f)=>{const{formData:d,onChange:h,errorSchema:m}=this.props,y=(Array.isArray(d)?d:[]).map((b,x)=>a===x?typeof c>"u"?null:c:b);h(y,m&&m&&{...m,[a]:u},f)},this.onSelectChange=a=>{const{onChange:c,idSchema:u}=this.props;c(a,void 0,u&&u.$id)};const{formData:i=[]}=e,l=Pg(i);this.state={keyedFormData:l,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,i){if(i.updatedKeyedFormData)return{updatedKeyedFormData:!1};const l=Array.isArray(e.formData)?e.formData:[],a=i.keyedFormData||[];return{keyedFormData:l.length===a.length?a.map((u,f)=>({key:u.key,item:l[f]})):Pg(l)}}get itemTitle(){const{schema:e,registry:i}=this.props,{translateString:l}=i;return Le()(e,[yi,"title"],Le()(e,[yi,"description"],l(st.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):e.type!=="null"}canAddItem(e){const{schema:i,uiSchema:l,registry:a}=this.props;let{addable:c}=et(l,a.globalUiOptions);return c!==!1&&(i.maxItems!==void 0?c=e.length<i.maxItems:c=!0),c}_handleAddClick(e,i){e&&e.preventDefault();const{onChange:l,errorSchema:a}=this.props,{keyedFormData:c}=this.state;let u;if(a){u={};for(const h in a){const m=parseInt(h);i===void 0||m<i?gn()(u,[m],a[h]):m>=i&&gn()(u,[m+1],a[h])}}const f={key:hf(),item:this._getNewFormDataRow()},d=[...c];i!==void 0?d.splice(i,0,f):d.push(f),this.setState({keyedFormData:d,updatedKeyedFormData:!0},()=>l($o(d),u))}render(){const{schema:e,uiSchema:i,idSchema:l,registry:a}=this.props,{schemaUtils:c,translateString:u}=a;if(!(yi in e)){const f=et(i),d=Qe("UnsupportedFieldTemplate",a,f);return(0,$.jsx)(d,{schema:e,idSchema:l,reason:u(st.MissingItems),registry:a})}return c.isMultiSelect(e)?this.renderMultiSelect():ug(i)?this.renderCustomWidget():ef(e)?this.renderFixedArray():c.isFilesArray(e,i)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:i={},errorSchema:l,idSchema:a,name:c,title:u,disabled:f=!1,readonly:d=!1,autofocus:h=!1,required:m=!1,registry:p,onBlur:y,onFocus:b,idPrefix:x,idSeparator:A="_",rawErrors:E}=this.props,{keyedFormData:w}=this.state,k=e.title||u||c,{schemaUtils:L,formContext:z}=p,U=et(i),X=or()(e.items)?e.items:{},ee=L.retrieveSchema(X),oe=$o(this.state.keyedFormData),ue=this.canAddItem(oe),fe={canAdd:ue,items:w.map((he,me)=>{const{key:be,item:ye}=he,Te=ye,We=L.retrieveSchema(X,Te),De=l?l[me]:void 0,ve=a.$id+A+me,_e=L.toIdSchema(We,ve,Te,x,A);return this.renderArrayFieldItem({key:be,index:me,name:c&&`${c}-${me}`,title:k?`${k}-${me+1}`:void 0,canAdd:ue,canMoveUp:me>0,canMoveDown:me<oe.length-1,itemSchema:We,itemIdSchema:_e,itemErrorSchema:De,itemData:Te,itemUiSchema:i.items,autofocus:h&&me===0,onBlur:y,onFocus:b,rawErrors:E,totalItems:w.length})}),className:`field field-array field-array-of-${ee.type}`,disabled:f,idSchema:a,uiSchema:i,onAddClick:this.onAddClick,readonly:d,required:m,schema:e,title:k,formContext:z,formData:oe,rawErrors:E,registry:p},ge=Qe("ArrayFieldTemplate",p,U);return(0,$.jsx)(ge,{...fe})}renderCustomWidget(){var e;const{schema:i,idSchema:l,uiSchema:a,disabled:c=!1,readonly:u=!1,autofocus:f=!1,required:d=!1,hideError:h,placeholder:m,onBlur:p,onFocus:y,formData:b=[],registry:x,rawErrors:A,name:E}=this.props,{widgets:w,formContext:k,globalUiOptions:L,schemaUtils:z}=x,{widget:U,title:X,...ee}=et(a,L),oe=ei(i,U,w),ue=(e=X??i.title)!==null&&e!==void 0?e:E,fe=z.getDisplayLabel(i,a,L);return(0,$.jsx)(oe,{id:l.$id,name:E,multiple:!0,onChange:this.onSelectChange,onBlur:p,onFocus:y,options:ee,schema:i,uiSchema:a,registry:x,value:b,disabled:c,readonly:u,hideError:h,required:d,label:ue,hideLabel:!fe,placeholder:m,formContext:k,autofocus:f,rawErrors:A})}renderMultiSelect(){var e;const{schema:i,idSchema:l,uiSchema:a,formData:c=[],disabled:u=!1,readonly:f=!1,autofocus:d=!1,required:h=!1,placeholder:m,onBlur:p,onFocus:y,registry:b,rawErrors:x,name:A}=this.props,{widgets:E,schemaUtils:w,formContext:k,globalUiOptions:L}=b,z=w.retrieveSchema(i.items,c),U=va(z,a),{widget:X="select",title:ee,...oe}=et(a,L),ue=ei(i,X,E),fe=(e=ee??i.title)!==null&&e!==void 0?e:A,ge=w.getDisplayLabel(i,a,L);return(0,$.jsx)(ue,{id:l.$id,name:A,multiple:!0,onChange:this.onSelectChange,onBlur:p,onFocus:y,options:{...oe,enumOptions:U},schema:i,uiSchema:a,registry:b,value:c,disabled:u,readonly:f,required:h,label:fe,hideLabel:!ge,placeholder:m,formContext:k,autofocus:d,rawErrors:x})}renderFiles(){var e;const{schema:i,uiSchema:l,idSchema:a,name:c,disabled:u=!1,readonly:f=!1,autofocus:d=!1,required:h=!1,onBlur:m,onFocus:p,registry:y,formData:b=[],rawErrors:x}=this.props,{widgets:A,formContext:E,globalUiOptions:w,schemaUtils:k}=y,{widget:L="files",title:z,...U}=et(l,w),X=ei(i,L,A),ee=(e=z??i.title)!==null&&e!==void 0?e:c,oe=k.getDisplayLabel(i,l,w);return(0,$.jsx)(X,{options:U,id:a.$id,name:c,multiple:!0,onChange:this.onSelectChange,onBlur:m,onFocus:p,schema:i,uiSchema:l,value:b,disabled:u,readonly:f,required:h,registry:y,formContext:E,autofocus:d,rawErrors:x,label:ee,hideLabel:!oe})}renderFixedArray(){const{schema:e,uiSchema:i={},formData:l=[],errorSchema:a,idPrefix:c,idSeparator:u="_",idSchema:f,name:d,title:h,disabled:m=!1,readonly:p=!1,autofocus:y=!1,required:b=!1,registry:x,onBlur:A,onFocus:E,rawErrors:w}=this.props,{keyedFormData:k}=this.state;let{formData:L=[]}=this.props;const z=e.title||h||d,U=et(i),{schemaUtils:X,formContext:ee}=x,ue=(or()(e.items)?e.items:[]).map((be,ye)=>X.retrieveSchema(be,l[ye])),fe=or()(e.additionalItems)?X.retrieveSchema(e.additionalItems,l):null;(!L||L.length<ue.length)&&(L=L||[],L=L.concat(new Array(ue.length-L.length)));const ge=this.canAddItem(L)&&!!fe,he={canAdd:ge,className:"field field-array field-array-fixed-items",disabled:m,idSchema:f,formData:l,items:k.map((be,ye)=>{const{key:Te,item:We}=be,De=We,ve=ye>=ue.length,_e=(ve&&or()(e.additionalItems)?X.retrieveSchema(e.additionalItems,De):ue[ye])||{},dt=f.$id+u+ye,tt=X.toIdSchema(_e,dt,De,c,u),ht=ve?i.additionalItems||{}:Array.isArray(i.items)?i.items[ye]:i.items||{},Tt=a?a[ye]:void 0;return this.renderArrayFieldItem({key:Te,index:ye,name:d&&`${d}-${ye}`,title:z?`${z}-${ye+1}`:void 0,canAdd:ge,canRemove:ve,canMoveUp:ye>=ue.length+1,canMoveDown:ve&&ye<L.length-1,itemSchema:_e,itemData:De,itemUiSchema:ht,itemIdSchema:tt,itemErrorSchema:Tt,autofocus:y&&ye===0,onBlur:A,onFocus:E,rawErrors:w,totalItems:k.length})}),onAddClick:this.onAddClick,readonly:p,required:b,registry:x,schema:e,uiSchema:i,title:z,formContext:ee,errorSchema:a,rawErrors:w},me=Qe("ArrayFieldTemplate",x,U);return(0,$.jsx)(me,{...he})}renderArrayFieldItem(e){const{key:i,index:l,name:a,canAdd:c,canRemove:u=!0,canMoveUp:f,canMoveDown:d,itemSchema:h,itemData:m,itemUiSchema:p,itemIdSchema:y,itemErrorSchema:b,autofocus:x,onBlur:A,onFocus:E,rawErrors:w,totalItems:k,title:L}=e,{disabled:z,hideError:U,idPrefix:X,idSeparator:ee,readonly:oe,uiSchema:ue,registry:fe,formContext:ge}=this.props,{fields:{ArraySchemaField:he,SchemaField:me},globalUiOptions:be}=fe,ye=he||me,{orderable:Te=!0,removable:We=!0,copyable:De=!1}=et(ue,be),ve={moveUp:Te&&f,moveDown:Te&&d,copy:De&&c,remove:We&&u,toolbar:!1};return ve.toolbar=Object.keys(ve).some(_e=>ve[_e]),{children:(0,$.jsx)(ye,{name:a,title:L,index:l,schema:h,uiSchema:p,formData:m,formContext:ge,errorSchema:b,idPrefix:X,idSeparator:ee,idSchema:y,required:this.isItemRequired(h),onChange:this.onChangeForIndex(l),onBlur:A,onFocus:E,registry:fe,disabled:z,readonly:oe,hideError:U,autofocus:x,rawErrors:w}),className:"array-item",disabled:z,canAdd:c,hasCopy:ve.copy,hasToolbar:ve.toolbar,hasMoveUp:ve.moveUp,hasMoveDown:ve.moveDown,hasRemove:ve.remove,index:l,totalItems:k,key:i,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:oe,registry:fe,schema:h,uiSchema:p}}}const _O=qO;function ek(s){var e,i,l;const{schema:a,name:c,uiSchema:u,idSchema:f,formData:d,registry:h,required:m,disabled:p,readonly:y,hideError:b,autofocus:x,title:A,onChange:E,onFocus:w,onBlur:k,rawErrors:L}=s,{title:z}=a,{widgets:U,formContext:X,translateString:ee,globalUiOptions:oe}=h,{widget:ue="checkbox",title:fe,label:ge=!0,...he}=et(u,oe),me=ei(a,ue,U),be=ee(st.YesLabel),ye=ee(st.NoLabel);let Te;const We=(i=(e=fe??z)!==null&&e!==void 0?e:A)!==null&&i!==void 0?i:c;if(Array.isArray(a.oneOf))Te=va({oneOf:a.oneOf.map(De=>{if(or()(De))return{...De,title:De.title||(De.const===!0?be:ye)}}).filter(De=>De)},u);else{const De=a,ve=(l=a.enum)!==null&&l!==void 0?l:[!0,!1];!De.enumNames&&ve.length===2&&ve.every(_e=>typeof _e=="boolean")?Te=[{value:ve[0],label:ve[0]?be:ye},{value:ve[1],label:ve[1]?be:ye}]:Te=va({enum:ve,enumNames:De.enumNames},u)}return(0,$.jsx)(me,{options:{...he,enumOptions:Te},schema:a,uiSchema:u,id:f.$id,name:c,onChange:E,onFocus:w,onBlur:k,label:We,hideLabel:!ge,value:d,required:m,disabled:p,readonly:y,hideError:b,registry:h,formContext:X,autofocus:x,rawErrors:L})}const tk=ek;class nk extends g.Component{constructor(e){super(e),this.onOptionChange=u=>{const{selectedOption:f,retrievedOptions:d}=this.state,{formData:h,onChange:m,registry:p}=this.props,{schemaUtils:y}=p,b=u!==void 0?parseInt(u,10):-1;if(b===f)return;const x=b>=0?d[b]:void 0,A=f>=0?d[f]:void 0;let E=y.sanitizeDataForNewSchema(x,A,h);E&&x&&(E=y.getDefaultFormState(x,E,"excludeObjectChildren")),m(E,void 0,this.getFieldId()),this.setState({selectedOption:b})};const{formData:i,options:l,registry:{schemaUtils:a}}=this.props,c=l.map(u=>a.retrieveSchema(u,i));this.state={retrievedOptions:c,selectedOption:this.getMatchingOption(0,i,c)}}componentDidUpdate(e,i){const{formData:l,options:a,idSchema:c}=this.props,{selectedOption:u}=this.state;let f=this.state;if(!mn(e.options,a)){const{registry:{schemaUtils:d}}=this.props,h=a.map(m=>d.retrieveSchema(m,l));f={selectedOption:u,retrievedOptions:h}}if(!mn(l,e.formData)&&c.$id===e.idSchema.$id){const{retrievedOptions:d}=f,h=this.getMatchingOption(u,l,d);i&&h!==u&&(f={selectedOption:h,retrievedOptions:d})}f!==this.state&&this.setState(f)}getMatchingOption(e,i,l){const{schema:a,registry:{schemaUtils:c}}=this.props,u=Ps(a);return c.getClosestMatchingOption(i,l,e,u)}getFieldId(){const{idSchema:e,schema:i}=this.props;return`${e.$id}${i.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:i=!1,errorSchema:l={},formContext:a,onBlur:c,onFocus:u,registry:f,schema:d,uiSchema:h}=this.props,{widgets:m,fields:p,translateString:y,globalUiOptions:b,schemaUtils:x}=f,{SchemaField:A}=p,{selectedOption:E,retrievedOptions:w}=this.state,{widget:k="select",placeholder:L,autofocus:z,autocomplete:U,title:X=d.title,...ee}=et(h,b),oe=ei({type:"number"},k,m),ue=Le()(l,sr,[]),fe=ha()(l,[sr]),ge=x.getDisplayLabel(d,h,b),he=E>=0&&w[E]||null;let me;if(he){const{required:ve}=d;me=ve?_r({required:ve},he):he}let be=[];Kn in d&&h&&Kn in h?Array.isArray(h[Kn])?be=h[Kn]:console.warn(`uiSchema.oneOf is not an array for "${X||e}"`):br in d&&h&&br in h&&(Array.isArray(h[br])?be=h[br]:console.warn(`uiSchema.anyOf is not an array for "${X||e}"`));let ye=h;E>=0&&be.length>E&&(ye=be[E]);const Te=X?st.TitleOptionPrefix:st.OptionPrefix,We=X?[X]:[],De=w.map((ve,_e)=>{const{title:dt=ve.title}=et(be[_e]);return{label:dt||y(Te,We.concat(String(_e+1))),value:_e}});return(0,$.jsxs)("div",{className:"panel panel-default panel-body",children:[(0,$.jsx)("div",{className:"form-group",children:(0,$.jsx)(oe,{id:this.getFieldId(),name:`${e}${d.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:c,onFocus:u,disabled:i||vi()(De),multiple:!1,rawErrors:ue,errorSchema:fe,value:E>=0?E:void 0,options:{enumOptions:De,...ee},registry:f,formContext:a,placeholder:L,autocomplete:U,autofocus:z,label:X??e,hideLabel:!ge})}),me&&(0,$.jsx)(A,{...this.props,schema:me,uiSchema:ye})]})}}const Tg=nk,rk=/\.([0-9]*0)*$/,ik=/[0.]0*$/;function sk(s){const{registry:e,onChange:i,formData:l,value:a}=s,[c,u]=(0,g.useState)(a),{StringField:f}=e.fields;let d=l;const h=(0,g.useCallback)(m=>{u(m),`${m}`.charAt(0)==="."&&(m=`0${m}`);const p=typeof m=="string"&&m.match(rk)?Gp(m.replace(ik,"")):Gp(m);i(p)},[i]);if(typeof c=="string"&&typeof d=="number"){const m=new RegExp(`^(${String(d).replace(".","\\.")})?\\.?0*$`);c.match(m)&&(d=c)}return(0,$.jsx)(f,{...s,formData:d,onChange:h})}const ok=sk;function qi(){return qi=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=i[l])}return s},qi.apply(this,arguments)}const lk=["children","options"],je={blockQuote:"0",breakLine:"1",breakThematic:"2",codeBlock:"3",codeFenced:"4",codeInline:"5",footnote:"6",footnoteReference:"7",gfmTask:"8",heading:"9",headingSetext:"10",htmlBlock:"11",htmlComment:"12",htmlSelfClosing:"13",image:"14",link:"15",linkAngleBraceStyleDetector:"16",linkBareUrlDetector:"17",linkMailtoDetector:"18",newlineCoalescer:"19",orderedList:"20",paragraph:"21",ref:"22",refImage:"23",refLink:"24",table:"25",tableSeparator:"26",text:"27",textBolded:"28",textEmphasized:"29",textEscaped:"30",textMarked:"31",textStrikethroughed:"32",unorderedList:"33"};var Dg;(function(s){s[s.MAX=0]="MAX",s[s.HIGH=1]="HIGH",s[s.MED=2]="MED",s[s.LOW=3]="LOW",s[s.MIN=4]="MIN"})(Dg||(Dg={}));const Mg=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((s,e)=>(s[e.toLowerCase()]=e,s),{class:"className",for:"htmlFor"}),Ig={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"\xA0",quot:"\u201C"},ak=["style","script"],ck=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,uk=/mailto:/i,fk=/\n{2,}$/,Rg=/^(\s*>[\s\S]*?)(?=\n\n|$)/,dk=/^ *> ?/gm,hk=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,mk=/^ {2,}\n/,pk=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,Lg=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,Fg=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,gk=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,yk=/^(?:\n *)*\n/,vk=/\r\n?/g,bk=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,xk=/^\[\^([^\]]+)]/,Sk=/\f/g,Ek=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,Ak=/^\s*?\[(x|\s)\]/,Ng=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Bg=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,$g=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,mf=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,wk=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,jg=/^<!--[\s\S]*?(?:-->)/,Ck=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,pf=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,Ok=/^\{.*\}$/,kk=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Pk=/^<([^ >]+@[^ >]+)>/,Tk=/^<([^ >]+:\/[^ >]+)>/,Dk=/-([a-z])?/gi,Wg=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,Mk=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,Ik=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,Rk=/^\[([^\]]*)\] ?\[([^\]]*)\]/,Lk=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,Fk=/\t/g,Nk=/(^ *\||\| *$)/g,Bk=/^ *:-+: *$/,$k=/^ *:-+ *$/,jk=/^ *-+: *$/,xa="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",Wk=new RegExp(`^([*_])\\1${xa}\\1\\1(?!\\1)`),Vk=new RegExp(`^([*_])${xa}\\1(?!\\1|\\w)`),zk=new RegExp(`^==${xa}==`),Uk=new RegExp(`^~~${xa}~~`),Hk=/^\\([^0-9A-Za-z\s])/,Kk=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,Gk=/^\n+/,Yk=/^([ \t]*)/,Jk=/\\([^\\])/g,Vg=/ *\n+$/,Xk=/(?:^|\n)( *)$/,gf="(?:\\d+\\.)",yf="(?:[*+-])";function zg(s){return"( *)("+(s===1?gf:yf)+") +"}const Ug=zg(1),Hg=zg(2);function Kg(s){return new RegExp("^"+(s===1?Ug:Hg))}const Zk=Kg(1),Qk=Kg(2);function Gg(s){return new RegExp("^"+(s===1?Ug:Hg)+"[^\\n]*(?:\\n(?!\\1"+(s===1?gf:yf)+" )[^\\n]*)*(\\n|$)","gm")}const Yg=Gg(1),Jg=Gg(2);function Xg(s){const e=s===1?gf:yf;return new RegExp("^( *)("+e+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+e+" (?!"+e+" ))\\n*|\\s*\\n*$)")}const Zg=Xg(1),Qg=Xg(2);function qg(s,e){const i=e===1,l=i?Zg:Qg,a=i?Yg:Jg,c=i?Zk:Qk;return{match(u,f){const d=Xk.exec(f.prevCapture);return d&&(f.list||!f.inline&&!f.simple)?l.exec(u=d[1]+u):null},order:1,parse(u,f,d){const h=i?+u[2]:void 0,m=u[0].replace(fk,`
`).match(a);let p=!1;return{items:m.map(function(y,b){const x=c.exec(y)[0].length,A=new RegExp("^ {1,"+x+"}","gm"),E=y.replace(A,"").replace(c,""),w=b===m.length-1,k=E.indexOf(`

`)!==-1||w&&p;p=k;const L=d.inline,z=d.list;let U;d.list=!0,k?(d.inline=!1,U=E.replace(Vg,`

`)):(d.inline=!0,U=E.replace(Vg,""));const X=f(U,d);return d.inline=L,d.list=z,X}),ordered:i,start:h}},render:(u,f,d)=>s(u.ordered?"ol":"ul",{key:d.key,start:u.type===je.orderedList?u.start:void 0},u.items.map(function(h,m){return s("li",{key:m},f(h,d))}))}}const qk=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),_k=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,_g=[Rg,Lg,Fg,Ng,$g,Bg,jg,Wg,Yg,Zg,Jg,Qg],eP=[..._g,/^[^\n]+(?:  \n|\n{2,})/,mf,pf];function jo(s){return s.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function tP(s){return jk.test(s)?"right":Bk.test(s)?"center":$k.test(s)?"left":null}function e0(s,e,i,l){const a=i.inTable;i.inTable=!0;let c=s.trim().split(/( *(?:`[^`]*`|\\\||\|) *)/).reduce((f,d)=>(d.trim()==="|"?f.push(l?{type:je.tableSeparator}:{type:je.text,text:d}):d!==""&&f.push.apply(f,e(d,i)),f),[]);i.inTable=a;let u=[[]];return c.forEach(function(f,d){f.type===je.tableSeparator?d!==0&&d!==c.length-1&&u.push([]):(f.type!==je.text||c[d+1]!=null&&c[d+1].type!==je.tableSeparator||(f.text=f.text.trimEnd()),u[u.length-1].push(f))}),u}function nP(s,e,i){i.inline=!0;const l=s[2]?s[2].replace(Nk,"").split("|").map(tP):[],a=s[3]?function(u,f,d){return u.trim().split(`
`).map(function(h){return e0(h,f,d,!0)})}(s[3],e,i):[],c=e0(s[1],e,i,!!a.length);return i.inline=!1,a.length?{align:l,cells:a,header:c,type:je.table}:{children:c,type:je.paragraph}}function t0(s,e){return s.align[e]==null?{}:{textAlign:s.align[e]}}function Ai(s){return function(e,i){return i.inline?s.exec(e):null}}function wi(s){return function(e,i){return i.inline||i.simple?s.exec(e):null}}function ti(s){return function(e,i){return i.inline||i.simple?null:s.exec(e)}}function Wo(s){return function(e){return s.exec(e)}}function rP(s,e){if(e.inline||e.simple)return null;let i="";s.split(`
`).every(a=>!_g.some(c=>c.test(a))&&(i+=a+`
`,a.trim()));const l=i.trimEnd();return l==""?null:[i,l]}function iP(s){try{if(decodeURIComponent(s).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return null}catch{return null}return s}function n0(s){return s.replace(Jk,"$1")}function Sa(s,e,i){const l=i.inline||!1,a=i.simple||!1;i.inline=!0,i.simple=!0;const c=s(e,i);return i.inline=l,i.simple=a,c}function sP(s,e,i){const l=i.inline||!1,a=i.simple||!1;i.inline=!1,i.simple=!0;const c=s(e,i);return i.inline=l,i.simple=a,c}function oP(s,e,i){const l=i.inline||!1;i.inline=!1;const a=s(e,i);return i.inline=l,a}const vf=(s,e,i)=>({children:Sa(e,s[1],i)});function bf(){return{}}function xf(){return null}function lP(...s){return s.filter(Boolean).join(" ")}function Sf(s,e,i){let l=s;const a=e.split(".");for(;a.length&&(l=l[a[0]],l!==void 0);)a.shift();return l||i}function aP(s="",e={}){function i(y,b,...x){const A=Sf(e.overrides,`${y}.props`,{});return e.createElement(function(E,w){const k=Sf(w,E);return k?typeof k=="function"||typeof k=="object"&&"render"in k?k:Sf(w,`${E}.component`,E):E}(y,e.overrides),qi({},b,A,{className:lP(b?.className,A.className)||void 0}),...x)}function l(y){y=y.replace(Ek,"");let b=!1;e.forceInline?b=!0:e.forceBlock||(b=Lk.test(y)===!1);const x=h(d(b?y:`${y.trimEnd().replace(Gk,"")}

`,{inline:b}));for(;typeof x[x.length-1]=="string"&&!x[x.length-1].trim();)x.pop();if(e.wrapper===null)return x;const A=e.wrapper||(b?"span":"div");let E;if(x.length>1||e.forceWrapper)E=x;else{if(x.length===1)return E=x[0],typeof E=="string"?i("span",{key:"outer"},E):E;E=null}return e.createElement(A,{key:"outer"},E)}function a(y,b){const x=b.match(ck);return x?x.reduce(function(A,E,w){const k=E.indexOf("=");if(k!==-1){const L=function(ee){return ee.indexOf("-")!==-1&&ee.match(Ck)===null&&(ee=ee.replace(Dk,function(oe,ue){return ue.toUpperCase()})),ee}(E.slice(0,k)).trim(),z=function(ee){const oe=ee[0];return(oe==='"'||oe==="'")&&ee.length>=2&&ee[ee.length-1]===oe?ee.slice(1,-1):ee}(E.slice(k+1).trim()),U=Mg[L]||L;if(U==="ref")return A;const X=A[U]=function(ee,oe,ue,fe){return oe==="style"?ue.split(/;\s?/).reduce(function(ge,he){const me=he.slice(0,he.indexOf(":"));return ge[me.trim().replace(/(-[a-z])/g,be=>be[1].toUpperCase())]=he.slice(me.length+1).trim(),ge},{}):oe==="href"||oe==="src"?fe(ue,ee,oe):(ue.match(Ok)&&(ue=ue.slice(1,ue.length-1)),ue==="true"||ue!=="false"&&ue)}(y,L,z,e.sanitizer);typeof X=="string"&&(mf.test(X)||pf.test(X))&&(A[U]=l(X.trim()))}else E!=="style"&&(A[Mg[E]||E]=!0);return A},{}):null}e.overrides=e.overrides||{},e.sanitizer=e.sanitizer||iP,e.slugify=e.slugify||jo,e.namedCodesToUnicode=e.namedCodesToUnicode?qi({},Ig,e.namedCodesToUnicode):Ig,e.createElement=e.createElement||g.createElement;const c=[],u={},f={[je.blockQuote]:{match:ti(Rg),order:1,parse(y,b,x){const[,A,E]=y[0].replace(dk,"").match(hk);return{alert:A,children:b(E,x)}},render(y,b,x){const A={key:x.key};return y.alert&&(A.className="markdown-alert-"+e.slugify(y.alert.toLowerCase(),jo),y.children.unshift({attrs:{},children:[{type:je.text,text:y.alert}],noInnerParse:!0,type:je.htmlBlock,tag:"header"})),i("blockquote",A,b(y.children,x))}},[je.breakLine]:{match:Wo(mk),order:1,parse:bf,render:(y,b,x)=>i("br",{key:x.key})},[je.breakThematic]:{match:ti(pk),order:1,parse:bf,render:(y,b,x)=>i("hr",{key:x.key})},[je.codeBlock]:{match:ti(Fg),order:0,parse:y=>({lang:void 0,text:y[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(y,b,x)=>i("pre",{key:x.key},i("code",qi({},y.attrs,{className:y.lang?`lang-${y.lang}`:""}),y.text))},[je.codeFenced]:{match:ti(Lg),order:0,parse:y=>({attrs:a("code",y[3]||""),lang:y[2]||void 0,text:y[4],type:je.codeBlock})},[je.codeInline]:{match:wi(gk),order:3,parse:y=>({text:y[2]}),render:(y,b,x)=>i("code",{key:x.key},y.text)},[je.footnote]:{match:ti(bk),order:0,parse:y=>(c.push({footnote:y[2],identifier:y[1]}),{}),render:xf},[je.footnoteReference]:{match:Ai(xk),order:1,parse:y=>({target:`#${e.slugify(y[1],jo)}`,text:y[1]}),render:(y,b,x)=>i("a",{key:x.key,href:e.sanitizer(y.target,"a","href")},i("sup",{key:x.key},y.text))},[je.gfmTask]:{match:Ai(Ak),order:1,parse:y=>({completed:y[1].toLowerCase()==="x"}),render:(y,b,x)=>i("input",{checked:y.completed,key:x.key,readOnly:!0,type:"checkbox"})},[je.heading]:{match:ti(e.enforceAtxHeadings?Bg:Ng),order:1,parse:(y,b,x)=>({children:Sa(b,y[2],x),id:e.slugify(y[2],jo),level:y[1].length}),render:(y,b,x)=>i(`h${y.level}`,{id:y.id,key:x.key},b(y.children,x))},[je.headingSetext]:{match:ti($g),order:0,parse:(y,b,x)=>({children:Sa(b,y[1],x),level:y[2]==="="?1:2,type:je.heading})},[je.htmlBlock]:{match:Wo(mf),order:1,parse(y,b,x){const[,A]=y[3].match(Yk),E=new RegExp(`^${A}`,"gm"),w=y[3].replace(E,""),k=(L=w,eP.some(oe=>oe.test(L))?oP:Sa);var L;const z=y[1].toLowerCase(),U=ak.indexOf(z)!==-1,X=(U?z:y[1]).trim(),ee={attrs:a(X,y[2]),noInnerParse:U,tag:X};return x.inAnchor=x.inAnchor||z==="a",U?ee.text=y[3]:ee.children=k(b,w,x),x.inAnchor=!1,ee},render:(y,b,x)=>i(y.tag,qi({key:x.key},y.attrs),y.text||(y.children?b(y.children,x):""))},[je.htmlSelfClosing]:{match:Wo(pf),order:1,parse(y){const b=y[1].trim();return{attrs:a(b,y[2]||""),tag:b}},render:(y,b,x)=>i(y.tag,qi({},y.attrs,{key:x.key}))},[je.htmlComment]:{match:Wo(jg),order:1,parse:()=>({}),render:xf},[je.image]:{match:wi(_k),order:1,parse:y=>({alt:y[1],target:n0(y[2]),title:y[3]}),render:(y,b,x)=>i("img",{key:x.key,alt:y.alt||void 0,title:y.title||void 0,src:e.sanitizer(y.target,"img","src")})},[je.link]:{match:Ai(qk),order:3,parse:(y,b,x)=>({children:sP(b,y[1],x),target:n0(y[2]),title:y[3]}),render:(y,b,x)=>i("a",{key:x.key,href:e.sanitizer(y.target,"a","href"),title:y.title},b(y.children,x))},[je.linkAngleBraceStyleDetector]:{match:Ai(Tk),order:0,parse:y=>({children:[{text:y[1],type:je.text}],target:y[1],type:je.link})},[je.linkBareUrlDetector]:{match:(y,b)=>b.inAnchor||e.disableAutoLink?null:Ai(kk)(y,b),order:0,parse:y=>({children:[{text:y[1],type:je.text}],target:y[1],title:void 0,type:je.link})},[je.linkMailtoDetector]:{match:Ai(Pk),order:0,parse(y){let b=y[1],x=y[1];return uk.test(x)||(x="mailto:"+x),{children:[{text:b.replace("mailto:",""),type:je.text}],target:x,type:je.link}}},[je.orderedList]:qg(i,1),[je.unorderedList]:qg(i,2),[je.newlineCoalescer]:{match:ti(yk),order:3,parse:bf,render:()=>`
`},[je.paragraph]:{match:rP,order:3,parse:vf,render:(y,b,x)=>i("p",{key:x.key},b(y.children,x))},[je.ref]:{match:Ai(Mk),order:0,parse:y=>(u[y[1]]={target:y[2],title:y[4]},{}),render:xf},[je.refImage]:{match:wi(Ik),order:0,parse:y=>({alt:y[1]||void 0,ref:y[2]}),render:(y,b,x)=>u[y.ref]?i("img",{key:x.key,alt:y.alt,src:e.sanitizer(u[y.ref].target,"img","src"),title:u[y.ref].title}):null},[je.refLink]:{match:Ai(Rk),order:0,parse:(y,b,x)=>({children:b(y[1],x),fallbackChildren:y[0],ref:y[2]}),render:(y,b,x)=>u[y.ref]?i("a",{key:x.key,href:e.sanitizer(u[y.ref].target,"a","href"),title:u[y.ref].title},b(y.children,x)):i("span",{key:x.key},y.fallbackChildren)},[je.table]:{match:ti(Wg),order:1,parse:nP,render(y,b,x){const A=y;return i("table",{key:x.key},i("thead",null,i("tr",null,A.header.map(function(E,w){return i("th",{key:w,style:t0(A,w)},b(E,x))}))),i("tbody",null,A.cells.map(function(E,w){return i("tr",{key:w},E.map(function(k,L){return i("td",{key:L,style:t0(A,L)},b(k,x))}))})))}},[je.text]:{match:Wo(Kk),order:4,parse:y=>({text:y[0].replace(wk,(b,x)=>e.namedCodesToUnicode[x]?e.namedCodesToUnicode[x]:b)}),render:y=>y.text},[je.textBolded]:{match:wi(Wk),order:2,parse:(y,b,x)=>({children:b(y[2],x)}),render:(y,b,x)=>i("strong",{key:x.key},b(y.children,x))},[je.textEmphasized]:{match:wi(Vk),order:3,parse:(y,b,x)=>({children:b(y[2],x)}),render:(y,b,x)=>i("em",{key:x.key},b(y.children,x))},[je.textEscaped]:{match:wi(Hk),order:1,parse:y=>({text:y[1],type:je.text})},[je.textMarked]:{match:wi(zk),order:3,parse:vf,render:(y,b,x)=>i("mark",{key:x.key},b(y.children,x))},[je.textStrikethroughed]:{match:wi(Uk),order:3,parse:vf,render:(y,b,x)=>i("del",{key:x.key},b(y.children,x))}};e.disableParsingRawHTML===!0&&(delete f[je.htmlBlock],delete f[je.htmlSelfClosing]);const d=function(y){let b=Object.keys(y);function x(A,E){let w=[];for(E.prevCapture=E.prevCapture||"";A;){let k=0;for(;k<b.length;){const L=b[k],z=y[L],U=z.match(A,E);if(U){const X=U[0];E.prevCapture+=X,A=A.substring(X.length);const ee=z.parse(U,x,E);ee.type==null&&(ee.type=L),w.push(ee);break}k++}}return E.prevCapture="",w}return b.sort(function(A,E){let w=y[A].order,k=y[E].order;return w!==k?w-k:A<E?-1:1}),function(A,E){return x(function(w){return w.replace(vk,`
`).replace(Sk,"").replace(Fk,"    ")}(A),E)}}(f),h=(m=function(y,b){return function(x,A,E){const w=y[x.type].render;return b?b(()=>w(x,A,E),x,A,E):w(x,A,E)}}(f,e.renderRule),function y(b,x={}){if(Array.isArray(b)){const A=x.key,E=[];let w=!1;for(let k=0;k<b.length;k++){x.key=k;const L=y(b[k],x),z=typeof L=="string";z&&w?E[E.length-1]+=L:L!==null&&E.push(L),w=z}return x.key=A,E}return m(b,y,x)});var m;const p=l(s);return c.length?i("div",null,p,i("footer",{key:"footer"},c.map(function(y){return i("div",{id:e.slugify(y.identifier,jo),key:y.identifier},y.identifier,h(d(y.footnote,{inline:!0})))}))):p}const Ea=s=>{let{children:e="",options:i}=s,l=function(a,c){if(a==null)return{};var u,f,d={},h=Object.keys(a);for(f=0;f<h.length;f++)c.indexOf(u=h[f])>=0||(d[u]=a[u]);return d}(s,lk);return g.cloneElement(aP(e,i),l)};var cP=S(73450),uP=S.n(cP);class fP extends g.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,i=!1)=>(l,a,c)=>{const{formData:u,onChange:f,errorSchema:d}=this.props;l===void 0&&i&&(l="");const h={...u,[e]:l};f(h,d&&d&&{...d,[e]:a},c)},this.onDropPropertyClick=e=>i=>{i.preventDefault();const{onChange:l,formData:a}=this.props,c={...a};uP()(c,e),l(c)},this.getAvailableKey=(e,i)=>{const{uiSchema:l,registry:a}=this.props,{duplicateKeySuffixSeparator:c="-"}=et(l,a.globalUiOptions);let u=0,f=e;for(;pn()(i,f);)f=`${e}${c}${++u}`;return f},this.onKeyChange=e=>(i,l)=>{if(e===i)return;const{formData:a,onChange:c,errorSchema:u}=this.props;i=this.getAvailableKey(i,a);const f={...a},d={[e]:i},h=Object.keys(f).map(p=>({[d[p]||p]:f[p]})),m=Object.assign({},...h);this.setState({wasPropertyKeyModified:!0}),c(m,u&&u&&{...u,[i]:l})},this.handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:i,onChange:l,registry:a}=this.props,c={...i};let u,f;if(or()(e.additionalProperties)){u=e.additionalProperties.type,f=e.additionalProperties.default;let h=e.additionalProperties;if(zt in h){const{schemaUtils:m}=a;h=m.retrieveSchema({$ref:h[zt]},i),u=h.type,f=h.default}!u&&(br in h||Kn in h)&&(u="object")}const d=this.getAvailableKey("newKey",c);gn()(c,d,f??this.getDefaultValue(u)),l(c)}}isRequired(e){const{schema:i}=this.props;return Array.isArray(i.required)&&i.required.indexOf(e)!==-1}getDefaultValue(e){const{registry:{translateString:i}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};case"string":default:return i(st.NewStringDefault)}}render(){var e,i,l,a;const{schema:c,uiSchema:u={},formData:f,errorSchema:d,idSchema:h,name:m,required:p=!1,disabled:y,readonly:b,hideError:x,idPrefix:A,idSeparator:E,onBlur:w,onFocus:k,registry:L,title:z}=this.props,{fields:U,formContext:X,schemaUtils:ee,translateString:oe,globalUiOptions:ue}=L,{SchemaField:fe}=U,ge=ee.retrieveSchema(c,f),he=et(u,ue),{properties:me={}}=ge,be=(l=(i=(e=he.title)!==null&&e!==void 0?e:ge.title)!==null&&i!==void 0?i:z)!==null&&l!==void 0?l:m,ye=(a=he.description)!==null&&a!==void 0?a:ge.description;let Te;try{const ve=Object.keys(me);Te=kO(ve,he.order)}catch(ve){return(0,$.jsxs)("div",{children:[(0,$.jsx)("p",{className:"config-error",style:{color:"red"},children:(0,$.jsx)(Ea,{options:{disableParsingRawHTML:!0},children:oe(st.InvalidObjectField,[m||"root",ve.message])})}),(0,$.jsx)("pre",{children:JSON.stringify(ge)})]})}const We=Qe("ObjectFieldTemplate",L,he),De={title:he.label===!1?"":be,description:he.label===!1?void 0:ye,properties:Te.map(ve=>{const _e=pn()(ge,[Lt,ve,ks]),dt=_e?u.additionalProperties:u[ve],tt=et(dt).widget==="hidden",ht=Le()(h,[ve],{});return{content:(0,$.jsx)(fe,{name:ve,required:this.isRequired(ve),schema:Le()(ge,[Lt,ve],{}),uiSchema:dt,errorSchema:Le()(d,ve),idSchema:ht,idPrefix:A,idSeparator:E,formData:Le()(f,ve),formContext:X,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(ve),onChange:this.onPropertyChange(ve,_e),onBlur:w,onFocus:k,registry:L,disabled:y,readonly:b,hideError:x,onDropPropertyClick:this.onDropPropertyClick},ve),name:ve,readonly:b,disabled:y,required:p,hidden:tt}}),readonly:b,disabled:y,required:p,idSchema:h,uiSchema:u,errorSchema:d,schema:ge,formData:f,formContext:X,registry:L};return(0,$.jsx)(We,{...De,onAddClick:this.handleAddClick})}}const dP=fP,hP={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function mP(s,e,i,l){const a=e.field,{fields:c,translateString:u}=l;if(typeof a=="function")return a;if(typeof a=="string"&&a in c)return c[a];const f=bi(s),d=Array.isArray(f)?f[0]:f||"",h=s.$id;let m=hP[d];return h&&h in c&&(m=h),!m&&(s.anyOf||s.oneOf)?()=>null:m in c?c[m]:()=>{const p=Qe("UnsupportedFieldTemplate",l,e);return(0,$.jsx)(p,{schema:s,idSchema:i,reason:u(st.UnknownFieldType,[String(s.type)]),registry:l})}}function pP(s){var e,i,l;const{schema:a,idSchema:c,uiSchema:u,formData:f,errorSchema:d,idPrefix:h,idSeparator:m,name:p,onChange:y,onKeyChange:b,onDropPropertyClick:x,required:A,registry:E,wasPropertyKeyModified:w=!1}=s,{formContext:k,schemaUtils:L,globalUiOptions:z}=E,U=et(u,z),X=Qe("FieldTemplate",E,U),ee=Qe("DescriptionFieldTemplate",E,U),oe=Qe("FieldHelpTemplate",E,U),ue=Qe("FieldErrorTemplate",E,U),fe=L.retrieveSchema(a,f),ge=c[gi],he=xi(L.toIdSchema(fe,ge,f,h,m),c),me=(0,g.useCallback)((In,zl,ys)=>y(In,zl,ys||ge),[ge,y]),be=mP(fe,U,he,E),ye=!!((e=U.disabled)!==null&&e!==void 0?e:s.disabled),Te=!!((i=U.readonly)!==null&&i!==void 0?i:s.readonly||s.schema.readOnly||fe.readOnly),We=U.hideError,De=We===void 0?s.hideError:!!We,ve=!!((l=U.autofocus)!==null&&l!==void 0?l:s.autofocus);if(Object.keys(fe).length===0)return null;const _e=L.getDisplayLabel(fe,u,z),{__errors:dt,...tt}=d||{},ht=ha()(u,["ui:classNames","classNames","ui:style"]);Do in ht&&(ht[Do]=ha()(ht[Do],["classNames","style"]));const Tt=(0,$.jsx)(be,{...s,onChange:me,idSchema:he,schema:fe,uiSchema:ht,disabled:ye,readonly:Te,hideError:De,autofocus:ve,errorSchema:tt,formContext:k,rawErrors:dt}),St=he[gi];let Et;w?Et=p:Et=ks in fe?p:U.title||s.schema.title||fe.title||s.title||p;const Ot=U.description||s.schema.description||fe.description||"",ui=U.enableMarkdownInDescription?(0,$.jsx)(Ea,{options:{disableParsingRawHTML:!0},children:Ot}):Ot,Vr=U.help,fi=U.widget==="hidden",qn=["form-group","field",`field-${bi(fe)}`];!De&&dt&&dt.length>0&&qn.push("field-error has-error has-danger"),u?.classNames&&qn.push(u.classNames),U.classNames&&qn.push(U.classNames);const Ui=(0,$.jsx)(oe,{help:Vr,idSchema:he,schema:fe,uiSchema:u,hasErrors:!De&&dt&&dt.length>0,registry:E}),co=De||(fe.anyOf||fe.oneOf)&&!L.isSelect(fe)?void 0:(0,$.jsx)(ue,{errors:dt,errorSchema:d,idSchema:he,schema:fe,uiSchema:u,registry:E}),zr={description:(0,$.jsx)(ee,{id:Zi(St),description:ui,schema:fe,uiSchema:u,registry:E}),rawDescription:Ot,help:Ui,rawHelp:typeof Vr=="string"?Vr:void 0,errors:co,rawErrors:De?void 0:dt,id:St,label:Et,hidden:fi,onChange:y,onKeyChange:b,onDropPropertyClick:x,required:A,disabled:ye,readonly:Te,hideError:De,displayLabel:_e,classNames:qn.join(" ").trim(),style:U.style,formContext:k,formData:f,schema:fe,uiSchema:u,registry:E},ur=E.fields.AnyOfField,di=E.fields.OneOfField,fr=u?.["ui:field"]&&u?.["ui:fieldReplacesAnyOrOneOf"]===!0;return(0,$.jsx)(X,{...zr,children:(0,$.jsxs)($.Fragment,{children:[Tt,fe.anyOf&&!fr&&!L.isSelect(fe)&&(0,$.jsx)(ur,{name:p,disabled:ye,readonly:Te,hideError:De,errorSchema:d,formData:f,formContext:k,idPrefix:h,idSchema:he,idSeparator:m,onBlur:s.onBlur,onChange:s.onChange,onFocus:s.onFocus,options:fe.anyOf.map(In=>L.retrieveSchema(or()(In)?In:{},f)),registry:E,required:A,schema:fe,uiSchema:u}),fe.oneOf&&!fr&&!L.isSelect(fe)&&(0,$.jsx)(di,{name:p,disabled:ye,readonly:Te,hideError:De,errorSchema:d,formData:f,formContext:k,idPrefix:h,idSchema:he,idSeparator:m,onBlur:s.onBlur,onChange:s.onChange,onFocus:s.onFocus,options:fe.oneOf.map(In=>L.retrieveSchema(or()(In)?In:{},f)),registry:E,required:A,schema:fe,uiSchema:u})]})})}class gP extends g.Component{shouldComponentUpdate(e){return!mn(this.props,e)}render(){return(0,$.jsx)(pP,{...this.props})}}const yP=gP;function vP(s){var e;const{schema:i,name:l,uiSchema:a,idSchema:c,formData:u,required:f,disabled:d=!1,readonly:h=!1,autofocus:m=!1,onChange:p,onBlur:y,onFocus:b,registry:x,rawErrors:A,hideError:E}=s,{title:w,format:k}=i,{widgets:L,formContext:z,schemaUtils:U,globalUiOptions:X}=x,ee=U.isSelect(i)?va(i,a):void 0;let oe=ee?"select":"text";k&&wO(i,k,L)&&(oe=k);const{widget:ue=oe,placeholder:fe="",title:ge,...he}=et(a),me=U.getDisplayLabel(i,a,X),be=(e=ge??w)!==null&&e!==void 0?e:l,ye=ei(i,ue,L);return(0,$.jsx)(ye,{options:{...he,enumOptions:ee},schema:i,uiSchema:a,id:c.$id,name:l,label:be,hideLabel:!me,hideError:E,value:u,onChange:p,onBlur:y,onFocus:b,required:f,disabled:d,readonly:h,formContext:z,autofocus:m,registry:x,placeholder:fe,rawErrors:A})}const bP=vP;function xP(s){const{formData:e,onChange:i}=s;return(0,g.useEffect)(()=>{e===void 0&&i(null)},[e,i]),null}const SP=xP;function EP(){return{AnyOfField:Tg,ArrayField:_O,BooleanField:tk,NumberField:ok,ObjectField:dP,OneOfField:Tg,SchemaField:yP,StringField:bP,NullField:SP}}const AP=EP;function wP(s){const{idSchema:e,description:i,registry:l,schema:a,uiSchema:c}=s,u=et(c,l.globalUiOptions),{label:f=!0}=u;if(!i||!f)return null;const d=Qe("DescriptionFieldTemplate",l,u);return(0,$.jsx)(d,{id:Zi(e),description:i,schema:a,uiSchema:c,registry:l})}function CP(s){const{children:e,className:i,disabled:l,hasToolbar:a,hasMoveDown:c,hasMoveUp:u,hasRemove:f,hasCopy:d,index:h,onCopyIndexClick:m,onDropIndexClick:p,onReorderClick:y,readonly:b,registry:x,uiSchema:A}=s,{CopyButton:E,MoveDownButton:w,MoveUpButton:k,RemoveButton:L}=x.templates.ButtonTemplates,z={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return(0,$.jsxs)("div",{className:i,children:[(0,$.jsx)("div",{className:a?"col-xs-9":"col-xs-12",children:e}),a&&(0,$.jsx)("div",{className:"col-xs-3 array-item-toolbox",children:(0,$.jsxs)("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(u||c)&&(0,$.jsx)(k,{style:z,disabled:l||b||!u,onClick:y(h,h-1),uiSchema:A,registry:x}),(u||c)&&(0,$.jsx)(w,{style:z,disabled:l||b||!c,onClick:y(h,h+1),uiSchema:A,registry:x}),d&&(0,$.jsx)(E,{style:z,disabled:l||b,onClick:m(h),uiSchema:A,registry:x}),f&&(0,$.jsx)(L,{style:z,disabled:l||b,onClick:p(h),uiSchema:A,registry:x})]})})]})}function OP(s){const{canAdd:e,className:i,disabled:l,idSchema:a,uiSchema:c,items:u,onAddClick:f,readonly:d,registry:h,required:m,schema:p,title:y}=s,b=et(c),x=Qe("ArrayFieldDescriptionTemplate",h,b),A=Qe("ArrayFieldItemTemplate",h,b),E=Qe("ArrayFieldTitleTemplate",h,b),{ButtonTemplates:{AddButton:w}}=h.templates;return(0,$.jsxs)("fieldset",{className:i,id:a.$id,children:[(0,$.jsx)(E,{idSchema:a,title:b.title||y,required:m,schema:p,uiSchema:c,registry:h}),(0,$.jsx)(x,{idSchema:a,description:b.description||p.description,schema:p,uiSchema:c,registry:h}),(0,$.jsx)("div",{className:"row array-item-list",children:u&&u.map(({key:k,...L})=>(0,$.jsx)(A,{...L},k))}),e&&(0,$.jsx)(w,{className:"array-item-add",onClick:f,disabled:l||d,uiSchema:c,registry:h})]})}function kP(s){const{idSchema:e,title:i,schema:l,uiSchema:a,required:c,registry:u}=s,f=et(a,u.globalUiOptions),{label:d=!0}=f;if(!i||!d)return null;const h=Qe("TitleFieldTemplate",u,f);return(0,$.jsx)(h,{id:cf(e),title:i,required:c,schema:l,uiSchema:a,registry:u})}function PP(s){const{id:e,name:i,value:l,readonly:a,disabled:c,autofocus:u,onBlur:f,onFocus:d,onChange:h,onChangeOverride:m,options:p,schema:y,uiSchema:b,formContext:x,registry:A,rawErrors:E,type:w,hideLabel:k,hideError:L,...z}=s;if(!e)throw console.log("No id for",s),new Error(`no id for props ${JSON.stringify(s)}`);const U={...z,...yg(y,w,p)};let X;U.type==="number"||U.type==="integer"?X=l||l===0?l:"":X=l??"";const ee=(0,g.useCallback)(({target:{value:fe}})=>h(fe===""?p.emptyValue:fe),[h,p]),oe=(0,g.useCallback)(({target:fe})=>f(e,fe&&fe.value),[f,e]),ue=(0,g.useCallback)(({target:fe})=>d(e,fe&&fe.value),[d,e]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("input",{id:e,name:e,className:"form-control",readOnly:a,disabled:c,autoFocus:u,value:X,...U,list:y.examples?Fo(e):void 0,onChange:m||ee,onBlur:oe,onFocus:ue,"aria-describedby":Nn(e,!!y.examples)}),Array.isArray(y.examples)&&(0,$.jsx)("datalist",{id:Fo(e),children:y.examples.concat(y.default&&!y.examples.includes(y.default)?[y.default]:[]).map(fe=>(0,$.jsx)("option",{value:fe},fe))},`datalist_${e}`)]})}function TP({uiSchema:s}){const{submitText:e,norender:i,props:l={}}=bg(s);return i?null:(0,$.jsx)("div",{children:(0,$.jsx)("button",{type:"submit",...l,className:`btn btn-info ${l.className||""}`,children:e})})}function Vo(s){const{iconType:e="default",icon:i,className:l,uiSchema:a,registry:c,...u}=s;return(0,$.jsx)("button",{type:"button",className:`btn btn-${e} ${l}`,...u,children:(0,$.jsx)("i",{className:`glyphicon glyphicon-${i}`})})}function DP(s){const{registry:{translateString:e}}=s;return(0,$.jsx)(Vo,{title:e(st.CopyButton),className:"array-item-copy",...s,icon:"copy"})}function MP(s){const{registry:{translateString:e}}=s;return(0,$.jsx)(Vo,{title:e(st.MoveDownButton),className:"array-item-move-down",...s,icon:"arrow-down"})}function IP(s){const{registry:{translateString:e}}=s;return(0,$.jsx)(Vo,{title:e(st.MoveUpButton),className:"array-item-move-up",...s,icon:"arrow-up"})}function RP(s){const{registry:{translateString:e}}=s;return(0,$.jsx)(Vo,{title:e(st.RemoveButton),className:"array-item-remove",...s,iconType:"danger",icon:"remove"})}function LP({className:s,onClick:e,disabled:i,registry:l}){const{translateString:a}=l;return(0,$.jsx)("div",{className:"row",children:(0,$.jsx)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${s}`,children:(0,$.jsx)(Vo,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:a(st.AddButton),onClick:e,disabled:i,registry:l})})})}function FP(){return{SubmitButton:TP,AddButton:LP,CopyButton:DP,MoveDownButton:MP,MoveUpButton:IP,RemoveButton:RP}}const NP=FP;function BP(s){const{id:e,description:i}=s;return i?typeof i=="string"?(0,$.jsx)("p",{id:e,className:"field-description",children:i}):(0,$.jsx)("div",{id:e,className:"field-description",children:i}):null}function $P({errors:s,registry:e}){const{translateString:i}=e;return(0,$.jsxs)("div",{className:"panel panel-danger errors",children:[(0,$.jsx)("div",{className:"panel-heading",children:(0,$.jsx)("h3",{className:"panel-title",children:i(st.ErrorsLabel)})}),(0,$.jsx)("ul",{className:"list-group",children:s.map((l,a)=>(0,$.jsx)("li",{className:"list-group-item text-danger",children:l.stack},a))})]})}const jP="*";function r0(s){const{label:e,required:i,id:l}=s;return e?(0,$.jsxs)("label",{className:"control-label",htmlFor:l,children:[e,i&&(0,$.jsx)("span",{className:"required",children:jP})]}):null}function WP(s){const{id:e,label:i,children:l,errors:a,help:c,description:u,hidden:f,required:d,displayLabel:h,registry:m,uiSchema:p}=s,y=et(p),b=Qe("WrapIfAdditionalTemplate",m,y);return f?(0,$.jsx)("div",{className:"hidden",children:l}):(0,$.jsxs)(b,{...s,children:[h&&(0,$.jsx)(r0,{label:i,required:d,id:e}),h&&u?u:null,l,a,c]})}const VP=WP;function zP(s){const{errors:e=[],idSchema:i}=s;if(e.length===0)return null;const l=lf(i);return(0,$.jsx)("div",{children:(0,$.jsx)("ul",{id:l,className:"error-detail bs-callout bs-callout-info",children:e.filter(a=>!!a).map((a,c)=>(0,$.jsx)("li",{className:"text-danger",children:a},c))})})}function UP(s){const{idSchema:e,help:i}=s;if(!i)return null;const l=af(e);return typeof i=="string"?(0,$.jsx)("p",{id:l,className:"help-block",children:i}):(0,$.jsx)("div",{id:l,className:"help-block",children:i})}function HP(s){const{description:e,disabled:i,formData:l,idSchema:a,onAddClick:c,properties:u,readonly:f,registry:d,required:h,schema:m,title:p,uiSchema:y}=s,b=et(y),x=Qe("TitleFieldTemplate",d,b),A=Qe("DescriptionFieldTemplate",d,b),{ButtonTemplates:{AddButton:E}}=d.templates;return(0,$.jsxs)("fieldset",{id:a.$id,children:[p&&(0,$.jsx)(x,{id:cf(a),title:p,required:h,schema:m,uiSchema:y,registry:d}),e&&(0,$.jsx)(A,{id:Zi(a),description:e,schema:m,uiSchema:y,registry:d}),u.map(w=>w.content),Xp(m,y,l)&&(0,$.jsx)(E,{className:"object-property-expand",onClick:c(m),disabled:i||f,uiSchema:y,registry:d})]})}const KP="*";function GP(s){const{id:e,title:i,required:l}=s;return(0,$.jsxs)("legend",{id:e,children:[i,l&&(0,$.jsx)("span",{className:"required",children:KP})]})}function YP(s){const{schema:e,idSchema:i,reason:l,registry:a}=s,{translateString:c}=a;let u=st.UnsupportedField;const f=[];return i&&i.$id&&(u=st.UnsupportedFieldWithId,f.push(i.$id)),l&&(u=u===st.UnsupportedField?st.UnsupportedFieldWithReason:st.UnsupportedFieldWithIdAndReason,f.push(l)),(0,$.jsxs)("div",{className:"unsupported-field",children:[(0,$.jsx)("p",{children:(0,$.jsx)(Ea,{options:{disableParsingRawHTML:!0},children:c(u,f)})}),e&&(0,$.jsx)("pre",{children:JSON.stringify(e,null,2)})]})}const JP=YP;function XP(s){const{id:e,classNames:i,style:l,disabled:a,label:c,onKeyChange:u,onDropPropertyClick:f,readonly:d,required:h,schema:m,children:p,uiSchema:y,registry:b}=s,{templates:x,translateString:A}=b,{RemoveButton:E}=x.ButtonTemplates,w=A(st.KeyLabel,[c]);return ks in m?(0,$.jsx)("div",{className:i,style:l,children:(0,$.jsxs)("div",{className:"row",children:[(0,$.jsx)("div",{className:"col-xs-5 form-additional",children:(0,$.jsxs)("div",{className:"form-group",children:[(0,$.jsx)(r0,{label:w,required:h,id:`${e}-key`}),(0,$.jsx)("input",{className:"form-control",type:"text",id:`${e}-key`,onBlur:({target:L})=>u(L&&L.value),defaultValue:c})]})}),(0,$.jsx)("div",{className:"form-additional form-group col-xs-5",children:p}),(0,$.jsx)("div",{className:"col-xs-2",children:(0,$.jsx)(E,{className:"array-item-remove btn-block",style:{border:"0"},disabled:a||d,onClick:f(c),uiSchema:y,registry:b})})]})}):(0,$.jsx)("div",{className:i,style:l,children:p})}function ZP(){return{ArrayFieldDescriptionTemplate:wP,ArrayFieldItemTemplate:CP,ArrayFieldTemplate:OP,ArrayFieldTitleTemplate:kP,ButtonTemplates:NP(),BaseInputTemplate:PP,DescriptionFieldTemplate:BP,ErrorListTemplate:$P,FieldTemplate:VP,FieldErrorTemplate:zP,FieldHelpTemplate:UP,ObjectFieldTemplate:HP,TitleFieldTemplate:GP,UnsupportedFieldTemplate:JP,WrapIfAdditionalTemplate:XP}}const QP=ZP;function qP(s){return Object.values(s).every(e=>e!==-1)}function _P({type:s,range:e,value:i,select:l,rootId:a,name:c,disabled:u,readonly:f,autofocus:d,registry:h,onBlur:m,onFocus:p}){const y=a+"_"+s,{SelectWidget:b}=h.widgets;return(0,$.jsx)(b,{schema:{type:"integer"},id:y,name:c,className:"form-control",options:{enumOptions:dg(e[0],e[1])},placeholder:s,value:i,disabled:u,readonly:f,autofocus:d,onChange:x=>l(s,x),onBlur:m,onFocus:p,registry:h,label:"","aria-describedby":Nn(a)})}function eT({time:s=!1,disabled:e=!1,readonly:i=!1,autofocus:l=!1,options:a,id:c,name:u,registry:f,onBlur:d,onFocus:h,onChange:m,value:p}){const{translateString:y}=f,[b,x]=(0,g.useState)(p),[A,E]=(0,g.useReducer)((z,U)=>({...z,...U}),uf(p,s));(0,g.useEffect)(()=>{const z=Sg(A,s);qP(A)&&z!==p?m(z):b!==p&&(x(p),E(uf(p,s)))},[s,p,m,A,b]);const w=(0,g.useCallback)((z,U)=>{E({[z]:U})},[]),k=(0,g.useCallback)(z=>{if(z.preventDefault(),e||i)return;const U=uf(new Date().toJSON(),s);m(Sg(U,s))},[e,i,s]),L=(0,g.useCallback)(z=>{z.preventDefault(),!(e||i)&&m(void 0)},[e,i,m]);return(0,$.jsxs)("ul",{className:"list-inline",children:[xO(A,s,a.yearsRange,a.format).map((z,U)=>(0,$.jsx)("li",{className:"list-inline-item",children:(0,$.jsx)(_P,{rootId:c,name:u,select:w,...z,disabled:e,readonly:i,registry:f,onBlur:d,onFocus:h,autofocus:l&&U===0})},U)),(a.hideNowButton!=="undefined"?!a.hideNowButton:!0)&&(0,$.jsx)("li",{className:"list-inline-item",children:(0,$.jsx)("a",{href:"#",className:"btn btn-info btn-now",onClick:k,children:y(st.NowLabel)})}),(a.hideClearButton!=="undefined"?!a.hideClearButton:!0)&&(0,$.jsx)("li",{className:"list-inline-item",children:(0,$.jsx)("a",{href:"#",className:"btn btn-warning btn-clear",onClick:L,children:y(st.ClearLabel)})})]})}const tT=eT;function nT({time:s=!0,...e}){const{AltDateWidget:i}=e.registry.widgets;return(0,$.jsx)(i,{time:s,...e})}const rT=nT;function iT({schema:s,uiSchema:e,options:i,id:l,value:a,disabled:c,readonly:u,label:f,hideLabel:d,autofocus:h=!1,onBlur:m,onFocus:p,onChange:y,registry:b}){var x;const A=Qe("DescriptionFieldTemplate",b,i),E=No(s),w=(0,g.useCallback)(U=>y(U.target.checked),[y]),k=(0,g.useCallback)(U=>m(l,U.target.checked),[m,l]),L=(0,g.useCallback)(U=>p(l,U.target.checked),[p,l]),z=(x=i.description)!==null&&x!==void 0?x:s.description;return(0,$.jsxs)("div",{className:`checkbox ${c||u?"disabled":""}`,children:[!d&&!!z&&(0,$.jsx)(A,{id:Zi(l),description:z,schema:s,uiSchema:e,registry:b}),(0,$.jsxs)("label",{children:[(0,$.jsx)("input",{type:"checkbox",id:l,name:l,checked:typeof a>"u"?!1:a,required:E,disabled:c||u,autoFocus:h,onChange:w,onBlur:k,onFocus:L,"aria-describedby":Nn(l)}),Qi((0,$.jsx)("span",{children:f}),d)]})]})}const sT=iT;function oT({id:s,disabled:e,options:{inline:i=!1,enumOptions:l,enumDisabled:a,emptyValue:c},value:u,autofocus:f=!1,readonly:d,onChange:h,onBlur:m,onFocus:p}){const y=Array.isArray(u)?u:[u],b=(0,g.useCallback)(({target:A})=>m(s,Jt(A&&A.value,l,c)),[m,s]),x=(0,g.useCallback)(({target:A})=>p(s,Jt(A&&A.value,l,c)),[p,s]);return(0,$.jsx)("div",{className:"checkboxes",id:s,children:Array.isArray(l)&&l.map((A,E)=>{const w=ga(A.value,y),k=Array.isArray(a)&&a.indexOf(A.value)!==-1,L=e||k||d?"disabled":"",z=X=>{X.target.checked?h(pg(E,y,l)):h(hg(E,y,l))},U=(0,$.jsxs)("span",{children:[(0,$.jsx)("input",{type:"checkbox",id:ya(s,E),name:s,checked:w,value:String(E),disabled:e||k||d,autoFocus:f&&E===0,onChange:z,onBlur:b,onFocus:x,"aria-describedby":Nn(s)}),(0,$.jsx)("span",{children:A.label})]});return i?(0,$.jsx)("label",{className:`checkbox-inline ${L}`,children:U},E):(0,$.jsx)("div",{className:`checkbox ${L}`,children:(0,$.jsx)("label",{children:U})},E)})})}const lT=oT;function aT(s){const{disabled:e,readonly:i,options:l,registry:a}=s,c=Qe("BaseInputTemplate",a,l);return(0,$.jsx)(c,{type:"color",...s,disabled:e||i})}function cT(s){const{onChange:e,options:i,registry:l}=s,a=Qe("BaseInputTemplate",l,i),c=(0,g.useCallback)(u=>e(u||void 0),[e]);return(0,$.jsx)(a,{type:"date",...s,onChange:c})}function uT(s){const{onChange:e,value:i,options:l,registry:a}=s,c=Qe("BaseInputTemplate",a,l);return(0,$.jsx)(c,{type:"datetime-local",...s,value:MO(i),onChange:u=>e(CO(u))})}function fT(s){const{options:e,registry:i}=s,l=Qe("BaseInputTemplate",i,e);return(0,$.jsx)(l,{type:"email",...s})}function dT(s,e){return s===null?null:s.replace(";base64",`;name=${encodeURIComponent(e)};base64`)}function hT(s){const{name:e,size:i,type:l}=s;return new Promise((a,c)=>{const u=new window.FileReader;u.onerror=c,u.onload=f=>{var d;typeof((d=f.target)===null||d===void 0?void 0:d.result)=="string"?a({dataURL:dT(f.target.result,e),name:e,size:i,type:l}):a({dataURL:null,name:e,size:i,type:l})},u.readAsDataURL(s)})}function mT(s){return Promise.all(Array.from(s).map(hT))}function pT({fileInfo:s,registry:e}){const{translateString:i}=e,{dataURL:l,type:a,name:c}=s;return l?["image/jpeg","image/png"].includes(a)?(0,$.jsx)("img",{src:l,style:{maxWidth:"100%"},className:"file-preview"}):(0,$.jsxs)($.Fragment,{children:[" ",(0,$.jsx)("a",{download:`preview-${c}`,href:l,className:"file-download",children:i(st.PreviewLabel)})]}):null}function gT({filesInfo:s,registry:e,preview:i,onRemove:l,options:a}){if(s.length===0)return null;const{translateString:c}=e,{RemoveButton:u}=Qe("ButtonTemplates",e,a);return(0,$.jsx)("ul",{className:"file-info",children:s.map((f,d)=>{const{name:h,size:m,type:p}=f,y=()=>l(d);return(0,$.jsxs)("li",{children:[(0,$.jsx)(Ea,{children:c(st.FilesInfo,[h,p,String(m)])}),i&&(0,$.jsx)(pT,{fileInfo:f,registry:e}),(0,$.jsx)(u,{onClick:y,registry:e})]},d)})})}function yT(s){return s.reduce((e,i)=>{if(!i)return e;try{const{blob:l,name:a}=hO(i);return[...e,{dataURL:i,name:a,size:l.size,type:l.type}]}catch{return e}},[])}function vT(s){const{disabled:e,readonly:i,required:l,multiple:a,onChange:c,value:u,options:f,registry:d}=s,h=Qe("BaseInputTemplate",d,f),m=(0,g.useCallback)(b=>{b.target.files&&mT(b.target.files).then(x=>{const A=x.map(E=>E.dataURL);c(a?u.concat(A[0]):A[0])})},[a,u,c]),p=(0,g.useMemo)(()=>yT(Array.isArray(u)?u:[u]),[u]),y=(0,g.useCallback)(b=>{if(a){const x=u.filter((A,E)=>E!==b);c(x)}else c(void 0)},[a,u,c]);return(0,$.jsxs)("div",{children:[(0,$.jsx)(h,{...s,disabled:e||i,type:"file",required:u?!1:l,onChangeOverride:m,value:"",accept:f.accept?String(f.accept):void 0}),(0,$.jsx)(gT,{filesInfo:p,onRemove:y,registry:d,preview:f.filePreview,options:f})]})}const bT=vT;function xT({id:s,value:e}){return(0,$.jsx)("input",{type:"hidden",id:s,name:s,value:typeof e>"u"?"":e})}const ST=xT;function ET(s){const{options:e,registry:i}=s,l=Qe("BaseInputTemplate",i,e);return(0,$.jsx)(l,{type:"password",...s})}function AT({options:s,value:e,required:i,disabled:l,readonly:a,autofocus:c=!1,onBlur:u,onFocus:f,onChange:d,id:h}){const{enumOptions:m,enumDisabled:p,inline:y,emptyValue:b}=s,x=(0,g.useCallback)(({target:E})=>u(h,Jt(E&&E.value,m,b)),[u,h]),A=(0,g.useCallback)(({target:E})=>f(h,Jt(E&&E.value,m,b)),[f,h]);return(0,$.jsx)("div",{className:"field-radio-group",id:h,children:Array.isArray(m)&&m.map((E,w)=>{const k=ga(E.value,e),L=Array.isArray(p)&&p.indexOf(E.value)!==-1,z=l||L||a?"disabled":"",U=()=>d(E.value),X=(0,$.jsxs)("span",{children:[(0,$.jsx)("input",{type:"radio",id:ya(h,w),checked:k,name:h,required:i,value:String(w),disabled:l||L||a,autoFocus:c&&w===0,onChange:U,onBlur:x,onFocus:A,"aria-describedby":Nn(h)}),(0,$.jsx)("span",{children:E.label})]});return y?(0,$.jsx)("label",{className:`radio-inline ${z}`,children:X},w):(0,$.jsx)("div",{className:`radio ${z}`,children:(0,$.jsx)("label",{children:X})},w)})})}const wT=AT;function CT(s){const{value:e,registry:{templates:{BaseInputTemplate:i}}}=s;return(0,$.jsxs)("div",{className:"field-range-wrapper",children:[(0,$.jsx)(i,{type:"range",...s}),(0,$.jsx)("span",{className:"range-view",children:e})]})}function Ef(s,e){return e?Array.from(s.target.options).slice().filter(i=>i.selected).map(i=>i.value):s.target.value}function OT({schema:s,id:e,options:i,value:l,required:a,disabled:c,readonly:u,multiple:f=!1,autofocus:d=!1,onChange:h,onBlur:m,onFocus:p,placeholder:y}){const{enumOptions:b,enumDisabled:x,emptyValue:A}=i,E=f?[]:"",w=(0,g.useCallback)(X=>{const ee=Ef(X,f);return p(e,Jt(ee,b,A))},[p,e,s,f,b,A]),k=(0,g.useCallback)(X=>{const ee=Ef(X,f);return m(e,Jt(ee,b,A))},[m,e,s,f,b,A]),L=(0,g.useCallback)(X=>{const ee=Ef(X,f);return h(Jt(ee,b,A))},[h,s,f,b,A]),z=sf(l,b,f),U=!f&&s.default===void 0;return(0,$.jsxs)("select",{id:e,name:e,multiple:f,className:"form-control",value:typeof z>"u"?E:z,required:a,disabled:c||u,autoFocus:d,onBlur:k,onFocus:w,onChange:L,"aria-describedby":Nn(e),children:[U&&(0,$.jsx)("option",{value:"",children:y}),Array.isArray(b)&&b.map(({value:X,label:ee},oe)=>{const ue=x&&x.indexOf(X)!==-1;return(0,$.jsx)("option",{value:String(oe),disabled:ue,children:ee},oe)})]})}const kT=OT;function i0({id:s,options:e={},placeholder:i,value:l,required:a,disabled:c,readonly:u,autofocus:f=!1,onChange:d,onBlur:h,onFocus:m}){const p=(0,g.useCallback)(({target:{value:x}})=>d(x===""?e.emptyValue:x),[d,e.emptyValue]),y=(0,g.useCallback)(({target:x})=>h(s,x&&x.value),[h,s]),b=(0,g.useCallback)(({target:x})=>m(s,x&&x.value),[s,m]);return(0,$.jsx)("textarea",{id:s,name:s,className:"form-control",value:l||"",placeholder:i,required:a,disabled:c,readOnly:u,autoFocus:f,rows:e.rows,onBlur:y,onFocus:b,onChange:p,"aria-describedby":Nn(s)})}i0.defaultProps={autofocus:!1,options:{}};const PT=i0;function TT(s){const{options:e,registry:i}=s,l=Qe("BaseInputTemplate",i,e);return(0,$.jsx)(l,{...s})}function DT(s){const{onChange:e,options:i,registry:l}=s,a=Qe("BaseInputTemplate",l,i),c=(0,g.useCallback)(u=>e(u?`${u}:00`:void 0),[e]);return(0,$.jsx)(a,{type:"time",...s,onChange:c})}function MT(s){const{options:e,registry:i}=s,l=Qe("BaseInputTemplate",i,e);return(0,$.jsx)(l,{type:"url",...s})}function IT(s){const{options:e,registry:i}=s,l=Qe("BaseInputTemplate",i,e);return(0,$.jsx)(l,{type:"number",...s})}function RT(){return{AltDateWidget:tT,AltDateTimeWidget:rT,CheckboxWidget:sT,CheckboxesWidget:lT,ColorWidget:aT,DateWidget:cT,DateTimeWidget:uT,EmailWidget:fT,FileWidget:bT,HiddenWidget:ST,PasswordWidget:ET,RadioWidget:wT,RangeWidget:CT,SelectWidget:kT,TextWidget:TT,TextareaWidget:PT,TimeWidget:DT,UpDownWidget:IT,URLWidget:MT}}const LT=RT;function FT(){return{fields:AP(),templates:QP(),widgets:LT(),rootSchema:{},formContext:{},translateString:pO}}class NT extends g.Component{constructor(e){if(super(e),this.getUsedFormData=(i,l)=>{if(l.length===0&&typeof i!="object")return i;const a=kg()(i,l);return Array.isArray(i)?Object.keys(a).map(c=>a[c]):a},this.getFieldNames=(i,l)=>{const a=(c,u=[],f=[[]])=>(Object.keys(c).forEach(d=>{if(typeof c[d]=="object"){const h=f.map(m=>[...m,d]);c[d][Gu]&&c[d][fa]!==""?u.push(c[d][fa]):a(c[d],u,h)}else d===fa&&c[d]!==""&&f.forEach(h=>{const m=Le()(l,h);(typeof m!="object"||vi()(m)||Array.isArray(m)&&m.every(p=>typeof p!="object"))&&u.push(h)})}),u);return a(i)},this.omitExtraData=i=>{const{schema:l,schemaUtils:a}=this.state,c=a.retrieveSchema(l,i),u=a.toPathSchema(c,"",i),f=this.getFieldNames(u,i);return this.getUsedFormData(i,f)},this.onChange=(i,l,a)=>{const{extraErrors:c,omitExtraData:u,liveOmit:f,noValidate:d,liveValidate:h,onChange:m}=this.props,{schemaUtils:p,schema:y,retrievedSchema:b}=this.state;(kt(i)||Array.isArray(i))&&(i=this.getStateFromProps(this.props,i,b).formData);const x=!d&&h;let A={formData:i,schema:y},E=i;if(u===!0&&f===!0&&(E=this.omitExtraData(i),A={formData:E}),x){const w=this.validate(E,y,p,b);let k=w.errors,L=w.errorSchema;const z=k,U=L;if(c){const X=ba(w,c);L=X.errorSchema,k=X.errors}if(l){const X=this.filterErrorsBasedOnSchema(l,b,E);L=xi(L,X,"preventDuplicates")}A={formData:E,errors:k,errorSchema:L,schemaValidationErrors:z,schemaValidationErrorSchema:U}}else if(!d&&l){const w=c?xi(l,c,"preventDuplicates"):l;A={formData:E,errorSchema:w,errors:Bo(w)}}this.setState(A,()=>m&&m({...this.state,...A},a))},this.reset=()=>{const{onChange:i}=this.props,c={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(c,()=>i&&i({...this.state,...c}))},this.onBlur=(i,l)=>{const{onBlur:a}=this.props;a&&a(i,l)},this.onFocus=(i,l)=>{const{onFocus:a}=this.props;a&&a(i,l)},this.onSubmit=i=>{if(i.preventDefault(),i.target!==i.currentTarget)return;i.persist();const{omitExtraData:l,extraErrors:a,noValidate:c,onSubmit:u}=this.props;let{formData:f}=this.state;if(l===!0&&(f=this.omitExtraData(f)),c||this.validateFormWithFormData(f)){const d=a||{},h=a?Bo(a):[];this.setState({formData:f,errors:h,errorSchema:d,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{u&&u({...this.state,formData:f,status:"submitted"},i)})}},this.submit=()=>{if(this.formElement.current){const i=new CustomEvent("submit",{cancelable:!0});i.preventDefault(),this.formElement.current.dispatchEvent(i),this.formElement.current.requestSubmit()}},this.validateFormWithFormData=i=>{const{extraErrors:l,extraErrorsBlockSubmit:a,focusOnFirstError:c,onError:u}=this.props,{errors:f}=this.state,d=this.validate(i);let h=d.errors,m=d.errorSchema;const p=h,y=m,b=h.length>0||l&&a;if(b){if(l){const x=ba(d,l);m=x.errorSchema,h=x.errors}c&&(typeof c=="function"?c(h[0]):this.focusOnError(h[0])),this.setState({errors:h,errorSchema:m,schemaValidationErrors:p,schemaValidationErrorSchema:y},()=>{u?u(h):console.error("Form validation failed",h)})}else f.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!b},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!mn(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=(0,g.createRef)()}getSnapshotBeforeUpdate(e,i){if(!mn(this.props,e)){const l=!mn(e.schema,this.props.schema),a=!mn(e.formData,this.props.formData),c=this.getStateFromProps(this.props,this.props.formData,l||a?void 0:this.state.retrievedSchema,l),u=!mn(c,i);return{nextState:c,shouldUpdate:u}}return{shouldUpdate:!1}}componentDidUpdate(e,i,l){if(l.shouldUpdate){const{nextState:a}=l;!mn(a.formData,this.props.formData)&&!mn(a.formData,i.formData)&&this.props.onChange&&this.props.onChange(a),this.setState(a)}}getStateFromProps(e,i,l,a=!1){var c;const u=this.state||{},f="schema"in e?e.schema:this.props.schema,d=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},h=typeof i<"u",m="liveValidate"in e?e.liveValidate:this.props.liveValidate,p=h&&!e.noValidate&&m,y=f,b="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior;let x=u.schemaUtils;(!x||x.doesSchemaUtilsDiffer(e.validator,y,b))&&(x=dO(e.validator,y,b));const A=x.getDefaultFormState(f,i),E=l??x.retrieveSchema(f,A),w=()=>e.noValidate||a?{errors:[],errorSchema:{}}:e.liveValidate?{errors:u.errors||[],errorSchema:u.errorSchema||{}}:{errors:u.schemaValidationErrors||[],errorSchema:u.schemaValidationErrorSchema||{}};let k,L,z=u.schemaValidationErrors,U=u.schemaValidationErrorSchema;if(p){const oe=this.validate(A,f,x,E);k=oe.errors,a?L=oe.errorSchema:L=xi((c=this.state)===null||c===void 0?void 0:c.errorSchema,oe.errorSchema,"preventDuplicates"),z=k,U=L}else{const oe=w();k=oe.errors,L=oe.errorSchema}if(e.extraErrors){const oe=ba({errorSchema:L,errors:k},e.extraErrors);L=oe.errorSchema,k=oe.errors}const X=x.toIdSchema(E,d["ui:rootFieldId"],A,e.idPrefix,e.idSeparator);return{schemaUtils:x,schema:f,uiSchema:d,idSchema:X,formData:A,edit:h,errors:k,errorSchema:L,schemaValidationErrors:z,schemaValidationErrorSchema:U,retrievedSchema:E}}shouldComponentUpdate(e,i){return PO(this,e,i)}validate(e,i=this.props.schema,l,a){const c=l||this.state.schemaUtils,{customValidate:u,transformErrors:f,uiSchema:d}=this.props,h=a??c.retrieveSchema(i,e);return c.getValidator().validateFormData(e,h,u,f,d)}renderErrors(e){const{errors:i,errorSchema:l,schema:a,uiSchema:c}=this.state,{formContext:u}=this.props,f=et(c),d=Qe("ErrorListTemplate",e,f);return i&&i.length?(0,$.jsx)(d,{errors:i,errorSchema:l||{},schema:a,uiSchema:c,formContext:u,registry:e}):null}filterErrorsBasedOnSchema(e,i,l){const{retrievedSchema:a,schemaUtils:c}=this.state,u=i??a,f=c.toPathSchema(u,"",l),d=this.getFieldNames(f,l),h=kg()(e,d);i?.type!=="object"&&i?.type!=="array"&&(h.__errors=e.__errors);const m=p=>(FO()(p,(y,b)=>{mg()(y)?delete p[b]:typeof y=="object"&&!Array.isArray(y.__errors)&&m(y)}),p);return m(h)}getRegistry(){var e;const{translateString:i,uiSchema:l={}}=this.props,{schemaUtils:a}=this.state,{fields:c,templates:u,widgets:f,formContext:d,translateString:h}=FT();return{fields:{...c,...this.props.fields},templates:{...u,...this.props.templates,ButtonTemplates:{...u.ButtonTemplates,...(e=this.props.templates)===null||e===void 0?void 0:e.ButtonTemplates}},widgets:{...f,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||d,schemaUtils:a,translateString:i||h,globalUiOptions:l[SC]}}focusOnError(e){const{idPrefix:i="root",idSeparator:l="_"}=this.props,{property:a}=e,c=Eg()(a);c[0]===""?c[0]=i:c.unshift(i);const u=c.join(l);let f=this.formElement.current.elements[u];f||(f=this.formElement.current.querySelector(`input[id^="${u}"`)),f&&f.length&&(f=f[0]),f&&f.focus()}validateForm(){const{omitExtraData:e}=this.props;let{formData:i}=this.state;return e===!0&&(i=this.omitExtraData(i)),this.validateFormWithFormData(i)}render(){const{children:e,id:i,idPrefix:l,idSeparator:a,className:c="",tagName:u,name:f,method:d,target:h,action:m,autoComplete:p,enctype:y,acceptcharset:b,acceptCharset:x,noHtml5Validate:A=!1,disabled:E,readonly:w,formContext:k,showErrorList:L="top",_internalFormWrapper:z}=this.props,{schema:U,uiSchema:X,formData:ee,errorSchema:oe,idSchema:ue}=this.state,fe=this.getRegistry(),{SchemaField:ge}=fe.fields,{SubmitButton:he}=fe.templates.ButtonTemplates,me=z?u:void 0,be=z||u||"form";let{[da]:ye={}}=et(X);E&&(ye={...ye,props:{...ye.props,disabled:!0}});const Te={[Do]:{[da]:ye}};return(0,$.jsxs)(be,{className:c||"rjsf",id:i,name:f,method:d,target:h,action:m,autoComplete:p,encType:y,acceptCharset:x||b,noValidate:A,onSubmit:this.onSubmit,as:me,ref:this.formElement,children:[L==="top"&&this.renderErrors(fe),(0,$.jsx)(ge,{name:"",schema:U,uiSchema:X,errorSchema:oe,idSchema:ue,idPrefix:l,idSeparator:a,formContext:k,formData:ee,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:fe,disabled:E,readonly:w}),e||(0,$.jsx)(he,{uiSchema:Te,registry:fe}),L==="bottom"&&this.renderErrors(fe)]})}}function s0(s){return(0,g.forwardRef)(({fields:e,widgets:i,templates:l,...a},c)=>{var u;return e={...s?.fields,...e},i={...s?.widgets,...i},l={...s?.templates,...l,ButtonTemplates:{...(u=s?.templates)===null||u===void 0?void 0:u.ButtonTemplates,...l?.ButtonTemplates}},(0,$.jsx)(NT,{...s,...a,fields:e,widgets:i,templates:l,ref:c})})}const Sj=null,BT=s=>{const{id:e,children:i,classNames:l,style:a,disabled:c,displayLabel:u,hidden:f,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:p,required:y,rawErrors:b=[],errors:x,help:A,rawDescription:E,schema:w,uiSchema:k,registry:L}=s,z=et(k),U=Qe("WrapIfAdditionalTemplate",L,z);return f?g.createElement("div",{style:{display:"none"}},i):g.createElement(U,{classNames:l,style:a,disabled:c,id:e,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:p,required:y,schema:w,uiSchema:k,registry:L},g.createElement(M,{displayLabel:u,rawErrors:b,help:A,disabled:c,rawDescription:E,errors:x,required:y},i))},$T=(0,D.A)(s=>({markdownDescription:{fontSize:s.typography.caption.fontSize,margin:0,color:s.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),jT=s=>{const{id:e,description:i}=s,l=$T();return i?typeof i=="string"?g.createElement(v.h,{content:i,className:l.markdownDescription}):g.createElement(Ge.A,{id:e,variant:"subtitle2",style:{marginTop:"5px"}},i):null};var WT=S(18466);function VT({uiSchema:s,registry:e,...i}){const{translateString:l}=e;return(0,$.jsx)(Rn.A,{title:l(st.AddItemButton),...i,color:"primary",children:(0,$.jsx)(WT.A,{})})}function zT(s){const{children:e,disabled:i,hasToolbar:l,hasCopy:a,hasMoveDown:c,hasMoveUp:u,hasRemove:f,index:d,onCopyIndexClick:h,onDropIndexClick:m,onReorderClick:p,readonly:y,uiSchema:b,registry:x}=s,{CopyButton:A,MoveDownButton:E,MoveUpButton:w,RemoveButton:k}=x.templates.ButtonTemplates,L={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold",minWidth:0};return(0,$.jsxs)(Ne.A,{container:!0,alignItems:"center",children:[(0,$.jsx)(Ne.A,{item:!0,xs:!0,style:{overflow:"auto"},children:(0,$.jsx)(Ee.A,{mb:2,children:(0,$.jsx)(at.A,{elevation:2,children:(0,$.jsx)(Ee.A,{p:2,children:e})})})}),l&&(0,$.jsxs)(Ne.A,{item:!0,children:[(u||c)&&(0,$.jsx)(w,{style:L,disabled:i||y||!u,onClick:p(d,d-1),uiSchema:b,registry:x}),(u||c)&&(0,$.jsx)(E,{style:L,disabled:i||y||!c,onClick:p(d,d+1),uiSchema:b,registry:x}),a&&(0,$.jsx)(A,{style:L,disabled:i||y,onClick:h(d),uiSchema:b,registry:x}),f&&(0,$.jsx)(k,{style:L,disabled:i||y,onClick:m(d),uiSchema:b,registry:x})]})]})}function UT(s){const{canAdd:e,disabled:i,idSchema:l,uiSchema:a,items:c,onAddClick:u,readonly:f,registry:d,required:h,schema:m,title:p}=s,y=et(a),b=Qe("ArrayFieldDescriptionTemplate",d,y),x=Qe("ArrayFieldItemTemplate",d,y),A=Qe("ArrayFieldTitleTemplate",d,y),{ButtonTemplates:{AddButton:E}}=d.templates;return(0,$.jsx)(at.A,{elevation:2,children:(0,$.jsxs)(Ee.A,{p:2,children:[(0,$.jsx)(A,{idSchema:l,title:y.title||p,schema:m,uiSchema:a,required:h,registry:d}),(0,$.jsx)(b,{idSchema:l,description:y.description||m.description,schema:m,uiSchema:a,registry:d}),c&&c.map(({key:w,...k})=>(0,$.jsx)(x,{...k},w)),e&&(0,$.jsx)(Ne.A,{container:!0,justifyContent:"flex-end",children:(0,$.jsx)(Ne.A,{item:!0,children:(0,$.jsx)(Ee.A,{mt:2,children:(0,$.jsx)(E,{className:"array-item-add",onClick:u,disabled:i||f,uiSchema:a,registry:d})})})})]})})}const HT=["date","datetime-local","file","time"];function KT(s){const{id:e,name:i,placeholder:l,required:a,readonly:c,disabled:u,type:f,label:d,hideLabel:h,hideError:m,value:p,onChange:y,onChangeOverride:b,onBlur:x,onFocus:A,autofocus:E,options:w,schema:k,uiSchema:L,rawErrors:z=[],formContext:U,registry:X,InputLabelProps:ee,...oe}=s,ue=yg(k,f,w),{step:fe,min:ge,max:he,...me}=ue,be={inputProps:{step:fe,min:ge,max:he,...k.examples?{list:Fo(e)}:void 0},...me},ye=({target:{value:ve}})=>y(ve===""?w.emptyValue:ve),Te=({target:ve})=>x(e,ve&&ve.value),We=({target:ve})=>A(e,ve&&ve.value),De=HT.includes(f)?{...ee,shrink:!0}:ee;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(G.A,{id:e,name:e,placeholder:l,label:Qi(d||void 0,h,!1),autoFocus:E,required:a,disabled:u||c,...be,value:p||p===0?p:"",error:z.length>0,onChange:b||ye,onBlur:Te,onFocus:We,InputLabelProps:De,...oe,"aria-describedby":Nn(e,!!k.examples)}),Array.isArray(k.examples)&&(0,$.jsx)("datalist",{id:Fo(e),children:k.examples.concat(k.default&&!k.examples.includes(k.default)?[k.default]:[]).map(ve=>(0,$.jsx)("option",{value:ve},ve))})]})}function GT(s){const{id:e,description:i}=s;return i?(0,$.jsx)(Ge.A,{id:e,variant:"subtitle2",style:{marginTop:"5px"},children:i}):null}var o0=S(7147),Aa=S(8109);function YT({errors:s,registry:e}){const{translateString:i}=e;return(0,$.jsx)(at.A,{elevation:2,children:(0,$.jsxs)(Ee.A,{mb:2,p:2,children:[(0,$.jsx)(Ge.A,{variant:"h6",children:i(st.ErrorsLabel)}),(0,$.jsx)(po.A,{dense:!0,children:s.map((l,a)=>(0,$.jsxs)(Aa.A,{children:[(0,$.jsx)(wn.A,{children:(0,$.jsx)(o0.A,{color:"error"})}),(0,$.jsx)(Cn.A,{primary:l.stack})]},a))})]})})}var JT=S(89019),XT=S(68594),ZT=S(99594),QT=S(80113);function wa(s){const{icon:e,color:i,uiSchema:l,registry:a,...c}=s;return(0,$.jsx)(Rn.A,{...c,size:"small",color:i,children:e})}function qT(s){const{registry:{translateString:e}}=s;return(0,$.jsx)(wa,{title:e(st.CopyButton),...s,icon:(0,$.jsx)(ZT.A,{fontSize:"small"})})}function _T(s){const{registry:{translateString:e}}=s;return(0,$.jsx)(wa,{title:e(st.MoveDownButton),...s,icon:(0,$.jsx)(XT.A,{fontSize:"small"})})}function eD(s){const{registry:{translateString:e}}=s;return(0,$.jsx)(wa,{title:e(st.MoveUpButton),...s,icon:(0,$.jsx)(JT.A,{fontSize:"small"})})}function tD(s){const{iconType:e,...i}=s,{registry:{translateString:l}}=i;return(0,$.jsx)(wa,{title:l(st.RemoveButton),...i,color:"secondary",icon:(0,$.jsx)(QT.A,{fontSize:e==="default"?"medium":"small"})})}var Af=S(51253);function nD(s){const{errors:e=[],idSchema:i}=s;if(e.length===0)return null;const l=lf(i);return(0,$.jsx)(po.A,{dense:!0,disablePadding:!0,children:e.map((a,c)=>(0,$.jsx)(Aa.A,{disableGutters:!0,children:(0,$.jsx)(Af.A,{id:l,children:a})},c))})}function rD(s){const{idSchema:e,help:i}=s;if(!i)return null;const l=af(e);return(0,$.jsx)(Af.A,{id:l,children:i})}function iD(s){const{id:e,children:i,classNames:l,style:a,disabled:c,displayLabel:u,hidden:f,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:p,required:y,rawErrors:b=[],errors:x,help:A,description:E,rawDescription:w,schema:k,uiSchema:L,registry:z}=s,U=et(L),X=Qe("WrapIfAdditionalTemplate",z,U);return f?(0,$.jsx)("div",{style:{display:"none"},children:i}):(0,$.jsx)(X,{classNames:l,style:a,disabled:c,id:e,label:d,onDropPropertyClick:h,onKeyChange:m,readonly:p,required:y,schema:k,uiSchema:L,registry:z,children:(0,$.jsxs)(O.A,{fullWidth:!0,error:!!b.length,required:y,children:[i,u&&w?(0,$.jsx)(Ge.A,{variant:"caption",color:"textSecondary",children:E}):null,x,A]})})}function sD(s){const{description:e,title:i,properties:l,required:a,disabled:c,readonly:u,uiSchema:f,idSchema:d,schema:h,formData:m,onAddClick:p,registry:y}=s,b=et(f),x=Qe("TitleFieldTemplate",y,b),A=Qe("DescriptionFieldTemplate",y,b),{ButtonTemplates:{AddButton:E}}=y.templates;return(0,$.jsxs)($.Fragment,{children:[i&&(0,$.jsx)(x,{id:cf(d),title:i,required:a,schema:h,uiSchema:f,registry:y}),e&&(0,$.jsx)(A,{id:Zi(d),description:e,schema:h,uiSchema:f,registry:y}),(0,$.jsxs)(Ne.A,{container:!0,spacing:2,style:{marginTop:"10px"},children:[l.map((w,k)=>w.hidden?w.content:(0,$.jsx)(Ne.A,{item:!0,xs:12,style:{marginBottom:"10px"},children:w.content},k)),Xp(h,f,m)&&(0,$.jsx)(Ne.A,{container:!0,justifyContent:"flex-end",children:(0,$.jsx)(Ne.A,{item:!0,children:(0,$.jsx)(E,{className:"object-property-expand",onClick:p(h),disabled:c||u,uiSchema:f,registry:y})})})]})]})}function oD({uiSchema:s}){const{submitText:e,norender:i,props:l={}}=bg(s);return i?null:(0,$.jsx)(Ee.A,{marginTop:3,children:(0,$.jsx)(Bt.A,{type:"submit",variant:"contained",color:"primary",...l,children:e})})}function lD({id:s,title:e}){return(0,$.jsxs)(Ee.A,{id:s,mb:1,mt:1,children:[(0,$.jsx)(Ge.A,{variant:"h5",children:e}),(0,$.jsx)(Yr.A,{})]})}function aD(s){const{children:e,classNames:i,style:l,disabled:a,id:c,label:u,onDropPropertyClick:f,onKeyChange:d,readonly:h,required:m,schema:p,uiSchema:y,registry:b}=s,{templates:x,translateString:A}=b,{RemoveButton:E}=x.ButtonTemplates,w=A(st.KeyLabel,[u]),k=ks in p,L={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};if(!k)return(0,$.jsx)("div",{className:i,style:l,children:e});const z=({target:U})=>d(U.value);return(0,$.jsxs)(Ne.A,{container:!0,alignItems:"center",spacing:2,className:i,style:l,children:[(0,$.jsx)(Ne.A,{item:!0,xs:!0,children:(0,$.jsx)(G.A,{fullWidth:!0,required:m,label:w,defaultValue:u,disabled:a||h,id:`${c}-key`,name:`${c}-key`,onBlur:h?void 0:z,type:"text"})}),(0,$.jsx)(Ne.A,{item:!0,xs:!0,children:e}),(0,$.jsx)(Ne.A,{item:!0,children:(0,$.jsx)(E,{iconType:"default",style:L,disabled:a||h,onClick:f(u),uiSchema:y,registry:b})})]},`${c}-key`)}function l0(){return{ArrayFieldItemTemplate:zT,ArrayFieldTemplate:UT,BaseInputTemplate:KT,ButtonTemplates:{AddButton:VT,CopyButton:qT,MoveDownButton:_T,MoveUpButton:eD,RemoveButton:tD,SubmitButton:oD},DescriptionFieldTemplate:GT,ErrorListTemplate:YT,FieldErrorTemplate:nD,FieldHelpTemplate:rD,FieldTemplate:iD,ObjectFieldTemplate:sD,TitleFieldTemplate:lD,WrapIfAdditionalTemplate:aD}}const Ej=l0();function cD(s){var e;const{schema:i,id:l,value:a,disabled:c,readonly:u,label:f="",hideLabel:d,autofocus:h,onChange:m,onBlur:p,onFocus:y,registry:b,options:x,uiSchema:A}=s,E=Qe("DescriptionFieldTemplate",b,x),w=No(i),k=(X,ee)=>m(ee),L=({target:{value:X}})=>p(l,X),z=({target:{value:X}})=>y(l,X),U=(e=x.description)!==null&&e!==void 0?e:i.description;return(0,$.jsxs)($.Fragment,{children:[!d&&!!U&&(0,$.jsx)(E,{id:Zi(l),description:U,schema:i,uiSchema:A,registry:b}),(0,$.jsx)(Gl.A,{control:(0,$.jsx)(hu.A,{id:l,name:l,checked:typeof a>"u"?!1:!!a,required:w,disabled:c||u,autoFocus:h,onChange:k,onBlur:L,onFocus:z,"aria-describedby":Nn(l)}),label:Qi(f,d,!1)})]})}var uD=S(12981),wf=S(91761);function fD({label:s,hideLabel:e,id:i,disabled:l,options:a,value:c,autofocus:u,readonly:f,required:d,onChange:h,onBlur:m,onFocus:p}){const{enumOptions:y,enumDisabled:b,inline:x,emptyValue:A}=a,E=Array.isArray(c)?c:[c],w=z=>({target:{checked:U}})=>{h(U?pg(z,E,y):hg(z,E,y))},k=({target:{value:z}})=>m(i,Jt(z,y,A)),L=({target:{value:z}})=>p(i,Jt(z,y,A));return(0,$.jsxs)($.Fragment,{children:[Qi((0,$.jsx)(wf.A,{required:d,htmlFor:i,children:s||void 0}),e),(0,$.jsx)(uD.A,{id:i,row:!!x,children:Array.isArray(y)&&y.map((z,U)=>{const X=ga(z.value,E),ee=Array.isArray(b)&&b.indexOf(z.value)!==-1,oe=(0,$.jsx)(hu.A,{id:ya(i,U),name:i,checked:X,disabled:l||ee||f,autoFocus:u&&U===0,onChange:w(U),onBlur:k,onFocus:L,"aria-describedby":Nn(i)});return(0,$.jsx)(Gl.A,{control:oe,label:z.label},U)})})]})}var dD=S(30285),hD=S(29635);function mD({id:s,options:e,value:i,required:l,disabled:a,readonly:c,label:u,hideLabel:f,onChange:d,onBlur:h,onFocus:m}){var p;const{enumOptions:y,enumDisabled:b,emptyValue:x}=e,A=(z,U)=>d(Jt(U,y,x)),E=({target:{value:z}})=>h(s,Jt(z,y,x)),w=({target:{value:z}})=>m(s,Jt(z,y,x)),k=e?e.inline:!1,L=(p=sf(i,y))!==null&&p!==void 0?p:null;return(0,$.jsxs)($.Fragment,{children:[Qi((0,$.jsx)(wf.A,{required:l,htmlFor:s,children:u||void 0}),f),(0,$.jsx)(hD.A,{id:s,name:s,value:L,row:k,onChange:A,onBlur:E,onFocus:w,"aria-describedby":Nn(s),children:Array.isArray(y)&&y.map((z,U)=>{const X=Array.isArray(b)&&b.indexOf(z.value)!==-1;return(0,$.jsx)(Gl.A,{control:(0,$.jsx)(dD.A,{name:s,id:ya(s,U),color:"primary"}),label:z.label,value:String(U),disabled:a||X||c},U)})})]})}var pD=S(33466);function gD(s){const{value:e,readonly:i,disabled:l,onBlur:a,onFocus:c,options:u,schema:f,onChange:d,required:h,label:m,hideLabel:p,id:y}=s,b={value:e,label:m,id:y,name:y,...gg(f)},x=(w,k)=>{d(k??u.emptyValue)},A=({target:{value:w}})=>a(y,w),E=({target:{value:w}})=>c(y,w);return(0,$.jsxs)($.Fragment,{children:[Qi((0,$.jsx)(wf.A,{required:h,htmlFor:y,children:m||void 0}),p),(0,$.jsx)(pD.A,{disabled:l||i,onChange:x,onBlur:A,onFocus:E,valueLabelDisplay:"auto",...b,"aria-describedby":Nn(y)})]})}function yD({schema:s,id:e,name:i,options:l,label:a,hideLabel:c,required:u,disabled:f,readonly:d,placeholder:h,value:m,multiple:p,autofocus:y,onChange:b,onBlur:x,onFocus:A,rawErrors:E=[],registry:w,uiSchema:k,hideError:L,formContext:z,...U}){const{enumOptions:X,enumDisabled:ee,emptyValue:oe}=l;p=typeof p>"u"?!1:!!p;const ue=p?[]:"",fe=typeof m>"u"||p&&m.length<1||!p&&m===ue,ge=({target:{value:Te}})=>b(Jt(Te,X,oe)),he=({target:Te})=>x(e,Jt(Te&&Te.value,X,oe)),me=({target:Te})=>A(e,Jt(Te&&Te.value,X,oe)),be=sf(m,X,p),ye=!p&&s.default===void 0;return(0,$.jsxs)(G.A,{id:e,name:e,label:Qi(a,c||!a,!1),value:!fe&&typeof be<"u"?be:ue,required:u,disabled:f||d,autoFocus:y,placeholder:h,error:E.length>0,onChange:ge,onBlur:he,onFocus:me,...U,select:!0,InputLabelProps:{...U.InputLabelProps,shrink:!fe},SelectProps:{...U.SelectProps,multiple:p},"aria-describedby":Nn(e),children:[ye&&(0,$.jsx)(Qt.A,{value:"",children:h}),Array.isArray(X)&&X.map(({value:Te,label:We},De)=>{const ve=Array.isArray(ee)&&ee.indexOf(Te)!==-1;return(0,$.jsx)(Qt.A,{value:String(De),disabled:ve,children:We},De)})]})}function vD(s){const{options:e,registry:i}=s,l=Qe("BaseInputTemplate",i,e);let a=5;return(typeof e.rows=="string"||typeof e.rows=="number")&&(a=e.rows),(0,$.jsx)(l,{...s,multiline:!0,rows:a})}function a0(){return{CheckboxWidget:cD,CheckboxesWidget:fD,RadioWidget:mD,RangeWidget:gD,SelectWidget:yD,TextareaWidget:vD}}const Aj=a0();function c0(){return{templates:l0(),widgets:a0()}}const bD=c0();function xD(){return s0(c0())}const wj=xD(),Cj=null,SD=s0(bD),Cf=s=>{const e=g.useMemo(()=>Object.fromEntries(Object.entries(s.fields??{}).map(([l,a])=>[l,c=>g.createElement(a,{...c,uiSchema:c.uiSchema??{},formData:c.formData,rawErrors:c.rawErrors??[],disabled:c.disabled??!1,readonly:c.readonly??!1})])),[s.fields]),i=g.useMemo(()=>({FieldTemplate:BT,DescriptionFieldTemplate:jT,...s.templates}),[s.templates]);return g.createElement(SD,{...s,templates:i,fields:e})};var Of=S(99703),ED=S(95479),AD=S.n(ED);const wD=(0,D.A)(s=>(0,Of.A)({list:{width:"100%"},text:{textWrap:"wrap"}})),CD=({errors:s,schema:e})=>{const i=wD();function l(a){if(a.property&&a.message){const c=a.property.startsWith(".")?a.property.substring(1):a.property;if(e.properties&&c in e.properties){const u=e.properties[c];if(typeof u=="object"&&"title"in u)return`'${u.title}' ${a.message}`}return`'${AD()(c)}' ${a.message}`}return a.stack}return g.createElement(at.A,null,g.createElement(po.A,{dense:!0,className:i.list},s.map((a,c)=>g.createElement(Aa.A,{key:c},g.createElement(wn.A,null,g.createElement(o0.A,{color:"error"})),g.createElement(Cn.A,{classes:{primary:i.text},primary:l(a)})))))},OD=s=>{const{value:e,onChange:i,schema:{title:l}}=s;return g.createElement(g.Fragment,null,g.createElement(G.A,{id:l,label:l,"aria-describedby":l,onChange:a=>{i(a.target.value)},value:e,autoComplete:"off"}),g.createElement(Af.A,{error:!0},g.createElement(v.h,{content:"This widget is insecure. Please use [`ui:field: Secret`](https://backstage.io/docs/features/software-templates/writing-templates/#using-secrets) instead of\n          `ui:widget: password`"})))};var kD=S(67156),PD=S.n(kD);const u0=Cg();PD()(u0.ajv);const TD=(0,D.A)(s=>({backButton:{marginRight:s.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:s.spacing(2)},formWrapper:{padding:s.spacing(2)}}),{name:"BackstageTemplateStepper"}),f0=s=>{const{layouts:e=[],components:i={},...l}=s,{ReviewStateComponent:a=cC,ReviewStepComponent:c,backButtonText:u="Back",createButtonText:f="Create",reviewButtonText:d="Review"}=i,h=(0,yo.s)(),{presentation:m,steps:p}=dC(l.manifest),y=(0,Nt.Q2)(),[b,x]=(0,g.useState)(0),[A,E]=(0,g.useState)(!1),[w]=fC(l.initialState),[k,L]=(0,g.useState)(w),[z,U]=(0,g.useState)(),X=TD(),ee=m?.buttonLabels?.backButtonText??u,oe=m?.buttonLabels?.createButtonText??f,ue=m?.buttonLabels?.reviewButtonText??d,fe=(0,g.useMemo)(()=>Object.fromEntries(l.extensions.map(({name:St,component:Et})=>[St,Et])),[l.extensions]),ge=(0,g.useMemo)(()=>({...T,...fe}),[fe]),he=(0,g.useMemo)(()=>Object.fromEntries(l.extensions.map(({name:St,validation:Et})=>[St,Et])),[l.extensions]),me=(0,g.useMemo)(()=>Wp(p[b]?.mergedSchema,he,{apiHolder:y}),[p,b,he,y]),be=(0,g.useCallback)(()=>{x(St=>St-1)},[x]),ye=GO(p[b],{layouts:e}),{formContext:Te,uiSchema:We,liveOmit:De,omitExtraData:ve,..._e}=l.formProps??{},dt=(0,g.useCallback)(St=>{L(Et=>({...Et,...St.formData}))},[L]),tt=(0,g.useCallback)(async({formData:St={}})=>{U(void 0),E(!0);const Et=await me(St);L(Ot=>({...Ot,...St})),E(!1),jp(Et)?U(Et):(U(void 0),x(Ot=>{const ui=Ot+1;return h.captureEvent("click",`Next Step (${ui})`),ui}))},[me,h]),ht=(0,Vp.merge)({},We,ye?.uiSchema),Tt=(0,g.useCallback)(()=>{l.onCreate(k),h.captureEvent("click",`${oe}`)},[l,k,h,oe]);return g.createElement(g.Fragment,null,A&&g.createElement(gu.A,{variant:"indeterminate"}),g.createElement(pu.A,{activeStep:b,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},p.map((St,Et)=>{const Ot=b>Et;return g.createElement(Jl.A,{key:Et},g.createElement(Xl.A,{"aria-label":`Step ${Et+1}`,style:{cursor:Ot?"pointer":"default"},onClick:()=>{Ot&&x(Et)}},St.title))}),g.createElement(Jl.A,null,g.createElement(Xl.A,null,ue))),g.createElement("div",{className:X.formWrapper},b<p.length?g.createElement(Cf,{key:b,validator:u0,extraErrors:z,formData:k,formContext:{...Te,formData:k},schema:ye.schema,uiSchema:ht,onSubmit:tt,fields:ge,showErrorList:"top",templates:{ErrorListTemplate:CD},onChange:dt,widgets:{password:OD},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},..._e},g.createElement("div",{className:X.footer},g.createElement(Bt.A,{onClick:be,className:X.backButton,disabled:b<1||A},ee),g.createElement(Bt.A,{variant:"contained",color:"primary",type:"submit",disabled:A},b===p.length-1?ue:"Next"))):c?g.createElement(c,{disableButtons:A,formData:k,handleBack:be,handleReset:()=>{},steps:p,handleCreate:Tt}):g.createElement(g.Fragment,null,g.createElement(a,{formState:k,schemas:p}),g.createElement("div",{className:X.footer},g.createElement(Bt.A,{onClick:be,className:X.backButton,disabled:b<1},ee),g.createElement(Bt.A,{variant:"contained",color:"primary",onClick:Tt},oe)))))},DD=s=>{const e="backstage:featureFlag",i=(0,Nt.gf)(Kp.B);if(!s)return;const l=s?.steps.filter(a=>{const c=a.schema[e];return typeof c!="string"||i.isActive(c)}).map(a=>{const c=Hu()(a),u=[];return c.schema.properties&&(c.schema.properties=Object.fromEntries(Object.entries(c.schema.properties).filter(([f,d])=>d[e]?i.isActive(d[e])?!0:(u.push(f),!1):!0)),c.schema.required=Array.isArray(c.schema.required)?c.schema.required?.filter(f=>!u.includes(f)):c.schema.required),c});return{...s,steps:l}};var MD=S(91638);const ID=s=>{const e=(0,Nt.gf)(Kl.v),{value:i}=(0,MD.A)(async()=>{const l=await e.getEntityByRef(s),a=l?.metadata.annotations?.["backstage.io/time-saved"];if(!l||!a)return;const c=tr.dw.fromISO(a).as("minutes");if(!Number.isNaN(c))return c},[e,s]);return i},RD=(0,D.A)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),d0=s=>{const{title:e,description:i,namespace:l,templateName:a,onCreate:c,...u}=s,f=(0,yo.s)(),d=RD(),h=(0,nr.U2)({kind:"Template",namespace:l,name:a}),m=(0,Nt.gf)(wm.m),{loading:p,manifest:y,error:b}=RE(h),x=DD(y),A=ID(h),E=(0,g.useCallback)(async w=>{c(w);const k=typeof w.name=="string"?w.name:void 0;f.captureEvent("create",k??a??"unknown",{value:A})},[c,f,a,A]);return(0,g.useEffect)(()=>{b&&m.post(new Error(`Failed to load template, ${b}`))},[b,m]),b?u.onError(b):g.createElement(gr.U,null,p&&g.createElement(mo.k,null),x&&g.createElement(km.n,{title:e??x.title,subheader:g.createElement(v.h,{className:d.markdown,content:i??x.description??"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(f0,{manifest:x,onCreate:E,...u})))},Oj=s=>React.createElement(SecretsContextProvider,null,React.createElement(d0,{...s})),LD=(0,D.A)(s=>({button:{color:s.page.fontColor}}));function FD(s){const{editUrl:e}=s,i=LD(),[l,a]=(0,g.useState)(),{t:c}=(0,mt.i)(pt.W);if(!e)return null;const u=d=>{a(d.currentTarget)},f=()=>{a(void 0)};return g.createElement(g.Fragment,null,g.createElement(Rn.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!l,"aria-haspopup":"true",role:"button",onClick:u,"data-testid":"menu-button",color:"inherit",className:i.button},g.createElement(uu.A,null)),g.createElement(au.Ay,{"aria-labelledby":"long-menu",open:!!l,onClose:f,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(lu.A,null,g.createElement(Qt.A,{onClick:()=>window.open(e,"_blank")},g.createElement(wn.A,null,g.createElement(ym.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:c("templateWizardPage.pageContextMenu.editConfigurationTitle")})))))}const ND=s=>{const e=(0,yt.S)(Ue.rQ),i=(0,yt.S)(Ue.bW),{secrets:l}=(0,F.Z)(),a=(0,Nt.gf)(Ke.z),c=(0,Nt.gf)(Kl.v),u=(0,Y.Zp)(),{templateName:f,namespace:d}=(0,ME.K)(Ue.sP),{t:h}=(0,mt.i)(pt.W),m=(0,nr.U2)({kind:"Template",namespace:d,name:f}),{value:p}=(0,An.A)(async()=>(await c.getEntityByRef(m))?.metadata.annotations?.[DE.P],[m,c]),y=async x=>{const{taskId:A}=await a.scaffold({templateRef:m,values:x,secrets:l});u(i({taskId:A}))},b=()=>g.createElement(Y.C5,{to:e()});return g.createElement(IE.I,{attributes:{entityRef:m}},g.createElement(Kr.Y,{themeId:"website"},g.createElement(Gr.Y,{pageTitleOverride:h("templateWizardPage.pageTitle"),title:h("templateWizardPage.title"),subtitle:h("templateWizardPage.subtitle"),...s.headerOptions},g.createElement(FD,{editUrl:p})),g.createElement(d0,{namespace:d,templateName:f,onCreate:y,components:s.components,onError:b,extensions:s.customFieldExtensions,formProps:s.formProps,layouts:s.layouts})))};var BD=S(11097);function Ut(s){for(var e=arguments.length,i=Array(e>1?e-1:0),l=1;l<e;l++)i[l-1]=arguments[l];if(0)var a,c;throw Error("[Immer] minified error nr: "+s+(i.length?" "+i.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ni(s){return!!s&&!!s[Je]}function Sr(s){var e;return!!s&&(function(i){if(!i||typeof i!="object")return!1;var l=Object.getPrototypeOf(i);if(l===null)return!0;var a=Object.hasOwnProperty.call(l,"constructor")&&l.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===GD}(s)||Array.isArray(s)||!!s[Ko]||!!(!((e=s.constructor)===null||e===void 0)&&e[Ko])||Oa(s)||ka(s))}function kj(s){return ni(s)||Ut(23,s),s[Je].t}function ri(s,e,i){i===void 0&&(i=!1),Ci(s)===0?(i?Object.keys:Ms)(s).forEach(function(l){i&&typeof l=="symbol"||e(l,s[l],s)}):s.forEach(function(l,a){return e(a,l,s)})}function Ci(s){var e=s[Je];return e?e.i>3?e.i-4:e.i:Array.isArray(s)?1:Oa(s)?2:ka(s)?3:0}function Oi(s,e){return Ci(s)===2?s.has(e):Object.prototype.hasOwnProperty.call(s,e)}function Ca(s,e){return Ci(s)===2?s.get(e):s[e]}function h0(s,e,i){var l=Ci(s);l===2?s.set(e,i):l===3?s.add(i):s[e]=i}function m0(s,e){return s===e?s!==0||1/s==1/e:s!=s&&e!=e}function Oa(s){return HD&&s instanceof Map}function ka(s){return KD&&s instanceof Set}function Ht(s){return s.o||s.t}function kf(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var e=S0(s);delete e[Je];for(var i=Ms(e),l=0;l<i.length;l++){var a=i[l],c=e[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(e[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:s[a]})}return Object.create(Object.getPrototypeOf(s),e)}function Pf(s,e){return e===void 0&&(e=!1),Tf(s)||ni(s)||!Sr(s)||(Ci(s)>1&&(s.set=s.add=s.clear=s.delete=$D),Object.freeze(s),e&&ri(s,function(i,l){return Pf(l,!0)},!0)),s}function $D(){Ut(2)}function Tf(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function Er(s){var e=$f[s];return e||Ut(18,s),e}function Df(s,e){$f[s]||($f[s]=e)}function zo(){return Ho}function Mf(s,e){e&&(Er("Patches"),s.u=[],s.s=[],s.v=e)}function Pa(s){If(s),s.p.forEach(jD),s.p=null}function If(s){s===Ho&&(Ho=s.l)}function p0(s){return Ho={p:[],l:Ho,h:s,m:!0,_:0}}function jD(s){var e=s[Je];e.i===0||e.i===1?e.j():e.g=!0}function Rf(s,e){e._=e.p.length;var i=e.p[0],l=s!==void 0&&s!==i;return e.h.O||Er("ES5").S(e,s,l),l?(i[Je].P&&(Pa(e),Ut(4)),Sr(s)&&(s=Ta(e,s),e.l||Da(e,s)),e.u&&Er("Patches").M(i[Je].t,s,e.u,e.s)):s=Ta(e,i,[]),Pa(e),e.u&&e.v(e.u,e.s),s!==Bf?s:void 0}function Ta(s,e,i){if(Tf(e))return e;var l=e[Je];if(!l)return ri(e,function(f,d){return g0(s,l,e,f,d,i)},!0),e;if(l.A!==s)return e;if(!l.P)return Da(s,l.t,!0),l.t;if(!l.I){l.I=!0,l.A._--;var a=l.i===4||l.i===5?l.o=kf(l.k):l.o,c=a,u=!1;l.i===3&&(c=new Set(a),a.clear(),u=!0),ri(c,function(f,d){return g0(s,l,a,f,d,i,u)}),Da(s,a,!1),i&&s.u&&Er("Patches").N(l,i,s.u,s.s)}return l.o}function g0(s,e,i,l,a,c,u){if(ni(a)){var f=Ta(s,a,c&&e&&e.i!==3&&!Oi(e.R,l)?c.concat(l):void 0);if(h0(i,l,f),!ni(f))return;s.m=!1}else u&&i.add(a);if(Sr(a)&&!Tf(a)){if(!s.h.D&&s._<1)return;Ta(s,a),e&&e.A.l||Da(s,a)}}function Da(s,e,i){i===void 0&&(i=!1),!s.l&&s.h.D&&s.m&&Pf(e,i)}function Lf(s,e){var i=s[Je];return(i?Ht(i):s)[e]}function y0(s,e){if(e in s)for(var i=Object.getPrototypeOf(s);i;){var l=Object.getOwnPropertyDescriptor(i,e);if(l)return l;i=Object.getPrototypeOf(i)}}function kn(s){s.P||(s.P=!0,s.l&&kn(s.l))}function Ff(s){s.o||(s.o=kf(s.t))}function Uo(s,e,i){var l=Oa(e)?Er("MapSet").F(e,i):ka(e)?Er("MapSet").T(e,i):s.O?function(a,c){var u=Array.isArray(a),f={i:u?1:0,A:c?c.A:zo(),P:!1,I:!1,R:{},l:c,t:a,k:null,o:null,j:null,C:!1},d=f,h=Go;u&&(d=[f],h=Yo);var m=Proxy.revocable(d,h),p=m.revoke,y=m.proxy;return f.k=y,f.j=p,y}(e,i):Er("ES5").J(e,i);return(i?i.A:zo()).p.push(l),l}function WD(s){return ni(s)||Ut(22,s),function e(i){if(!Sr(i))return i;var l,a=i[Je],c=Ci(i);if(a){if(!a.P&&(a.i<4||!Er("ES5").K(a)))return a.t;a.I=!0,l=v0(i,c),a.I=!1}else l=v0(i,c);return ri(l,function(u,f){a&&Ca(a.t,u)===f||h0(l,u,e(f))}),c===3?new Set(l):l}(s)}function v0(s,e){switch(e){case 2:return new Map(s);case 3:return Array.from(s)}return kf(s)}function VD(){function s(u,f){var d=c[u];return d?d.enumerable=f:c[u]=d={configurable:!0,enumerable:f,get:function(){var h=this[Je];return Go.get(h,u)},set:function(h){var m=this[Je];Go.set(m,u,h)}},d}function e(u){for(var f=u.length-1;f>=0;f--){var d=u[f][Je];if(!d.P)switch(d.i){case 5:l(d)&&kn(d);break;case 4:i(d)&&kn(d)}}}function i(u){for(var f=u.t,d=u.k,h=Ms(d),m=h.length-1;m>=0;m--){var p=h[m];if(p!==Je){var y=f[p];if(y===void 0&&!Oi(f,p))return!0;var b=d[p],x=b&&b[Je];if(x?x.t!==y:!m0(b,y))return!0}}var A=!!f[Je];return h.length!==Ms(f).length+(A?0:1)}function l(u){var f=u.k;if(f.length!==u.t.length)return!0;var d=Object.getOwnPropertyDescriptor(f,f.length-1);if(d&&!d.get)return!0;for(var h=0;h<f.length;h++)if(!f.hasOwnProperty(h))return!0;return!1}function a(u){u.g&&Ut(3,JSON.stringify(Ht(u)))}var c={};Df("ES5",{J:function(u,f){var d=Array.isArray(u),h=function(p,y){if(p){for(var b=Array(y.length),x=0;x<y.length;x++)Object.defineProperty(b,""+x,s(x,!0));return b}var A=S0(y);delete A[Je];for(var E=Ms(A),w=0;w<E.length;w++){var k=E[w];A[k]=s(k,p||!!A[k].enumerable)}return Object.create(Object.getPrototypeOf(y),A)}(d,u),m={i:d?5:4,A:f?f.A:zo(),P:!1,I:!1,R:{},l:f,t:u,k:h,o:null,g:!1,C:!1};return Object.defineProperty(h,Je,{value:m,writable:!0}),h},S:function(u,f,d){d?ni(f)&&f[Je].A===u&&e(u.p):(u.u&&function h(m){if(m&&typeof m=="object"){var p=m[Je];if(p){var y=p.t,b=p.k,x=p.R,A=p.i;if(A===4)ri(b,function(z){z!==Je&&(y[z]!==void 0||Oi(y,z)?x[z]||h(b[z]):(x[z]=!0,kn(p)))}),ri(y,function(z){b[z]!==void 0||Oi(b,z)||(x[z]=!1,kn(p))});else if(A===5){if(l(p)&&(kn(p),x.length=!0),b.length<y.length)for(var E=b.length;E<y.length;E++)x[E]=!1;else for(var w=y.length;w<b.length;w++)x[w]=!0;for(var k=Math.min(b.length,y.length),L=0;L<k;L++)b.hasOwnProperty(L)||(x[L]=!0),x[L]===void 0&&h(b[L])}}}}(u.p[0]),e(u.p))},K:function(u){return u.i===4?i(u):l(u)}})}function zD(){function s(l){if(!Sr(l))return l;if(Array.isArray(l))return l.map(s);if(Oa(l))return new Map(Array.from(l.entries()).map(function(u){return[u[0],s(u[1])]}));if(ka(l))return new Set(Array.from(l).map(s));var a=Object.create(Object.getPrototypeOf(l));for(var c in l)a[c]=s(l[c]);return Oi(l,Ko)&&(a[Ko]=l[Ko]),a}function e(l){return ni(l)?s(l):l}var i="add";Df("Patches",{$:function(l,a){return a.forEach(function(c){for(var u=c.path,f=c.op,d=l,h=0;h<u.length-1;h++){var m=Ci(d),p=u[h];typeof p!="string"&&typeof p!="number"&&(p=""+p),m!==0&&m!==1||p!=="__proto__"&&p!=="constructor"||Ut(24),typeof d=="function"&&p==="prototype"&&Ut(24),typeof(d=Ca(d,p))!="object"&&Ut(15,u.join("/"))}var y=Ci(d),b=s(c.value),x=u[u.length-1];switch(f){case"replace":switch(y){case 2:return d.set(x,b);case 3:Ut(16);default:return d[x]=b}case i:switch(y){case 1:return x==="-"?d.push(b):d.splice(x,0,b);case 2:return d.set(x,b);case 3:return d.add(b);default:return d[x]=b}case"remove":switch(y){case 1:return d.splice(x,1);case 2:return d.delete(x);case 3:return d.delete(c.value);default:return delete d[x]}default:Ut(17,f)}}),l},N:function(l,a,c,u){switch(l.i){case 0:case 4:case 2:return function(f,d,h,m){var p=f.t,y=f.o;ri(f.R,function(b,x){var A=Ca(p,b),E=Ca(y,b),w=x?Oi(p,b)?"replace":i:"remove";if(A!==E||w!=="replace"){var k=d.concat(b);h.push(w==="remove"?{op:w,path:k}:{op:w,path:k,value:E}),m.push(w===i?{op:"remove",path:k}:w==="remove"?{op:i,path:k,value:e(A)}:{op:"replace",path:k,value:e(A)})}})}(l,a,c,u);case 5:case 1:return function(f,d,h,m){var p=f.t,y=f.R,b=f.o;if(b.length<p.length){var x=[b,p];p=x[0],b=x[1];var A=[m,h];h=A[0],m=A[1]}for(var E=0;E<p.length;E++)if(y[E]&&b[E]!==p[E]){var w=d.concat([E]);h.push({op:"replace",path:w,value:e(b[E])}),m.push({op:"replace",path:w,value:e(p[E])})}for(var k=p.length;k<b.length;k++){var L=d.concat([k]);h.push({op:i,path:L,value:e(b[k])})}p.length<b.length&&m.push({op:"replace",path:d.concat(["length"]),value:p.length})}(l,a,c,u);case 3:return function(f,d,h,m){var p=f.t,y=f.o,b=0;p.forEach(function(x){if(!y.has(x)){var A=d.concat([b]);h.push({op:"remove",path:A,value:x}),m.unshift({op:i,path:A,value:x})}b++}),b=0,y.forEach(function(x){if(!p.has(x)){var A=d.concat([b]);h.push({op:i,path:A,value:x}),m.unshift({op:"remove",path:A,value:x})}b++})}(l,a,c,u)}},M:function(l,a,c,u){c.push({op:"replace",path:[],value:a===Bf?void 0:a}),u.push({op:"replace",path:[],value:l})}})}function UD(){function s(f,d){function h(){this.constructor=f}a(f,d),f.prototype=(h.prototype=d.prototype,new h)}function e(f){f.o||(f.R=new Map,f.o=new Map(f.t))}function i(f){f.o||(f.o=new Set,f.t.forEach(function(d){if(Sr(d)){var h=Uo(f.A.h,d,f);f.p.set(d,h),f.o.add(h)}else f.o.add(d)}))}function l(f){f.g&&Ut(3,JSON.stringify(Ht(f)))}var a=function(f,d){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var p in m)m.hasOwnProperty(p)&&(h[p]=m[p])})(f,d)},c=function(){function f(h,m){return this[Je]={i:2,l:m,A:m?m.A:zo(),P:!1,I:!1,o:void 0,R:void 0,t:h,k:this,C:!1,g:!1},this}s(f,Map);var d=f.prototype;return Object.defineProperty(d,"size",{get:function(){return Ht(this[Je]).size}}),d.has=function(h){return Ht(this[Je]).has(h)},d.set=function(h,m){var p=this[Je];return l(p),Ht(p).has(h)&&Ht(p).get(h)===m||(e(p),kn(p),p.R.set(h,!0),p.o.set(h,m),p.R.set(h,!0)),this},d.delete=function(h){if(!this.has(h))return!1;var m=this[Je];return l(m),e(m),kn(m),m.t.has(h)?m.R.set(h,!1):m.R.delete(h),m.o.delete(h),!0},d.clear=function(){var h=this[Je];l(h),Ht(h).size&&(e(h),kn(h),h.R=new Map,ri(h.t,function(m){h.R.set(m,!1)}),h.o.clear())},d.forEach=function(h,m){var p=this;Ht(this[Je]).forEach(function(y,b){h.call(m,p.get(b),b,p)})},d.get=function(h){var m=this[Je];l(m);var p=Ht(m).get(h);if(m.I||!Sr(p)||p!==m.t.get(h))return p;var y=Uo(m.A.h,p,m);return e(m),m.o.set(h,y),y},d.keys=function(){return Ht(this[Je]).keys()},d.values=function(){var h,m=this,p=this.keys();return(h={})[Ma]=function(){return m.values()},h.next=function(){var y=p.next();return y.done?y:{done:!1,value:m.get(y.value)}},h},d.entries=function(){var h,m=this,p=this.keys();return(h={})[Ma]=function(){return m.entries()},h.next=function(){var y=p.next();if(y.done)return y;var b=m.get(y.value);return{done:!1,value:[y.value,b]}},h},d[Ma]=function(){return this.entries()},f}(),u=function(){function f(h,m){return this[Je]={i:3,l:m,A:m?m.A:zo(),P:!1,I:!1,o:void 0,t:h,k:this,p:new Map,g:!1,C:!1},this}s(f,Set);var d=f.prototype;return Object.defineProperty(d,"size",{get:function(){return Ht(this[Je]).size}}),d.has=function(h){var m=this[Je];return l(m),m.o?!!m.o.has(h)||!(!m.p.has(h)||!m.o.has(m.p.get(h))):m.t.has(h)},d.add=function(h){var m=this[Je];return l(m),this.has(h)||(i(m),kn(m),m.o.add(h)),this},d.delete=function(h){if(!this.has(h))return!1;var m=this[Je];return l(m),i(m),kn(m),m.o.delete(h)||!!m.p.has(h)&&m.o.delete(m.p.get(h))},d.clear=function(){var h=this[Je];l(h),Ht(h).size&&(i(h),kn(h),h.o.clear())},d.values=function(){var h=this[Je];return l(h),i(h),h.o.values()},d.entries=function(){var h=this[Je];return l(h),i(h),h.o.entries()},d.keys=function(){return this.values()},d[Ma]=function(){return this.values()},d.forEach=function(h,m){for(var p=this.values(),y=p.next();!y.done;)h.call(m,y.value,y.value,this),y=p.next()},f}();Df("MapSet",{F:function(f,d){return new c(f,d)},T:function(f,d){return new u(f,d)}})}function Pj(){VD(),UD(),zD()}function Tj(s){return s}function Dj(s){return s}var b0,Ho,Nf=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",HD=typeof Map<"u",KD=typeof Set<"u",x0=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Bf=Nf?Symbol.for("immer-nothing"):((b0={})["immer-nothing"]=!0,b0),Ko=Nf?Symbol.for("immer-draftable"):"__$immer_draftable",Je=Nf?Symbol.for("immer-state"):"__$immer_state",Ma=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",Mj={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(s){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+s},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(s){return"Cannot apply patch, path doesn't resolve: "+s},16:'Sets cannot have "replace" patches.',17:function(s){return"Unsupported patch operation: "+s},18:function(s){return"The plugin for '"+s+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+s+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(s){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+s+"'"},22:function(s){return"'current' expects a draft, got: "+s},23:function(s){return"'original' expects a draft, got: "+s},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},GD=""+Object.prototype.constructor,Ms=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,S0=Object.getOwnPropertyDescriptors||function(s){var e={};return Ms(s).forEach(function(i){e[i]=Object.getOwnPropertyDescriptor(s,i)}),e},$f={},Go={get:function(s,e){if(e===Je)return s;var i=Ht(s);if(!Oi(i,e))return function(a,c,u){var f,d=y0(c,u);return d?"value"in d?d.value:(f=d.get)===null||f===void 0?void 0:f.call(a.k):void 0}(s,i,e);var l=i[e];return s.I||!Sr(l)?l:l===Lf(s.t,e)?(Ff(s),s.o[e]=Uo(s.A.h,l,s)):l},has:function(s,e){return e in Ht(s)},ownKeys:function(s){return Reflect.ownKeys(Ht(s))},set:function(s,e,i){var l=y0(Ht(s),e);if(l?.set)return l.set.call(s.k,i),!0;if(!s.P){var a=Lf(Ht(s),e),c=a?.[Je];if(c&&c.t===i)return s.o[e]=i,s.R[e]=!1,!0;if(m0(i,a)&&(i!==void 0||Oi(s.t,e)))return!0;Ff(s),kn(s)}return s.o[e]===i&&(i!==void 0||e in s.o)||Number.isNaN(i)&&Number.isNaN(s.o[e])||(s.o[e]=i,s.R[e]=!0),!0},deleteProperty:function(s,e){return Lf(s.t,e)!==void 0||e in s.t?(s.R[e]=!1,Ff(s),kn(s)):delete s.R[e],s.o&&delete s.o[e],!0},getOwnPropertyDescriptor:function(s,e){var i=Ht(s),l=Reflect.getOwnPropertyDescriptor(i,e);return l&&{writable:!0,configurable:s.i!==1||e!=="length",enumerable:l.enumerable,value:i[e]}},defineProperty:function(){Ut(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){Ut(12)}},Yo={};ri(Go,function(s,e){Yo[s]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Yo.deleteProperty=function(s,e){return Yo.set.call(this,s,e,void 0)},Yo.set=function(s,e,i){return Go.set.call(this,s[0],e,i,s[0])};var YD=function(){function s(i){var l=this;this.O=x0,this.D=!0,this.produce=function(a,c,u){if(typeof a=="function"&&typeof c!="function"){var f=c;c=a;var d=l;return function(A){var E=this;A===void 0&&(A=f);for(var w=arguments.length,k=Array(w>1?w-1:0),L=1;L<w;L++)k[L-1]=arguments[L];return d.produce(A,function(z){var U;return(U=c).call.apply(U,[E,z].concat(k))})}}var h;if(typeof c!="function"&&Ut(6),u!==void 0&&typeof u!="function"&&Ut(7),Sr(a)){var m=p0(l),p=Uo(l,a,void 0),y=!0;try{h=c(p),y=!1}finally{y?Pa(m):If(m)}return typeof Promise<"u"&&h instanceof Promise?h.then(function(A){return Mf(m,u),Rf(A,m)},function(A){throw Pa(m),A}):(Mf(m,u),Rf(h,m))}if(!a||typeof a!="object"){if((h=c(a))===void 0&&(h=a),h===Bf&&(h=void 0),l.D&&Pf(h,!0),u){var b=[],x=[];Er("Patches").M(a,h,b,x),u(b,x)}return h}Ut(21,a)},this.produceWithPatches=function(a,c){if(typeof a=="function")return function(h){for(var m=arguments.length,p=Array(m>1?m-1:0),y=1;y<m;y++)p[y-1]=arguments[y];return l.produceWithPatches(h,function(b){return a.apply(void 0,[b].concat(p))})};var u,f,d=l.produce(a,c,function(h,m){u=h,f=m});return typeof Promise<"u"&&d instanceof Promise?d.then(function(h){return[h,u,f]}):[d,u,f]},typeof i?.useProxies=="boolean"&&this.setUseProxies(i.useProxies),typeof i?.autoFreeze=="boolean"&&this.setAutoFreeze(i.autoFreeze)}var e=s.prototype;return e.createDraft=function(i){Sr(i)||Ut(8),ni(i)&&(i=WD(i));var l=p0(this),a=Uo(this,i,void 0);return a[Je].C=!0,If(l),a},e.finishDraft=function(i,l){var a=i&&i[Je],c=a.A;return Mf(c,l),Rf(void 0,c)},e.setAutoFreeze=function(i){this.D=i},e.setUseProxies=function(i){i&&!x0&&Ut(20),this.O=i},e.applyPatches=function(i,l){var a;for(a=l.length-1;a>=0;a--){var c=l[a];if(c.path.length===0&&c.op==="replace"){i=c.value;break}}a>-1&&(l=l.slice(a+1));var u=Er("Patches").$;return ni(i)?u(i,l):this.produce(i,function(f){return u(f,l)})},s}(),Bn=new YD,JD=Bn.produce,Ij=Bn.produceWithPatches.bind(Bn),Rj=Bn.setAutoFreeze.bind(Bn),Lj=Bn.setUseProxies.bind(Bn),Fj=Bn.applyPatches.bind(Bn),Nj=Bn.createDraft.bind(Bn),Bj=Bn.finishDraft.bind(Bn);const $j=null;function jj(s){var e=t(function(){return n(typeof s=="function"?s():s,!0)}),i=e[1];return[e[0],o(function(l){i(typeof l=="function"?r(l):n(l))},[])]}function XD(s,e,i){var l=(0,g.useMemo)(function(){return JD(s)},[s]);return(0,g.useReducer)(l,e,i)}function ZD(s,e){switch(e.type){case"INIT":{s.steps=e.data.spec.steps.reduce((i,l)=>(i[l.id]={status:"open",id:l.id},i),{}),s.stepLogs=e.data.spec.steps.reduce((i,l)=>(i[l.id]=[],i),{}),s.loading=!1,s.error=void 0,s.completed=!1,s.task=e.data;return}case"LOGS":{const i=e.data;for(const l of i){const a=`${l.createdAt} ${l.body.message}`;if(!l.body.stepId||!s.steps?.[l.body.stepId])continue;const c=s.stepLogs?.[l.body.stepId],u=s.steps?.[l.body.stepId];u&&l.body.status&&l.body.status!==u.status&&(u.status=l.body.status,u.status==="processing"&&(u.startedAt=l.createdAt),["cancelled","completed","failed"].includes(u.status)&&(u.endedAt=l.createdAt)),c?.push(a)}return}case"COMPLETED":{s.completed=!0,s.output=e.data.body.output,s.error=e.data.body.error;return}case"CANCELLED":{s.cancelled=!0;return}case"RECOVERED":{s.cancelled=!1,s.completed=!1,s.output=void 0,s.error=void 0;for(const i in s.steps)s.steps.hasOwnProperty(i)&&(s.steps[i].startedAt=void 0,s.steps[i].endedAt=void 0,s.steps[i].status="open");return}case"ERROR":{s.error=e.data,s.loading=!1,s.completed=!0;return}default:return}}const QD=s=>{const e=(0,Nt.gf)(Ke.z),[i,l]=XD(ZD,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,g.useEffect)(()=>{let a=!1,c,u,f=1,d=!1;const h=()=>e.getTask(s).then(m=>{if(a)return;d=m.spec.EXPERIMENTAL_recovery?.EXPERIMENTAL_strategy==="startOver",l({type:"INIT",data:m});const p=e.streamLogs({isTaskRecoverable:d,taskId:s}),y=new Array;function b(){if(y.length){const x=y.splice(0,y.length);l({type:"LOGS",data:x})}}u=setInterval(b,500),c=p.subscribe({next:x=>{switch(f=1,x.type){case"log":return y.push(x);case"cancelled":l({type:"CANCELLED"});return;case"completion":b(),l({type:"COMPLETED",data:x});return;case"recovered":l({type:"RECOVERED",data:x});return;default:throw new Error(`Unhandled event type ${x.type} in observer`)}},error:x=>{b();const A=3;x.message||(x.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${f>A?A:f}/${A} retries)`),setTimeout(()=>{f+=1,h()},15e3),l({type:"ERROR",data:x})}})},m=>{a||l({type:"ERROR",data:m})});return h(),()=>{d||(a=!0,c&&c.unsubscribe(),u&&clearInterval(u))}},[e,l,s]),i};var Ia=S(91042),jf=S(92399),qD=S(55534),_D=S(64118),e2=S(25283),t2=S(86868);const n2=(0,D.A)(()=>({button:{color:({fontColor:s})=>s}})),r2=s=>{const{cancelEnabled:e,canRetry:i,isRetryableTask:l,logsVisible:a,buttonBarVisible:c,onRetry:u,onStartOver:f,onToggleLogs:d,onToggleButtonBar:h,taskId:m}=s,{getPageTheme:p}=(0,mu.A)(),y=p({themeId:"website"}),b=n2({fontColor:y.fontColor}),x=(0,Nt.gf)(Ke.z),A=(0,yo.s)(),[E,w]=(0,g.useState)(),{t:k}=(0,mt.i)(pt.W),[{status:L},{execute:z}]=(0,Ia.Y)(async()=>{m&&(A.captureEvent("cancelled","Template has been cancelled"),await x.cancelTask(m))}),{allowed:U}=(0,yr.J)({permission:dn.lu}),{allowed:X}=(0,yr.J)({permission:dn.Xw}),{allowed:ee}=(0,yr.J)({permission:dn.X6}),oe=X&&ee;return g.createElement(g.Fragment,null,g.createElement(Rn.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:ue=>{w(ue.currentTarget)},"data-testid":"menu-button",className:b.button},g.createElement(uu.A,null)),g.createElement(au.Ay,{open:!!E,onClose:()=>w(void 0),anchorEl:E,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(lu.A,null,g.createElement(Qt.A,{onClick:()=>d?.(!a)},g.createElement(wn.A,null,g.createElement(e2.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:k(a?"ongoingTask.contextMenu.hideLogs":"ongoingTask.contextMenu.showLogs")})),g.createElement(Qt.A,{onClick:()=>h?.(!c)},g.createElement(wn.A,null,g.createElement(t2.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:k(c?"ongoingTask.contextMenu.hideButtonBar":"ongoingTask.contextMenu.showButtonBar")})),g.createElement(Qt.A,{onClick:f,disabled:e||!oe,"data-testid":"start-over-task"},g.createElement(wn.A,null,g.createElement(qD.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:k("ongoingTask.contextMenu.startOver")})),l&&g.createElement(Qt.A,{onClick:u,disabled:e||!i,"data-testid":"retry-task"},g.createElement(wn.A,null,g.createElement(_D.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:k("ongoingTask.contextMenu.retry")})),g.createElement(Qt.A,{onClick:z,disabled:!e||L!=="not-executed"||!U,"data-testid":"cancel-task"},g.createElement(wn.A,null,g.createElement(jf.A,{fontSize:"small"})),g.createElement(Cn.A,{primary:k("ongoingTask.contextMenu.cancel")})))))};var E0=S(20987);const i2=(0,D.A)({root:{"&:hover":{textDecoration:"none"}}}),s2=s=>{const{links:e=[]}=s.output,i=i2(),l=(0,go.n)(),a=(0,yt.S)(E0.s),c=u=>l.getSystemIcon(u)??pr.A;return g.createElement(g.Fragment,null,e.filter(({url:u,entityRef:f})=>u||f).map(({url:u,entityRef:f,title:d,icon:h})=>{if(f){const m=(0,nr.KU)(f),p=a(m);return{title:d,icon:h,url:p}}return{title:d,icon:h,url:u}}).map(({url:u,title:f,icon:d},h)=>{const m=c(d);return g.createElement(Es.N_,{to:u,key:h,classes:{root:i.root}},g.createElement(Bt.A,{startIcon:g.createElement(m,null),component:"div",color:"primary"},f))}))},o2=s=>{const{output:{text:e=[]},index:i,setIndex:l}=s,a=(0,go.n)(),c=u=>a.getSystemIcon(u)??cu.A;return g.createElement(g.Fragment,null,e.filter(({content:u})=>u!==void 0).map(({title:u,icon:f},d)=>{const h=c(f);return g.createElement(Bt.A,{key:d,startIcon:g.createElement(h,null),component:"div",color:"primary",onClick:()=>{i!==d&&l?.(d)},variant:i===d?"outlined":void 0},u)}))},l2=s=>{const{output:e}=s,[i,l]=(0,g.useState)(void 0);(0,g.useEffect)(()=>{if(i===void 0&&e?.text){const u=e.text.findIndex(f=>f.default);l(u>=0?u:0)}},[i,e]);const a=(0,g.useMemo)(()=>i!==void 0?e?.text?.[i]:null,[e,i]);if(!e)return null;const c=Object.keys(e).length===0;return g.createElement(g.Fragment,null,c?null:g.createElement(Ee.A,{paddingBottom:2,"data-testid":"output-box"},g.createElement(at.A,null,g.createElement(Ee.A,{padding:2,justifyContent:"center",display:"flex",gridGap:16,flexWrap:"wrap"},g.createElement(o2,{output:e,index:i,setIndex:l}),g.createElement(s2,{output:e})))),a?g.createElement(Ee.A,{paddingBottom:2,"data-testid":"text-output-box"},g.createElement(km.n,{title:a.title??"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(Ee.A,{padding:2,height:"100%"},g.createElement(v.h,{content:a.content??""})))):null)};var A0=S(54819),w0=S(78467),a2=S(51767),c2=S(25711),u2=S(7707),f2=S(9181);const d2=(0,D.A)(s=>({root:{color:s.palette.text.disabled},completed:{color:s.palette.status.ok},error:{color:s.palette.status.error}})),h2=s=>{const e=d2(),{active:i,completed:l,error:a,skipped:c}=s,u=()=>i?g.createElement(w0.A,{size:"20px"}):l?g.createElement(u2.A,null):a?g.createElement(f2.A,null):c?g.createElement(a2.A,null):g.createElement(c2.A,null);return g.createElement("div",{className:ct()(e.root,{[e.completed]:l,[e.error]:a})},u())};var C0=S(45313),m2=S(4794),O0=S.n(m2),p2=S(76842);const g2=s=>{const[e,i]=(0,g.useState)(""),{step:l}=s,a=()=>l.startedAt&&l.endedAt&&e?null:l.startedAt&&l.endedAt?1:1e3,c=(0,g.useCallback)(()=>{if(!l.startedAt){i("");return}const u=l.endedAt?tr.c9.fromISO(l.endedAt):tr.c9.local(),f=tr.c9.fromISO(l.startedAt),d=tr.IX.fromDateTimes(f,u).toDuration().valueOf();i(O0()(d,{round:!0}))},[l.endedAt,l.startedAt]);return(0,p2.u)(c),(0,C0.A)(c,a()),g.createElement(Ge.A,{variant:"caption"},e)},y2=(0,D.A)(s=>({failed:{backgroundColor:s.palette.error.main},success:{backgroundColor:s.palette.success.main}})),v2=s=>{const e=y2();return s.isComplete?g.createElement(gu.A,{variant:"determinate",classes:{bar:s.isError?e.failed:e.success},value:100}):g.createElement(gu.A,{variant:"indeterminate"})},b2=s=>g.createElement(at.A,{style:{position:"relative",overflow:"hidden"}},g.createElement(v2,{isComplete:s.isComplete??!1,isError:s.isError??!1}),g.createElement(Ee.A,{padding:2},g.createElement(pu.A,{activeStep:s.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},s.steps.map(e=>{const i=e.status==="completed",l=e.status==="failed",a=e.status==="processing",c=e.status==="skipped",u={completed:i,error:l,active:a,skipped:c};return g.createElement(Jl.A,{key:e.id},g.createElement(A0.A,null,g.createElement(Xl.A,{StepIconProps:u,StepIconComponent:h2,"data-testid":"step-label"},g.createElement(Ee.A,null,e.name),!c&&g.createElement(g2,{step:e}))))}))));var k0=S(67296);const x2=(0,D.A)({root:{width:"100%",height:"100%",position:"relative"}}),S2=s=>{const e=x2();return g.createElement("div",{className:e.root},g.createElement(k0.r,{text:Object.values(s.logs).map(i=>i.join(`
`)).filter(Boolean).join(`
`)}))},E2=(0,D.A)(s=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:s.spacing(1)},retryButton:{marginRight:s.spacing(1)},logsVisibilityButton:{marginRight:s.spacing(1)}})),A2=s=>{const{taskId:e}=(0,Y.g)(),i=(0,yt.S)(Ue.sP),l=(0,Y.Zp)(),a=(0,yo.s)(),c=(0,Nt.gf)(Ke.z),u=QD(e),f=E2(),d=(0,g.useMemo)(()=>u.task?.spec.steps.map(me=>({...me,...u?.steps?.[me.id]}))??[],[u]),{t:h}=(0,mt.i)(pt.W),[m,p]=(0,g.useState)(!1),[y,b]=(0,g.useState)(!0),{allowed:x}=(0,yr.J)({permission:dn.lu}),{allowed:A}=(0,yr.J)({permission:dn.Xw}),{allowed:E}=(0,yr.J)({permission:dn.X6}),w=A&&E;(0,g.useEffect)(()=>{u.error&&p(!0)},[u.error]),(0,g.useEffect)(()=>{u.completed&&!u.error&&b(!1)},[u.error,u.completed]);const k=(0,g.useMemo)(()=>{for(let me=d.length-1;me>=0;me--)if(d[me].status!=="open")return me;return 0},[d]),L=u.task?.spec.EXPERIMENTAL_recovery?.EXPERIMENTAL_strategy==="startOver",z=A&&E&&L,U=(0,g.useCallback)(()=>{const{namespace:me,name:be}=u.task?.spec.templateInfo?.entity?.metadata??{},ye=u.task?.spec.parameters??{};!me||!be||(a.captureEvent("click","Task has been started over"),l({pathname:i({namespace:me,templateName:be}),search:`?${Hp().stringify({formData:JSON.stringify(ye)})}`}))},[a,l,u.task?.spec.parameters,u.task?.spec.templateInfo?.entity?.metadata,i]),[{status:X},{execute:ee}]=(0,Ia.Y)(async()=>{e&&(a.captureEvent("retried","Template has been retried"),await c.retry?.(e))}),[{status:oe},{execute:ue}]=(0,Ia.Y)(async()=>{e&&(a.captureEvent("cancelled","Template has been cancelled"),await c.cancelTask(e))}),fe=s.TemplateOutputsComponent??l2,ge=u.task?.spec.templateInfo?.entity?.metadata.name||"",he=!(u.cancelled||u.completed);return g.createElement(Kr.Y,{themeId:"website"},g.createElement(Gr.Y,{pageTitleOverride:ge?h("ongoingTask.pageTitle.hasTemplateName",{templateName:ge}):h("ongoingTask.pageTitle.noTemplateName"),title:g.createElement("div",null,h("ongoingTask.title")," ",g.createElement("code",null,ge)),subtitle:h("ongoingTask.subtitle",{taskId:e})},g.createElement(r2,{cancelEnabled:he,canRetry:z,isRetryableTask:L,logsVisible:m,buttonBarVisible:y,onStartOver:U,onRetry:ee,onToggleLogs:p,onToggleButtonBar:b,taskId:e})),g.createElement(gr.U,{className:f.contentWrapper},u.error?g.createElement(Ee.A,{paddingBottom:2},g.createElement(Hl.b,{error:u.error,titleFormat:"markdown",title:u.error.message})):null,g.createElement(Ee.A,{paddingBottom:2},g.createElement(b2,{steps:d,activeStep:k,isComplete:u.completed,isError:!!u.error})),g.createElement(fe,{output:u.output}),y?g.createElement(Ee.A,{paddingBottom:2},g.createElement(at.A,null,g.createElement(Ee.A,{padding:2},g.createElement("div",{className:f.buttonBar},g.createElement(Bt.A,{className:f.cancelButton,disabled:!he||oe!=="not-executed"&&!L||!x,onClick:ue,"data-testid":"cancel-button"},h("ongoingTask.cancelButtonTitle")),L&&g.createElement(Bt.A,{className:f.retryButton,disabled:he||!z,onClick:ee,"data-testid":"retry-button"},h("ongoingTask.retryButtonTitle")),g.createElement(Bt.A,{className:f.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>p(!m)},h(m?"ongoingTask.hideLogsButtonTitle":"ongoingTask.showLogsButtonTitle")),g.createElement(Bt.A,{variant:"contained",color:"primary",disabled:he||!w,onClick:U,"data-testid":"start-over-button"},h("ongoingTask.startOverButtonTitle")))))):null,m?g.createElement(BD.ResizableBox,{height:240,minConstraints:[0,160],axis:"y"},g.createElement(at.A,{style:{height:"100%"}},g.createElement(Ee.A,{padding:2,height:"100%"},g.createElement(S2,{logs:u.stepLogs})))):null))};var w2=S(28966);const C2={"template.yaml":`
apiVersion: scaffolder.backstage.io/v1beta3
# https://backstage.io/docs/features/software-catalog/descriptor-format#kind-template
kind: Template
metadata:
  name: generated-example-template
  title: Scaffolder Example Template
  description: An example template for the scaffolder
spec:
  owner: user:guest
  type: service
  # These parameters are used to generate the input form in the frontend, and are
  # used to gather input data for the execution of the template.
  parameters:
    - title: Fill in some steps
      required:
        - name
      properties:
        name:
          title: Name
          type: string
          description: Unique name of the component
        owner:
          title: Owner
          type: string
          description: Owner of the component
          ui:field: OwnerPicker
          ui:options:
            catalogFilter:
              kind: Group
    - title: Choose a location
      required:
        - repoUrl
      properties:
        repoUrl:
          title: Repository Location
          type: string
          ui:field: RepoUrlPicker
          ui:options:
            allowedHosts:
              - github.com
  steps:
    - id: fetch-base
      name: Fetch Base
      action: fetch:template
      input:
        url: ./skeleton
        values:
          name: \${{parameters.name}}
          owner: \${{parameters.owner}}
          destination: \${{ parameters.repoUrl | parseRepoUrl }}`,"skeleton/README.md":"# This service is named ${{values.name}}!","skeleton/catalog-info.yaml":`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: \${{values.component_id | dump}}
  {%- if values.description %}
  description: \${{values.description | dump}}
  {%- endif %}
  annotations:
    github.com/project-slug: \${{values.destination.owner + "/" + values.destination.repo}}
    backstage.io/techdocs-ref: dir:.
spec:
  type: service
  lifecycle: experimental
  owner: \${{values.owner | dump}}`};async function O2(s){for(const[e,i]of Object.entries(C2))await s.createFile({name:e,data:i});return s}function k2(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let e;return new Promise(i=>{const l=()=>indexedDB.databases().finally(i);e=setInterval(l,100),l()}).finally(()=>clearInterval(e))}const P2=k2;function ii(s){return new Promise((e,i)=>{s.oncomplete=s.onsuccess=()=>e(s.result),s.onabort=s.onerror=()=>i(s.error)})}function T2(s,e){const i=P2().then(()=>{const l=indexedDB.open(s);return l.onupgradeneeded=()=>l.result.createObjectStore(e),ii(l)});return(l,a)=>i.then(c=>a(c.transaction(e,l).objectStore(e)))}let Wf;function Ar(){return Wf||(Wf=T2("keyval-store","keyval")),Wf}function D2(s,e=Ar()){return e("readonly",i=>ii(i.get(s)))}function M2(s,e,i=Ar()){return i("readwrite",l=>(l.put(e,s),ii(l.transaction)))}function Wj(s,e=Ar()){return e("readwrite",i=>(s.forEach(l=>i.put(l[1],l[0])),ii(i.transaction)))}function Vj(s,e=Ar()){return e("readonly",i=>Promise.all(s.map(l=>ii(i.get(l)))))}function zj(s,e,i=Ar()){return i("readwrite",l=>new Promise((a,c)=>{l.get(s).onsuccess=function(){try{l.put(e(this.result),s),a(ii(l.transaction))}catch(u){c(u)}}}))}function Uj(s,e=Ar()){return e("readwrite",i=>(i.delete(s),ii(i.transaction)))}function Hj(s=Ar()){return s("readwrite",e=>(e.clear(),ii(e.transaction)))}function Vf(s,e){return s("readonly",i=>(i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ii(i.transaction)))}function Kj(s=Ar()){const e=[];return Vf(s,i=>e.push(i.key)).then(()=>e)}function Gj(s=Ar()){const e=[];return Vf(s,i=>e.push(i.value)).then(()=>e)}function Yj(s=Ar()){const e=[];return Vf(s,i=>e.push([i.key,i.value])).then(()=>e)}class _i{static key="scalfolder-template-editor-directory";static async getDirectory(){return(await D2(_i.key)).handle}static async setDirectory(e){return M2(_i.key,e)}}const zf=window.showDirectoryPicker;class I2{constructor(e,i){this.path=e,this.handle=i}file(){return this.handle.getFile()}async save(e){const i=await this.handle.createWritable();await i.write(e),await i.close()}}class P0{constructor(e){this.handle=e}async listFiles(){const e=[];for await(const i of this.listDirectoryContents(this.handle))e.push(i);return e}async*listDirectoryContents(e,i=[]){for await(const l of e.values())if(l.kind==="file")yield new I2([...i,l.name].join("/"),l);else if(l.kind==="directory"){if(l.name===".git")continue;yield*this.listDirectoryContents(l,[...i,l.name])}}async createFile(e){const{name:i,data:l}=e;let a;if(i.includes("/")){const[u,f]=i.split("/");a=await(await this.handle.getDirectoryHandle(u,{create:!0})).getFileHandle(f,{create:!0})}else a=await this.handle.getFileHandle(i,{create:!0});const c=await a.createWritable();await c.write(l),await c.close()}}class Ra{static isSupported(){return!!zf}static fromHandle(e){return new P0(e)}static async requestDirectoryAccess(){if(!zf)throw new Error("File system access is not supported");const e=await zf();return new P0(e)}constructor(){}}function T0(){const{value:s,loading:e,error:i,retry:l}=(0,w2.A)(async()=>{const f=await _i.getDirectory();if(f)return Ra.fromHandle(f)},[]),a=(0,g.useCallback)(()=>Ra.requestDirectoryAccess().then(_i.setDirectory).then(l),[l]),c=(0,g.useCallback)(()=>Ra.requestDirectoryAccess().then(O2).then(_i.setDirectory).then(l),[l]),u=(0,g.useCallback)(()=>_i.setDirectory(void 0).then(l),[l]);return{directory:s,loading:e,error:i,openDirectory:a,createDirectory:c,closeDirectory:u}}const R2=s=>(s+1)%Number.MAX_SAFE_INTEGER;function L2(){const[,s]=(0,g.useState)(0);return(0,g.useCallback)(()=>{s(R2)},[])}const F2=1024*1024,N2="This file is too large to be displayed";class B2{#r;#t;#e;#n;constructor(e,i){this.#r=e,this.#t=i}get path(){return this.#r.path}get content(){return this.#e??N2}updateContent(e){this.#e!==void 0&&(this.#e=e,this.#t())}get dirty(){return this.#e!==this.#n}async save(){this.#e!==void 0&&(await this.#r.save(this.#e),this.#n=this.#e,this.#t())}async reload(){const e=await this.#r.file();if(e.size>F2){this.#e!==void 0&&(this.#e=void 0,this.#n=void 0,this.#t());return}const i=await e.text();this.#e!==i&&(this.#e=i,this.#n=i,this.#t())}}class $2{#r;#t=new Set;#e=[];#n;constructor(e){this.#r=e}get files(){return this.#e}get selectedFile(){return this.#n}setSelectedFile=e=>{const i=this.#n,l=this.#e.find(a=>a.path===e);i!==l&&(this.#n=l,this.#i())};get dirty(){return this.#e.some(e=>e.dirty)}async save(){await Promise.all(this.#e.map(e=>e.save()))}async reload(){const e=this.#n?.path,i=await this.#r.listFiles(),l=await Promise.all(i.map(async a=>{const c=new B2(a,this.#i);return await c.reload(),c}));this.#e.length=0,this.#e.push(...l),this.setSelectedFile(e),this.#i()}subscribe(e){return this.#t.add(e),()=>{this.#t.delete(e)}}#i=()=>{this.#t.forEach(e=>e())}}const D0=(0,g.createContext)(void 0);function Uf(){const s=(0,g.useContext)(D0),e=L2();return(0,g.useEffect)(()=>s?.subscribe(e),[s,e]),s}function j2(s){const{directory:e}=s,[{result:i,error:l},{execute:a}]=(0,Ia.Y)(async c=>{if(!c)return;const u=new $2(c);await u.reload();const f=u.files.find(d=>d.path.match(/\.ya?ml$/));return f&&u.setSelectedFile(f.path),u});return(0,g.useEffect)(()=>{a(e)},[a,e]),l?g.createElement(Hl.b,{error:l}):g.createElement(D0.Provider,{value:i},s.children)}var ki=S(7031);const M0=(0,ki.A)(s=>({root:{height:"100%",gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "toolbar"
      "browser"
      "editor"
      "preview"
      "results"
    `,[s.breakpoints.up("md")]:{gridTemplateAreas:`
      "toolbar toolbar toolbar"
      "browser editor preview"
      "results results results"
    `,gridTemplateColumns:"1fr 3fr 2fr",gridTemplateRows:"auto 1fr auto"}}}),{name:"ScaffolderTemplateEditorLayout"})(({children:s,classes:e})=>g.createElement("main",{className:e.root},s)),I0=(0,ki.A)({root:{gridArea:"toolbar"}},{name:"ScaffolderTemplateEditorLayoutToolbar"})(({children:s,classes:e})=>g.createElement("section",{className:e.root},s)),W2=(0,ki.A)(s=>({root:{gridArea:"browser",overflow:"auto",[s.breakpoints.up("md")]:{borderRight:`1px solid ${s.palette.divider}`}}}),{name:"ScaffolderTemplateEditorLayoutBrowser"})(({children:s,classes:e})=>g.createElement("section",{className:e.root},s)),R0=(0,ki.A)({root:{gridArea:"editor",overflow:"auto"}},{name:"ScaffolderTemplateEditorLayoutFiles"})(({children:s,classes:e})=>g.createElement("section",{className:e.root},s)),L0=(0,ki.A)(s=>({root:{gridArea:"preview",position:"relative",backgroundColor:s.palette.background.default,[s.breakpoints.up("md")]:{borderLeft:`1px solid ${s.palette.divider}`}},scroll:{height:"100%",padding:s.spacing(1),[s.breakpoints.up("md")]:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"auto"}}}),{name:"ScaffolderTemplateEditorLayoutPreview"})(({children:s,classes:e})=>g.createElement("section",{className:e.root},g.createElement("div",{className:e.scroll},s))),V2=(0,ki.A)({root:{gridArea:"results"}},{name:"ScaffolderTemplateEditorLayoutConsole"})(({children:s,classes:e})=>g.createElement("section",{className:e.root},s));var z2=S(16679),U2=S(75173),Pi=S(71677),H2=S(91413),F0=S(73845),K2=S(76891),G2=S(61477),Y2=S(46805),J2=S(59461),X2=S(93453),Z2=S(17400),Jo=S(92939),si=S(89575),Q2=S(17502);class ut{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,i,l){[e,i]=Is(this,e,i);let a=[];return this.decompose(0,e,a,2),l.length&&l.decompose(0,l.length,a,3),this.decompose(i,this.length,a,1),wr.from(a,this.length-(i-e)+l.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,i=this.length){[e,i]=Is(this,e,i);let l=[];return this.decompose(e,i,l,0),wr.from(l,i-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let i=this.scanIdentical(e,1),l=this.length-this.scanIdentical(e,-1),a=new Xo(this),c=new Xo(e);for(let u=i,f=i;;){if(a.next(u),c.next(u),u=0,a.lineBreak!=c.lineBreak||a.done!=c.done||a.value!=c.value)return!1;if(f+=a.value.length,a.done||f>=l)return!0}}iter(e=1){return new Xo(this,e)}iterRange(e,i=this.length){return new B0(this,e,i)}iterLines(e,i){let l;if(e==null)l=this.iter();else{i==null&&(i=this.lines+1);let a=this.line(e).from;l=this.iterRange(a,Math.max(a,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new $0(l)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ut.empty:e.length<=32?new $t(e):wr.from($t.split(e,[]))}}class $t extends ut{constructor(e,i=q2(e)){super(),this.text=e,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(e,i,l,a){for(let c=0;;c++){let u=this.text[c],f=a+u.length;if((i?l:f)>=e)return new _2(a,f,l,u);a=f+1,l++}}decompose(e,i,l,a){let c=e<=0&&i>=this.length?this:new $t(N0(this.text,e,i),Math.min(i,this.length)-Math.max(0,e));if(a&1){let u=l.pop(),f=La(c.text,u.text.slice(),0,c.length);if(f.length<=32)l.push(new $t(f,u.length+c.length));else{let d=f.length>>1;l.push(new $t(f.slice(0,d)),new $t(f.slice(d)))}}else l.push(c)}replace(e,i,l){if(!(l instanceof $t))return super.replace(e,i,l);[e,i]=Is(this,e,i);let a=La(this.text,La(l.text,N0(this.text,0,e)),i),c=this.length+l.length-(i-e);return a.length<=32?new $t(a,c):wr.from($t.split(a,[]),c)}sliceString(e,i=this.length,l=`
`){[e,i]=Is(this,e,i);let a="";for(let c=0,u=0;c<=i&&u<this.text.length;u++){let f=this.text[u],d=c+f.length;c>e&&u&&(a+=l),e<d&&i>c&&(a+=f.slice(Math.max(0,e-c),i-c)),c=d+1}return a}flatten(e){for(let i of this.text)e.push(i)}scanIdentical(){return 0}static split(e,i){let l=[],a=-1;for(let c of e)l.push(c),a+=c.length+1,l.length==32&&(i.push(new $t(l,a)),l=[],a=-1);return a>-1&&i.push(new $t(l,a)),i}}class wr extends ut{constructor(e,i){super(),this.children=e,this.length=i,this.lines=0;for(let l of e)this.lines+=l.lines}lineInner(e,i,l,a){for(let c=0;;c++){let u=this.children[c],f=a+u.length,d=l+u.lines-1;if((i?d:f)>=e)return u.lineInner(e,i,l,a);a=f+1,l=d+1}}decompose(e,i,l,a){for(let c=0,u=0;u<=i&&c<this.children.length;c++){let f=this.children[c],d=u+f.length;if(e<=d&&i>=u){let h=a&((u<=e?1:0)|(d>=i?2:0));u>=e&&d<=i&&!h?l.push(f):f.decompose(e-u,i-u,l,h)}u=d+1}}replace(e,i,l){if([e,i]=Is(this,e,i),l.lines<this.lines)for(let a=0,c=0;a<this.children.length;a++){let u=this.children[a],f=c+u.length;if(e>=c&&i<=f){let d=u.replace(e-c,i-c,l),h=this.lines-u.lines+d.lines;if(d.lines<h>>4&&d.lines>h>>6){let m=this.children.slice();return m[a]=d,new wr(m,this.length-(i-e)+l.length)}return super.replace(c,f,d)}c=f+1}return super.replace(e,i,l)}sliceString(e,i=this.length,l=`
`){[e,i]=Is(this,e,i);let a="";for(let c=0,u=0;c<this.children.length&&u<=i;c++){let f=this.children[c],d=u+f.length;u>e&&c&&(a+=l),e<d&&i>u&&(a+=f.sliceString(e-u,i-u,l)),u=d+1}return a}flatten(e){for(let i of this.children)i.flatten(e)}scanIdentical(e,i){if(!(e instanceof wr))return 0;let l=0,[a,c,u,f]=i>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;a+=i,c+=i){if(a==u||c==f)return l;let d=this.children[a],h=e.children[c];if(d!=h)return l+d.scanIdentical(h,i);l+=d.length+1}}static from(e,i=e.reduce((l,a)=>l+a.length+1,-1)){let l=0;for(let b of e)l+=b.lines;if(l<32){let b=[];for(let x of e)x.flatten(b);return new $t(b,i)}let a=Math.max(32,l>>5),c=a<<1,u=a>>1,f=[],d=0,h=-1,m=[];function p(b){let x;if(b.lines>c&&b instanceof wr)for(let A of b.children)p(A);else b.lines>u&&(d>u||!d)?(y(),f.push(b)):b instanceof $t&&d&&(x=m[m.length-1])instanceof $t&&b.lines+x.lines<=32?(d+=b.lines,h+=b.length+1,m[m.length-1]=new $t(x.text.concat(b.text),x.length+1+b.length)):(d+b.lines>a&&y(),d+=b.lines,h+=b.length+1,m.push(b))}function y(){d!=0&&(f.push(m.length==1?m[0]:wr.from(m,h)),h=-1,d=m.length=0)}for(let b of e)p(b);return y(),f.length==1?f[0]:new wr(f,i)}}ut.empty=new $t([""],0);function q2(s){let e=-1;for(let i of s)e+=i.length+1;return e}function La(s,e,i=0,l=1e9){for(let a=0,c=0,u=!0;c<s.length&&a<=l;c++){let f=s[c],d=a+f.length;d>=i&&(d>l&&(f=f.slice(0,l-a)),a<i&&(f=f.slice(i-a)),u?(e[e.length-1]+=f,u=!1):e.push(f)),a=d+1}return e}function N0(s,e,i){return La(s,[""],e,i)}class Xo{constructor(e,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[i>0?1:(e instanceof $t?e.text.length:e.children.length)<<1]}nextInner(e,i){for(this.done=this.lineBreak=!1;;){let l=this.nodes.length-1,a=this.nodes[l],c=this.offsets[l],u=c>>1,f=a instanceof $t?a.text.length:a.children.length;if(u==(i>0?f:0)){if(l==0)return this.done=!0,this.value="",this;i>0&&this.offsets[l-1]++,this.nodes.pop(),this.offsets.pop()}else if((c&1)==(i>0?0:1)){if(this.offsets[l]+=i,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(a instanceof $t){let d=a.text[u+(i<0?-1:0)];if(this.offsets[l]+=i,d.length>Math.max(0,e))return this.value=e==0?d:i>0?d.slice(e):d.slice(0,d.length-e),this;e-=d.length}else{let d=a.children[u+(i<0?-1:0)];e>d.length?(e-=d.length,this.offsets[l]+=i):(i<0&&this.offsets[l]--,this.nodes.push(d),this.offsets.push(i>0?1:(d instanceof $t?d.text.length:d.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class B0{constructor(e,i,l){this.value="",this.done=!1,this.cursor=new Xo(e,i>l?-1:1),this.pos=i>l?e.length:0,this.from=Math.min(i,l),this.to=Math.max(i,l)}nextInner(e,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let l=i<0?this.pos-this.from:this.to-this.pos;e>l&&(e=l),l-=e;let{value:a}=this.cursor.next(e);return this.pos+=(a.length+e)*i,this.value=a.length<=l?a:i<0?a.slice(a.length-l):a.slice(0,l),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class $0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:i,lineBreak:l,value:a}=this.inner.next(e);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):l?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=a,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=function(){return this.iter()},Xo.prototype[Symbol.iterator]=B0.prototype[Symbol.iterator]=$0.prototype[Symbol.iterator]=function(){return this});class _2{constructor(e,i,l,a){this.from=e,this.to=i,this.number=l,this.text=a}get length(){return this.to-this.from}}function Is(s,e,i){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,i))]}let Rs="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<Rs.length;s++)Rs[s]+=Rs[s-1];function eM(s){for(let e=1;e<Rs.length;e+=2)if(Rs[e]>s)return Rs[e-1]<=s;return!1}function j0(s){return s>=127462&&s<=127487}const W0=8205;function qt(s,e,i=!0,l=!0){return(i?V0:tM)(s,e,l)}function V0(s,e,i){if(e==s.length)return e;e&&z0(s.charCodeAt(e))&&U0(s.charCodeAt(e-1))&&e--;let l=_t(s,e);for(e+=Gn(l);e<s.length;){let a=_t(s,e);if(l==W0||a==W0||i&&eM(a))e+=Gn(a),l=a;else if(j0(a)){let c=0,u=e-2;for(;u>=0&&j0(_t(s,u));)c++,u-=2;if(c%2==0)break;e+=2}else break}return e}function tM(s,e,i){for(;e>0;){let l=V0(s,e-2,i);if(l<e)return l;e--}return 0}function z0(s){return s>=56320&&s<57344}function U0(s){return s>=55296&&s<56320}function _t(s,e){let i=s.charCodeAt(e);if(!U0(i)||e+1==s.length)return i;let l=s.charCodeAt(e+1);return z0(l)?(i-55296<<10)+(l-56320)+65536:i}function Hf(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function Gn(s){return s<65536?1:2}const Kf=/\r\n?|\n/;var yn=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(yn||(yn={}));class Cr{constructor(e){this.sections=e}get length(){let e=0;for(let i=0;i<this.sections.length;i+=2)e+=this.sections[i];return e}get newLength(){let e=0;for(let i=0;i<this.sections.length;i+=2){let l=this.sections[i+1];e+=l<0?this.sections[i]:l}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let i=0,l=0,a=0;i<this.sections.length;){let c=this.sections[i++],u=this.sections[i++];u<0?(e(l,a,c),a+=c):a+=u,l+=c}}iterChangedRanges(e,i=!1){Gf(this,e,i)}get invertedDesc(){let e=[];for(let i=0;i<this.sections.length;){let l=this.sections[i++],a=this.sections[i++];a<0?e.push(l,a):e.push(a,l)}return new Cr(e)}composeDesc(e){return this.empty?e:e.empty?this:H0(this,e)}mapDesc(e,i=!1){return e.empty?this:Yf(this,e,i)}mapPos(e,i=-1,l=yn.Simple){let a=0,c=0;for(let u=0;u<this.sections.length;){let f=this.sections[u++],d=this.sections[u++],h=a+f;if(d<0){if(h>e)return c+(e-a);c+=f}else{if(l!=yn.Simple&&h>=e&&(l==yn.TrackDel&&a<e&&h>e||l==yn.TrackBefore&&a<e||l==yn.TrackAfter&&h>e))return null;if(h>e||h==e&&i<0&&!f)return e==a||i<0?c:c+d;c+=d}a=h}if(e>a)throw new RangeError(`Position ${e} is out of range for changeset of length ${a}`);return c}touchesRange(e,i=e){for(let l=0,a=0;l<this.sections.length&&a<=i;){let c=this.sections[l++],u=this.sections[l++],f=a+c;if(u>=0&&a<=i&&f>=e)return a<e&&f>i?"cover":!0;a=f}return!1}toString(){let e="";for(let i=0;i<this.sections.length;){let l=this.sections[i++],a=this.sections[i++];e+=(e?" ":"")+l+(a>=0?":"+a:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Cr(e)}static create(e){return new Cr(e)}}class Kt extends Cr{constructor(e,i){super(e),this.inserted=i}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Gf(this,(i,l,a,c,u)=>e=e.replace(a,a+(l-i),u),!1),e}mapDesc(e,i=!1){return Yf(this,e,i,!0)}invert(e){let i=this.sections.slice(),l=[];for(let a=0,c=0;a<i.length;a+=2){let u=i[a],f=i[a+1];if(f>=0){i[a]=f,i[a+1]=u;let d=a>>1;for(;l.length<d;)l.push(ut.empty);l.push(u?e.slice(c,c+u):ut.empty)}c+=u}return new Kt(i,l)}compose(e){return this.empty?e:e.empty?this:H0(this,e,!0)}map(e,i=!1){return e.empty?this:Yf(this,e,i,!0)}iterChanges(e,i=!1){Gf(this,e,i)}get desc(){return Cr.create(this.sections)}filter(e){let i=[],l=[],a=[],c=new Zo(this);e:for(let u=0,f=0;;){let d=u==e.length?1e9:e[u++];for(;f<d||f==d&&c.len==0;){if(c.done)break e;let m=Math.min(c.len,d-f);rn(a,m,-1);let p=c.ins==-1?-1:c.off==0?c.ins:0;rn(i,m,p),p>0&&Ti(l,i,c.text),c.forward(m),f+=m}let h=e[u++];for(;f<h;){if(c.done)break e;let m=Math.min(c.len,h-f);rn(i,m,-1),rn(a,m,c.ins==-1?-1:c.off==0?c.ins:0),c.forward(m),f+=m}}return{changes:new Kt(i,l),filtered:Cr.create(a)}}toJSON(){let e=[];for(let i=0;i<this.sections.length;i+=2){let l=this.sections[i],a=this.sections[i+1];a<0?e.push(l):a==0?e.push([l]):e.push([l].concat(this.inserted[i>>1].toJSON()))}return e}static of(e,i,l){let a=[],c=[],u=0,f=null;function d(m=!1){if(!m&&!a.length)return;u<i&&rn(a,i-u,-1);let p=new Kt(a,c);f=f?f.compose(p.map(f)):p,a=[],c=[],u=0}function h(m){if(Array.isArray(m))for(let p of m)h(p);else if(m instanceof Kt){if(m.length!=i)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${i})`);d(),f=f?f.compose(m.map(f)):m}else{let{from:p,to:y=p,insert:b}=m;if(p>y||p<0||y>i)throw new RangeError(`Invalid change range ${p} to ${y} (in doc of length ${i})`);let x=b?typeof b=="string"?ut.of(b.split(l||Kf)):b:ut.empty,A=x.length;if(p==y&&A==0)return;p<u&&d(),p>u&&rn(a,p-u,-1),rn(a,y-p,A),Ti(c,a,x),u=y}}return h(e),d(!f),f}static empty(e){return new Kt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],l=[];for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")i.push(c,-1);else{if(!Array.isArray(c)||typeof c[0]!="number"||c.some((u,f)=>f&&typeof u!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(c.length==1)i.push(c[0],0);else{for(;l.length<a;)l.push(ut.empty);l[a]=ut.of(c.slice(1)),i.push(c[0],l[a].length)}}}return new Kt(i,l)}static createSet(e,i){return new Kt(e,i)}}function rn(s,e,i,l=!1){if(e==0&&i<=0)return;let a=s.length-2;a>=0&&i<=0&&i==s[a+1]?s[a]+=e:e==0&&s[a]==0?s[a+1]+=i:l?(s[a]+=e,s[a+1]+=i):s.push(e,i)}function Ti(s,e,i){if(i.length==0)return;let l=e.length-2>>1;if(l<s.length)s[s.length-1]=s[s.length-1].append(i);else{for(;s.length<l;)s.push(ut.empty);s.push(i)}}function Gf(s,e,i){let l=s.inserted;for(let a=0,c=0,u=0;u<s.sections.length;){let f=s.sections[u++],d=s.sections[u++];if(d<0)a+=f,c+=f;else{let h=a,m=c,p=ut.empty;for(;h+=f,m+=d,d&&l&&(p=p.append(l[u-2>>1])),!(i||u==s.sections.length||s.sections[u+1]<0);)f=s.sections[u++],d=s.sections[u++];e(a,h,c,m,p),a=h,c=m}}}function Yf(s,e,i,l=!1){let a=[],c=l?[]:null,u=new Zo(s),f=new Zo(e);for(let d=-1;;)if(u.ins==-1&&f.ins==-1){let h=Math.min(u.len,f.len);rn(a,h,-1),u.forward(h),f.forward(h)}else if(f.ins>=0&&(u.ins<0||d==u.i||u.off==0&&(f.len<u.len||f.len==u.len&&!i))){let h=f.len;for(rn(a,f.ins,-1);h;){let m=Math.min(u.len,h);u.ins>=0&&d<u.i&&u.len<=m&&(rn(a,0,u.ins),c&&Ti(c,a,u.text),d=u.i),u.forward(m),h-=m}f.next()}else if(u.ins>=0){let h=0,m=u.len;for(;m;)if(f.ins==-1){let p=Math.min(m,f.len);h+=p,m-=p,f.forward(p)}else if(f.ins==0&&f.len<m)m-=f.len,f.next();else break;rn(a,h,d<u.i?u.ins:0),c&&d<u.i&&Ti(c,a,u.text),d=u.i,u.forward(u.len-m)}else{if(u.done&&f.done)return c?Kt.createSet(a,c):Cr.create(a);throw new Error("Mismatched change set lengths")}}function H0(s,e,i=!1){let l=[],a=i?[]:null,c=new Zo(s),u=new Zo(e);for(let f=!1;;){if(c.done&&u.done)return a?Kt.createSet(l,a):Cr.create(l);if(c.ins==0)rn(l,c.len,0,f),c.next();else if(u.len==0&&!u.done)rn(l,0,u.ins,f),a&&Ti(a,l,u.text),u.next();else{if(c.done||u.done)throw new Error("Mismatched change set lengths");{let d=Math.min(c.len2,u.len),h=l.length;if(c.ins==-1){let m=u.ins==-1?-1:u.off?0:u.ins;rn(l,d,m,f),a&&m&&Ti(a,l,u.text)}else u.ins==-1?(rn(l,c.off?0:c.len,d,f),a&&Ti(a,l,c.textBit(d))):(rn(l,c.off?0:c.len,u.off?0:u.ins,f),a&&!u.off&&Ti(a,l,u.text));f=(c.ins>d||u.ins>=0&&u.len>d)&&(f||l.length>h),c.forward2(d),u.forward(d)}}}}class Zo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length?ut.empty:e[i]}textBit(e){let{inserted:i}=this.set,l=this.i-2>>1;return l>=i.length&&!e?ut.empty:i[l].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class es{constructor(e,i,l){this.from=e,this.to=i,this.flags=l}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,i=-1){let l,a;return this.empty?l=a=e.mapPos(this.from,i):(l=e.mapPos(this.from,1),a=e.mapPos(this.to,-1)),l==this.from&&a==this.to?this:new es(l,a,this.flags)}extend(e,i=e){if(e<=this.anchor&&i>=this.anchor)return de.range(e,i);let l=Math.abs(e-this.anchor)>Math.abs(i-this.anchor)?e:i;return de.range(this.anchor,l)}eq(e,i=!1){return this.anchor==e.anchor&&this.head==e.head&&(!i||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return de.range(e.anchor,e.head)}static create(e,i,l){return new es(e,i,l)}}class de{constructor(e,i){this.ranges=e,this.mainIndex=i}map(e,i=-1){return e.empty?this:de.create(this.ranges.map(l=>l.map(e,i)),this.mainIndex)}eq(e,i=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let l=0;l<this.ranges.length;l++)if(!this.ranges[l].eq(e.ranges[l],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new de([this.main],0)}addRange(e,i=!0){return de.create([e].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(e,i=this.mainIndex){let l=this.ranges.slice();return l[i]=e,de.create(l,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new de(e.ranges.map(i=>es.fromJSON(i)),e.main)}static single(e,i=e){return new de([de.range(e,i)],0)}static create(e,i=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let l=0,a=0;a<e.length;a++){let c=e[a];if(c.empty?c.from<=l:c.from<l)return de.normalized(e.slice(),i);l=c.to}return new de(e,i)}static cursor(e,i=0,l,a){return es.create(e,e,(i==0?0:i<0?8:16)|(l==null?7:Math.min(6,l))|(a??16777215)<<6)}static range(e,i,l,a){let c=(l??16777215)<<6|(a==null?7:Math.min(6,a));return i<e?es.create(i,e,48|c):es.create(e,i,(i>e?8:0)|c)}static normalized(e,i=0){let l=e[i];e.sort((a,c)=>a.from-c.from),i=e.indexOf(l);for(let a=1;a<e.length;a++){let c=e[a],u=e[a-1];if(c.empty?c.from<=u.to:c.from<u.to){let f=u.from,d=Math.max(c.to,u.to);a<=i&&i--,e.splice(--a,2,c.anchor>c.head?de.range(d,f):de.range(f,d))}}return new de(e,i)}}function K0(s,e){for(let i of s.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let Jf=0;class Oe{constructor(e,i,l,a,c){this.combine=e,this.compareInput=i,this.compare=l,this.isStatic=a,this.id=Jf++,this.default=e([]),this.extensions=typeof c=="function"?c(this):c}get reader(){return this}static define(e={}){return new Oe(e.combine||(i=>i),e.compareInput||((i,l)=>i===l),e.compare||(e.combine?(i,l)=>i===l:Xf),!!e.static,e.enables)}of(e){return new Fa([],this,0,e)}compute(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fa(e,this,1,i)}computeN(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fa(e,this,2,i)}from(e,i){return i||(i=l=>l),this.compute([e],l=>i(l.field(e)))}}function Xf(s,e){return s==e||s.length==e.length&&s.every((i,l)=>i===e[l])}class Fa{constructor(e,i,l,a){this.dependencies=e,this.facet=i,this.type=l,this.value=a,this.id=Jf++}dynamicSlot(e){var i;let l=this.value,a=this.facet.compareInput,c=this.id,u=e[c]>>1,f=this.type==2,d=!1,h=!1,m=[];for(let p of this.dependencies)p=="doc"?d=!0:p=="selection"?h=!0:((i=e[p.id])!==null&&i!==void 0?i:1)&1||m.push(e[p.id]);return{create(p){return p.values[u]=l(p),1},update(p,y){if(d&&y.docChanged||h&&(y.docChanged||y.selection)||Zf(p,m)){let b=l(p);if(f?!G0(b,p.values[u],a):!a(b,p.values[u]))return p.values[u]=b,1}return 0},reconfigure:(p,y)=>{let b,x=y.config.address[c];if(x!=null){let A=$a(y,x);if(this.dependencies.every(E=>E instanceof Oe?y.facet(E)===p.facet(E):E instanceof jt?y.field(E,!1)==p.field(E,!1):!0)||(f?G0(b=l(p),A,a):a(b=l(p),A)))return p.values[u]=A,0}else b=l(p);return p.values[u]=b,1}}}}function G0(s,e,i){if(s.length!=e.length)return!1;for(let l=0;l<s.length;l++)if(!i(s[l],e[l]))return!1;return!0}function Zf(s,e){let i=!1;for(let l of e)qo(s,l)&1&&(i=!0);return i}function nM(s,e,i){let l=i.map(d=>s[d.id]),a=i.map(d=>d.type),c=l.filter(d=>!(d&1)),u=s[e.id]>>1;function f(d){let h=[];for(let m=0;m<l.length;m++){let p=$a(d,l[m]);if(a[m]==2)for(let y of p)h.push(y);else h.push(p)}return e.combine(h)}return{create(d){for(let h of l)qo(d,h);return d.values[u]=f(d),1},update(d,h){if(!Zf(d,c))return 0;let m=f(d);return e.compare(m,d.values[u])?0:(d.values[u]=m,1)},reconfigure(d,h){let m=Zf(d,l),p=h.config.facets[e.id],y=h.facet(e);if(p&&!m&&Xf(i,p))return d.values[u]=y,0;let b=f(d);return e.compare(b,y)?(d.values[u]=y,0):(d.values[u]=b,1)}}}const Y0=Oe.define({static:!0});class jt{constructor(e,i,l,a,c){this.id=e,this.createF=i,this.updateF=l,this.compareF=a,this.spec=c,this.provides=void 0}static define(e){let i=new jt(Jf++,e.create,e.update,e.compare||((l,a)=>l===a),e);return e.provide&&(i.provides=e.provide(i)),i}create(e){let i=e.facet(Y0).find(l=>l.field==this);return(i?.create||this.createF)(e)}slot(e){let i=e[this.id]>>1;return{create:l=>(l.values[i]=this.create(l),1),update:(l,a)=>{let c=l.values[i],u=this.updateF(c,a);return this.compareF(c,u)?0:(l.values[i]=u,1)},reconfigure:(l,a)=>a.config.address[this.id]!=null?(l.values[i]=a.field(this),0):(l.values[i]=this.create(l),1)}}init(e){return[this,Y0.of({field:this,create:e})]}get extension(){return this}}const ts={lowest:4,low:3,default:2,high:1,highest:0};function Qo(s){return e=>new J0(e,s)}const oi={highest:Qo(ts.highest),high:Qo(ts.high),default:Qo(ts.default),low:Qo(ts.low),lowest:Qo(ts.lowest)};class J0{constructor(e,i){this.inner=e,this.prec=i}}class Na{of(e){return new Qf(this,e)}reconfigure(e){return Na.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Qf{constructor(e,i){this.compartment=e,this.inner=i}}class Ba{constructor(e,i,l,a,c,u){for(this.base=e,this.compartments=i,this.dynamicSlots=l,this.address=a,this.staticValues=c,this.facets=u,this.statusTemplate=[];this.statusTemplate.length<l.length;)this.statusTemplate.push(0)}staticFacet(e){let i=this.address[e.id];return i==null?e.default:this.staticValues[i>>1]}static resolve(e,i,l){let a=[],c=Object.create(null),u=new Map;for(let y of rM(e,i,u))y instanceof jt?a.push(y):(c[y.facet.id]||(c[y.facet.id]=[])).push(y);let f=Object.create(null),d=[],h=[];for(let y of a)f[y.id]=h.length<<1,h.push(b=>y.slot(b));let m=l?.config.facets;for(let y in c){let b=c[y],x=b[0].facet,A=m&&m[y]||[];if(b.every(E=>E.type==0))if(f[x.id]=d.length<<1|1,Xf(A,b))d.push(l.facet(x));else{let E=x.combine(b.map(w=>w.value));d.push(l&&x.compare(E,l.facet(x))?l.facet(x):E)}else{for(let E of b)E.type==0?(f[E.id]=d.length<<1|1,d.push(E.value)):(f[E.id]=h.length<<1,h.push(w=>E.dynamicSlot(w)));f[x.id]=h.length<<1,h.push(E=>nM(E,x,b))}}let p=h.map(y=>y(f));return new Ba(e,u,p,f,d,c)}}function rM(s,e,i){let l=[[],[],[],[],[]],a=new Map;function c(u,f){let d=a.get(u);if(d!=null){if(d<=f)return;let h=l[d].indexOf(u);h>-1&&l[d].splice(h,1),u instanceof Qf&&i.delete(u.compartment)}if(a.set(u,f),Array.isArray(u))for(let h of u)c(h,f);else if(u instanceof Qf){if(i.has(u.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(u.compartment)||u.inner;i.set(u.compartment,h),c(h,f)}else if(u instanceof J0)c(u.inner,u.prec);else if(u instanceof jt)l[f].push(u),u.provides&&c(u.provides,f);else if(u instanceof Fa)l[f].push(u),u.facet.extensions&&c(u.facet.extensions,ts.default);else{let h=u.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${u}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);c(h,f)}}return c(s,ts.default),l.reduce((u,f)=>u.concat(f))}function qo(s,e){if(e&1)return 2;let i=e>>1,l=s.status[i];if(l==4)throw new Error("Cyclic dependency between fields and/or facets");if(l&2)return l;s.status[i]=4;let a=s.computeSlot(s,s.config.dynamicSlots[i]);return s.status[i]=2|a}function $a(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const X0=Oe.define(),qf=Oe.define({combine:s=>s.some(e=>e),static:!0}),Z0=Oe.define({combine:s=>s.length?s[0]:void 0,static:!0}),Q0=Oe.define(),q0=Oe.define(),_0=Oe.define(),ey=Oe.define({combine:s=>s.length?s[0]:!1});class Or{constructor(e,i){this.type=e,this.value=i}static define(){return new iM}}class iM{of(e){return new Or(this,e)}}class sM{constructor(e){this.map=e}of(e){return new He(this,e)}}class He{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new He(this.type,i)}is(e){return this.type==e}static define(e={}){return new sM(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let l=[];for(let a of e){let c=a.map(i);c&&l.push(c)}return l}}He.reconfigure=He.define(),He.appendConfig=He.define();class Gt{constructor(e,i,l,a,c,u){this.startState=e,this.changes=i,this.selection=l,this.effects=a,this.annotations=c,this.scrollIntoView=u,this._doc=null,this._state=null,l&&K0(l,i.newLength),c.some(f=>f.type==Gt.time)||(this.annotations=c.concat(Gt.time.of(Date.now())))}static create(e,i,l,a,c,u){return new Gt(e,i,l,a,c,u)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(Gt.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}Gt.time=Or.define(),Gt.userEvent=Or.define(),Gt.addToHistory=Or.define(),Gt.remote=Or.define();function oM(s,e){let i=[];for(let l=0,a=0;;){let c,u;if(l<s.length&&(a==e.length||e[a]>=s[l]))c=s[l++],u=s[l++];else if(a<e.length)c=e[a++],u=e[a++];else return i;!i.length||i[i.length-1]<c?i.push(c,u):i[i.length-1]<u&&(i[i.length-1]=u)}}function ty(s,e,i){var l;let a,c,u;return i?(a=e.changes,c=Kt.empty(e.changes.length),u=s.changes.compose(e.changes)):(a=e.changes.map(s.changes),c=s.changes.mapDesc(e.changes,!0),u=s.changes.compose(a)),{changes:u,selection:e.selection?e.selection.map(c):(l=s.selection)===null||l===void 0?void 0:l.map(a),effects:He.mapEffects(s.effects,a).concat(He.mapEffects(e.effects,c)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function _f(s,e,i){let l=e.selection,a=Ls(e.annotations);return e.userEvent&&(a=a.concat(Gt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Kt?e.changes:Kt.of(e.changes||[],i,s.facet(Z0)),selection:l&&(l instanceof de?l:de.single(l.anchor,l.head)),effects:Ls(e.effects),annotations:a,scrollIntoView:!!e.scrollIntoView}}function ny(s,e,i){let l=_f(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(i=!1);for(let c=1;c<e.length;c++){e[c].filter===!1&&(i=!1);let u=!!e[c].sequential;l=ty(l,_f(s,e[c],u?l.changes.newLength:s.doc.length),u)}let a=Gt.create(s,l.changes,l.selection,l.effects,l.annotations,l.scrollIntoView);return aM(i?lM(a):a)}function lM(s){let e=s.startState,i=!0;for(let a of e.facet(Q0)){let c=a(s);if(c===!1){i=!1;break}Array.isArray(c)&&(i=i===!0?c:oM(i,c))}if(i!==!0){let a,c;if(i===!1)c=s.changes.invertedDesc,a=Kt.empty(e.doc.length);else{let u=s.changes.filter(i);a=u.changes,c=u.filtered.mapDesc(u.changes).invertedDesc}s=Gt.create(e,a,s.selection&&s.selection.map(c),He.mapEffects(s.effects,c),s.annotations,s.scrollIntoView)}let l=e.facet(q0);for(let a=l.length-1;a>=0;a--){let c=l[a](s);c instanceof Gt?s=c:Array.isArray(c)&&c.length==1&&c[0]instanceof Gt?s=c[0]:s=ny(e,Ls(c),!1)}return s}function aM(s){let e=s.startState,i=e.facet(_0),l=s;for(let a=i.length-1;a>=0;a--){let c=i[a](s);c&&Object.keys(c).length&&(l=ty(l,_f(e,c,s.changes.newLength),!0))}return l==s?s:Gt.create(e,s.changes,s.selection,l.effects,l.annotations,l.scrollIntoView)}const cM=[];function Ls(s){return s==null?cM:Array.isArray(s)?s:[s]}var Pt=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(Pt||(Pt={}));const uM=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ed;try{ed=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function fM(s){if(ed)return ed.test(s);for(let e=0;e<s.length;e++){let i=s[e];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||uM.test(i)))return!0}return!1}function dM(s){return e=>{if(!/\S/.test(e))return Pt.Space;if(fM(e))return Pt.Word;for(let i=0;i<s.length;i++)if(e.indexOf(s[i])>-1)return Pt.Word;return Pt.Other}}class rt{constructor(e,i,l,a,c,u){this.config=e,this.doc=i,this.selection=l,this.values=a,this.status=e.statusTemplate.slice(),this.computeSlot=c,u&&(u._state=this);for(let f=0;f<this.config.dynamicSlots.length;f++)qo(this,f<<1);this.computeSlot=null}field(e,i=!0){let l=this.config.address[e.id];if(l==null){if(i)throw new RangeError("Field is not present in this state");return}return qo(this,l),$a(this,l)}update(...e){return ny(this,e,!0)}applyTransaction(e){let i=this.config,{base:l,compartments:a}=i;for(let f of e.effects)f.is(Na.reconfigure)?(i&&(a=new Map,i.compartments.forEach((d,h)=>a.set(h,d)),i=null),a.set(f.value.compartment,f.value.extension)):f.is(He.reconfigure)?(i=null,l=f.value):f.is(He.appendConfig)&&(i=null,l=Ls(l).concat(f.value));let c;i?c=e.startState.values.slice():(i=Ba.resolve(l,a,this),c=new rt(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(d,h)=>h.reconfigure(d,this),null).values);let u=e.startState.facet(qf)?e.newSelection:e.newSelection.asSingle();new rt(i,e.newDoc,u,c,(f,d)=>d.update(f,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:de.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,l=e(i.ranges[0]),a=this.changes(l.changes),c=[l.range],u=Ls(l.effects);for(let f=1;f<i.ranges.length;f++){let d=e(i.ranges[f]),h=this.changes(d.changes),m=h.map(a);for(let y=0;y<f;y++)c[y]=c[y].map(m);let p=a.mapDesc(h,!0);c.push(d.range.map(p)),a=a.compose(m),u=He.mapEffects(u,m).concat(He.mapEffects(Ls(d.effects),p))}return{changes:a,selection:de.create(c,i.mainIndex),effects:u}}changes(e=[]){return e instanceof Kt?e:Kt.of(e,this.doc.length,this.facet(rt.lineSeparator))}toText(e){return ut.of(e.split(this.facet(rt.lineSeparator)||Kf))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(qo(this,i),$a(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let l in e){let a=e[l];a instanceof jt&&this.config.address[a.id]!=null&&(i[l]=a.spec.toJSON(this.field(e[l]),this))}return i}static fromJSON(e,i={},l){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let a=[];if(l){for(let c in l)if(Object.prototype.hasOwnProperty.call(e,c)){let u=l[c],f=e[c];a.push(u.init(d=>u.spec.fromJSON(f,d)))}}return rt.create({doc:e.doc,selection:de.fromJSON(e.selection),extensions:i.extensions?a.concat([i.extensions]):a})}static create(e={}){let i=Ba.resolve(e.extensions||[],new Map),l=e.doc instanceof ut?e.doc:ut.of((e.doc||"").split(i.staticFacet(rt.lineSeparator)||Kf)),a=e.selection?e.selection instanceof de?e.selection:de.single(e.selection.anchor,e.selection.head):de.single(0);return K0(a,l.length),i.staticFacet(qf)||(a=a.asSingle()),new rt(i,l,a,i.dynamicSlots.map(()=>null),(c,u)=>u.create(c),null)}get tabSize(){return this.facet(rt.tabSize)}get lineBreak(){return this.facet(rt.lineSeparator)||`
`}get readOnly(){return this.facet(ey)}phrase(e,...i){for(let l of this.facet(rt.phrases))if(Object.prototype.hasOwnProperty.call(l,e)){e=l[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(l,a)=>{if(a=="$")return"$";let c=+(a||1);return!c||c>i.length?l:i[c-1]})),e}languageDataAt(e,i,l=-1){let a=[];for(let c of this.facet(X0))for(let u of c(this,i,l))Object.prototype.hasOwnProperty.call(u,e)&&a.push(u[e]);return a}charCategorizer(e){return dM(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:l,length:a}=this.doc.lineAt(e),c=this.charCategorizer(e),u=e-l,f=e-l;for(;u>0;){let d=qt(i,u,!1);if(c(i.slice(d,u))!=Pt.Word)break;u=d}for(;f<a;){let d=qt(i,f);if(c(i.slice(f,d))!=Pt.Word)break;f=d}return u==f?null:de.range(u+l,f+l)}}rt.allowMultipleSelections=qf,rt.tabSize=Oe.define({combine:s=>s.length?s[0]:4}),rt.lineSeparator=Z0,rt.readOnly=ey,rt.phrases=Oe.define({compare(s,e){let i=Object.keys(s),l=Object.keys(e);return i.length==l.length&&i.every(a=>s[a]==e[a])}}),rt.languageData=X0,rt.changeFilter=Q0,rt.transactionFilter=q0,rt.transactionExtender=_0,Na.reconfigure=He.define();function lr(s,e,i={}){let l={};for(let a of s)for(let c of Object.keys(a)){let u=a[c],f=l[c];if(f===void 0)l[c]=u;else if(!(f===u||u===void 0))if(Object.hasOwnProperty.call(i,c))l[c]=i[c](f,u);else throw new Error("Config merge conflict for field "+c)}for(let a in e)l[a]===void 0&&(l[a]=e[a]);return l}class ns{eq(e){return this==e}range(e,i=e){return _o.create(e,i,this)}}ns.prototype.startSide=ns.prototype.endSide=0,ns.prototype.point=!1,ns.prototype.mapMode=yn.TrackDel;class _o{constructor(e,i,l){this.from=e,this.to=i,this.value=l}static create(e,i,l){return new _o(e,i,l)}}function td(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class nd{constructor(e,i,l,a){this.from=e,this.to=i,this.value=l,this.maxPoint=a}get length(){return this.to[this.to.length-1]}findIndex(e,i,l,a=0){let c=l?this.to:this.from;for(let u=a,f=c.length;;){if(u==f)return u;let d=u+f>>1,h=c[d]-e||(l?this.value[d].endSide:this.value[d].startSide)-i;if(d==u)return h>=0?u:f;h>=0?f=d:u=d+1}}between(e,i,l,a){for(let c=this.findIndex(i,-1e9,!0),u=this.findIndex(l,1e9,!1,c);c<u;c++)if(a(this.from[c]+e,this.to[c]+e,this.value[c])===!1)return!1}map(e,i){let l=[],a=[],c=[],u=-1,f=-1;for(let d=0;d<this.value.length;d++){let h=this.value[d],m=this.from[d]+e,p=this.to[d]+e,y,b;if(m==p){let x=i.mapPos(m,h.startSide,h.mapMode);if(x==null||(y=b=x,h.startSide!=h.endSide&&(b=i.mapPos(m,h.endSide),b<y)))continue}else if(y=i.mapPos(m,h.startSide),b=i.mapPos(p,h.endSide),y>b||y==b&&h.startSide>0&&h.endSide<=0)continue;(b-y||h.endSide-h.startSide)<0||(u<0&&(u=y),h.point&&(f=Math.max(f,b-y)),l.push(h),a.push(y-u),c.push(b-u))}return{mapped:l.length?new nd(a,c,l,f):null,pos:u}}}class it{constructor(e,i,l,a){this.chunkPos=e,this.chunk=i,this.nextLayer=l,this.maxPoint=a}static create(e,i,l,a){return new it(e,i,l,a)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:l=!1,filterFrom:a=0,filterTo:c=this.length}=e,u=e.filter;if(i.length==0&&!u)return this;if(l&&(i=i.slice().sort(td)),this.isEmpty)return i.length?it.of(i):this;let f=new iy(this,null,-1).goto(0),d=0,h=[],m=new kr;for(;f.value||d<i.length;)if(d<i.length&&(f.from-i[d].from||f.startSide-i[d].value.startSide)>=0){let p=i[d++];m.addInner(p.from,p.to,p.value)||h.push(p)}else f.rangeIndex==1&&f.chunkIndex<this.chunk.length&&(d==i.length||this.chunkEnd(f.chunkIndex)<i[d].from)&&(!u||a>this.chunkEnd(f.chunkIndex)||c<this.chunkPos[f.chunkIndex])&&m.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!u||a>f.to||c<f.from||u(f.from,f.to,f.value))&&(m.addInner(f.from,f.to,f.value)||h.push(_o.create(f.from,f.to,f.value))),f.next());return m.finishInner(this.nextLayer.isEmpty&&!h.length?it.empty:this.nextLayer.update({add:h,filter:u,filterFrom:a,filterTo:c}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],l=[],a=-1;for(let u=0;u<this.chunk.length;u++){let f=this.chunkPos[u],d=this.chunk[u],h=e.touchesRange(f,f+d.length);if(h===!1)a=Math.max(a,d.maxPoint),i.push(d),l.push(e.mapPos(f));else if(h===!0){let{mapped:m,pos:p}=d.map(f,e);m&&(a=Math.max(a,m.maxPoint),i.push(m),l.push(p))}}let c=this.nextLayer.map(e);return i.length==0?c:new it(l,i,c||it.empty,a)}between(e,i,l){if(!this.isEmpty){for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],u=this.chunk[a];if(i>=c&&e<=c+u.length&&u.between(c,e-c,i-c,l)===!1)return}this.nextLayer.between(e,i,l)}}iter(e=0){return el.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return el.from(e).goto(i)}static compare(e,i,l,a,c=-1){let u=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=c),f=i.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=c),d=ry(u,f,l),h=new tl(u,d,c),m=new tl(f,d,c);l.iterGaps((p,y,b)=>sy(h,p,m,y,b,a)),l.empty&&l.length==0&&sy(h,0,m,0,0,a)}static eq(e,i,l=0,a){a==null&&(a=999999999);let c=e.filter(m=>!m.isEmpty&&i.indexOf(m)<0),u=i.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(c.length!=u.length)return!1;if(!c.length)return!0;let f=ry(c,u),d=new tl(c,f,0).goto(l),h=new tl(u,f,0).goto(l);for(;;){if(d.to!=h.to||!id(d.active,h.active)||d.point&&(!h.point||!d.point.eq(h.point)))return!1;if(d.to>a)return!0;d.next(),h.next()}}static spans(e,i,l,a,c=-1){let u=new tl(e,null,c).goto(i),f=i,d=u.openStart;for(;;){let h=Math.min(u.to,l);if(u.point){let m=u.activeForPoint(u.to),p=u.pointFrom<i?m.length+1:u.point.startSide<0?m.length:Math.min(m.length,d);a.point(f,h,u.point,m,p,u.pointRank),d=Math.min(u.openEnd(h),m.length)}else h>f&&(a.span(f,h,u.active,d),d=u.openEnd(h));if(u.to>l)return d+(u.point&&u.to>l?1:0);f=u.to,u.next()}}static of(e,i=!1){let l=new kr;for(let a of e instanceof _o?[e]:i?hM(e):e)l.add(a.from,a.to,a.value);return l.finish()}static join(e){if(!e.length)return it.empty;let i=e[e.length-1];for(let l=e.length-2;l>=0;l--)for(let a=e[l];a!=it.empty;a=a.nextLayer)i=new it(a.chunkPos,a.chunk,i,Math.max(a.maxPoint,i.maxPoint));return i}}it.empty=new it([],[],null,-1);function hM(s){if(s.length>1)for(let e=s[0],i=1;i<s.length;i++){let l=s[i];if(td(e,l)>0)return s.slice().sort(td);e=l}return s}it.empty.nextLayer=it.empty;class kr{finishChunk(e){this.chunks.push(new nd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,i,l){this.addInner(e,i,l)||(this.nextLayer||(this.nextLayer=new kr)).add(e,i,l)}addInner(e,i,l){let a=e-this.lastTo||l.startSide-this.last.endSide;if(a<=0&&(e-this.lastFrom||l.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return a<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(i-this.chunkStart),this.last=l,this.lastFrom=e,this.lastTo=i,this.value.push(l),l.point&&(this.maxPoint=Math.max(this.maxPoint,i-e)),!0)}addChunk(e,i){if((e-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(e);let l=i.value.length-1;return this.last=i.value[l],this.lastFrom=i.from[l]+e,this.lastTo=i.to[l]+e,!0}finish(){return this.finishInner(it.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let i=it.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,i}}function ry(s,e,i){let l=new Map;for(let c of s)for(let u=0;u<c.chunk.length;u++)c.chunk[u].maxPoint<=0&&l.set(c.chunk[u],c.chunkPos[u]);let a=new Set;for(let c of e)for(let u=0;u<c.chunk.length;u++){let f=l.get(c.chunk[u]);f!=null&&(i?i.mapPos(f):f)==c.chunkPos[u]&&!i?.touchesRange(f,f+c.chunk[u].length)&&a.add(c.chunk[u])}return a}class iy{constructor(e,i,l,a=0){this.layer=e,this.skip=i,this.minPoint=l,this.rank=a}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,i,!1),this}gotoInner(e,i,l){for(;this.chunkIndex<this.layer.chunk.length;){let a=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(a)||this.layer.chunkEnd(this.chunkIndex)<e||a.maxPoint<this.minPoint))break;this.chunkIndex++,l=!1}if(this.chunkIndex<this.layer.chunk.length){let a=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],i,!0);(!l||this.rangeIndex<a)&&this.setRangeIndex(a)}this.next()}forward(e,i){(this.to-e||this.endSide-i)<0&&this.gotoInner(e,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],l=e+i.from[this.rangeIndex];if(this.from=l,this.to=e+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class el{constructor(e){this.heap=e}static from(e,i=null,l=-1){let a=[];for(let c=0;c<e.length;c++)for(let u=e[c];!u.isEmpty;u=u.nextLayer)u.maxPoint>=l&&a.push(new iy(u,i,l,c));return a.length==1?a[0]:new el(a)}get startSide(){return this.value?this.value.startSide:0}goto(e,i=-1e9){for(let l of this.heap)l.goto(e,i);for(let l=this.heap.length>>1;l>=0;l--)rd(this.heap,l);return this.next(),this}forward(e,i){for(let l of this.heap)l.forward(e,i);for(let l=this.heap.length>>1;l>=0;l--)rd(this.heap,l);(this.to-e||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),rd(this.heap,0)}}}function rd(s,e){for(let i=s[e];;){let l=(e<<1)+1;if(l>=s.length)break;let a=s[l];if(l+1<s.length&&a.compare(s[l+1])>=0&&(a=s[l+1],l++),i.compare(a)<0)break;s[l]=i,s[e]=a,e=l}}class tl{constructor(e,i,l){this.minPoint=l,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=el.from(e,i,l)}goto(e,i=-1e9){return this.cursor.goto(e,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=i,this.openStart=-1,this.next(),this}forward(e,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(e,i)}removeActive(e){ja(this.active,e),ja(this.activeTo,e),ja(this.activeRank,e),this.minActive=oy(this.active,this.activeTo)}addActive(e){let i=0,{value:l,to:a,rank:c}=this.cursor;for(;i<this.activeRank.length&&(c-this.activeRank[i]||a-this.activeTo[i])>0;)i++;Wa(this.active,i,l),Wa(this.activeTo,i,a),Wa(this.activeRank,i,c),e&&Wa(e,i,this.cursor.from),this.minActive=oy(this.active,this.activeTo)}next(){let e=this.to,i=this.point;this.point=null;let l=this.openStart<0?[]:null;for(;;){let a=this.minActive;if(a>-1&&(this.activeTo[a]-this.cursor.from||this.active[a].endSide-this.cursor.startSide)<0){if(this.activeTo[a]>e){this.to=this.activeTo[a],this.endSide=this.active[a].endSide;break}this.removeActive(a),l&&ja(l,a)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let c=this.cursor.value;if(!c.point)this.addActive(l),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=c,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=c.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(l){this.openStart=0;for(let a=l.length-1;a>=0&&l[a]<e;a--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let i=[];for(let l=this.active.length-1;l>=0&&!(this.activeRank[l]<this.pointRank);l--)(this.activeTo[l]>e||this.activeTo[l]==e&&this.active[l].endSide>=this.point.endSide)&&i.push(this.active[l]);return i.reverse()}openEnd(e){let i=0;for(let l=this.activeTo.length-1;l>=0&&this.activeTo[l]>e;l--)i++;return i}}function sy(s,e,i,l,a,c){s.goto(e),i.goto(l);let u=l+a,f=l,d=l-e;for(;;){let h=s.to+d-i.to||s.endSide-i.endSide,m=h<0?s.to+d:i.to,p=Math.min(m,u);if(s.point||i.point?s.point&&i.point&&(s.point==i.point||s.point.eq(i.point))&&id(s.activeForPoint(s.to),i.activeForPoint(i.to))||c.comparePoint(f,p,s.point,i.point):p>f&&!id(s.active,i.active)&&c.compareRange(f,p,s.active,i.active),m>u)break;f=m,h<=0&&s.next(),h>=0&&i.next()}}function id(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(s[i]!=e[i]&&!s[i].eq(e[i]))return!1;return!0}function ja(s,e){for(let i=e,l=s.length-1;i<l;i++)s[i]=s[i+1];s.pop()}function Wa(s,e,i){for(let l=s.length-1;l>=e;l--)s[l+1]=s[l];s[e]=i}function oy(s,e){let i=-1,l=1e9;for(let a=0;a<e.length;a++)(e[a]-l||s[a].endSide-s[i].endSide)<0&&(i=a,l=e[a]);return i}function Fs(s,e,i=s.length){let l=0;for(let a=0;a<i;)s.charCodeAt(a)==9?(l+=e-l%e,a++):(l++,a=qt(s,a));return l}function sd(s,e,i,l){for(let a=0,c=0;;){if(c>=e)return a;if(a==s.length)break;c+=s.charCodeAt(a)==9?i-c%i:1,a=qt(s,a)}return l===!0?-1:s.length}const od="\u037C",ly=typeof Symbol>"u"?"__"+od:Symbol.for(od),ld=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Di{constructor(e,i){this.rules=[];let{finish:l}=i||{};function a(u){return/^@/.test(u)?[u]:u.split(/,\s*/)}function c(u,f,d,h){let m=[],p=/^@(\w+)\b/.exec(u[0]),y=p&&p[1]=="keyframes";if(p&&f==null)return d.push(u[0]+";");for(let b in f){let x=f[b];if(/&/.test(b))c(b.split(/,\s*/).map(A=>u.map(E=>A.replace(/&/,E))).reduce((A,E)=>A.concat(E)),x,d);else if(x&&typeof x=="object"){if(!p)throw new RangeError("The value of a property ("+b+") should be a primitive value.");c(a(b),x,m,y)}else x!=null&&m.push(b.replace(/_.*/,"").replace(/[A-Z]/g,A=>"-"+A.toLowerCase())+": "+x+";")}(m.length||y)&&d.push((l&&!p&&!h?u.map(l):u).join(", ")+" {"+m.join(" ")+"}")}for(let u in e)c(a(u),e[u],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ay[ly]||1;return ay[ly]=e+1,od+e.toString(36)}static mount(e,i,l){let a=e[ld],c=l&&l.nonce;a?c&&a.setNonce(c):a=new mM(e,c),a.mount(Array.isArray(i)?i:[i],e)}}let cy=new Map;class mM{constructor(e,i){let l=e.ownerDocument||e,a=l.defaultView;if(!e.head&&e.adoptedStyleSheets&&a.CSSStyleSheet){let c=cy.get(l);if(c)return e[ld]=c;this.sheet=new a.CSSStyleSheet,cy.set(l,this)}else this.styleTag=l.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);this.modules=[],e[ld]=this}mount(e,i){let l=this.sheet,a=0,c=0;for(let u=0;u<e.length;u++){let f=e[u],d=this.modules.indexOf(f);if(d<c&&d>-1&&(this.modules.splice(d,1),c--,d=-1),d==-1){if(this.modules.splice(c++,0,f),l)for(let h=0;h<f.rules.length;h++)l.insertRule(f.rules[h],a++)}else{for(;c<d;)a+=this.modules[c++].rules.length;a+=f.rules.length,c++}}if(l)i.adoptedStyleSheets.indexOf(this.sheet)<0&&(i.adoptedStyleSheets=[this.sheet,...i.adoptedStyleSheets]);else{let u="";for(let d=0;d<this.modules.length;d++)u+=this.modules[d].getRules()+`
`;this.styleTag.textContent=u;let f=i.head||i;this.styleTag.parentNode!=f&&f.insertBefore(this.styleTag,f.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var Mi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},nl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},pM=typeof navigator<"u"&&/Mac/.test(navigator.platform),gM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),en=0;en<10;en++)Mi[48+en]=Mi[96+en]=String(en);for(var en=1;en<=24;en++)Mi[en+111]="F"+en;for(var en=65;en<=90;en++)Mi[en]=String.fromCharCode(en+32),nl[en]=String.fromCharCode(en);for(var ad in Mi)nl.hasOwnProperty(ad)||(nl[ad]=Mi[ad]);function yM(s){var e=pM&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||gM&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",i=!e&&s.key||(s.shiftKey?nl:Mi)[s.keyCode]||s.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function rl(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function cd(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function Va(s,e){if(!e.anchorNode)return!1;try{return cd(s,e.anchorNode)}catch{return!1}}function Ns(s){return s.nodeType==3?is(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function il(s,e,i,l){return i?uy(s,e,i,l,-1)||uy(s,e,i,l,1):!1}function rs(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function za(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function uy(s,e,i,l,a){for(;;){if(s==i&&e==l)return!0;if(e==(a<0?0:Pr(s))){if(s.nodeName=="DIV")return!1;let c=s.parentNode;if(!c||c.nodeType!=1)return!1;e=rs(s)+(a<0?0:1),s=c}else if(s.nodeType==1){if(s=s.childNodes[e+(a<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=a<0?Pr(s):0}else return!1}}function Pr(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function sl(s,e){let i=e?s.left:s.right;return{left:i,right:i,top:s.top,bottom:s.bottom}}function vM(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function fy(s,e){let i=e.width/s.offsetWidth,l=e.height/s.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.width-s.offsetWidth)<1)&&(i=1),(l>.995&&l<1.005||!isFinite(l)||Math.abs(e.height-s.offsetHeight)<1)&&(l=1),{scaleX:i,scaleY:l}}function bM(s,e,i,l,a,c,u,f){let d=s.ownerDocument,h=d.defaultView||window;for(let m=s,p=!1;m&&!p;)if(m.nodeType==1){let y,b=m==d.body,x=1,A=1;if(b)y=vM(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(p=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let k=m.getBoundingClientRect();({scaleX:x,scaleY:A}=fy(m,k)),y={left:k.left,right:k.left+m.clientWidth*x,top:k.top,bottom:k.top+m.clientHeight*A}}let E=0,w=0;if(a=="nearest")e.top<y.top?(w=-(y.top-e.top+u),i>0&&e.bottom>y.bottom+w&&(w=e.bottom-y.bottom+w+u)):e.bottom>y.bottom&&(w=e.bottom-y.bottom+u,i<0&&e.top-w<y.top&&(w=-(y.top+w-e.top+u)));else{let k=e.bottom-e.top,L=y.bottom-y.top;w=(a=="center"&&k<=L?e.top+k/2-L/2:a=="start"||a=="center"&&i<0?e.top-u:e.bottom-L+u)-y.top}if(l=="nearest"?e.left<y.left?(E=-(y.left-e.left+c),i>0&&e.right>y.right+E&&(E=e.right-y.right+E+c)):e.right>y.right&&(E=e.right-y.right+c,i<0&&e.left<y.left+E&&(E=-(y.left+E-e.left+c))):E=(l=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:l=="start"==f?e.left-c:e.right-(y.right-y.left)+c)-y.left,E||w)if(b)h.scrollBy(E,w);else{let k=0,L=0;if(w){let z=m.scrollTop;m.scrollTop+=w/A,L=(m.scrollTop-z)*A}if(E){let z=m.scrollLeft;m.scrollLeft+=E/x,k=(m.scrollLeft-z)*x}e={left:e.left-k,top:e.top-L,right:e.right-k,bottom:e.bottom-L},k&&Math.abs(k-E)<1&&(l="nearest"),L&&Math.abs(L-w)<1&&(a="nearest")}if(b)break;m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function xM(s){let e=s.ownerDocument,i,l;for(let a=s.parentNode;a&&!(a==e.body||i&&l);)if(a.nodeType==1)!l&&a.scrollHeight>a.clientHeight&&(l=a),!i&&a.scrollWidth>a.clientWidth&&(i=a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;return{x:i,y:l}}class SM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:i,focusNode:l}=e;this.set(i,Math.min(e.anchorOffset,i?Pr(i):0),l,Math.min(e.focusOffset,l?Pr(l):0))}set(e,i,l,a){this.anchorNode=e,this.anchorOffset=i,this.focusNode=l,this.focusOffset=a}}let Bs=null;function dy(s){if(s.setActive)return s.setActive();if(Bs)return s.focus(Bs);let e=[];for(let i=s;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(s.focus(Bs==null?{get preventScroll(){return Bs={preventScroll:!0},!0}}:void 0),!Bs){Bs=!1;for(let i=0;i<e.length;){let l=e[i++],a=e[i++],c=e[i++];l.scrollTop!=a&&(l.scrollTop=a),l.scrollLeft!=c&&(l.scrollLeft=c)}}}let hy;function is(s,e,i=e){let l=hy||(hy=document.createRange());return l.setEnd(s,i),l.setStart(s,e),l}function $s(s,e,i,l){let a={key:e,code:e,keyCode:i,which:i,cancelable:!0};l&&({altKey:a.altKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey}=l);let c=new KeyboardEvent("keydown",a);c.synthetic=!0,s.dispatchEvent(c);let u=new KeyboardEvent("keyup",a);return u.synthetic=!0,s.dispatchEvent(u),c.defaultPrevented||u.defaultPrevented}function EM(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function my(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function AM(s,e){let i=e.focusNode,l=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=l)return!1;for(l=Math.min(l,Pr(i));;)if(l){if(i.nodeType!=1)return!1;let a=i.childNodes[l-1];a.contentEditable=="false"?l--:(i=a,l=Pr(i))}else{if(i==s)return!0;l=rs(i),i=i.parentNode}}function py(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function gy(s,e){for(let i=s,l=e;;){if(i.nodeType==3&&l>0)return{node:i,offset:l};if(i.nodeType==1&&l>0){if(i.contentEditable=="false")return null;i=i.childNodes[l-1],l=Pr(i)}else if(i.parentNode&&!za(i))l=rs(i),i=i.parentNode;else return null}}function yy(s,e){for(let i=s,l=e;;){if(i.nodeType==3&&l<i.nodeValue.length)return{node:i,offset:l};if(i.nodeType==1&&l<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[l],l=0}else if(i.parentNode&&!za(i))l=rs(i)+1,i=i.parentNode;else return null}}class sn{constructor(e,i,l=!0){this.node=e,this.offset=i,this.precise=l}static before(e,i){return new sn(e.parentNode,rs(e),i)}static after(e,i){return new sn(e.parentNode,rs(e)+1,i)}}const ud=[];class vt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let i=this.posAtStart;for(let l of this.children){if(l==e)return i;i+=l.length+l.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,i){if(this.flags&2){let l=this.dom,a=null,c;for(let u of this.children){if(u.flags&7){if(!u.dom&&(c=a?a.nextSibling:l.firstChild)){let f=vt.get(c);(!f||!f.parent&&f.canReuseDOM(u))&&u.reuseDOM(c)}u.sync(e,i),u.flags&=-8}if(c=a?a.nextSibling:l.firstChild,i&&!i.written&&i.node==l&&c!=u.dom&&(i.written=!0),u.dom.parentNode==l)for(;c&&c!=u.dom;)c=vy(c);else l.insertBefore(u.dom,c);a=u.dom}for(c=a?a.nextSibling:l.firstChild,c&&i&&i.node==l&&(i.written=!0);c;)c=vy(c)}else if(this.flags&1)for(let l of this.children)l.flags&7&&(l.sync(e,i),l.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,i){let l;if(e==this.dom)l=this.dom.childNodes[i];else{let a=Pr(e)==0?0:i==0?-1:1;for(;;){let c=e.parentNode;if(c==this.dom)break;a==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?a=-1:a=1),e=c}a<0?l=e:l=e.nextSibling}if(l==this.dom.firstChild)return 0;for(;l&&!vt.get(l);)l=l.nextSibling;if(!l)return this.length;for(let a=0,c=0;;a++){let u=this.children[a];if(u.dom==l)return c;c+=u.length+u.breakAfter}}domBoundsAround(e,i,l=0){let a=-1,c=-1,u=-1,f=-1;for(let d=0,h=l,m=l;d<this.children.length;d++){let p=this.children[d],y=h+p.length;if(h<e&&y>i)return p.domBoundsAround(e,i,h);if(y>=e&&a==-1&&(a=d,c=h),h>i&&p.dom.parentNode==this.dom){u=d,f=m;break}m=y,h=y+p.breakAfter}return{from:c,to:f<0?l+this.length:f,startDOM:(a?this.children[a-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:u<this.children.length&&u>=0?this.children[u].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let i=this.parent;i;i=i.parent){if(e&&(i.flags|=2),i.flags&1)return;i.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let i=e.parent;if(!i)return e;e=i}}replaceChildren(e,i,l=ud){this.markDirty();for(let a=e;a<i;a++){let c=this.children[a];c.parent==this&&l.indexOf(c)<0&&c.destroy()}l.length<250?this.children.splice(e,i-e,...l):this.children=[].concat(this.children.slice(0,e),l,this.children.slice(i));for(let a=0;a<l.length;a++)l[a].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new by(this.children,e,this.children.length)}childPos(e,i=1){return this.childCursor().findPos(e,i)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,i,l,a,c,u){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}vt.prototype.breakAfter=0;function vy(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class by{constructor(e,i,l){this.children=e,this.pos=i,this.i=l,this.off=0}findPos(e,i=1){for(;;){if(e>this.pos||e==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let l=this.children[--this.i];this.pos-=l.length+l.breakAfter}}}function xy(s,e,i,l,a,c,u,f,d){let{children:h}=s,m=h.length?h[e]:null,p=c.length?c[c.length-1]:null,y=p?p.breakAfter:u;if(!(e==l&&m&&!u&&!y&&c.length<2&&m.merge(i,a,c.length?p:null,i==0,f,d))){if(l<h.length){let b=h[l];b&&(a<b.length||b.breakAfter&&p?.breakAfter)?(e==l&&(b=b.split(a),a=0),!y&&p&&b.merge(0,a,p,!0,0,d)?c[c.length-1]=b:((a||b.children.length&&!b.children[0].length)&&b.merge(0,a,null,!1,0,d),c.push(b))):b?.breakAfter&&(p?p.breakAfter=1:u=1),l++}for(m&&(m.breakAfter=u,i>0&&(!u&&c.length&&m.merge(i,m.length,c[0],!1,f,0)?m.breakAfter=c.shift().breakAfter:(i<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(i,m.length,null,!1,f,0),e++));e<l&&c.length;)if(h[l-1].become(c[c.length-1]))l--,c.pop(),d=c.length?0:f;else if(h[e].become(c[0]))e++,c.shift(),f=c.length?0:d;else break;!c.length&&e&&l<h.length&&!h[e-1].breakAfter&&h[l].merge(0,0,h[e-1],!1,f,d)&&e--,(e<l||c.length)&&s.replaceChildren(e,l,c)}}function Sy(s,e,i,l,a,c){let u=s.childCursor(),{i:f,off:d}=u.findPos(i,1),{i:h,off:m}=u.findPos(e,-1),p=e-i;for(let y of l)p+=y.length;s.length+=p,xy(s,h,m,f,d,l,0,a,c)}let Pn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},fd=typeof document<"u"?document:{documentElement:{style:{}}};const dd=/Edge\/(\d+)/.exec(Pn.userAgent),Ey=/MSIE \d/.test(Pn.userAgent),hd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Pn.userAgent),Ua=!!(Ey||hd||dd),Ay=!Ua&&/gecko\/(\d+)/i.test(Pn.userAgent),md=!Ua&&/Chrome\/(\d+)/.exec(Pn.userAgent),wy="webkitFontSmoothing"in fd.documentElement.style,Cy=!Ua&&/Apple Computer/.test(Pn.vendor),Oy=Cy&&(/Mobile\/\w+/.test(Pn.userAgent)||Pn.maxTouchPoints>2);var ke={mac:Oy||/Mac/.test(Pn.platform),windows:/Win/.test(Pn.platform),linux:/Linux|X11/.test(Pn.platform),ie:Ua,ie_version:Ey?fd.documentMode||6:hd?+hd[1]:dd?+dd[1]:0,gecko:Ay,gecko_version:Ay?+(/Firefox\/(\d+)/.exec(Pn.userAgent)||[0,0])[1]:0,chrome:!!md,chrome_version:md?+md[1]:0,ios:Oy,android:/Android\b/.test(Pn.userAgent),webkit:wy,safari:Cy,webkit_version:wy?+(/\bAppleWebKit\/(\d+)/.exec(Pn.userAgent)||[0,0])[1]:0,tabSize:fd.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const wM=256;class ar extends vt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,i,l){return this.flags&8||l&&(!(l instanceof ar)||this.length-(i-e)+l.length>wM||l.flags&8)?!1:(this.text=this.text.slice(0,e)+(l?l.text:"")+this.text.slice(i),this.markDirty(),!0)}split(e){let i=new ar(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(e,i){return e==this.dom?i:i?this.text.length:0}domAtPos(e){return new sn(this.dom,e)}domBoundsAround(e,i,l){return{from:l,to:l+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,i){return CM(this.dom,e,i)}}class li extends vt{constructor(e,i=[],l=0){super(),this.mark=e,this.children=i,this.length=l;for(let a of i)a.setParent(this)}setAttrs(e){if(my(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)e.setAttribute(i,this.mark.attrs[i]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,i)}merge(e,i,l,a,c,u){return l&&(!(l instanceof li&&l.mark.eq(this.mark))||e&&c<=0||i<this.length&&u<=0)?!1:(Sy(this,e,i,l?l.children.slice():[],c-1,u-1),this.markDirty(),!0)}split(e){let i=[],l=0,a=-1,c=0;for(let f of this.children){let d=l+f.length;d>e&&i.push(l<e?f.split(e-l):f),a<0&&l>=e&&(a=c),l=d,c++}let u=this.length-e;return this.length=e,a>-1&&(this.children.length=a,this.markDirty()),new li(this.mark,i,u)}domAtPos(e){return ky(this,e)}coordsAt(e,i){return Ty(this,e,i)}}function CM(s,e,i){let l=s.nodeValue.length;e>l&&(e=l);let a=e,c=e,u=0;e==0&&i<0||e==l&&i>=0?ke.chrome||ke.gecko||(e?(a--,u=1):c<l&&(c++,u=-1)):i<0?a--:c<l&&c++;let f=is(s,a,c).getClientRects();if(!f.length)return null;let d=f[(u?u<0:i>=0)?0:f.length-1];return ke.safari&&!u&&d.width==0&&(d=Array.prototype.find.call(f,h=>h.width)||d),u?sl(d,u<0):d||null}class Ii extends vt{static create(e,i,l){return new Ii(e,i,l)}constructor(e,i,l){super(),this.widget=e,this.length=i,this.side=l,this.prevWidget=null}split(e){let i=Ii.create(this.widget,this.length-e,this.side);return this.length-=e,i}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,i,l,a,c,u){return l&&(!(l instanceof Ii)||!this.widget.compare(l.widget)||e>0&&c<=0||i<this.length&&u<=0)?!1:(this.length=e+(l?l.length:0)+(this.length-i),!0)}become(e){return e instanceof Ii&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ut.empty;let e=this;for(;e.parent;)e=e.parent;let{view:i}=e,l=i&&i.state.doc,a=this.posAtStart;return l?l.slice(a,a+this.length):ut.empty}domAtPos(e){return(this.length?e==0:this.side>0)?sn.before(this.dom):sn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,i){let l=this.widget.coordsAt(this.dom,e,i);if(l)return l;let a=this.dom.getClientRects(),c=null;if(!a.length)return null;let u=this.side?this.side<0:e>0;for(let f=u?a.length-1:0;c=a[f],!(e>0?f==0:f==a.length-1||c.top<c.bottom);f+=u?-1:1);return sl(c,!u)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class js extends vt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof js&&e.side==this.side}split(){return new js(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?sn.before(this.dom):sn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ut.empty}get isHidden(){return!0}}ar.prototype.children=Ii.prototype.children=js.prototype.children=ud;function ky(s,e){let i=s.dom,{children:l}=s,a=0;for(let c=0;a<l.length;a++){let u=l[a],f=c+u.length;if(!(f==c&&u.getSide()<=0)){if(e>c&&e<f&&u.dom.parentNode==i)return u.domAtPos(e-c);if(e<=c)break;c=f}}for(let c=a;c>0;c--){let u=l[c-1];if(u.dom.parentNode==i)return u.domAtPos(u.length)}for(let c=a;c<l.length;c++){let u=l[c];if(u.dom.parentNode==i)return u.domAtPos(0)}return new sn(i,0)}function Py(s,e,i){let l,{children:a}=s;i>0&&e instanceof li&&a.length&&(l=a[a.length-1])instanceof li&&l.mark.eq(e.mark)?Py(l,e.children[0],i-1):(a.push(e),e.setParent(s)),s.length+=e.length}function Ty(s,e,i){let l=null,a=-1,c=null,u=-1;function f(h,m){for(let p=0,y=0;p<h.children.length&&y<=m;p++){let b=h.children[p],x=y+b.length;x>=m&&(b.children.length?f(b,m-y):(!c||c.isHidden&&i>0)&&(x>m||y==x&&b.getSide()>0)?(c=b,u=m-y):(y<m||y==x&&b.getSide()<0&&!b.isHidden)&&(l=b,a=m-y)),y=x}}f(s,e);let d=(i<0?l:c)||l||c;return d?d.coordsAt(Math.max(0,d==l?a:u),i):OM(s)}function OM(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let i=Ns(e);return i[i.length-1]||null}function pd(s,e){for(let i in s)i=="class"&&e.class?e.class+=" "+s.class:i=="style"&&e.style?e.style+=";"+s.style:e[i]=s[i];return e}const Dy=Object.create(null);function Ha(s,e,i){if(s==e)return!0;s||(s=Dy),e||(e=Dy);let l=Object.keys(s),a=Object.keys(e);if(l.length-(i&&l.indexOf(i)>-1?1:0)!=a.length-(i&&a.indexOf(i)>-1?1:0))return!1;for(let c of l)if(c!=i&&(a.indexOf(c)==-1||s[c]!==e[c]))return!1;return!0}function gd(s,e,i){let l=!1;if(e)for(let a in e)i&&a in i||(l=!0,a=="style"?s.style.cssText="":s.removeAttribute(a));if(i)for(let a in i)e&&e[a]==i[a]||(l=!0,a=="style"?s.style.cssText=i[a]:s.setAttribute(a,i[a]));return l}function kM(s){let e=Object.create(null);for(let i=0;i<s.attributes.length;i++){let l=s.attributes[i];e[l.name]=l.value}return e}class Tr{eq(e){return!1}updateDOM(e,i){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,i,l){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var vn=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(vn||(vn={}));class Re extends ns{constructor(e,i,l,a){super(),this.startSide=e,this.endSide=i,this.widget=l,this.spec=a}get heightRelevant(){return!1}static mark(e){return new ol(e)}static widget(e){let i=Math.max(-1e4,Math.min(1e4,e.side||0)),l=!!e.block;return i+=l&&!e.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new Ri(e,i,i,l,e.widget||null,!1)}static replace(e){let i=!!e.block,l,a;if(e.isBlockGap)l=-5e8,a=4e8;else{let{start:c,end:u}=My(e,i);l=(c?i?-3e8:-1:5e8)-1,a=(u?i?2e8:1:-6e8)+1}return new Ri(e,l,a,i,e.widget||null,!0)}static line(e){return new ll(e)}static set(e,i=!1){return it.of(e,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Re.none=it.empty;class ol extends Re{constructor(e){let{start:i,end:l}=My(e);super(i?-1:5e8,l?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var i,l;return this==e||e instanceof ol&&this.tagName==e.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(e.class||((l=e.attrs)===null||l===void 0?void 0:l.class))&&Ha(this.attrs,e.attrs,"class")}range(e,i=e){if(e>=i)throw new RangeError("Mark decorations may not be empty");return super.range(e,i)}}ol.prototype.point=!1;class ll extends Re{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ll&&this.spec.class==e.spec.class&&Ha(this.spec.attributes,e.spec.attributes)}range(e,i=e){if(i!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,i)}}ll.prototype.mapMode=yn.TrackBefore,ll.prototype.point=!0;class Ri extends Re{constructor(e,i,l,a,c,u){super(i,l,c,e),this.block=a,this.isReplace=u,this.mapMode=a?i<=0?yn.TrackBefore:yn.TrackAfter:yn.TrackDel}get type(){return this.startSide!=this.endSide?vn.WidgetRange:this.startSide<=0?vn.WidgetBefore:vn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ri&&PM(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,i=e){if(this.isReplace&&(e>i||e==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,i)}}Ri.prototype.point=!0;function My(s,e=!1){let{inclusiveStart:i,inclusiveEnd:l}=s;return i==null&&(i=s.inclusive),l==null&&(l=s.inclusive),{start:i??e,end:l??e}}function PM(s,e){return s==e||!!(s&&e&&s.compare(e))}function yd(s,e,i,l=0){let a=i.length-1;a>=0&&i[a]+l>=s?i[a]=Math.max(i[a],e):i.push(s,e)}class Wt extends vt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,i,l,a,c,u){if(l){if(!(l instanceof Wt))return!1;this.dom||l.transferDOM(this)}return a&&this.setDeco(l?l.attrs:null),Sy(this,e,i,l?l.children.slice():[],c,u),!0}split(e){let i=new Wt;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:l,off:a}=this.childPos(e);a&&(i.append(this.children[l].split(a),0),this.children[l].merge(a,this.children[l].length,null,!1,0,0),l++);for(let c=l;c<this.children.length;c++)i.append(this.children[c],0);for(;l>0&&this.children[l-1].length==0;)this.children[--l].destroy();return this.children.length=l,this.markDirty(),this.length=e,i}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ha(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,i){Py(this,e,i)}addLineDeco(e){let i=e.spec.attributes,l=e.spec.class;i&&(this.attrs=pd(i,this.attrs||{})),l&&(this.attrs=pd({class:l},this.attrs||{}))}domAtPos(e){return ky(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,i){var l;this.dom?this.flags&4&&(my(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(gd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,i);let a=this.dom.lastChild;for(;a&&vt.get(a)instanceof li;)a=a.lastChild;if(!a||!this.length||a.nodeName!="BR"&&((l=vt.get(a))===null||l===void 0?void 0:l.isEditable)==!1&&(!ke.ios||!this.children.some(c=>c instanceof ar))){let c=document.createElement("BR");c.cmIgnore=!0,this.dom.appendChild(c)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,i;for(let l of this.children){if(!(l instanceof ar)||/[^ -~]/.test(l.text))return null;let a=Ns(l.dom);if(a.length!=1)return null;e+=a[0].width,i=a[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:i}:null}coordsAt(e,i){let l=Ty(this,e,i);if(!this.children.length&&l&&this.parent){let{heightOracle:a}=this.parent.view.viewState,c=l.bottom-l.top;if(Math.abs(c-a.lineHeight)<2&&a.textHeight<c){let u=(c-a.textHeight)/2;return{top:l.top+u,bottom:l.bottom-u,left:l.left,right:l.left}}}return l}become(e){return e instanceof Wt&&this.children.length==0&&e.children.length==0&&Ha(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,i){for(let l=0,a=0;l<e.children.length;l++){let c=e.children[l],u=a+c.length;if(u>=i){if(c instanceof Wt)return c;if(u>i)break}a=u+c.breakAfter}return null}}class ai extends vt{constructor(e,i,l){super(),this.widget=e,this.length=i,this.deco=l,this.breakAfter=0,this.prevWidget=null}merge(e,i,l,a,c,u){return l&&(!(l instanceof ai)||!this.widget.compare(l.widget)||e>0&&c<=0||i<this.length&&u<=0)?!1:(this.length=e+(l?l.length:0)+(this.length-i),!0)}domAtPos(e){return e==0?sn.before(this.dom):sn.after(this.dom,e==this.length)}split(e){let i=this.length-e;this.length=e;let l=new ai(this.widget,i,this.deco);return l.breakAfter=this.breakAfter,l}get children(){return ud}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ut.empty}domBoundsAround(){return null}become(e){return e instanceof ai&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,i){let l=this.widget.coordsAt(this.dom,e,i);return l||(this.widget instanceof vd?null:sl(this.dom.getBoundingClientRect(),this.length?e==0:i<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:i,endSide:l}=this.deco;return i==l?!1:e<0?i<0:l>0}}class vd extends Tr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class al{constructor(e,i,l,a){this.doc=e,this.pos=i,this.end=l,this.disallowBlockEffectsFor=a,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ai&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Wt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ka(new js(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ai)&&this.getLine()}buildText(e,i,l){for(;e>0;){if(this.textOff==this.text.length){let{value:c,lineBreak:u,done:f}=this.cursor.next(this.skip);if(this.skip=0,f)throw new Error("Ran out of text content when drawing inline views");if(u){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=c,this.textOff=0}let a=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(i.slice(i.length-l)),this.getLine().append(Ka(new ar(this.text.slice(this.textOff,this.textOff+a)),i),l),this.atCursorPos=!0,this.textOff+=a,e-=a,l=0}}span(e,i,l,a){this.buildText(i-e,l,a),this.pos=i,this.openStart<0&&(this.openStart=a)}point(e,i,l,a,c,u){if(this.disallowBlockEffectsFor[u]&&l instanceof Ri){if(l.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let f=i-e;if(l instanceof Ri)if(l.block)l.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ai(l.widget||Ws.block,f,l));else{let d=Ii.create(l.widget||Ws.inline,f,f?0:l.startSide),h=this.atCursorPos&&!d.isEditable&&c<=a.length&&(e<i||l.startSide>0),m=!d.isEditable&&(e<i||c>a.length||l.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!h&&!d.isEditable&&(this.pendingBuffer=0),this.flushBuffer(a),h&&(p.append(Ka(new js(1),a),c),c=a.length+Math.max(0,c-a.length)),p.append(Ka(d,a),c),this.atCursorPos=m,this.pendingBuffer=m?e<i||c>a.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=a.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(l);f&&(this.textOff+f<=this.text.length?this.textOff+=f:(this.skip+=f-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=c)}static build(e,i,l,a,c){let u=new al(e,i,l,c);return u.openEnd=it.spans(a,i,l,u),u.openStart<0&&(u.openStart=u.openEnd),u.finish(u.openEnd),u}}function Ka(s,e){for(let i of e)s=new li(i,[s],s.length);return s}class Ws extends Tr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ws.inline=new Ws("span"),Ws.block=new Ws("div");var bt=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(bt||(bt={}));const ss=bt.LTR,bd=bt.RTL;function Iy(s){let e=[];for(let i=0;i<s.length;i++)e.push(1<<+s[i]);return e}const TM=Iy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),DM=Iy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),xd=Object.create(null),Dr=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),i=s.charCodeAt(1);xd[e]=i,xd[i]=-e}function Ry(s){return s<=247?TM[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?DM[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const MM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Li{get dir(){return this.level%2?bd:ss}constructor(e,i,l){this.from=e,this.to=i,this.level=l}side(e,i){return this.dir==i==e?this.to:this.from}forward(e,i){return e==(this.dir==i)}static find(e,i,l,a){let c=-1;for(let u=0;u<e.length;u++){let f=e[u];if(f.from<=i&&f.to>=i){if(f.level==l)return u;(c<0||(a!=0?a<0?f.from<i:f.to>i:e[c].level>f.level))&&(c=u)}}if(c<0)throw new RangeError("Index out of range");return c}}function Ly(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++){let l=s[i],a=e[i];if(l.from!=a.from||l.to!=a.to||l.direction!=a.direction||!Ly(l.inner,a.inner))return!1}return!0}const xt=[];function IM(s,e,i,l,a){for(let c=0;c<=l.length;c++){let u=c?l[c-1].to:e,f=c<l.length?l[c].from:i,d=c?256:a;for(let h=u,m=d,p=d;h<f;h++){let y=Ry(s.charCodeAt(h));y==512?y=m:y==8&&p==4&&(y=16),xt[h]=y==4?2:y,y&7&&(p=y),m=y}for(let h=u,m=d,p=d;h<f;h++){let y=xt[h];if(y==128)h<f-1&&m==xt[h+1]&&m&24?y=xt[h]=m:xt[h]=256;else if(y==64){let b=h+1;for(;b<f&&xt[b]==64;)b++;let x=h&&m==8||b<i&&xt[b]==8?p==1?1:8:256;for(let A=h;A<b;A++)xt[A]=x;h=b-1}else y==8&&p==1&&(xt[h]=1);m=y,y&7&&(p=y)}}}function RM(s,e,i,l,a){let c=a==1?2:1;for(let u=0,f=0,d=0;u<=l.length;u++){let h=u?l[u-1].to:e,m=u<l.length?l[u].from:i;for(let p=h,y,b,x;p<m;p++)if(b=xd[y=s.charCodeAt(p)])if(b<0){for(let A=f-3;A>=0;A-=3)if(Dr[A+1]==-b){let E=Dr[A+2],w=E&2?a:E&4?E&1?c:a:0;w&&(xt[p]=xt[Dr[A]]=w),f=A;break}}else{if(Dr.length==189)break;Dr[f++]=p,Dr[f++]=y,Dr[f++]=d}else if((x=xt[p])==2||x==1){let A=x==a;d=A?0:1;for(let E=f-3;E>=0;E-=3){let w=Dr[E+2];if(w&2)break;if(A)Dr[E+2]|=2;else{if(w&4)break;Dr[E+2]|=4}}}}}function LM(s,e,i,l){for(let a=0,c=l;a<=i.length;a++){let u=a?i[a-1].to:s,f=a<i.length?i[a].from:e;for(let d=u;d<f;){let h=xt[d];if(h==256){let m=d+1;for(;;)if(m==f){if(a==i.length)break;m=i[a++].to,f=a<i.length?i[a].from:e}else if(xt[m]==256)m++;else break;let p=c==1,y=(m<e?xt[m]:l)==1,b=p==y?p?1:2:l;for(let x=m,A=a,E=A?i[A-1].to:s;x>d;)x==E&&(x=i[--A].from,E=A?i[A-1].to:s),xt[--x]=b;d=m}else c=h,d++}}}function Sd(s,e,i,l,a,c,u){let f=l%2?2:1;if(l%2==a%2)for(let d=e,h=0;d<i;){let m=!0,p=!1;if(h==c.length||d<c[h].from){let A=xt[d];A!=f&&(m=!1,p=A==16)}let y=!m&&f==1?[]:null,b=m?l:l+1,x=d;e:for(;;)if(h<c.length&&x==c[h].from){if(p)break e;let A=c[h];if(!m)for(let E=A.to,w=h+1;;){if(E==i)break e;if(w<c.length&&c[w].from==E)E=c[w++].to;else{if(xt[E]==f)break e;break}}if(h++,y)y.push(A);else{A.from>d&&u.push(new Li(d,A.from,b));let E=A.direction==ss!=!(b%2);Ed(s,E?l+1:l,a,A.inner,A.from,A.to,u),d=A.to}x=A.to}else{if(x==i||(m?xt[x]!=f:xt[x]==f))break;x++}y?Sd(s,d,x,l+1,a,y,u):d<x&&u.push(new Li(d,x,b)),d=x}else for(let d=i,h=c.length;d>e;){let m=!0,p=!1;if(!h||d>c[h-1].to){let A=xt[d-1];A!=f&&(m=!1,p=A==16)}let y=!m&&f==1?[]:null,b=m?l:l+1,x=d;e:for(;;)if(h&&x==c[h-1].to){if(p)break e;let A=c[--h];if(!m)for(let E=A.from,w=h;;){if(E==e)break e;if(w&&c[w-1].to==E)E=c[--w].from;else{if(xt[E-1]==f)break e;break}}if(y)y.push(A);else{A.to<d&&u.push(new Li(A.to,d,b));let E=A.direction==ss!=!(b%2);Ed(s,E?l+1:l,a,A.inner,A.from,A.to,u),d=A.from}x=A.from}else{if(x==e||(m?xt[x-1]!=f:xt[x-1]==f))break;x--}y?Sd(s,x,d,l+1,a,y,u):x<d&&u.push(new Li(x,d,b)),d=x}}function Ed(s,e,i,l,a,c,u){let f=e%2?2:1;IM(s,a,c,l,f),RM(s,a,c,l,f),LM(a,c,l,f),Sd(s,a,c,e,i,l,u)}function Fy(s,e,i){if(!s)return[new Li(0,0,e==bd?1:0)];if(e==ss&&!i.length&&!MM.test(s))return Ny(s.length);if(i.length)for(;s.length>xt.length;)xt[xt.length]=256;let l=[],a=e==ss?0:1;return Ed(s,a,a,i,0,s.length,l),l}function Ny(s){return[new Li(0,s,0)]}let By="";function $y(s,e,i,l,a){var c;let u=l.head-s.from,f=Li.find(e,u,(c=l.bidiLevel)!==null&&c!==void 0?c:-1,l.assoc),d=e[f],h=d.side(a,i);if(u==h){let y=f+=a?1:-1;if(y<0||y>=e.length)return null;d=e[f=y],u=d.side(!a,i),h=d.side(a,i)}let m=qt(s.text,u,d.forward(a,i));(m<d.from||m>d.to)&&(m=h),By=s.text.slice(Math.min(u,m),Math.max(u,m));let p=f==(a?e.length-1:0)?null:e[f+(a?1:-1)];return p&&m==h&&p.level+(a?0:1)<d.level?de.cursor(p.side(!a,i)+s.from,p.forward(a,i)?1:-1,p.level):de.cursor(m+s.from,d.forward(a,i)?-1:1,d.level)}function FM(s,e,i){for(let l=e;l<i;l++){let a=Ry(s.charCodeAt(l));if(a==1)return ss;if(a==2||a==4)return bd}return ss}const jy=Oe.define(),Wy=Oe.define(),Vy=Oe.define(),zy=Oe.define(),Ad=Oe.define(),Uy=Oe.define(),Hy=Oe.define(),wd=Oe.define(),Cd=Oe.define(),Ky=Oe.define({combine:s=>s.some(e=>e)}),Gy=Oe.define({combine:s=>s.some(e=>e)}),Yy=Oe.define();class Vs{constructor(e,i="nearest",l="nearest",a=5,c=5,u=!1){this.range=e,this.y=i,this.x=l,this.yMargin=a,this.xMargin=c,this.isSnapshot=u}map(e){return e.empty?this:new Vs(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Vs(de.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ga=He.define({map:(s,e)=>s.map(e)}),Jy=He.define();function Tn(s,e,i){let l=s.facet(zy);l.length?l[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const Fi=Oe.define({combine:s=>s.length?s[0]:!0});let NM=0;const cl=Oe.define();class It{constructor(e,i,l,a,c){this.id=e,this.create=i,this.domEventHandlers=l,this.domEventObservers=a,this.extension=c(this)}static define(e,i){const{eventHandlers:l,eventObservers:a,provide:c,decorations:u}=i||{};return new It(NM++,e,l,a,f=>{let d=[cl.of(f)];return u&&d.push(ul.of(h=>{let m=h.plugin(f);return m?u(m):Re.none})),c&&d.push(c(f)),d})}static fromClass(e,i){return It.define(l=>new e(l),i)}}class Od{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(l){if(Tn(i.state,l,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(i){Tn(e.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(l){Tn(e.state,l,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Xy=Oe.define(),Ya=Oe.define(),ul=Oe.define(),Zy=Oe.define(),kd=Oe.define(),Qy=Oe.define();function qy(s,e){let i=s.state.facet(Qy);if(!i.length)return i;let l=i.map(c=>c instanceof Function?c(s):c),a=[];return it.spans(l,e.from,e.to,{point(){},span(c,u,f,d){let h=c-e.from,m=u-e.from,p=a;for(let y=f.length-1;y>=0;y--,d--){let b=f[y].spec.bidiIsolate,x;if(b==null&&(b=FM(e.text,h,m)),d>0&&p.length&&(x=p[p.length-1]).to==h&&x.direction==b)x.to=m,p=x.inner;else{let A={from:h,to:m,direction:b,inner:[]};p.push(A),p=A.inner}}}}),a}const _y=Oe.define();function Pd(s){let e=0,i=0,l=0,a=0;for(let c of s.state.facet(_y)){let u=c(s);u&&(u.left!=null&&(e=Math.max(e,u.left)),u.right!=null&&(i=Math.max(i,u.right)),u.top!=null&&(l=Math.max(l,u.top)),u.bottom!=null&&(a=Math.max(a,u.bottom)))}return{left:e,right:i,top:l,bottom:a}}const fl=Oe.define();class $n{constructor(e,i,l,a){this.fromA=e,this.toA=i,this.fromB=l,this.toB=a}join(e){return new $n(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let i=e.length,l=this;for(;i>0;i--){let a=e[i-1];if(!(a.fromA>l.toA)){if(a.toA<l.fromA)break;l=l.join(a),e.splice(i-1,1)}}return e.splice(i,0,l),e}static extendWithRanges(e,i){if(i.length==0)return e;let l=[];for(let a=0,c=0,u=0,f=0;;a++){let d=a==e.length?null:e[a],h=u-f,m=d?d.fromB:1e9;for(;c<i.length&&i[c]<m;){let p=i[c],y=i[c+1],b=Math.max(f,p),x=Math.min(m,y);if(b<=x&&new $n(b+h,x+h,b,x).addToSet(l),y>m)break;c+=2}if(!d)return l;new $n(d.fromA,d.toA,d.fromB,d.toB).addToSet(l),u=d.toA,f=d.toB}}}class Ja{constructor(e,i,l){this.view=e,this.state=i,this.transactions=l,this.flags=0,this.startState=e.state,this.changes=Kt.empty(this.startState.doc.length);for(let c of l)this.changes=this.changes.compose(c.changes);let a=[];this.changes.iterChangedRanges((c,u,f,d)=>a.push(new $n(c,u,f,d))),this.changedRanges=a}static create(e,i,l){return new Ja(e,i,l)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class ev extends vt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Re.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Wt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new $n(0,0,0,e.state.doc.length)],0,null)}update(e){var i;let l=e.changedRanges;this.minWidth>0&&l.length&&(l.every(({fromA:h,toA:m})=>m<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let a=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?a=this.domChanged.newSel.head:!UM(e.changes,this.hasComposition)&&!e.selectionSet&&(a=e.state.selection.main.head));let c=a>-1?$M(this.view,e.changes,a):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:m}=this.hasComposition;l=new $n(h,m,e.changes.mapPos(h,-1),e.changes.mapPos(m,1)).addToSet(l.slice())}this.hasComposition=c?{from:c.range.fromB,to:c.range.toB}:null,(ke.ie||ke.chrome)&&!c&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let u=this.decorations,f=this.updateDeco(),d=VM(u,f,e.changes);return l=$n.extendWithRanges(l,d),!(this.flags&7)&&l.length==0?!1:(this.updateInner(l,e.startState.doc.length,c),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,i,l){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,i,l);let{observer:a}=this.view;a.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=ke.chrome||ke.ios?{node:a.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,u),this.flags&=-8,u&&(u.written||a.selectionRange.focusNode!=u.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(u=>u.flags&=-9);let c=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.children)u instanceof ai&&u.widget instanceof vd&&c.push(u.dom);a.updateGaps(c)}updateChildren(e,i,l){let a=l?l.range.addToSet(e.slice()):e,c=this.childCursor(i);for(let u=a.length-1;;u--){let f=u>=0?a[u]:null;if(!f)break;let{fromA:d,toA:h,fromB:m,toB:p}=f,y,b,x,A;if(l&&l.range.fromB<p&&l.range.toB>m){let z=al.build(this.view.state.doc,m,l.range.fromB,this.decorations,this.dynamicDecorationMap),U=al.build(this.view.state.doc,l.range.toB,p,this.decorations,this.dynamicDecorationMap);b=z.breakAtStart,x=z.openStart,A=U.openEnd;let X=this.compositionView(l);U.breakAtStart?X.breakAfter=1:U.content.length&&X.merge(X.length,X.length,U.content[0],!1,U.openStart,0)&&(X.breakAfter=U.content[0].breakAfter,U.content.shift()),z.content.length&&X.merge(0,0,z.content[z.content.length-1],!0,0,z.openEnd)&&z.content.pop(),y=z.content.concat(X).concat(U.content)}else({content:y,breakAtStart:b,openStart:x,openEnd:A}=al.build(this.view.state.doc,m,p,this.decorations,this.dynamicDecorationMap));let{i:E,off:w}=c.findPos(h,1),{i:k,off:L}=c.findPos(d,-1);xy(this,k,L,E,w,y,b,x,A)}l&&this.fixCompositionDOM(l)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let i of e.transactions)for(let l of i.effects)l.is(Jy)&&(this.editContextFormatting=l.value)}compositionView(e){let i=new ar(e.text.nodeValue);i.flags|=8;for(let{deco:a}of e.marks)i=new li(a,[i],i.length);let l=new Wt;return l.append(i,0),l}fixCompositionDOM(e){let i=(c,u)=>{u.flags|=8|(u.children.some(d=>d.flags&7)?1:0),this.markedForComposition.add(u);let f=vt.get(c);f&&f!=u&&(f.dom=null),u.setDOM(c)},l=this.childPos(e.range.fromB,1),a=this.children[l.i];i(e.line,a);for(let c=e.marks.length-1;c>=-1;c--)l=a.childPos(l.off,1),a=a.children[l.i],i(c>=0?e.marks[c].node:e.text,a)}updateSelection(e=!1,i=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let l=this.view.root.activeElement,a=l==this.dom,c=!a&&Va(this.dom,this.view.observer.selectionRange)&&!(l&&this.dom.contains(l));if(!(a||i||c))return;let u=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,d=this.moveToLine(this.domAtPos(f.anchor)),h=f.empty?d:this.moveToLine(this.domAtPos(f.head));if(ke.gecko&&f.empty&&!this.hasComposition&&BM(d)){let p=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(p,d.node.childNodes[d.offset]||null)),d=h=new sn(p,0),u=!0}let m=this.view.observer.selectionRange;(u||!m.focusNode||(!il(d.node,d.offset,m.anchorNode,m.anchorOffset)||!il(h.node,h.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,f))&&(this.view.observer.ignore(()=>{ke.android&&ke.chrome&&this.dom.contains(m.focusNode)&&zM(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=rl(this.view.root);if(p)if(f.empty){if(ke.gecko){let y=jM(d.node,d.offset);if(y&&y!=3){let b=(y==1?gy:yy)(d.node,d.offset);b&&(d=new sn(b.node,b.offset))}}p.collapse(d.node,d.offset),f.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=f.bidiLevel)}else if(p.extend){p.collapse(d.node,d.offset);try{p.extend(h.node,h.offset)}catch{}}else{let y=document.createRange();f.anchor>f.head&&([d,h]=[h,d]),y.setEnd(h.node,h.offset),y.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(y)}c&&this.view.root.activeElement==this.dom&&(this.dom.blur(),l&&l.focus())}),this.view.observer.setSelectionRange(d,h)),this.impreciseAnchor=d.precise?null:new sn(m.anchorNode,m.anchorOffset),this.impreciseHead=h.precise?null:new sn(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,i){return this.hasComposition&&i.empty&&il(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==i.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,i=e.state.selection.main,l=rl(e.root),{anchorNode:a,anchorOffset:c}=e.observer.selectionRange;if(!l||!i.empty||!i.assoc||!l.modify)return;let u=Wt.find(this,i.head);if(!u)return;let f=u.posAtStart;if(i.head==f||i.head==f+u.length)return;let d=this.coordsAt(i.head,-1),h=this.coordsAt(i.head,1);if(!d||!h||d.bottom>h.top)return;let m=this.domAtPos(i.head+i.assoc);l.collapse(m.node,m.offset),l.modify("move",i.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=i.from&&l.collapse(a,c)}moveToLine(e){let i=this.dom,l;if(e.node!=i)return e;for(let a=e.offset;!l&&a<i.childNodes.length;a++){let c=vt.get(i.childNodes[a]);c instanceof Wt&&(l=c.domAtPos(0))}for(let a=e.offset-1;!l&&a>=0;a--){let c=vt.get(i.childNodes[a]);c instanceof Wt&&(l=c.domAtPos(c.length))}return l?new sn(l.node,l.offset,!0):e}nearest(e){for(let i=e;i;){let l=vt.get(i);if(l&&l.rootView==this)return l;i=i.parentNode}return null}posFromDOM(e,i){let l=this.nearest(e);if(!l)throw new RangeError("Trying to find position for a DOM position outside of the document");return l.localPosFromDOM(e,i)+l.posAtStart}domAtPos(e){let{i,off:l}=this.childCursor().findPos(e,-1);for(;i<this.children.length-1;){let a=this.children[i];if(l<a.length||a instanceof Wt)break;i++,l=0}return this.children[i].domAtPos(l)}coordsAt(e,i){let l=null,a=0;for(let c=this.length,u=this.children.length-1;u>=0;u--){let f=this.children[u],d=c-f.breakAfter,h=d-f.length;if(d<e)break;if(h<=e&&(h<e||f.covers(-1))&&(d>e||f.covers(1))&&(!l||f instanceof Wt&&!(l instanceof Wt&&i>=0)))l=f,a=h;else if(l&&h==e&&d==e&&f instanceof ai&&Math.abs(i)<2){if(f.deco.startSide<0)break;u&&(l=null)}c=h}return l?l.coordsAt(e-a,i):null}coordsForChar(e){let{i,off:l}=this.childPos(e,1),a=this.children[i];if(!(a instanceof Wt))return null;for(;a.children.length;){let{i:f,off:d}=a.childPos(l,1);for(;;f++){if(f==a.children.length)return null;if((a=a.children[f]).length)break}l=d}if(!(a instanceof ar))return null;let c=qt(a.text,l);if(c==l)return null;let u=is(a.dom,l,c).getClientRects();for(let f=0;f<u.length;f++){let d=u[f];if(f==u.length-1||d.top<d.bottom&&d.left<d.right)return d}return null}measureVisibleLineHeights(e){let i=[],{from:l,to:a}=e,c=this.view.contentDOM.clientWidth,u=c>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,f=-1,d=this.view.textDirection==bt.LTR;for(let h=0,m=0;m<this.children.length;m++){let p=this.children[m],y=h+p.length;if(y>a)break;if(h>=l){let b=p.dom.getBoundingClientRect();if(i.push(b.height),u){let x=p.dom.lastChild,A=x?Ns(x):[];if(A.length){let E=A[A.length-1],w=d?E.right-b.left:b.right-E.left;w>f&&(f=w,this.minWidth=c,this.minWidthFrom=h,this.minWidthTo=y)}}}h=y+p.breakAfter}return i}textDirectionAt(e){let{i}=this.childPos(e,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?bt.RTL:bt.LTR}measureTextSize(){for(let c of this.children)if(c instanceof Wt){let u=c.measureTextSize();if(u)return u}let e=document.createElement("div"),i,l,a;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let c=Ns(e.firstChild)[0];i=e.getBoundingClientRect().height,l=c?c.width/27:7,a=c?c.height:i,e.remove()}),{lineHeight:i,charWidth:l,textHeight:a}}childCursor(e=this.length){let i=this.children.length;return i&&(e-=this.children[--i].length),new by(this.children,e,i)}computeBlockGapDeco(){let e=[],i=this.view.viewState;for(let l=0,a=0;;a++){let c=a==i.viewports.length?null:i.viewports[a],u=c?c.from-1:this.length;if(u>l){let f=(i.lineBlockAt(u).bottom-i.lineBlockAt(l).top)/this.view.scaleY;e.push(Re.replace({widget:new vd(f),block:!0,inclusive:!0,isBlockGap:!0}).range(l,u))}if(!c)break;l=c.to+1}return Re.set(e)}updateDeco(){let e=1,i=this.view.state.facet(ul).map(c=>(this.dynamicDecorationMap[e++]=typeof c=="function")?c(this.view):c),l=!1,a=this.view.state.facet(Zy).map((c,u)=>{let f=typeof c=="function";return f&&(l=!0),f?c(this.view):c});for(a.length&&(this.dynamicDecorationMap[e++]=l,i.push(it.join(a))),this.decorations=[this.editContextFormatting,...i,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Yy))try{if(h(this.view,e.range,e))return!0}catch(m){Tn(this.view.state,m,"scroll handler")}let{range:i}=e,l=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),a;if(!l)return;!i.empty&&(a=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(l={left:Math.min(l.left,a.left),top:Math.min(l.top,a.top),right:Math.max(l.right,a.right),bottom:Math.max(l.bottom,a.bottom)});let c=Pd(this.view),u={left:l.left-c.left,top:l.top-c.top,right:l.right+c.right,bottom:l.bottom+c.bottom},{offsetWidth:f,offsetHeight:d}=this.view.scrollDOM;bM(this.view.scrollDOM,u,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,f),-f),Math.max(Math.min(e.yMargin,d),-d),this.view.textDirection==bt.LTR)}}function BM(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function tv(s,e){let i=s.observer.selectionRange;if(!i.focusNode)return null;let l=gy(i.focusNode,i.focusOffset),a=yy(i.focusNode,i.focusOffset),c=l||a;if(a&&l&&a.node!=l.node){let f=vt.get(a.node);if(!f||f instanceof ar&&f.text!=a.node.nodeValue)c=a;else if(s.docView.lastCompositionAfterCursor){let d=vt.get(l.node);!d||d instanceof ar&&d.text!=l.node.nodeValue||(c=a)}}if(s.docView.lastCompositionAfterCursor=c!=l,!c)return null;let u=e-c.offset;return{from:u,to:u+c.node.nodeValue.length,node:c.node}}function $M(s,e,i){let l=tv(s,i);if(!l)return null;let{node:a,from:c,to:u}=l,f=a.nodeValue;if(/[\n\r]/.test(f)||s.state.doc.sliceString(l.from,l.to)!=f)return null;let d=e.invertedDesc,h=new $n(d.mapPos(c),d.mapPos(u),c,u),m=[];for(let p=a.parentNode;;p=p.parentNode){let y=vt.get(p);if(y instanceof li)m.push({node:p,deco:y.mark});else{if(y instanceof Wt||p.nodeName=="DIV"&&p.parentNode==s.contentDOM)return{range:h,text:a,marks:m,line:p};if(p!=s.contentDOM)m.push({node:p,deco:new ol({inclusive:!0,attributes:kM(p),tagName:p.tagName.toLowerCase()})});else return null}}}function jM(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let WM=class{constructor(){this.changes=[]}compareRange(e,i){yd(e,i,this.changes)}comparePoint(e,i){yd(e,i,this.changes)}};function VM(s,e,i){let l=new WM;return it.compare(s,e,i,l),l.changes}function zM(s,e){for(let i=s;i&&i!=e;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function UM(s,e){let i=!1;return e&&s.iterChangedRanges((l,a)=>{l<e.to&&a>e.from&&(i=!0)}),i}function HM(s,e,i=1){let l=s.charCategorizer(e),a=s.doc.lineAt(e),c=e-a.from;if(a.length==0)return de.cursor(e);c==0?i=1:c==a.length&&(i=-1);let u=c,f=c;i<0?u=qt(a.text,c,!1):f=qt(a.text,c);let d=l(a.text.slice(u,f));for(;u>0;){let h=qt(a.text,u,!1);if(l(a.text.slice(h,u))!=d)break;u=h}for(;f<a.length;){let h=qt(a.text,f);if(l(a.text.slice(f,h))!=d)break;f=h}return de.range(u+a.from,f+a.from)}function KM(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function GM(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function Td(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function nv(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function rv(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function Dd(s,e,i){let l,a,c,u,f=!1,d,h,m,p;for(let x=s.firstChild;x;x=x.nextSibling){let A=Ns(x);for(let E=0;E<A.length;E++){let w=A[E];a&&Td(a,w)&&(w=nv(rv(w,a.bottom),a.top));let k=KM(e,w),L=GM(i,w);if(k==0&&L==0)return x.nodeType==3?iv(x,e,i):Dd(x,e,i);if(!l||u>L||u==L&&c>k){l=x,a=w,c=k,u=L;let z=L?i<w.top?-1:1:k?e<w.left?-1:1:0;f=!z||(z>0?E<A.length-1:E>0)}k==0?i>w.bottom&&(!m||m.bottom<w.bottom)?(d=x,m=w):i<w.top&&(!p||p.top>w.top)&&(h=x,p=w):m&&Td(m,w)?m=rv(m,w.bottom):p&&Td(p,w)&&(p=nv(p,w.top))}}if(m&&m.bottom>=i?(l=d,a=m):p&&p.top<=i&&(l=h,a=p),!l)return{node:s,offset:0};let y=Math.max(a.left,Math.min(a.right,e));if(l.nodeType==3)return iv(l,y,i);if(f&&l.contentEditable!="false")return Dd(l,y,i);let b=Array.prototype.indexOf.call(s.childNodes,l)+(e>=(a.left+a.right)/2?1:0);return{node:s,offset:b}}function iv(s,e,i){let l=s.nodeValue.length,a=-1,c=1e9,u=0;for(let f=0;f<l;f++){let d=is(s,f,f+1).getClientRects();for(let h=0;h<d.length;h++){let m=d[h];if(m.top==m.bottom)continue;u||(u=e-m.left);let p=(m.top>i?m.top-i:i-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&p<c){let y=e>=(m.left+m.right)/2,b=y;if((ke.chrome||ke.gecko)&&is(s,f).getBoundingClientRect().left==m.right&&(b=!y),p<=0)return{node:s,offset:f+(b?1:0)};a=f+(b?1:0),c=p}}}return{node:s,offset:a>-1?a:u>0?s.nodeValue.length:0}}function sv(s,e,i,l=-1){var a,c;let u=s.contentDOM.getBoundingClientRect(),f=u.top+s.viewState.paddingTop,d,{docHeight:h}=s.viewState,{x:m,y:p}=e,y=p-f;if(y<0)return 0;if(y>h)return s.state.doc.length;for(let z=s.viewState.heightOracle.textHeight/2,U=!1;d=s.elementAtHeight(y),d.type!=vn.Text;)for(;y=l>0?d.bottom+z:d.top-z,!(y>=0&&y<=h);){if(U)return i?null:0;U=!0,l=-l}p=f+y;let b=d.from;if(b<s.viewport.from)return s.viewport.from==0?0:i?null:ov(s,u,d,m,p);if(b>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:i?null:ov(s,u,d,m,p);let x=s.dom.ownerDocument,A=s.root.elementFromPoint?s.root:x,E=A.elementFromPoint(m,p);E&&!s.contentDOM.contains(E)&&(E=null),E||(m=Math.max(u.left+1,Math.min(u.right-1,m)),E=A.elementFromPoint(m,p),E&&!s.contentDOM.contains(E)&&(E=null));let w,k=-1;if(E&&((a=s.docView.nearest(E))===null||a===void 0?void 0:a.isEditable)!=!1){if(x.caretPositionFromPoint){let z=x.caretPositionFromPoint(m,p);z&&({offsetNode:w,offset:k}=z)}else if(x.caretRangeFromPoint){let z=x.caretRangeFromPoint(m,p);z&&({startContainer:w,startOffset:k}=z,(!s.contentDOM.contains(w)||ke.safari&&YM(w,k,m)||ke.chrome&&JM(w,k,m))&&(w=void 0))}w&&(k=Math.min(Pr(w),k))}if(!w||!s.docView.dom.contains(w)){let z=Wt.find(s.docView,b);if(!z)return y>d.top+d.height/2?d.to:d.from;({node:w,offset:k}=Dd(z.dom,m,p))}let L=s.docView.nearest(w);if(!L)return null;if(L.isWidget&&((c=L.dom)===null||c===void 0?void 0:c.nodeType)==1){let z=L.dom.getBoundingClientRect();return e.y<z.top||e.y<=z.bottom&&e.x<=(z.left+z.right)/2?L.posAtStart:L.posAtEnd}else return L.localPosFromDOM(w,k)+L.posAtStart}function ov(s,e,i,l,a){let c=Math.round((l-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&i.height>s.defaultLineHeight*1.5){let f=s.viewState.heightOracle.textHeight,d=Math.floor((a-i.top-(s.defaultLineHeight-f)*.5)/f);c+=d*s.viewState.heightOracle.lineLength}let u=s.state.sliceDoc(i.from,i.to);return i.from+sd(u,c,s.state.tabSize)}function YM(s,e,i){let l;if(s.nodeType!=3||e!=(l=s.nodeValue.length))return!1;for(let a=s.nextSibling;a;a=a.nextSibling)if(a.nodeType!=1||a.nodeName!="BR")return!1;return is(s,l-1,l).getBoundingClientRect().left>i}function JM(s,e,i){if(e!=0)return!1;for(let a=s;;){let c=a.parentNode;if(!c||c.nodeType!=1||c.firstChild!=a)return!1;if(c.classList.contains("cm-line"))break;a=c}let l=s.nodeType==1?s.getBoundingClientRect():is(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return i-l.left>5}function Md(s,e){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){for(let l of i.type)if(l.to>e||l.to==e&&(l.to==i.to||l.type==vn.Text))return l}return i}function XM(s,e,i,l){let a=Md(s,e.head),c=!l||a.type!=vn.Text||!(s.lineWrapping||a.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>a.from?e.head-1:e.head);if(c){let u=s.dom.getBoundingClientRect(),f=s.textDirectionAt(a.from),d=s.posAtCoords({x:i==(f==bt.LTR)?u.right-1:u.left+1,y:(c.top+c.bottom)/2});if(d!=null)return de.cursor(d,i?-1:1)}return de.cursor(i?a.to:a.from,i?-1:1)}function lv(s,e,i,l){let a=s.state.doc.lineAt(e.head),c=s.bidiSpans(a),u=s.textDirectionAt(a.from);for(let f=e,d=null;;){let h=$y(a,c,u,f,i),m=By;if(!h){if(a.number==(i?s.state.doc.lines:1))return f;m=`
`,a=s.state.doc.line(a.number+(i?1:-1)),c=s.bidiSpans(a),h=s.visualLineSide(a,!i)}if(d){if(!d(m))return f}else{if(!l)return h;d=l(m)}f=h}}function ZM(s,e,i){let l=s.state.charCategorizer(e),a=l(i);return c=>{let u=l(c);return a==Pt.Space&&(a=u),a==u}}function QM(s,e,i,l){let a=e.head,c=i?1:-1;if(a==(i?s.state.doc.length:0))return de.cursor(a,e.assoc);let u=e.goalColumn,f,d=s.contentDOM.getBoundingClientRect(),h=s.coordsAtPos(a,e.assoc||-1),m=s.documentTop;if(h)u==null&&(u=h.left-d.left),f=c<0?h.top:h.bottom;else{let b=s.viewState.lineBlockAt(a);u==null&&(u=Math.min(d.right-d.left,s.defaultCharacterWidth*(a-b.from))),f=(c<0?b.top:b.bottom)+m}let p=d.left+u,y=l??s.viewState.heightOracle.textHeight>>1;for(let b=0;;b+=10){let x=f+(y+b)*c,A=sv(s,{x:p,y:x},!1,c);if(x<d.top||x>d.bottom||(c<0?A<a:A>a)){let E=s.docView.coordsForChar(A),w=!E||x<E.top?-1:1;return de.cursor(A,w,void 0,u)}}}function Xa(s,e,i){for(;;){let l=0;for(let a of s)a.between(e-1,e+1,(c,u,f)=>{if(e>c&&e<u){let d=l||i||(e-c<u-e?-1:1);e=d<0?c:u,l=d}});if(!l)return e}}function Id(s,e,i){let l=Xa(s.state.facet(kd).map(a=>a(s)),i.from,e.head>i.from?-1:1);return l==i.from?i:de.cursor(l,l<i.from?1:-1)}const dl="\uFFFF";class qM{constructor(e,i){this.points=e,this.text="",this.lineSeparator=i.facet(rt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=dl}readRange(e,i){if(!e)return this;let l=e.parentNode;for(let a=e;;){this.findPointBefore(l,a);let c=this.text.length;this.readNode(a);let u=a.nextSibling;if(u==i)break;let f=vt.get(a),d=vt.get(u);(f&&d?f.breakAfter:(f?f.breakAfter:za(a))||za(u)&&(a.nodeName!="BR"||a.cmIgnore)&&this.text.length>c)&&this.lineBreak(),a=u}return this.findPointBefore(l,i),this}readTextNode(e){let i=e.nodeValue;for(let l of this.points)l.node==e&&(l.pos=this.text.length+Math.min(l.offset,i.length));for(let l=0,a=this.lineSeparator?null:/\r\n?|\n/g;;){let c=-1,u=1,f;if(this.lineSeparator?(c=i.indexOf(this.lineSeparator,l),u=this.lineSeparator.length):(f=a.exec(i))&&(c=f.index,u=f[0].length),this.append(i.slice(l,c<0?i.length:c)),c<0)break;if(this.lineBreak(),u>1)for(let d of this.points)d.node==e&&d.pos>this.text.length&&(d.pos-=u-1);l=c+u}}readNode(e){if(e.cmIgnore)return;let i=vt.get(e),l=i&&i.overrideDOMText;if(l!=null){this.findPointInside(e,l.length);for(let a=l.iter();!a.next().done;)a.lineBreak?this.lineBreak():this.append(a.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,i){for(let l of this.points)l.node==e&&e.childNodes[l.offset]==i&&(l.pos=this.text.length)}findPointInside(e,i){for(let l of this.points)(e.nodeType==3?l.node==e:e.contains(l.node))&&(l.pos=this.text.length+(_M(e,l.node,l.offset)?i:0))}}function _M(s,e,i){for(;;){if(!e||i<Pr(e))return!1;if(e==s)return!0;i=rs(e)+1,e=e.parentNode}}class av{constructor(e,i){this.node=e,this.offset=i,this.pos=-1}}class eI{constructor(e,i,l,a){this.typeOver=a,this.bounds=null,this.text="",this.domChanged=i>-1;let{impreciseHead:c,impreciseAnchor:u}=e.docView;if(e.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=e.docView.domBoundsAround(i,l,0))){let f=c||u?[]:rI(e),d=new qM(f,e.state);d.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=d.text,this.newSel=iI(f,this.bounds.from)}else{let f=e.observer.selectionRange,d=c&&c.node==f.focusNode&&c.offset==f.focusOffset||!cd(e.contentDOM,f.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(f.focusNode,f.focusOffset),h=u&&u.node==f.anchorNode&&u.offset==f.anchorOffset||!cd(e.contentDOM,f.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(f.anchorNode,f.anchorOffset),m=e.viewport;if((ke.ios||ke.chrome)&&e.state.selection.main.empty&&d!=h&&(m.from>0||m.to<e.state.doc.length)){let p=Math.min(d,h),y=Math.max(d,h),b=m.from-p,x=m.to-y;(b==0||b==1||p==0)&&(x==0||x==-1||y==e.state.doc.length)&&(d=0,h=e.state.doc.length)}this.newSel=de.single(h,d)}}}function cv(s,e){let i,{newSel:l}=e,a=s.state.selection.main,c=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:u,to:f}=e.bounds,d=a.from,h=null;(c===8||ke.android&&e.text.length<f-u)&&(d=a.to,h="end");let m=nI(s.state.doc.sliceString(u,f,dl),e.text,d-u,h);m&&(ke.chrome&&c==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==dl+dl&&m.toB--,i={from:u+m.from,to:u+m.toA,insert:ut.of(e.text.slice(m.from,m.toB).split(dl))})}else l&&(!s.hasFocus&&s.state.facet(Fi)||l.main.eq(a))&&(l=null);if(!i&&!l)return!1;if(!i&&e.typeOver&&!a.empty&&l&&l.main.empty?i={from:a.from,to:a.to,insert:s.state.doc.slice(a.from,a.to)}:i&&i.from>=a.from&&i.to<=a.to&&(i.from!=a.from||i.to!=a.to)&&a.to-a.from-(i.to-i.from)<=4?i={from:a.from,to:a.to,insert:s.state.doc.slice(a.from,i.from).append(i.insert).append(s.state.doc.slice(i.to,a.to))}:(ke.mac||ke.android)&&i&&i.from==i.to&&i.from==a.head-1&&/^\. ?$/.test(i.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(l&&i.insert.length==2&&(l=de.single(l.main.anchor-1,l.main.head-1)),i={from:a.from,to:a.to,insert:ut.of([" "])}):ke.chrome&&i&&i.from==i.to&&i.from==a.head&&i.insert.toString()==`
 `&&s.lineWrapping&&(l&&(l=de.single(l.main.anchor-1,l.main.head-1)),i={from:a.from,to:a.to,insert:ut.of([" "])}),i)return Rd(s,i,l,c);if(l&&!l.main.eq(a)){let u=!1,f="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(u=!0),f=s.inputState.lastSelectionOrigin),s.dispatch({selection:l,scrollIntoView:u,userEvent:f}),!0}else return!1}function Rd(s,e,i,l=-1){if(ke.ios&&s.inputState.flushIOSKey(e))return!0;let a=s.state.selection.main;if(ke.android&&(e.to==a.to&&(e.from==a.from||e.from==a.from-1&&s.state.sliceDoc(e.from,a.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&$s(s.contentDOM,"Enter",13)||(e.from==a.from-1&&e.to==a.to&&e.insert.length==0||l==8&&e.insert.length<e.to-e.from&&e.to>a.head)&&$s(s.contentDOM,"Backspace",8)||e.from==a.from&&e.to==a.to+1&&e.insert.length==0&&$s(s.contentDOM,"Delete",46)))return!0;let c=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let u,f=()=>u||(u=tI(s,e,i));return s.state.facet(Uy).some(d=>d(s,e.from,e.to,c,f))||s.dispatch(f()),!0}function tI(s,e,i){let l,a=s.state,c=a.selection.main;if(e.from>=c.from&&e.to<=c.to&&e.to-e.from>=(c.to-c.from)/3&&(!i||i.main.empty&&i.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let f=c.from<e.from?a.sliceDoc(c.from,e.from):"",d=c.to>e.to?a.sliceDoc(e.to,c.to):"";l=a.replaceSelection(s.state.toText(f+e.insert.sliceString(0,void 0,s.state.lineBreak)+d))}else{let f=a.changes(e),d=i&&i.main.to<=f.newLength?i.main:void 0;if(a.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=c.to&&e.to>=c.to-10){let h=s.state.sliceDoc(e.from,e.to),m,p=i&&tv(s,i.main.head);if(p){let x=e.insert.length-(e.to-e.from);m={from:p.from,to:p.to-x}}else m=s.state.doc.lineAt(c.head);let y=c.to-e.to,b=c.to-c.from;l=a.changeByRange(x=>{if(x.from==c.from&&x.to==c.to)return{changes:f,range:d||x.map(f)};let A=x.to-y,E=A-h.length;if(x.to-x.from!=b||s.state.sliceDoc(E,A)!=h||x.to>=m.from&&x.from<=m.to)return{range:x};let w=a.changes({from:E,to:A,insert:e.insert}),k=x.to-c.to;return{changes:w,range:d?de.range(Math.max(0,d.anchor+k),Math.max(0,d.head+k)):x.map(w)}})}else l={changes:f,selection:d&&a.selection.replaceRange(d)}}let u="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,u+=".compose",s.inputState.compositionFirstChange&&(u+=".start",s.inputState.compositionFirstChange=!1)),a.update(l,{userEvent:u,scrollIntoView:!0})}function nI(s,e,i,l){let a=Math.min(s.length,e.length),c=0;for(;c<a&&s.charCodeAt(c)==e.charCodeAt(c);)c++;if(c==a&&s.length==e.length)return null;let u=s.length,f=e.length;for(;u>0&&f>0&&s.charCodeAt(u-1)==e.charCodeAt(f-1);)u--,f--;if(l=="end"){let d=Math.max(0,c-Math.min(u,f));i-=u+d-c}if(u<c&&s.length<e.length){let d=i<=c&&i>=u?c-i:0;c-=d,f=c+(f-u),u=c}else if(f<c){let d=i<=c&&i>=f?c-i:0;c-=d,u=c+(u-f),f=c}return{from:c,toA:u,toB:f}}function rI(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:i,anchorOffset:l,focusNode:a,focusOffset:c}=s.observer.selectionRange;return i&&(e.push(new av(i,l)),(a!=i||c!=l)&&e.push(new av(a,c))),e}function iI(s,e){if(s.length==0)return null;let i=s[0].pos,l=s.length==2?s[1].pos:i;return i>-1&&l>-1?de.single(i+e,l+e):null}class sI{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ke.safari&&e.contentDOM.addEventListener("input",()=>null),ke.gecko&&SI(e.contentDOM.ownerDocument)}handleEvent(e){!hI(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,i){let l=this.handlers[e];if(l){for(let a of l.observers)a(this.view,i);for(let a of l.handlers){if(i.defaultPrevented)break;if(a(this.view,i)){i.preventDefault();break}}}}ensureHandlers(e){let i=oI(e),l=this.handlers,a=this.view.contentDOM;for(let c in i)if(c!="scroll"){let u=!i[c].handlers.length,f=l[c];f&&u!=!f.handlers.length&&(a.removeEventListener(c,this.handleEvent),f=null),f||a.addEventListener(c,this.handleEvent,{passive:u})}for(let c in l)c!="scroll"&&!i[c]&&a.removeEventListener(c,this.handleEvent);this.handlers=i}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&dv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ke.android&&ke.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let i;return ke.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((i=fv.find(l=>l.keyCode==e.keyCode))&&!e.ctrlKey||lI.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=i||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let i=this.pendingIOSKey;return!i||i.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,$s(this.view.contentDOM,i.key,i.keyCode,i instanceof KeyboardEvent?i:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ke.safari&&!ke.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function uv(s,e){return(i,l)=>{try{return e.call(s,l,i)}catch(a){Tn(i.state,a)}}}function oI(s){let e=Object.create(null);function i(l){return e[l]||(e[l]={observers:[],handlers:[]})}for(let l of s){let a=l.spec;if(a&&a.domEventHandlers)for(let c in a.domEventHandlers){let u=a.domEventHandlers[c];u&&i(c).handlers.push(uv(l.value,u))}if(a&&a.domEventObservers)for(let c in a.domEventObservers){let u=a.domEventObservers[c];u&&i(c).observers.push(uv(l.value,u))}}for(let l in cr)i(l).handlers.push(cr[l]);for(let l in Yn)i(l).observers.push(Yn[l]);return e}const fv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],lI="dthko",dv=[16,17,18,20,91,92,224,225],Za=6;function Qa(s){return Math.max(0,s)*.7+8}function aI(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class cI{constructor(e,i,l,a){this.view=e,this.startEvent=i,this.style=l,this.mustSelect=a,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParents=xM(e.contentDOM),this.atoms=e.state.facet(kd).map(u=>u(e));let c=e.contentDOM.ownerDocument;c.addEventListener("mousemove",this.move=this.move.bind(this)),c.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=e.state.facet(rt.allowMultipleSelections)&&uI(e,i),this.dragging=dI(e,i)&&Sv(i)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&aI(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,l=0,a=0,c=0,u=this.view.win.innerWidth,f=this.view.win.innerHeight;this.scrollParents.x&&({left:a,right:u}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:c,bottom:f}=this.scrollParents.y.getBoundingClientRect());let d=Pd(this.view);e.clientX-d.left<=a+Za?i=-Qa(a-e.clientX):e.clientX+d.right>=u-Za&&(i=Qa(e.clientX-u)),e.clientY-d.top<=c+Za?l=-Qa(c-e.clientY):e.clientY+d.bottom>=f-Za&&(l=Qa(e.clientY-f)),this.setScrollSpeed(i,l)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,i){this.scrollSpeed={x:e,y:i},e||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:i}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),i&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=i,i=0),(e||i)&&this.view.win.scrollBy(e,i),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let i=null;for(let l=0;l<e.ranges.length;l++){let a=e.ranges[l],c=null;if(a.empty){let u=Xa(this.atoms,a.from,0);u!=a.from&&(c=de.cursor(u,-1))}else{let u=Xa(this.atoms,a.from,-1),f=Xa(this.atoms,a.to,1);(u!=a.from||f!=a.to)&&(c=de.range(a.from==a.anchor?u:f,a.from==a.head?u:f))}c&&(i||(i=e.ranges.slice()),i[l]=c)}return i?de.create(i,e.mainIndex):e}select(e){let{view:i}=this,l=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!l.eq(i.state.selection,this.dragging===!1))&&this.view.dispatch({selection:l,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(i=>i.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function uI(s,e){let i=s.state.facet(jy);return i.length?i[0](e):ke.mac?e.metaKey:e.ctrlKey}function fI(s,e){let i=s.state.facet(Wy);return i.length?i[0](e):ke.mac?!e.altKey:!e.ctrlKey}function dI(s,e){let{main:i}=s.state.selection;if(i.empty)return!1;let l=rl(s.root);if(!l||l.rangeCount==0)return!0;let a=l.getRangeAt(0).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.left<=e.clientX&&u.right>=e.clientX&&u.top<=e.clientY&&u.bottom>=e.clientY)return!0}return!1}function hI(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target,l;i!=s.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(l=vt.get(i))&&l.ignoreEvent(e))return!1;return!0}const cr=Object.create(null),Yn=Object.create(null),hv=ke.ie&&ke.ie_version<15||ke.ios&&ke.webkit_version<604;function mI(s){let e=s.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{s.focus(),i.remove(),mv(s,i.value)},50)}function qa(s,e,i){for(let l of s.facet(e))i=l(i,s);return i}function mv(s,e){e=qa(s.state,wd,e);let{state:i}=s,l,a=1,c=i.toText(e),u=c.lines==i.selection.ranges.length;if(Ld!=null&&i.selection.ranges.every(d=>d.empty)&&Ld==c.toString()){let d=-1;l=i.changeByRange(h=>{let m=i.doc.lineAt(h.from);if(m.from==d)return{range:h};d=m.from;let p=i.toText((u?c.line(a++).text:e)+i.lineBreak);return{changes:{from:m.from,insert:p},range:de.cursor(h.from+p.length)}})}else u?l=i.changeByRange(d=>{let h=c.line(a++);return{changes:{from:d.from,to:d.to,insert:h.text},range:de.cursor(d.from+h.length)}}):l=i.replaceSelection(c);s.dispatch(l,{userEvent:"input.paste",scrollIntoView:!0})}Yn.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft},cr.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1),Yn.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")},Yn.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")},cr.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let l of s.state.facet(Vy))if(i=l(s,e),i)break;if(!i&&e.button==0&&(i=yI(s,e)),i){let l=!s.hasFocus;s.inputState.startMouseSelection(new cI(s,e,i,l)),l&&s.observer.ignore(()=>{dy(s.contentDOM);let c=s.root.activeElement;c&&!c.contains(s.contentDOM)&&c.blur()});let a=s.inputState.mouseSelection;if(a)return a.start(e),a.dragging===!1}return!1};function pv(s,e,i,l){if(l==1)return de.cursor(e,i);if(l==2)return HM(s.state,e,i);{let a=Wt.find(s.docView,e),c=s.state.doc.lineAt(a?a.posAtEnd:e),u=a?a.posAtStart:c.from,f=a?a.posAtEnd:c.to;return f<s.state.doc.length&&f==c.to&&f++,de.range(u,f)}}let gv=(s,e,i)=>e>=i.top&&e<=i.bottom&&s>=i.left&&s<=i.right;function pI(s,e,i,l){let a=Wt.find(s.docView,e);if(!a)return 1;let c=e-a.posAtStart;if(c==0)return 1;if(c==a.length)return-1;let u=a.coordsAt(c,-1);if(u&&gv(i,l,u))return-1;let f=a.coordsAt(c,1);return f&&gv(i,l,f)?1:u&&u.bottom>=l?-1:1}function yv(s,e){let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:pI(s,i,e.clientX,e.clientY)}}const gI=ke.ie&&ke.ie_version<=11;let vv=null,bv=0,xv=0;function Sv(s){if(!gI)return s.detail;let e=vv,i=xv;return vv=s,xv=Date.now(),bv=!e||i>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(bv+1)%3:1}function yI(s,e){let i=yv(s,e),l=Sv(e),a=s.state.selection;return{update(c){c.docChanged&&(i.pos=c.changes.mapPos(i.pos),a=a.map(c.changes))},get(c,u,f){let d=yv(s,c),h,m=pv(s,d.pos,d.bias,l);if(i.pos!=d.pos&&!u){let p=pv(s,i.pos,i.bias,l),y=Math.min(p.from,m.from),b=Math.max(p.to,m.to);m=y<m.from?de.range(y,b):de.range(b,y)}return u?a.replaceRange(a.main.extend(m.from,m.to)):f&&l==1&&a.ranges.length>1&&(h=vI(a,d.pos))?h:f?a.addRange(m):de.create([m])}}}function vI(s,e){for(let i=0;i<s.ranges.length;i++){let{from:l,to:a}=s.ranges[i];if(l<=e&&a>=e)return de.create(s.ranges.slice(0,i).concat(s.ranges.slice(i+1)),s.mainIndex==i?0:s.mainIndex-(s.mainIndex>i?1:0))}return null}cr.dragstart=(s,e)=>{let{selection:{main:i}}=s.state;if(e.target.draggable){let a=s.docView.nearest(e.target);if(a&&a.isWidget){let c=a.posAtStart,u=c+a.length;(c>=i.to||u<=i.from)&&(i=de.range(c,u))}}let{inputState:l}=s;return l.mouseSelection&&(l.mouseSelection.dragging=!0),l.draggedContent=i,e.dataTransfer&&(e.dataTransfer.setData("Text",qa(s.state,Cd,s.state.sliceDoc(i.from,i.to))),e.dataTransfer.effectAllowed="copyMove"),!1},cr.dragend=s=>(s.inputState.draggedContent=null,!1);function Ev(s,e,i,l){if(i=qa(s.state,wd,i),!i)return;let a=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:c}=s.inputState,u=l&&c&&fI(s,e)?{from:c.from,to:c.to}:null,f={from:a,insert:i},d=s.state.changes(u?[u,f]:f);s.focus(),s.dispatch({changes:d,selection:{anchor:d.mapPos(a,-1),head:d.mapPos(a,1)},userEvent:u?"move.drop":"input.drop"}),s.inputState.draggedContent=null}cr.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let i=e.dataTransfer.files;if(i&&i.length){let l=Array(i.length),a=0,c=()=>{++a==i.length&&Ev(s,e,l.filter(u=>u!=null).join(s.state.lineBreak),!1)};for(let u=0;u<i.length;u++){let f=new FileReader;f.onerror=c,f.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(f.result)||(l[u]=f.result),c()},f.readAsText(i[u])}return!0}else{let l=e.dataTransfer.getData("Text");if(l)return Ev(s,e,l,!0),!0}return!1},cr.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let i=hv?null:e.clipboardData;return i?(mv(s,i.getData("text/plain")||i.getData("text/uri-list")),!0):(mI(s),!1)};function bI(s,e){let i=s.dom.parentNode;if(!i)return;let l=i.appendChild(document.createElement("textarea"));l.style.cssText="position: fixed; left: -10000px; top: 10px",l.value=e,l.focus(),l.selectionEnd=e.length,l.selectionStart=0,setTimeout(()=>{l.remove(),s.focus()},50)}function xI(s){let e=[],i=[],l=!1;for(let a of s.selection.ranges)a.empty||(e.push(s.sliceDoc(a.from,a.to)),i.push(a));if(!e.length){let a=-1;for(let{from:c}of s.selection.ranges){let u=s.doc.lineAt(c);u.number>a&&(e.push(u.text),i.push({from:u.from,to:Math.min(s.doc.length,u.to+1)})),a=u.number}l=!0}return{text:qa(s,Cd,e.join(s.lineBreak)),ranges:i,linewise:l}}let Ld=null;cr.copy=cr.cut=(s,e)=>{let{text:i,ranges:l,linewise:a}=xI(s.state);if(!i&&!a)return!1;Ld=a?i:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:l,scrollIntoView:!0,userEvent:"delete.cut"});let c=hv?null:e.clipboardData;return c?(c.clearData(),c.setData("text/plain",i),!0):(bI(s,i),!1)};const Av=Or.define();function wv(s,e){let i=[];for(let l of s.facet(Hy)){let a=l(s,e);a&&i.push(a)}return i?s.update({effects:i,annotations:Av.of(!0)}):null}function Cv(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let i=wv(s.state,e);i?s.dispatch(i):s.update([])}},10)}Yn.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),Cv(s)},Yn.blur=s=>{s.observer.clearSelectionRange(),Cv(s)},Yn.compositionstart=Yn.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))},Yn.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,ke.chrome&&ke.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))},Yn.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()},cr.beforeinput=(s,e)=>{var i,l;if(e.inputType=="insertReplacementText"&&s.observer.editContext){let c=(i=e.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain"),u=e.getTargetRanges();if(c&&u.length){let f=u[0],d=s.posAtDOM(f.startContainer,f.startOffset),h=s.posAtDOM(f.endContainer,f.endOffset);return Rd(s,{from:d,to:h,insert:s.state.toText(c)},null),!0}}let a;if(ke.chrome&&ke.android&&(a=fv.find(c=>c.inputType==e.inputType))&&(s.observer.delayAndroidKey(a.key,a.keyCode),a.key=="Backspace"||a.key=="Delete")){let c=((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0;setTimeout(()=>{var u;(((u=window.visualViewport)===null||u===void 0?void 0:u.height)||0)>c+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return ke.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),ke.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>Yn.compositionend(s,e),20),!1};const Ov=new Set;function SI(s){Ov.has(s)||(Ov.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const kv=["pre-wrap","normal","pre-line","break-spaces"];let os=!1;function Fd(){os=!1}class Pv{constructor(e){this.lineWrapping=e,this.doc=ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,i){let l=this.doc.lineAt(i).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(l+=Math.max(0,Math.ceil((i-e-l*this.lineLength*.5)/this.lineLength))),this.lineHeight*l}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return kv.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let i=!1;for(let l=0;l<e.length;l++){let a=e[l];a<0?l++:this.heightSamples[Math.floor(a*10)]||(i=!0,this.heightSamples[Math.floor(a*10)]=!0)}return i}refresh(e,i,l,a,c,u){let f=kv.indexOf(e)>-1,d=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=f;if(this.lineWrapping=f,this.lineHeight=i,this.charWidth=l,this.textHeight=a,this.lineLength=c,d){this.heightSamples={};for(let h=0;h<u.length;h++){let m=u[h];m<0?h++:this.heightSamples[Math.floor(m*10)]=!0}}return d}}class Tv{constructor(e,i){this.from=e,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class Mr{constructor(e,i,l,a,c){this.from=e,this.length=i,this.top=l,this.height=a,this._content=c}get type(){return typeof this._content=="number"?vn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ri?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Mr(this.from,this.length+e.length,this.top,this.height+e.height,i)}}var At=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(At||(At={}));const _a=.001;class on{constructor(e,i,l=2){this.length=e,this.height=i,this.flags=l}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>_a&&(os=!0),this.height=e)}replace(e,i,l){return on.of(l)}decomposeLeft(e,i){i.push(this)}decomposeRight(e,i){i.push(this)}applyChanges(e,i,l,a){let c=this,u=l.doc;for(let f=a.length-1;f>=0;f--){let{fromA:d,toA:h,fromB:m,toB:p}=a[f],y=c.lineAt(d,At.ByPosNoHeight,l.setDoc(i),0,0),b=y.to>=h?y:c.lineAt(h,At.ByPosNoHeight,l,0,0);for(p+=b.to-h,h=b.to;f>0&&y.from<=a[f-1].toA;)d=a[f-1].fromA,m=a[f-1].fromB,f--,d<y.from&&(y=c.lineAt(d,At.ByPosNoHeight,l,0,0));m+=y.from-d,d=y.from;let x=Nd.build(l.setDoc(u),e,m,p);c=ec(c,c.replace(d,h,x))}return c.updateHeight(l,0)}static empty(){return new jn(0,0)}static of(e){if(e.length==1)return e[0];let i=0,l=e.length,a=0,c=0;for(;;)if(i==l)if(a>c*2){let f=e[i-1];f.break?e.splice(--i,1,f.left,null,f.right):e.splice(--i,1,f.left,f.right),l+=1+f.break,a-=f.size}else if(c>a*2){let f=e[l];f.break?e.splice(l,1,f.left,null,f.right):e.splice(l,1,f.left,f.right),l+=2+f.break,c-=f.size}else break;else if(a<c){let f=e[i++];f&&(a+=f.size)}else{let f=e[--l];f&&(c+=f.size)}let u=0;return e[i-1]==null?(u=1,i--):e[i]==null&&(u=1,l++),new EI(on.of(e.slice(0,i)),u,on.of(e.slice(l)))}}function ec(s,e){return s==e?s:(s.constructor!=e.constructor&&(os=!0),e)}on.prototype.size=1;class Dv extends on{constructor(e,i,l){super(e,i),this.deco=l}blockAt(e,i,l,a){return new Mr(a,this.length,l,this.height,this.deco||0)}lineAt(e,i,l,a,c){return this.blockAt(0,l,a,c)}forEachLine(e,i,l,a,c,u){e<=c+this.length&&i>=c&&u(this.blockAt(0,l,a,c))}updateHeight(e,i=0,l=!1,a){return a&&a.from<=i&&a.more&&this.setHeight(a.heights[a.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class jn extends Dv{constructor(e,i){super(e,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,i,l,a){return new Mr(a,this.length,l,this.height,this.breaks)}replace(e,i,l){let a=l[0];return l.length==1&&(a instanceof jn||a instanceof tn&&a.flags&4)&&Math.abs(this.length-a.length)<10?(a instanceof tn?a=new jn(a.length,this.height):a.height=this.height,this.outdated||(a.outdated=!1),a):on.of(l)}updateHeight(e,i=0,l=!1,a){return a&&a.from<=i&&a.more?this.setHeight(a.heights[a.index++]):(l||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class tn extends on{constructor(e){super(e,0)}heightMetrics(e,i){let l=e.doc.lineAt(i).number,a=e.doc.lineAt(i+this.length).number,c=a-l+1,u,f=0;if(e.lineWrapping){let d=Math.min(this.height,e.lineHeight*c);u=d/c,this.length>c+1&&(f=(this.height-d)/(this.length-c-1))}else u=this.height/c;return{firstLine:l,lastLine:a,perLine:u,perChar:f}}blockAt(e,i,l,a){let{firstLine:c,lastLine:u,perLine:f,perChar:d}=this.heightMetrics(i,a);if(i.lineWrapping){let h=a+(e<i.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-l)/this.height))*this.length)),m=i.doc.lineAt(h),p=f+m.length*d,y=Math.max(l,e-p/2);return new Mr(m.from,m.length,y,p,0)}else{let h=Math.max(0,Math.min(u-c,Math.floor((e-l)/f))),{from:m,length:p}=i.doc.line(c+h);return new Mr(m,p,l+f*h,f,0)}}lineAt(e,i,l,a,c){if(i==At.ByHeight)return this.blockAt(e,l,a,c);if(i==At.ByPosNoHeight){let{from:b,to:x}=l.doc.lineAt(e);return new Mr(b,x-b,0,0,0)}let{firstLine:u,perLine:f,perChar:d}=this.heightMetrics(l,c),h=l.doc.lineAt(e),m=f+h.length*d,p=h.number-u,y=a+f*p+d*(h.from-c-p);return new Mr(h.from,h.length,Math.max(a,Math.min(y,a+this.height-m)),m,0)}forEachLine(e,i,l,a,c,u){e=Math.max(e,c),i=Math.min(i,c+this.length);let{firstLine:f,perLine:d,perChar:h}=this.heightMetrics(l,c);for(let m=e,p=a;m<=i;){let y=l.doc.lineAt(m);if(m==e){let x=y.number-f;p+=d*x+h*(e-c-x)}let b=d+h*y.length;u(new Mr(y.from,y.length,p,b,0)),p+=b,m=y.to+1}}replace(e,i,l){let a=this.length-i;if(a>0){let c=l[l.length-1];c instanceof tn?l[l.length-1]=new tn(c.length+a):l.push(null,new tn(a-1))}if(e>0){let c=l[0];c instanceof tn?l[0]=new tn(e+c.length):l.unshift(new tn(e-1),null)}return on.of(l)}decomposeLeft(e,i){i.push(new tn(e-1),null)}decomposeRight(e,i){i.push(null,new tn(this.length-e-1))}updateHeight(e,i=0,l=!1,a){let c=i+this.length;if(a&&a.from<=i+this.length&&a.more){let u=[],f=Math.max(i,a.from),d=-1;for(a.from>i&&u.push(new tn(a.from-i-1).updateHeight(e,i));f<=c&&a.more;){let m=e.doc.lineAt(f).length;u.length&&u.push(null);let p=a.heights[a.index++];d==-1?d=p:Math.abs(p-d)>=_a&&(d=-2);let y=new jn(m,p);y.outdated=!1,u.push(y),f+=m+1}f<=c&&u.push(null,new tn(c-f).updateHeight(e,f));let h=on.of(u);return(d<0||Math.abs(h.height-this.height)>=_a||Math.abs(d-this.heightMetrics(e,i).perLine)>=_a)&&(os=!0),ec(this,h)}else(l||this.outdated)&&(this.setHeight(e.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class EI extends on{constructor(e,i,l){super(e.length+i+l.length,e.height+l.height,i|(e.outdated||l.outdated?2:0)),this.left=e,this.right=l,this.size=e.size+l.size}get break(){return this.flags&1}blockAt(e,i,l,a){let c=l+this.left.height;return e<c?this.left.blockAt(e,i,l,a):this.right.blockAt(e,i,c,a+this.left.length+this.break)}lineAt(e,i,l,a,c){let u=a+this.left.height,f=c+this.left.length+this.break,d=i==At.ByHeight?e<u:e<f,h=d?this.left.lineAt(e,i,l,a,c):this.right.lineAt(e,i,l,u,f);if(this.break||(d?h.to<f:h.from>f))return h;let m=i==At.ByPosNoHeight?At.ByPosNoHeight:At.ByPos;return d?h.join(this.right.lineAt(f,m,l,u,f)):this.left.lineAt(f,m,l,a,c).join(h)}forEachLine(e,i,l,a,c,u){let f=a+this.left.height,d=c+this.left.length+this.break;if(this.break)e<d&&this.left.forEachLine(e,i,l,a,c,u),i>=d&&this.right.forEachLine(e,i,l,f,d,u);else{let h=this.lineAt(d,At.ByPos,l,a,c);e<h.from&&this.left.forEachLine(e,h.from-1,l,a,c,u),h.to>=e&&h.from<=i&&u(h),i>h.to&&this.right.forEachLine(h.to+1,i,l,f,d,u)}}replace(e,i,l){let a=this.left.length+this.break;if(i<a)return this.balanced(this.left.replace(e,i,l),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-a,i-a,l));let c=[];e>0&&this.decomposeLeft(e,c);let u=c.length;for(let f of l)c.push(f);if(e>0&&Mv(c,u-1),i<this.length){let f=c.length;this.decomposeRight(i,c),Mv(c,f)}return on.of(c)}decomposeLeft(e,i){let l=this.left.length;if(e<=l)return this.left.decomposeLeft(e,i);i.push(this.left),this.break&&(l++,e>=l&&i.push(null)),e>l&&this.right.decomposeLeft(e-l,i)}decomposeRight(e,i){let l=this.left.length,a=l+this.break;if(e>=a)return this.right.decomposeRight(e-a,i);e<l&&this.left.decomposeRight(e,i),this.break&&e<a&&i.push(null),i.push(this.right)}balanced(e,i){return e.size>2*i.size||i.size>2*e.size?on.of(this.break?[e,null,i]:[e,i]):(this.left=ec(this.left,e),this.right=ec(this.right,i),this.setHeight(e.height+i.height),this.outdated=e.outdated||i.outdated,this.size=e.size+i.size,this.length=e.length+this.break+i.length,this)}updateHeight(e,i=0,l=!1,a){let{left:c,right:u}=this,f=i+c.length+this.break,d=null;return a&&a.from<=i+c.length&&a.more?d=c=c.updateHeight(e,i,l,a):c.updateHeight(e,i,l),a&&a.from<=f+u.length&&a.more?d=u=u.updateHeight(e,f,l,a):u.updateHeight(e,f,l),d?this.balanced(c,u):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Mv(s,e){let i,l;s[e]==null&&(i=s[e-1])instanceof tn&&(l=s[e+1])instanceof tn&&s.splice(e-1,3,new tn(i.length+1+l.length))}const AI=5;class Nd{constructor(e,i){this.pos=e,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,i){if(this.lineStart>-1){let l=Math.min(i,this.lineEnd),a=this.nodes[this.nodes.length-1];a instanceof jn?a.length+=l-this.pos:(l>this.pos||!this.isCovered)&&this.nodes.push(new jn(l-this.pos,-1)),this.writtenTo=l,i>l&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(e,i,l){if(e<i||l.heightRelevant){let a=l.widget?l.widget.estimatedHeight:0,c=l.widget?l.widget.lineBreaks:0;a<0&&(a=this.oracle.lineHeight);let u=i-e;l.block?this.addBlock(new Dv(u,a,l)):(u||c||a>=AI)&&this.addLineDeco(a,c,u)}else i>e&&this.span(e,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=i,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new jn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,i){let l=new tn(i-e);return this.oracle.doc.lineAt(e).to==i&&(l.flags|=4),l}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof jn)return e;let i=new jn(0,-1);return this.nodes.push(i),i}addBlock(e){this.enterLine();let i=e.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i&&i.endSide>0&&(this.covering=e)}addLineDeco(e,i,l){let a=this.ensureLine();a.length+=l,a.collapsed+=l,a.widgetHeight=Math.max(a.widgetHeight,e),a.breaks+=i,this.writtenTo=this.pos=this.pos+l}finish(e){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof jn)&&!this.isCovered?this.nodes.push(new jn(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let l=e;for(let a of this.nodes)a instanceof jn&&a.updateHeight(this.oracle,l),l+=a?a.length:1;return this.nodes}static build(e,i,l,a){let c=new Nd(l,e);return it.spans(i,l,a,c,0),c.finish(l)}}function wI(s,e,i){let l=new CI;return it.compare(s,e,i,l,0),l.changes}class CI{constructor(){this.changes=[]}compareRange(){}comparePoint(e,i,l,a){(e<i||l&&l.heightRelevant||a&&a.heightRelevant)&&yd(e,i,this.changes,5)}}function OI(s,e){let i=s.getBoundingClientRect(),l=s.ownerDocument,a=l.defaultView||window,c=Math.max(0,i.left),u=Math.min(a.innerWidth,i.right),f=Math.max(0,i.top),d=Math.min(a.innerHeight,i.bottom);for(let h=s.parentNode;h&&h!=l.body;)if(h.nodeType==1){let m=h,p=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&p.overflow!="visible"){let y=m.getBoundingClientRect();c=Math.max(c,y.left),u=Math.min(u,y.right),f=Math.max(f,y.top),d=Math.min(h==s.parentNode?a.innerHeight:d,y.bottom)}h=p.position=="absolute"||p.position=="fixed"?m.offsetParent:m.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:c-i.left,right:Math.max(c,u)-i.left,top:f-(i.top+e),bottom:Math.max(f,d)-(i.top+e)}}function kI(s,e){let i=s.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class Bd{constructor(e,i,l,a){this.from=e,this.to=i,this.size=l,this.displaySize=a}static same(e,i){if(e.length!=i.length)return!1;for(let l=0;l<e.length;l++){let a=e[l],c=i[l];if(a.from!=c.from||a.to!=c.to||a.size!=c.size)return!1}return!0}draw(e,i){return Re.replace({widget:new PI(this.displaySize*(i?e.scaleY:e.scaleX),i)}).range(this.from,this.to)}}class PI extends Tr{constructor(e,i){super(),this.size=e,this.vertical=i}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Iv{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Rv,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=bt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=e.facet(Ya).some(l=>typeof l!="function"&&l.class=="cm-lineWrapping");this.heightOracle=new Pv(i),this.stateDeco=e.facet(ul).filter(l=>typeof l!="function"),this.heightMap=on.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle.setDoc(e.doc),[new $n(0,0,0,e.doc.length)]);for(let l=0;l<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());l++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Re.set(this.lineGaps.map(l=>l.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:i}=this.state.selection;for(let l=0;l<=1;l++){let a=l?i.head:i.anchor;if(!e.some(({from:c,to:u})=>a>=c&&a<=u)){let{from:c,to:u}=this.lineBlockAt(a);e.push(new tc(c,u))}}return this.viewports=e.sort((l,a)=>l.from-a.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Rv:new $d(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(hl(e,this.scaler))})}update(e,i=null){this.state=e.state;let l=this.stateDeco;this.stateDeco=this.state.facet(ul).filter(m=>typeof m!="function");let a=e.changedRanges,c=$n.extendWithRanges(a,wI(l,this.stateDeco,e?e.changes:Kt.empty(this.state.doc.length))),u=this.heightMap.height,f=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Fd(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),c),(this.heightMap.height!=u||os)&&(e.flags|=2),f?(this.scrollAnchorPos=e.changes.mapPos(f.from,-1),this.scrollAnchorHeight=f.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let d=c.length?this.mapViewport(this.viewport,e.changes):this.viewport;(i&&(i.range.head<d.from||i.range.head>d.to)||!this.viewportIsAppropriate(d))&&(d=this.getViewport(0,i));let h=d.from!=this.viewport.from||d.to!=this.viewport.to;this.viewport=d,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Gy)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let i=e.contentDOM,l=window.getComputedStyle(i),a=this.heightOracle,c=l.whiteSpace;this.defaultTextDirection=l.direction=="rtl"?bt.RTL:bt.LTR;let u=this.heightOracle.mustRefreshForWrapping(c),f=i.getBoundingClientRect(),d=u||this.mustMeasureContent||this.contentDOMHeight!=f.height;this.contentDOMHeight=f.height,this.mustMeasureContent=!1;let h=0,m=0;if(f.width&&f.height){let{scaleX:z,scaleY:U}=fy(i,f);(z>.005&&Math.abs(this.scaleX-z)>.005||U>.005&&Math.abs(this.scaleY-U)>.005)&&(this.scaleX=z,this.scaleY=U,h|=8,u=d=!0)}let p=(parseInt(l.paddingTop)||0)*this.scaleY,y=(parseInt(l.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=y)&&(this.paddingTop=p,this.paddingBottom=y,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(a.lineWrapping&&(d=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let b=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=b&&(this.scrollAnchorHeight=-1,this.scrollTop=b),this.scrolledToBottom=py(e.scrollDOM);let x=(this.printing?kI:OI)(i,this.paddingTop),A=x.top-this.pixelViewport.top,E=x.bottom-this.pixelViewport.bottom;this.pixelViewport=x;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(d=!0)),!this.inView&&!this.scrollTarget)return 0;let k=f.width;if((this.contentDOMWidth!=k||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=f.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),d){let z=e.docView.measureVisibleLineHeights(this.viewport);if(a.mustRefreshForHeights(z)&&(u=!0),u||a.lineWrapping&&Math.abs(k-this.contentDOMWidth)>a.charWidth){let{lineHeight:U,charWidth:X,textHeight:ee}=e.docView.measureTextSize();u=U>0&&a.refresh(c,U,X,ee,k/X,z),u&&(e.docView.minWidth=0,h|=8)}A>0&&E>0?m=Math.max(A,E):A<0&&E<0&&(m=Math.min(A,E)),Fd();for(let U of this.viewports){let X=U.from==this.viewport.from?z:e.docView.measureVisibleLineHeights(U);this.heightMap=(u?on.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle,[new $n(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(a,0,u,new Tv(U.from,X))}os&&(h|=2)}let L=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return L&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),h|=this.updateForViewport()),(h&2||L)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(u?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,i){let l=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),a=this.heightMap,c=this.heightOracle,{visibleTop:u,visibleBottom:f}=this,d=new tc(a.lineAt(u-l*1e3,At.ByHeight,c,0,0).from,a.lineAt(f+(1-l)*1e3,At.ByHeight,c,0,0).to);if(i){let{head:h}=i.range;if(h<d.from||h>d.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=a.lineAt(h,At.ByPos,c,0,0),y;i.y=="center"?y=(p.top+p.bottom)/2-m/2:i.y=="start"||i.y=="nearest"&&h<d.from?y=p.top:y=p.bottom-m,d=new tc(a.lineAt(y-1e3/2,At.ByHeight,c,0,0).from,a.lineAt(y+m+1e3/2,At.ByHeight,c,0,0).to)}}return d}mapViewport(e,i){let l=i.mapPos(e.from,-1),a=i.mapPos(e.to,1);return new tc(this.heightMap.lineAt(l,At.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(a,At.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:i},l=0){if(!this.inView)return!0;let{top:a}=this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),{bottom:c}=this.heightMap.lineAt(i,At.ByPos,this.heightOracle,0,0),{visibleTop:u,visibleBottom:f}=this;return(e==0||a<=u-Math.max(10,Math.min(-l,250)))&&(i==this.state.doc.length||c>=f+Math.max(10,Math.min(l,250)))&&a>u-2*1e3&&c<f+2*1e3}mapLineGaps(e,i){if(!e.length||i.empty)return e;let l=[];for(let a of e)i.touchesRange(a.from,a.to)||l.push(new Bd(i.mapPos(a.from),i.mapPos(a.to),a.size,a.displaySize));return l}ensureLineGaps(e,i){let l=this.heightOracle.lineWrapping,a=l?1e4:2e3,c=a>>1,u=a<<1;if(this.defaultTextDirection!=bt.LTR&&!l)return[];let f=[],d=(m,p,y,b)=>{if(p-m<c)return;let x=this.state.selection.main,A=[x.from];x.empty||A.push(x.to);for(let w of A)if(w>m&&w<p){d(m,w-10,y,b),d(w+10,p,y,b);return}let E=DI(e,w=>w.from>=y.from&&w.to<=y.to&&Math.abs(w.from-m)<c&&Math.abs(w.to-p)<c&&!A.some(k=>w.from<k&&w.to>k));if(!E){if(p<y.to&&i&&l&&i.visibleRanges.some(L=>L.from<=p&&L.to>=p)){let L=i.moveToLineBoundary(de.cursor(p),!1,!0).head;L>m&&(p=L)}let w=this.gapSize(y,m,p,b),k=l||w<2e6?w:2e6;E=new Bd(m,p,w,k)}f.push(E)},h=m=>{if(m.length<u||m.type!=vn.Text)return;let p=TI(m.from,m.to,this.stateDeco);if(p.total<u)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,b,x;if(l){let A=a/this.heightOracle.lineLength*this.heightOracle.lineHeight,E,w;if(y!=null){let k=rc(p,y),L=((this.visibleBottom-this.visibleTop)/2+A)/m.height;E=k-L,w=k+L}else E=(this.visibleTop-m.top-A)/m.height,w=(this.visibleBottom-m.top+A)/m.height;b=nc(p,E),x=nc(p,w)}else{let A=p.total*this.heightOracle.charWidth,E=a*this.heightOracle.charWidth,w=0;if(A>2e6)for(let X of e)X.from>=m.from&&X.from<m.to&&X.size!=X.displaySize&&X.from*this.heightOracle.charWidth+w<this.pixelViewport.left&&(w=X.size-X.displaySize);let k=this.pixelViewport.left+w,L=this.pixelViewport.right+w,z,U;if(y!=null){let X=rc(p,y),ee=((L-k)/2+E)/A;z=X-ee,U=X+ee}else z=(k-E)/A,U=(L+E)/A;b=nc(p,z),x=nc(p,U)}b>m.from&&d(m.from,b,m,p),x<m.to&&d(x,m.to,m,p)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(h):h(m);return f}gapSize(e,i,l,a){let c=rc(a,l)-rc(a,i);return this.heightOracle.lineWrapping?e.height*c:a.total*this.heightOracle.charWidth*c}updateLineGaps(e){Bd.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Re.set(e.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];it.spans(e,this.viewport.from,this.viewport.to,{span(a,c){i.push({from:a,to:c})},point(){}},20);let l=i.length!=this.visibleRanges.length||this.visibleRanges.some((a,c)=>a.from!=i[c].from||a.to!=i[c].to);return this.visibleRanges=i,l?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(i=>i.from<=e&&i.to>=e)||hl(this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(i=>i.top<=e&&i.bottom>=e)||hl(this.heightMap.lineAt(this.scaler.fromDOM(e),At.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let i=this.lineBlockAtHeight(e+8);return i.from>=this.viewport.from||this.viewportLines[0].top-e>200?i:this.viewportLines[0]}elementAtHeight(e){return hl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class tc{constructor(e,i){this.from=e,this.to=i}}function TI(s,e,i){let l=[],a=s,c=0;return it.spans(i,s,e,{span(){},point(u,f){u>a&&(l.push({from:a,to:u}),c+=u-a),a=f}},20),a<e&&(l.push({from:a,to:e}),c+=e-a),{total:c,ranges:l}}function nc({total:s,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let l=Math.floor(s*i);for(let a=0;;a++){let{from:c,to:u}=e[a],f=u-c;if(l<=f)return c+l;l-=f}}function rc(s,e){let i=0;for(let{from:l,to:a}of s.ranges){if(e<=a){i+=e-l;break}i+=a-l}return i/s.total}function DI(s,e){for(let i of s)if(e(i))return i}const Rv={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class $d{constructor(e,i,l){let a=0,c=0,u=0;this.viewports=l.map(({from:f,to:d})=>{let h=i.lineAt(f,At.ByPos,e,0,0).top,m=i.lineAt(d,At.ByPos,e,0,0).bottom;return a+=m-h,{from:f,to:d,top:h,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-a)/(i.height-a);for(let f of this.viewports)f.domTop=u+(f.top-c)*this.scale,u=f.domBottom=f.domTop+(f.bottom-f.top),c=f.bottom}toDOM(e){for(let i=0,l=0,a=0;;i++){let c=i<this.viewports.length?this.viewports[i]:null;if(!c||e<c.top)return a+(e-l)*this.scale;if(e<=c.bottom)return c.domTop+(e-c.top);l=c.bottom,a=c.domBottom}}fromDOM(e){for(let i=0,l=0,a=0;;i++){let c=i<this.viewports.length?this.viewports[i]:null;if(!c||e<c.domTop)return l+(e-a)/this.scale;if(e<=c.domBottom)return c.top+(e-c.domTop);l=c.bottom,a=c.domBottom}}eq(e){return e instanceof $d?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((i,l)=>i.from==e.viewports[l].from&&i.to==e.viewports[l].to):!1}}function hl(s,e){if(e.scale==1)return s;let i=e.toDOM(s.top),l=e.toDOM(s.bottom);return new Mr(s.from,s.length,i,l-i,Array.isArray(s._content)?s._content.map(a=>hl(a,e)):s._content)}const ic=Oe.define({combine:s=>s.join(" ")}),jd=Oe.define({combine:s=>s.indexOf(!0)>-1}),Wd=Di.newName(),Lv=Di.newName(),Fv=Di.newName(),Nv={"&light":"."+Lv,"&dark":"."+Fv};function Vd(s,e,i){return new Di(e,{finish(l){return/&/.test(l)?l.replace(/&\w*/,a=>{if(a=="&")return s;if(!i||!i[a])throw new RangeError(`Unsupported selector: ${a}`);return i[a]}):s+" "+l}})}const MI=Vd("."+Wd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Nv),II={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},zd=ke.ie&&ke.ie_version<=11;class RI{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new SM,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let l of i)this.queue.push(l);(ke.ie&&ke.ie_version<=11||ke.ios&&e.composing)&&i.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(ke.chrome&&ke.chrome_version<126)&&(this.editContext=new FI(e),e.state.facet(Fi)&&(e.contentDOM.editContext=this.editContext.editContext)),zd&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((i,l)=>i!=e[l]))){this.gapIntersection.disconnect();for(let i of e)this.gapIntersection.observe(i);this.gaps=e}}onSelectionChange(e){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:l}=this,a=this.selectionRange;if(l.state.facet(Fi)?l.root.activeElement!=this.dom:!Va(this.dom,a))return;let c=a.anchorNode&&l.docView.nearest(a.anchorNode);if(c&&c.ignoreEvent(e)){i||(this.selectionChanged=!1);return}(ke.ie&&ke.ie_version<=11||ke.android&&ke.chrome)&&!l.state.selection.main.empty&&a.focusNode&&il(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,i=rl(e.root);if(!i)return!1;let l=ke.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&LI(this.view,i)||i;if(!l||this.selectionRange.eq(l))return!1;let a=Va(this.dom,l);return a&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&AM(this.dom,l)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(l),a&&(this.selectionChanged=!0),!0)}setSelectionRange(e,i){this.selectionRange.set(e.node,e.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,i=null;for(let l=this.dom;l;)if(l.nodeType==1)!i&&e<this.scrollTargets.length&&this.scrollTargets[e]==l?e++:i||(i=this.scrollTargets.slice(0,e)),i&&i.push(l),l=l.assignedSlot||l.parentNode;else if(l.nodeType==11)l=l.host;else break;if(e<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,e)),i){for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);for(let l of this.scrollTargets=i)l.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,II),zd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),zd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,i){var l;if(!this.delayedAndroidKey){let a=()=>{let c=this.delayedAndroidKey;c&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=c.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&c.force&&$s(this.dom,c.key,c.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(a)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((l=this.delayedAndroidKey)===null||l===void 0)&&l.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let i=-1,l=-1,a=!1;for(let c of e){let u=this.readMutation(c);u&&(u.typeOver&&(a=!0),i==-1?{from:i,to:l}=u:(i=Math.min(u.from,i),l=Math.max(u.to,l)))}return{from:i,to:l,typeOver:a}}readChange(){let{from:e,to:i,typeOver:l}=this.processRecords(),a=this.selectionChanged&&Va(this.dom,this.selectionRange);if(e<0&&!a)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let c=new eI(this.view,e,i,l);return this.view.docView.domChanged={newSel:c.newSel?c.newSel.main:null},c}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let l=this.view.state,a=cv(this.view,i);return this.view.state==l&&(i.domChanged||i.newSel&&!i.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),a}readMutation(e){let i=this.view.docView.nearest(e.target);if(!i||i.ignoreMutation(e))return null;if(i.markDirty(e.type=="attributes"),e.type=="attributes"&&(i.flags|=4),e.type=="childList"){let l=Bv(i,e.previousSibling||e.target.previousSibling,-1),a=Bv(i,e.nextSibling||e.target.nextSibling,1);return{from:l?i.posAfter(l):i.posAtStart,to:a?i.posBefore(a):i.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Fi)!=e.state.facet(Fi)&&(e.view.contentDOM.editContext=e.state.facet(Fi)?this.editContext.editContext:null))}destroy(){var e,i,l;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(l=this.resizeScroll)===null||l===void 0||l.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Bv(s,e,i){for(;e;){let l=vt.get(e);if(l&&l.parent==s)return l;let a=e.parentNode;e=a!=s.dom?a:i>0?e.nextSibling:e.previousSibling}return null}function $v(s,e){let i=e.startContainer,l=e.startOffset,a=e.endContainer,c=e.endOffset,u=s.docView.domAtPos(s.state.selection.main.anchor);return il(u.node,u.offset,a,c)&&([i,l,a,c]=[a,c,i,l]),{anchorNode:i,anchorOffset:l,focusNode:a,focusOffset:c}}function LI(s,e){if(e.getComposedRanges){let a=e.getComposedRanges(s.root)[0];if(a)return $v(s,a)}let i=null;function l(a){a.preventDefault(),a.stopImmediatePropagation(),i=a.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",l,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",l,!0),i?$v(s,i):null}class FI{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let i=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=l=>{let{anchor:a}=e.state.selection.main,c=this.toEditorPos(l.updateRangeStart),u=this.toEditorPos(l.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:l.updateRangeStart,editorBase:c,drifted:!1});let f={from:c,to:u,insert:ut.of(l.text.split(`
`))};f.from==this.from&&a<this.from?f.from=a:f.to==this.to&&a>this.to&&(f.to=a),!(f.from==f.to&&!f.insert.length)&&(this.pendingContextChange=f,e.state.readOnly||Rd(e,f,de.single(this.toEditorPos(l.selectionStart),this.toEditorPos(l.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=l=>{let a=[],c=null;for(let u=this.toEditorPos(l.rangeStart),f=this.toEditorPos(l.rangeEnd);u<f;u++){let d=e.coordsForChar(u);c=d&&new DOMRect(d.left,d.top,d.right-d.left,d.bottom-d.top)||c||new DOMRect,a.push(c)}i.updateCharacterBounds(l.rangeStart,a)},this.handlers.textformatupdate=l=>{let a=[];for(let c of l.getTextFormats()){let u=c.underlineStyle,f=c.underlineThickness;if(u!="None"&&f!="None"){let d=`text-decoration: underline ${u=="Dashed"?"dashed ":u=="Squiggle"?"wavy ":""}${f=="Thin"?1:2}px`;a.push(Re.mark({attributes:{style:d}}).range(this.toEditorPos(c.rangeStart),this.toEditorPos(c.rangeEnd)))}}e.dispatch({effects:Jy.of(Re.set(a))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:l}=this.composing;this.composing=null,l&&this.reset(e.state)}};for(let l in this.handlers)i.addEventListener(l,this.handlers[l]);this.measureReq={read:l=>{this.editContext.updateControlBounds(l.contentDOM.getBoundingClientRect());let a=rl(l.root);a&&a.rangeCount&&this.editContext.updateSelectionBounds(a.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let i=0,l=!1,a=this.pendingContextChange;return e.changes.iterChanges((c,u,f,d,h)=>{if(l)return;let m=h.length-(u-c);if(a&&u>=a.to)if(a.from==c&&a.to==u&&a.insert.eq(h)){a=this.pendingContextChange=null,i+=m,this.to+=m;return}else a=null,this.revertPending(e.state);if(c+=i,u+=i,u<=this.from)this.from+=m,this.to+=m;else if(c<this.to){if(c<this.from||u>this.to||this.to-this.from+h.length>3e4){l=!0;return}this.editContext.updateText(this.toContextPos(c),this.toContextPos(u),h.toString()),this.to+=m}i+=m}),a&&!l&&this.revertPending(e.state),!l}update(e){let i=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(l=>!l.isUserEvent("input.type")&&l.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||i)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:i}=e.selection.main;this.from=Math.max(0,i-1e4),this.to=Math.min(e.doc.length,i+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let i=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(i.from),this.toContextPos(i.from+i.insert.length),e.doc.sliceString(i.from,i.to))}setSelection(e){let{main:i}=e.selection,l=this.toContextPos(Math.max(this.from,Math.min(this.to,i.anchor))),a=this.toContextPos(i.head);(this.editContext.selectionStart!=l||this.editContext.selectionEnd!=a)&&this.editContext.updateSelection(l,a)}rangeIsValid(e){let{head:i}=e.selection.main;return!(this.from>0&&i-this.from<500||this.to<e.doc.length&&this.to-i<500||this.to-this.from>1e4*3)}toEditorPos(e){let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let i=this.composing;return i&&i.drifted?i.contextBase+(e-i.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Se{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var i;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:l}=e;this.dispatchTransactions=e.dispatchTransactions||l&&(a=>a.forEach(c=>l(c,this)))||(a=>this.update(a)),this.dispatch=this.dispatch.bind(this),this._root=e.root||EM(e.parent)||document,this.viewState=new Iv(e.state||rt.create(e)),e.scrollTo&&e.scrollTo.is(Ga)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(cl).map(a=>new Od(a));for(let a of this.plugins)a.update(this);this.observer=new RI(this),this.inputState=new sI(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ev(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((i=document.fonts)===null||i===void 0)&&i.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let i=e.length==1&&e[0]instanceof Gt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,l=!1,a,c=this.state;for(let y of e){if(y.startState!=c)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");c=y.state}if(this.destroyed){this.viewState.state=c;return}let u=this.hasFocus,f=0,d=null;e.some(y=>y.annotation(Av))?(this.inputState.notifiedFocused=u,f=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,d=wv(c,u),d||(f=1));let h=this.observer.delayedAndroidKey,m=null;if(h?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(c.doc)||!this.state.selection.eq(c.selection))&&(m=null)):this.observer.clear(),c.facet(rt.phrases)!=this.state.facet(rt.phrases))return this.setState(c);a=Ja.create(this,c,e),a.flags|=f;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(p&&(p=p.map(y.changes)),y.scrollIntoView){let{main:b}=y.state.selection;p=new Vs(b.empty?b:de.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of y.effects)b.is(Ga)&&(p=b.value.clip(this.state))}this.viewState.update(a,p),this.bidiCache=sc.update(this.bidiCache,a.changes),a.empty||(this.updatePlugins(a),this.inputState.update(a)),i=this.docView.update(a),this.state.facet(fl)!=this.styleModules&&this.mountStyles(),l=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(a.startState.facet(ic)!=a.state.facet(ic)&&(this.viewState.mustMeasureContent=!0),(i||l||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!a.empty)for(let y of this.state.facet(Ad))try{y(a)}catch(b){Tn(this.state,b,"update listener")}(d||m)&&Promise.resolve().then(()=>{d&&this.state==d.startState&&this.dispatch(d),m&&!cv(this,m)&&h.force&&$s(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let l of this.plugins)l.destroy(this);this.viewState=new Iv(e),this.plugins=e.facet(cl).map(l=>new Od(l)),this.pluginMap.clear();for(let l of this.plugins)l.update(this);this.docView.destroy(),this.docView=new ev(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(cl),l=e.state.facet(cl);if(i!=l){let a=[];for(let c of l){let u=i.indexOf(c);if(u<0)a.push(new Od(c));else{let f=this.plugins[u];f.mustUpdate=e,a.push(f)}}for(let c of this.plugins)c.mustUpdate!=e&&c.destroy(this);this.plugins=a,this.pluginMap.clear()}else for(let a of this.plugins)a.mustUpdate=e;for(let a=0;a<this.plugins.length;a++)this.plugins[a].update(this);i!=l&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let i=e.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(l){Tn(this.state,l,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,l=this.scrollDOM,a=l.scrollTop*this.scaleY,{scrollAnchorPos:c,scrollAnchorHeight:u}=this.viewState;Math.abs(a-this.viewState.scrollTop)>1&&(u=-1),this.viewState.scrollAnchorHeight=-1;try{for(let f=0;;f++){if(u<0)if(py(l))c=-1,u=this.viewState.heightMap.height;else{let b=this.viewState.scrollAnchorAt(a);c=b.from,u=b.top}this.updateState=1;let d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(f>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];d&4||([this.measureRequests,h]=[h,this.measureRequests]);let m=h.map(b=>{try{return b.read(this)}catch(x){return Tn(this.state,x),jv}}),p=Ja.create(this,this.state,[]),y=!1;p.flags|=d,i?i.flags|=d:i=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),y=this.docView.update(p),y&&this.docViewUpdate());for(let b=0;b<h.length;b++)if(m[b]!=jv)try{let x=h[b];x.write&&x.write(m[b],this)}catch(x){Tn(this.state,x)}if(y&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=-1;continue}else{let x=(c<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(c).top)-u;if(x>1||x<-1){a=a+x,l.scrollTop=a/this.scaleY,u=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let f of this.state.facet(Ad))f(i)}get themeClasses(){return Wd+" "+(this.state.facet(jd)?Fv:Lv)+" "+this.state.facet(ic)}updateAttrs(){let e=Wv(this,Xy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Fi)?"true":"false",class:"cm-content",style:`${ke.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),Wv(this,Ya,i);let l=this.observer.ignore(()=>{let a=gd(this.contentDOM,this.contentAttrs,i),c=gd(this.dom,this.editorAttrs,e);return a||c});return this.editorAttrs=e,this.contentAttrs=i,l}showAnnouncements(e){let i=!0;for(let l of e)for(let a of l.effects)if(a.is(Se.announce)){i&&(this.announceDOM.textContent=""),i=!1;let c=this.announceDOM.appendChild(document.createElement("div"));c.textContent=a.value}}mountStyles(){this.styleModules=this.state.facet(fl);let e=this.state.facet(Se.cspNonce);Di.mount(this.root,this.styleModules.concat(MI).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.spec!=e)&&this.pluginMap.set(e,i=this.plugins.find(l=>l.spec==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,l){return Id(this,e,lv(this,e,i,l))}moveByGroup(e,i){return Id(this,e,lv(this,e,i,l=>ZM(this,e.head,l)))}visualLineSide(e,i){let l=this.bidiSpans(e),a=this.textDirectionAt(e.from),c=l[i?l.length-1:0];return de.cursor(c.side(i,a)+e.from,c.forward(!i,a)?1:-1)}moveToLineBoundary(e,i,l=!0){return XM(this,e,i,l)}moveVertically(e,i,l){return Id(this,e,QM(this,e,i,l))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){return this.readMeasured(),sv(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let l=this.docView.coordsAt(e,i);if(!l||l.left==l.right)return l;let a=this.state.doc.lineAt(e),c=this.bidiSpans(a),u=c[Li.find(c,e-a.from,-1,i)];return sl(l,u.dir==bt.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ky)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>NI)return Ny(e.length);let i=this.textDirectionAt(e.from),l;for(let c of this.bidiCache)if(c.from==e.from&&c.dir==i&&(c.fresh||Ly(c.isolates,l=qy(this,e))))return c.order;l||(l=qy(this,e));let a=Fy(e.text,i,l);return this.bidiCache.push(new sc(e.from,e.to,i,l,!0,a)),a}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ke.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{dy(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return Ga.of(new Vs(typeof e=="number"?de.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:i}=this.scrollDOM,l=this.viewState.scrollAnchorAt(e);return Ga.of(new Vs(de.cursor(l.from),"start","start",l.top-e,i,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return It.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return It.define(()=>({}),{eventObservers:e})}static theme(e,i){let l=Di.newName(),a=[ic.of(l),fl.of(Vd(`.${l}`,e))];return i&&i.dark&&a.push(jd.of(!0)),a}static baseTheme(e){return oi.lowest(fl.of(Vd("."+Wd,e,Nv)))}static findFromDOM(e){var i;let l=e.querySelector(".cm-content"),a=l&&vt.get(l)||vt.get(e);return((i=a?.rootView)===null||i===void 0?void 0:i.view)||null}}Se.styleModule=fl,Se.inputHandler=Uy,Se.clipboardInputFilter=wd,Se.clipboardOutputFilter=Cd,Se.scrollHandler=Yy,Se.focusChangeEffect=Hy,Se.perLineTextDirection=Ky,Se.exceptionSink=zy,Se.updateListener=Ad,Se.editable=Fi,Se.mouseSelectionStyle=Vy,Se.dragMovesSelection=Wy,Se.clickAddsSelectionRange=jy,Se.decorations=ul,Se.outerDecorations=Zy,Se.atomicRanges=kd,Se.bidiIsolatedRanges=Qy,Se.scrollMargins=_y,Se.darkTheme=jd,Se.cspNonce=Oe.define({combine:s=>s.length?s[0]:""}),Se.contentAttributes=Ya,Se.editorAttributes=Xy,Se.lineWrapping=Se.contentAttributes.of({class:"cm-lineWrapping"}),Se.announce=He.define();const NI=4096,jv={};class sc{constructor(e,i,l,a,c,u){this.from=e,this.to=i,this.dir=l,this.isolates=a,this.fresh=c,this.order=u}static update(e,i){if(i.empty&&!e.some(c=>c.fresh))return e;let l=[],a=e.length?e[e.length-1].dir:bt.LTR;for(let c=Math.max(0,e.length-10);c<e.length;c++){let u=e[c];u.dir==a&&!i.touchesRange(u.from,u.to)&&l.push(new sc(i.mapPos(u.from,1),i.mapPos(u.to,-1),u.dir,u.isolates,!1,u.order))}return l}}function Wv(s,e,i){for(let l=s.state.facet(e),a=l.length-1;a>=0;a--){let c=l[a],u=typeof c=="function"?c(s):c;u&&pd(u,i)}return i}const BI=ke.mac?"mac":ke.windows?"win":ke.linux?"linux":"key";function $I(s,e){const i=s.split(/-(?!$)/);let l=i[i.length-1];l=="Space"&&(l=" ");let a,c,u,f;for(let d=0;d<i.length-1;++d){const h=i[d];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))a=!0;else if(/^(c|ctrl|control)$/i.test(h))c=!0;else if(/^s(hift)?$/i.test(h))u=!0;else if(/^mod$/i.test(h))e=="mac"?f=!0:c=!0;else throw new Error("Unrecognized modifier name: "+h)}return a&&(l="Alt-"+l),c&&(l="Ctrl-"+l),f&&(l="Meta-"+l),u&&(l="Shift-"+l),l}function oc(s,e,i){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),i!==!1&&e.shiftKey&&(s="Shift-"+s),s}const jI=oi.default(Se.domEventHandlers({keydown(s,e){return Uv(zv(e.state),s,e,"editor")}})),ml=Oe.define({enables:jI}),Vv=new WeakMap;function zv(s){let e=s.facet(ml),i=Vv.get(e);return i||Vv.set(e,i=zI(e.reduce((l,a)=>l.concat(a),[]))),i}function WI(s,e,i){return Uv(zv(s.state),e,s,i)}let Ni=null;const VI=4e3;function zI(s,e=BI){let i=Object.create(null),l=Object.create(null),a=(u,f)=>{let d=l[u];if(d==null)l[u]=f;else if(d!=f)throw new Error("Key binding "+u+" is used both as a regular binding and as a multi-stroke prefix")},c=(u,f,d,h,m)=>{var p,y;let b=i[u]||(i[u]=Object.create(null)),x=f.split(/ (?!$)/).map(w=>$I(w,e));for(let w=1;w<x.length;w++){let k=x.slice(0,w).join(" ");a(k,!0),b[k]||(b[k]={preventDefault:!0,stopPropagation:!1,run:[L=>{let z=Ni={view:L,prefix:k,scope:u};return setTimeout(()=>{Ni==z&&(Ni=null)},VI),!0}]})}let A=x.join(" ");a(A,!1);let E=b[A]||(b[A]={preventDefault:!1,stopPropagation:!1,run:((y=(p=b._any)===null||p===void 0?void 0:p.run)===null||y===void 0?void 0:y.slice())||[]});d&&E.run.push(d),h&&(E.preventDefault=!0),m&&(E.stopPropagation=!0)};for(let u of s){let f=u.scope?u.scope.split(" "):["editor"];if(u.any)for(let h of f){let m=i[h]||(i[h]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=u;for(let y in m)m[y].run.push(b=>p(b,Ud))}let d=u[e]||u.key;if(d)for(let h of f)c(h,d,u.run,u.preventDefault,u.stopPropagation),u.shift&&c(h,"Shift-"+d,u.shift,u.preventDefault,u.stopPropagation)}return i}let Ud=null;function Uv(s,e,i,l){Ud=e;let a=yM(e),c=_t(a,0),u=Gn(c)==a.length&&a!=" ",f="",d=!1,h=!1,m=!1;Ni&&Ni.view==i&&Ni.scope==l&&(f=Ni.prefix+" ",dv.indexOf(e.keyCode)<0&&(h=!0,Ni=null));let p=new Set,y=E=>{if(E){for(let w of E.run)if(!p.has(w)&&(p.add(w),w(i)))return E.stopPropagation&&(m=!0),!0;E.preventDefault&&(E.stopPropagation&&(m=!0),h=!0)}return!1},b=s[l],x,A;return b&&(y(b[f+oc(a,e,!u)])?d=!0:u&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ke.windows&&e.ctrlKey&&e.altKey)&&(x=Mi[e.keyCode])&&x!=a?(y(b[f+oc(x,e,!0)])||e.shiftKey&&(A=nl[e.keyCode])!=a&&A!=x&&y(b[f+oc(A,e,!1)]))&&(d=!0):u&&e.shiftKey&&y(b[f+oc(a,e,!0)])&&(d=!0),!d&&y(b._any)&&(d=!0)),h&&(d=!0),d&&m&&e.stopPropagation(),Ud=null,d}class pl{constructor(e,i,l,a,c){this.className=e,this.left=i,this.top=l,this.width=a,this.height=c}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,i){return i.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,i,l){if(l.empty){let a=e.coordsAtPos(l.head,l.assoc||1);if(!a)return[];let c=Hv(e);return[new pl(i,a.left-c.left,a.top-c.top,null,a.bottom-a.top)]}else return UI(e,i,l)}}function Hv(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==bt.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function Kv(s,e,i,l){let a=s.coordsAtPos(e,i*2);if(!a)return l;let c=s.dom.getBoundingClientRect(),u=(a.top+a.bottom)/2,f=s.posAtCoords({x:c.left+1,y:u}),d=s.posAtCoords({x:c.right-1,y:u});return f==null||d==null?l:{from:Math.max(l.from,Math.min(f,d)),to:Math.min(l.to,Math.max(f,d))}}function UI(s,e,i){if(i.to<=s.viewport.from||i.from>=s.viewport.to)return[];let l=Math.max(i.from,s.viewport.from),a=Math.min(i.to,s.viewport.to),c=s.textDirection==bt.LTR,u=s.contentDOM,f=u.getBoundingClientRect(),d=Hv(s),h=u.querySelector(".cm-line"),m=h&&window.getComputedStyle(h),p=f.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),y=f.right-(m?parseInt(m.paddingRight):0),b=Md(s,l),x=Md(s,a),A=b.type==vn.Text?b:null,E=x.type==vn.Text?x:null;if(A&&(s.lineWrapping||b.widgetLineBreaks)&&(A=Kv(s,l,1,A)),E&&(s.lineWrapping||x.widgetLineBreaks)&&(E=Kv(s,a,-1,E)),A&&E&&A.from==E.from&&A.to==E.to)return k(L(i.from,i.to,A));{let U=A?L(i.from,null,A):z(b,!1),X=E?L(null,i.to,E):z(x,!0),ee=[];return(A||b).to<(E||x).from-(A&&E?1:0)||b.widgetLineBreaks>1&&U.bottom+s.defaultLineHeight/2<X.top?ee.push(w(p,U.bottom,y,X.top)):U.bottom<X.top&&s.elementAtHeight((U.bottom+X.top)/2).type==vn.Text&&(U.bottom=X.top=(U.bottom+X.top)/2),k(U).concat(ee).concat(k(X))}function w(U,X,ee,oe){return new pl(e,U-d.left,X-d.top-.01,ee-U,oe-X+.01)}function k({top:U,bottom:X,horizontal:ee}){let oe=[];for(let ue=0;ue<ee.length;ue+=2)oe.push(w(ee[ue],U,ee[ue+1],X));return oe}function L(U,X,ee){let oe=1e9,ue=-1e9,fe=[];function ge(be,ye,Te,We,De){let ve=s.coordsAtPos(be,be==ee.to?-2:2),_e=s.coordsAtPos(Te,Te==ee.from?2:-2);!ve||!_e||(oe=Math.min(ve.top,_e.top,oe),ue=Math.max(ve.bottom,_e.bottom,ue),De==bt.LTR?fe.push(c&&ye?p:ve.left,c&&We?y:_e.right):fe.push(!c&&We?p:_e.left,!c&&ye?y:ve.right))}let he=U??ee.from,me=X??ee.to;for(let be of s.visibleRanges)if(be.to>he&&be.from<me)for(let ye=Math.max(be.from,he),Te=Math.min(be.to,me);;){let We=s.state.doc.lineAt(ye);for(let De of s.bidiSpans(We)){let ve=De.from+We.from,_e=De.to+We.from;if(ve>=Te)break;_e>ye&&ge(Math.max(ve,ye),U==null&&ve<=he,Math.min(_e,Te),X==null&&_e>=me,De.dir)}if(ye=We.to+1,ye>=Te)break}return fe.length==0&&ge(he,U==null,me,X==null,s.textDirection),{top:oe,bottom:ue,horizontal:fe}}function z(U,X){let ee=f.top+(X?U.top:U.bottom);return{top:ee,bottom:ee,horizontal:[]}}}function HI(s,e){return s.constructor==e.constructor&&s.eq(e)}class KI{constructor(e,i){this.view=e,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,e)}update(e){e.startState.facet(lc)!=e.state.facet(lc)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let i=0,l=e.facet(lc);for(;i<l.length&&l[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:i}=this.view;(e!=this.scaleX||i!=this.scaleY)&&(this.scaleX=e,this.scaleY=i,this.dom.style.transform=`scale(${1/e}, ${1/i})`)}draw(e){if(e.length!=this.drawn.length||e.some((i,l)=>!HI(i,this.drawn[l]))){let i=this.dom.firstChild,l=0;for(let a of e)a.update&&i&&a.constructor&&this.drawn[l].constructor&&a.update(i,this.drawn[l])?(i=i.nextSibling,l++):this.dom.insertBefore(a.draw(),i);for(;i;){let a=i.nextSibling;i.remove(),i=a}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const lc=Oe.define();function Gv(s){return[It.define(e=>new KI(e,s)),lc.of(s)]}const Yv=!ke.ios,zs=Oe.define({combine(s){return lr(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,i)=>Math.min(e,i),drawRangeCursor:(e,i)=>e||i})}});function GI(s={}){return[zs.of(s),YI,JI,XI,Gy.of(!0)]}function Jj(s){return s.facet(zs)}function Jv(s){return s.startState.facet(zs)!=s.state.facet(zs)}const YI=Gv({above:!0,markers(s){let{state:e}=s,i=e.facet(zs),l=[];for(let a of e.selection.ranges){let c=a==e.selection.main;if(a.empty?!c||Yv:i.drawRangeCursor){let u=c?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",f=a.empty?a:de.cursor(a.head,a.head>a.anchor?-1:1);for(let d of pl.forRange(s,u,f))l.push(d)}}return l},update(s,e){s.transactions.some(l=>l.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=Jv(s);return i&&Xv(s.state,e),s.docChanged||s.selectionSet||i},mount(s,e){Xv(e.state,s)},class:"cm-cursorLayer"});function Xv(s,e){e.style.animationDuration=s.facet(zs).cursorBlinkRate+"ms"}const JI=Gv({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:pl.forRange(s,"cm-selectionBackground",e)).reduce((e,i)=>e.concat(i))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||Jv(s)},class:"cm-selectionLayer"}),Hd={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Yv&&(Hd[".cm-line"].caretColor=Hd[".cm-content"].caretColor="transparent !important");const XI=oi.highest(Se.theme(Hd)),Zv=He.define({map(s,e){return s==null?null:e.mapPos(s)}}),gl=jt.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((i,l)=>l.is(Zv)?l.value:i,s)}}),ZI=It.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let i=s.state.field(gl);i==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(gl)!=i||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(gl),i=e!=null&&s.coordsAtPos(e);if(!i)return null;let l=s.scrollDOM.getBoundingClientRect();return{left:i.left-l.left+s.scrollDOM.scrollLeft*s.scaleX,top:i.top-l.top+s.scrollDOM.scrollTop*s.scaleY,height:i.bottom-i.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:i}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/i+"px",this.cursor.style.height=s.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(gl)!=s&&this.view.dispatch({effects:Zv.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function QI(){return[gl,ZI]}function Qv(s,e,i,l,a){e.lastIndex=0;for(let c=s.iterRange(i,l),u=i,f;!c.next().done;u+=c.value.length)if(!c.lineBreak)for(;f=e.exec(c.value);)a(u+f.index,f)}function qI(s,e){let i=s.visibleRanges;if(i.length==1&&i[0].from==s.viewport.from&&i[0].to==s.viewport.to)return i;let l=[];for(let{from:a,to:c}of i)a=Math.max(s.state.doc.lineAt(a).from,a-e),c=Math.min(s.state.doc.lineAt(c).to,c+e),l.length&&l[l.length-1].to>=a?l[l.length-1].to=c:l.push({from:a,to:c});return l}class Kd{constructor(e){const{regexp:i,decoration:l,decorate:a,boundary:c,maxLength:u=1e3}=e;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,a)this.addMatch=(f,d,h,m)=>a(m,h,h+f[0].length,f,d);else if(typeof l=="function")this.addMatch=(f,d,h,m)=>{let p=l(f,d,h);p&&m(h,h+f[0].length,p)};else if(l)this.addMatch=(f,d,h,m)=>m(h,h+f[0].length,l);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=c,this.maxLength=u}createDeco(e){let i=new kr,l=i.add.bind(i);for(let{from:a,to:c}of qI(e,this.maxLength))Qv(e.state.doc,this.regexp,a,c,(u,f)=>this.addMatch(f,e,u,l));return i.finish()}updateDeco(e,i){let l=1e9,a=-1;return e.docChanged&&e.changes.iterChanges((c,u,f,d)=>{d>e.view.viewport.from&&f<e.view.viewport.to&&(l=Math.min(f,l),a=Math.max(d,a))}),e.viewportChanged||a-l>1e3?this.createDeco(e.view):a>-1?this.updateRange(e.view,i.map(e.changes),l,a):i}updateRange(e,i,l,a){for(let c of e.visibleRanges){let u=Math.max(c.from,l),f=Math.min(c.to,a);if(f>u){let d=e.state.doc.lineAt(u),h=d.to<f?e.state.doc.lineAt(f):d,m=Math.max(c.from,d.from),p=Math.min(c.to,h.to);if(this.boundary){for(;u>d.from;u--)if(this.boundary.test(d.text[u-1-d.from])){m=u;break}for(;f<h.to;f++)if(this.boundary.test(h.text[f-h.from])){p=f;break}}let y=[],b,x=(A,E,w)=>y.push(w.range(A,E));if(d==h)for(this.regexp.lastIndex=m-d.from;(b=this.regexp.exec(d.text))&&b.index<p-d.from;)this.addMatch(b,e,b.index+d.from,x);else Qv(e.state.doc,this.regexp,m,p,(A,E)=>this.addMatch(E,e,A,x));i=i.update({filterFrom:m,filterTo:p,filter:(A,E)=>A<m||E>p,add:y})}}return i}}const Gd=/x/.unicode!=null?"gu":"g",_I=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Gd),eR={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Yd=null;function tR(){var s;if(Yd==null&&typeof document<"u"&&document.body){let e=document.body.style;Yd=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Yd||!1}const ac=Oe.define({combine(s){let e=lr(s,{render:null,specialChars:_I,addSpecialChars:null});return(e.replaceTabs=!tR())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Gd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Gd)),e}});function nR(s={}){return[ac.of(s),rR()]}let qv=null;function rR(){return qv||(qv=It.fromClass(class{constructor(s){this.view=s,this.decorations=Re.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(ac)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new Kd({regexp:s.specialChars,decoration:(e,i,l)=>{let{doc:a}=i.state,c=_t(e[0],0);if(c==9){let u=a.lineAt(l),f=i.state.tabSize,d=Fs(u.text,f,l-u.from);return Re.replace({widget:new lR((f-d%f)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[c]||(this.decorationCache[c]=Re.replace({widget:new oR(s,c)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(ac);s.startState.facet(ac)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const iR="\u2022";function sR(s){return s>=32?iR:s==10?"\u2424":String.fromCharCode(9216+s)}class oR extends Tr{constructor(e,i){super(),this.options=e,this.code=i}eq(e){return e.code==this.code}toDOM(e){let i=sR(this.code),l=e.state.phrase("Control character")+" "+(eR[this.code]||"0x"+this.code.toString(16)),a=this.options.render&&this.options.render(this.code,l,i);if(a)return a;let c=document.createElement("span");return c.textContent=i,c.title=l,c.setAttribute("aria-label",l),c.className="cm-specialChar",c}ignoreEvent(){return!1}}class lR extends Tr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const _v=null;function Xj(){return[_v,Ya.of(s=>{var e;return((e=s.plugin(_v))===null||e===void 0?void 0:e.attrs)||null})]}function aR(){return uR}const cR=Re.line({class:"cm-activeLine"}),uR=It.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,i=[];for(let l of s.state.selection.ranges){let a=s.lineBlockAt(l.head);a.from>e&&(i.push(cR.range(a.from)),e=a.from)}return Re.set(i)}},{decorations:s=>s.decorations});class fR extends Tr{constructor(e){super(),this.content=e}toDOM(e){let i=document.createElement("span");return i.className="cm-placeholder",i.style.pointerEvents="none",i.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?i.setAttribute("aria-label","placeholder "+this.content):i.setAttribute("aria-hidden","true"),i}coordsAt(e){let i=e.firstChild?Ns(e.firstChild):[];if(!i.length)return null;let l=window.getComputedStyle(e.parentNode),a=sl(i[0],l.direction!="rtl"),c=parseInt(l.lineHeight);return a.bottom-a.top>c*1.5?{left:a.left,right:a.right,top:a.top,bottom:a.top+c}:a}ignoreEvent(){return!1}}function dR(s){return It.fromClass(class{constructor(e){this.view=e,this.placeholder=s?Re.set([Re.widget({widget:new fR(s),side:1}).range(0)]):Re.none}get decorations(){return this.view.state.doc.length?Re.none:this.placeholder}},{decorations:e=>e.decorations})}const Jd=2e3;function hR(s,e,i){let l=Math.min(e.line,i.line),a=Math.max(e.line,i.line),c=[];if(e.off>Jd||i.off>Jd||e.col<0||i.col<0){let u=Math.min(e.off,i.off),f=Math.max(e.off,i.off);for(let d=l;d<=a;d++){let h=s.doc.line(d);h.length<=f&&c.push(de.range(h.from+u,h.to+f))}}else{let u=Math.min(e.col,i.col),f=Math.max(e.col,i.col);for(let d=l;d<=a;d++){let h=s.doc.line(d),m=sd(h.text,u,s.tabSize,!0);if(m<0)c.push(de.cursor(h.to));else{let p=sd(h.text,f,s.tabSize);c.push(de.range(h.from+m,h.from+p))}}}return c}function mR(s,e){let i=s.coordsAtPos(s.viewport.from);return i?Math.round(Math.abs((i.left-e)/s.defaultCharacterWidth)):-1}function eb(s,e){let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1),l=s.state.doc.lineAt(i),a=i-l.from,c=a>Jd?-1:a==l.length?mR(s,e.clientX):Fs(l.text,s.state.tabSize,i-l.from);return{line:l.number,col:c,off:a}}function pR(s,e){let i=eb(s,e),l=s.state.selection;return i?{update(a){if(a.docChanged){let c=a.changes.mapPos(a.startState.doc.line(i.line).from),u=a.state.doc.lineAt(c);i={line:u.number,col:i.col,off:Math.min(i.off,u.length)},l=l.map(a.changes)}},get(a,c,u){let f=eb(s,a);if(!f)return l;let d=hR(s.state,i,f);return d.length?u?de.create(d.concat(l.ranges)):de.create(d):l}}:null}function gR(s){let e=s?.eventFilter||(i=>i.altKey&&i.button==0);return Se.mouseSelectionStyle.of((i,l)=>e(l)?pR(i,l):null)}const yR={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},vR={style:"cursor: crosshair"};function bR(s={}){let[e,i]=yR[s.key||"Alt"],l=It.fromClass(class{constructor(a){this.view=a,this.isDown=!1}set(a){this.isDown!=a&&(this.isDown=a,this.view.update([]))}},{eventObservers:{keydown(a){this.set(a.keyCode==e||i(a))},keyup(a){(a.keyCode==e||!i(a))&&this.set(!1)},mousemove(a){this.set(i(a))}}});return[l,Se.contentAttributes.of(a=>{var c;return!((c=a.plugin(l))===null||c===void 0)&&c.isDown?vR:null})]}const yl="-10000px";class tb{constructor(e,i,l,a){this.facet=i,this.createTooltipView=l,this.removeTooltipView=a,this.input=e.state.facet(i),this.tooltips=this.input.filter(u=>u);let c=null;this.tooltipViews=this.tooltips.map(u=>c=l(u,c))}update(e,i){var l;let a=e.state.facet(this.facet),c=a.filter(d=>d);if(a===this.input){for(let d of this.tooltipViews)d.update&&d.update(e);return!1}let u=[],f=i?[]:null;for(let d=0;d<c.length;d++){let h=c[d],m=-1;if(h){for(let p=0;p<this.tooltips.length;p++){let y=this.tooltips[p];y&&y.create==h.create&&(m=p)}if(m<0)u[d]=this.createTooltipView(h,d?u[d-1]:null),f&&(f[d]=!!h.above);else{let p=u[d]=this.tooltipViews[m];f&&(f[d]=i[m]),p.update&&p.update(e)}}}for(let d of this.tooltipViews)u.indexOf(d)<0&&(this.removeTooltipView(d),(l=d.destroy)===null||l===void 0||l.call(d));return i&&(f.forEach((d,h)=>i[h]=d),i.length=f.length),this.input=a,this.tooltips=c,this.tooltipViews=u,!0}}function Zj(s={}){return cc.of(s)}function xR(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const cc=Oe.define({combine:s=>{var e,i,l;return{position:ke.ios?"absolute":((e=s.find(a=>a.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((i=s.find(a=>a.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((l=s.find(a=>a.tooltipSpace))===null||l===void 0?void 0:l.tooltipSpace)||xR}}}),nb=new WeakMap,uc=It.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(cc);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new tb(s,fc,(i,l)=>this.createTooltip(i,l),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let i=e||s.geometryChanged,l=s.state.facet(cc);if(l.position!=this.position&&!this.madeAbsolute){this.position=l.position;for(let a of this.manager.tooltipViews)a.dom.style.position=this.position;i=!0}if(l.parent!=this.parent){this.parent&&this.container.remove(),this.parent=l.parent,this.createContainer();for(let a of this.manager.tooltipViews)this.container.appendChild(a.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(s,e){let i=s.create(this.view),l=e?e.dom:null;if(i.dom.classList.add("cm-tooltip"),s.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let a=document.createElement("div");a.className="cm-tooltip-arrow",i.dom.appendChild(a)}return i.dom.style.position=this.position,i.dom.style.top=yl,i.dom.style.left="0px",this.container.insertBefore(i.dom,l),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var s,e,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let l of this.manager.tooltipViews)l.dom.remove(),(s=l.destroy)===null||s===void 0||s.call(l);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=1,e=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:c}=this.manager.tooltipViews[0];if(ke.gecko)i=c.offsetParent!=this.container.ownerDocument.body;else if(c.style.top==yl&&c.style.left=="0px"){let u=c.getBoundingClientRect();i=Math.abs(u.top+1e4)>1||Math.abs(u.left)>1}}if(i||this.position=="absolute")if(this.parent){let c=this.parent.getBoundingClientRect();c.width&&c.height&&(s=c.width/this.parent.offsetWidth,e=c.height/this.parent.offsetHeight)}else({scaleX:s,scaleY:e}=this.view.viewState);let l=this.view.scrollDOM.getBoundingClientRect(),a=Pd(this.view);return{visible:{left:l.left+a.left,top:l.top+a.top,right:l.right-a.right,bottom:l.bottom-a.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((c,u)=>{let f=this.manager.tooltipViews[u];return f.getCoords?f.getCoords(c.pos):this.view.coordsAtPos(c.pos)}),size:this.manager.tooltipViews.map(({dom:c})=>c.getBoundingClientRect()),space:this.view.state.facet(cc).tooltipSpace(this.view),scaleX:s,scaleY:e,makeAbsolute:i}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let f of this.manager.tooltipViews)f.dom.style.position="absolute"}let{visible:i,space:l,scaleX:a,scaleY:c}=s,u=[];for(let f=0;f<this.manager.tooltips.length;f++){let d=this.manager.tooltips[f],h=this.manager.tooltipViews[f],{dom:m}=h,p=s.pos[f],y=s.size[f];if(!p||d.clip!==!1&&(p.bottom<=Math.max(i.top,l.top)||p.top>=Math.min(i.bottom,l.bottom)||p.right<Math.max(i.left,l.left)-.1||p.left>Math.min(i.right,l.right)+.1)){m.style.top=yl;continue}let b=d.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,x=b?7:0,A=y.right-y.left,E=(e=nb.get(h))!==null&&e!==void 0?e:y.bottom-y.top,w=h.offset||ER,k=this.view.textDirection==bt.LTR,L=y.width>l.right-l.left?k?l.left:l.right-y.width:k?Math.max(l.left,Math.min(p.left-(b?14:0)+w.x,l.right-A)):Math.min(Math.max(l.left,p.left-A+(b?14:0)-w.x),l.right-A),z=this.above[f];!d.strictSide&&(z?p.top-E-x-w.y<l.top:p.bottom+E+x+w.y>l.bottom)&&z==l.bottom-p.bottom>p.top-l.top&&(z=this.above[f]=!z);let U=(z?p.top-l.top:l.bottom-p.bottom)-x;if(U<E&&h.resize!==!1){if(U<this.view.defaultLineHeight){m.style.top=yl;continue}nb.set(h,E),m.style.height=(E=U)/c+"px"}else m.style.height&&(m.style.height="");let X=z?p.top-E-x-w.y:p.bottom+x+w.y,ee=L+A;if(h.overlap!==!0)for(let oe of u)oe.left<ee&&oe.right>L&&oe.top<X+E&&oe.bottom>X&&(X=z?oe.top-E-2-x:oe.bottom+x+2);if(this.position=="absolute"?(m.style.top=(X-s.parent.top)/c+"px",m.style.left=(L-s.parent.left)/a+"px"):(m.style.top=X/c+"px",m.style.left=L/a+"px"),b){let oe=p.left+(k?w.x:-w.x)-(L+14-7);b.style.left=oe/a+"px"}h.overlap!==!0&&u.push({left:L,top:X,right:ee,bottom:X+E}),m.classList.toggle("cm-tooltip-above",z),m.classList.toggle("cm-tooltip-below",!z),h.positioned&&h.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=yl}},{eventObservers:{scroll(){this.maybeMeasure()}}}),SR=Se.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ER={x:0,y:0},fc=Oe.define({enables:[uc,SR]}),vl=Oe.define({combine:s=>s.reduce((e,i)=>e.concat(i),[])});class dc{static create(e){return new dc(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new tb(e,vl,(i,l)=>this.createHostedView(i,l),i=>i.dom.remove())}createHostedView(e,i){let l=e.create(this.view);return l.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(l.dom,i?i.dom.nextSibling:this.dom.firstChild),this.mounted&&l.mount&&l.mount(this.view),l}mount(e){for(let i of this.manager.tooltipViews)i.mount&&i.mount(e);this.mounted=!0}positioned(e){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let i of this.manager.tooltipViews)(e=i.destroy)===null||e===void 0||e.call(i)}passProp(e){let i;for(let l of this.manager.tooltipViews){let a=l[e];if(a!==void 0){if(i===void 0)i=a;else if(i!==a)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const AR=fc.compute([vl],s=>{let e=s.facet(vl);return e.length===0?null:{pos:Math.min(...e.map(i=>i.pos)),end:Math.max(...e.map(i=>{var l;return(l=i.end)!==null&&l!==void 0?l:i.pos})),create:dc.create,above:e[0].above,arrow:e.some(i=>i.arrow)}});class wR{constructor(e,i,l,a,c){this.view=e,this.source=i,this.field=l,this.setHover=a,this.hoverTime=c,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:i}=this,l=e.docView.nearest(i.target);if(!l)return;let a,c=1;if(l instanceof Ii)a=l.posAtStart;else{if(a=e.posAtCoords(i),a==null)return;let f=e.coordsAtPos(a);if(!f||i.y<f.top||i.y>f.bottom||i.x<f.left-e.defaultCharacterWidth||i.x>f.right+e.defaultCharacterWidth)return;let d=e.bidiSpans(e.state.doc.lineAt(a)).find(m=>m.from<=a&&m.to>=a),h=d&&d.dir==bt.RTL?-1:1;c=i.x<f.left?-h:h}let u=this.source(e,a,c);if(u?.then){let f=this.pending={pos:a};u.then(d=>{this.pending==f&&(this.pending=null,d&&!(Array.isArray(d)&&!d.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(d)?d:[d])}))},d=>Tn(e.state,d,"hover tooltip"))}else u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])})}get tooltip(){let e=this.view.plugin(uc),i=e?e.manager.tooltips.findIndex(l=>l.create==dc.create):-1;return i>-1?e.manager.tooltipViews[i]:null}mousemove(e){var i,l;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:a,tooltip:c}=this;if(a.length&&c&&!CR(c.dom,e)||this.pending){let{pos:u}=a[0]||this.pending,f=(l=(i=a[0])===null||i===void 0?void 0:i.end)!==null&&l!==void 0?l:u;(u==f?this.view.posAtCoords(this.lastMove)!=u:!OR(this.view,u,f,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:i}=this;if(i.length){let{tooltip:l}=this;l&&l.dom.contains(e.relatedTarget)?this.watchTooltipLeave(l.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let i=l=>{e.removeEventListener("mouseleave",i),this.active.length&&!this.view.dom.contains(l.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",i)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const hc=4;function CR(s,e){let{left:i,right:l,top:a,bottom:c}=s.getBoundingClientRect(),u;if(u=s.querySelector(".cm-tooltip-arrow")){let f=u.getBoundingClientRect();a=Math.min(f.top,a),c=Math.max(f.bottom,c)}return e.clientX>=i-hc&&e.clientX<=l+hc&&e.clientY>=a-hc&&e.clientY<=c+hc}function OR(s,e,i,l,a,c){let u=s.scrollDOM.getBoundingClientRect(),f=s.documentTop+s.documentPadding.top+s.contentHeight;if(u.left>l||u.right<l||u.top>a||Math.min(u.bottom,f)<a)return!1;let d=s.posAtCoords({x:l,y:a},!1);return d>=e&&d<=i}function kR(s,e={}){let i=He.define(),l=jt.define({create(){return[]},update(a,c){if(a.length&&(e.hideOnChange&&(c.docChanged||c.selection)?a=[]:e.hideOn&&(a=a.filter(u=>!e.hideOn(c,u))),c.docChanged)){let u=[];for(let f of a){let d=c.changes.mapPos(f.pos,-1,yn.TrackDel);if(d!=null){let h=Object.assign(Object.create(null),f);h.pos=d,h.end!=null&&(h.end=c.changes.mapPos(h.end)),u.push(h)}}a=u}for(let u of c.effects)u.is(i)&&(a=u.value),u.is(PR)&&(a=[]);return a},provide:a=>vl.from(a)});return{active:l,extension:[l,It.define(a=>new wR(a,s,l,i,e.hoverTime||300)),AR]}}function rb(s,e){let i=s.plugin(uc);if(!i)return null;let l=i.manager.tooltips.indexOf(e);return l<0?null:i.manager.tooltipViews[l]}function Qj(s){return s.facet(vl).some(e=>e)}const PR=He.define(),qj=null;function _j(s){let e=s.plugin(uc);e&&e.maybeMeasure()}const Xd=Oe.define({combine(s){let e,i;for(let l of s)e=e||l.topContainer,i=i||l.bottomContainer;return{topContainer:e,bottomContainer:i}}});function e3(s){return s?[Xd.of(s)]:[]}function bl(s,e){let i=s.plugin(ib),l=i?i.specs.indexOf(e):-1;return l>-1?i.panels[l]:null}const ib=It.fromClass(class{constructor(s){this.input=s.state.facet(ls),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(s));let e=s.state.facet(Xd);this.top=new mc(s,!0,e.topContainer),this.bottom=new mc(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(s){let e=s.state.facet(Xd);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new mc(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new mc(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=s.state.facet(ls);if(i!=this.input){let l=i.filter(d=>d),a=[],c=[],u=[],f=[];for(let d of l){let h=this.specs.indexOf(d),m;h<0?(m=d(s.view),f.push(m)):(m=this.panels[h],m.update&&m.update(s)),a.push(m),(m.top?c:u).push(m)}this.specs=l,this.panels=a,this.top.sync(c),this.bottom.sync(u);for(let d of f)d.dom.classList.add("cm-panel"),d.mount&&d.mount()}else for(let l of this.panels)l.update&&l.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>Se.scrollMargins.of(e=>{let i=e.plugin(s);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class mc{constructor(e,i,l){this.view=e,this.top=i,this.container=l,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let i of this.panels)i.destroy&&e.indexOf(i)<0&&i.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let e=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;e!=i.dom;)e=sb(e);e=e.nextSibling}else this.dom.insertBefore(i.dom,e);for(;e;)e=sb(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function sb(s){let e=s.nextSibling;return s.remove(),e}const ls=Oe.define({enables:ib});class Ir extends ns{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ir.prototype.elementClass="",Ir.prototype.toDOM=void 0,Ir.prototype.mapMode=yn.TrackBefore,Ir.prototype.startSide=Ir.prototype.endSide=-1,Ir.prototype.point=!0;const pc=Oe.define(),TR=Oe.define(),DR={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>it.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},xl=Oe.define();function ob(s){return[lb(),xl.of(Object.assign(Object.assign({},DR),s))]}const Zd=Oe.define({combine:s=>s.some(e=>e)});function lb(s){let e=[MR];return s&&s.fixed===!1&&e.push(Zd.of(!0)),e}const MR=It.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(xl).map(e=>new cb(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(Zd),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,i=s.view.viewport,l=Math.min(e.to,i.to)-Math.max(e.from,i.from);this.syncGutters(l<(i.to-i.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Zd)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let i=it.iter(this.view.state.facet(pc),this.view.viewport.from),l=[],a=this.gutters.map(c=>new IR(c,this.view.viewport,-this.view.documentPadding.top));for(let c of this.view.viewportLineBlocks)if(l.length&&(l=[]),Array.isArray(c.type)){let u=!0;for(let f of c.type)if(f.type==vn.Text&&u){Qd(i,l,f.from);for(let d of a)d.line(this.view,f,l);u=!1}else if(f.widget)for(let d of a)d.widget(this.view,f)}else if(c.type==vn.Text){Qd(i,l,c.from);for(let u of a)u.line(this.view,c,l)}else if(c.widget)for(let u of a)u.widget(this.view,c);for(let c of a)c.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(xl),i=s.state.facet(xl),l=s.docChanged||s.heightChanged||s.viewportChanged||!it.eq(s.startState.facet(pc),s.state.facet(pc),s.view.viewport.from,s.view.viewport.to);if(e==i)for(let a of this.gutters)a.update(s)&&(l=!0);else{l=!0;let a=[];for(let c of i){let u=e.indexOf(c);u<0?a.push(new cb(this.view,c)):(this.gutters[u].update(s),a.push(this.gutters[u]))}for(let c of this.gutters)c.dom.remove(),a.indexOf(c)<0&&c.destroy();for(let c of a)this.dom.appendChild(c.dom);this.gutters=a}return l}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>Se.scrollMargins.of(e=>{let i=e.plugin(s);return!i||i.gutters.length==0||!i.fixed?null:e.textDirection==bt.LTR?{left:i.dom.offsetWidth*e.scaleX}:{right:i.dom.offsetWidth*e.scaleX}})});function ab(s){return Array.isArray(s)?s:[s]}function Qd(s,e,i){for(;s.value&&s.from<=i;)s.from==i&&e.push(s.value),s.next()}class IR{constructor(e,i,l){this.gutter=e,this.height=l,this.i=0,this.cursor=it.iter(e.markers,i.from)}addElement(e,i,l){let{gutter:a}=this,c=(i.top-this.height)/e.scaleY,u=i.height/e.scaleY;if(this.i==a.elements.length){let f=new ub(e,u,c,l);a.elements.push(f),a.dom.appendChild(f.dom)}else a.elements[this.i].update(e,u,c,l);this.height=i.bottom,this.i++}line(e,i,l){let a=[];Qd(this.cursor,a,i.from),l.length&&(a=a.concat(l));let c=this.gutter.config.lineMarker(e,i,a);c&&a.unshift(c);let u=this.gutter;a.length==0&&!u.config.renderEmptyElements||this.addElement(e,i,a)}widget(e,i){let l=this.gutter.config.widgetMarker(e,i.widget,i),a=l?[l]:null;for(let c of e.state.facet(TR)){let u=c(e,i.widget,i);u&&(a||(a=[])).push(u)}a&&this.addElement(e,i,a)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let i=e.elements.pop();e.dom.removeChild(i.dom),i.destroy()}}}class cb{constructor(e,i){this.view=e,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let l in i.domEventHandlers)this.dom.addEventListener(l,a=>{let c=a.target,u;if(c!=this.dom&&this.dom.contains(c)){for(;c.parentNode!=this.dom;)c=c.parentNode;let d=c.getBoundingClientRect();u=(d.top+d.bottom)/2}else u=a.clientY;let f=e.lineBlockAtHeight(u-e.documentTop);i.domEventHandlers[l](e,f,a)&&a.preventDefault()});this.markers=ab(i.markers(e)),i.initialSpacer&&(this.spacer=new ub(e,0,0,[i.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let i=this.markers;if(this.markers=ab(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let a=this.config.updateSpacer(this.spacer.markers[0],e);a!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[a])}let l=e.view.viewport;return!it.eq(this.markers,i,l.from,l.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class ub{constructor(e,i,l,a){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,i,l,a)}update(e,i,l,a){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=l&&(this.dom.style.marginTop=(this.above=l)?l+"px":""),RR(this.markers,a)||this.setMarkers(e,a)}setMarkers(e,i){let l="cm-gutterElement",a=this.dom.firstChild;for(let c=0,u=0;;){let f=u,d=c<i.length?i[c++]:null,h=!1;if(d){let m=d.elementClass;m&&(l+=" "+m);for(let p=u;p<this.markers.length;p++)if(this.markers[p].compare(d)){f=p,h=!0;break}}else f=this.markers.length;for(;u<f;){let m=this.markers[u++];if(m.toDOM){m.destroy(a);let p=a.nextSibling;a.remove(),a=p}}if(!d)break;d.toDOM&&(h?a=a.nextSibling:this.dom.insertBefore(d.toDOM(e),a)),h&&u++}this.dom.className=l,this.markers=i}destroy(){this.setMarkers(null,[])}}function RR(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!s[i].compare(e[i]))return!1;return!0}const LR=Oe.define(),FR=Oe.define(),Us=Oe.define({combine(s){return lr(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,i){let l=Object.assign({},e);for(let a in i){let c=l[a],u=i[a];l[a]=c?(f,d,h)=>c(f,d,h)||u(f,d,h):u}return l}})}});class qd extends Ir{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function _d(s,e){return s.state.facet(Us).formatNumber(e,s.state)}const NR=xl.compute([Us],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(LR)},lineMarker(e,i,l){return l.some(a=>a.toDOM)?null:new qd(_d(e,e.state.doc.lineAt(i.from).number))},widgetMarker:(e,i,l)=>{for(let a of e.state.facet(FR)){let c=a(e,i,l);if(c)return c}return null},lineMarkerChange:e=>e.startState.facet(Us)!=e.state.facet(Us),initialSpacer(e){return new qd(_d(e,fb(e.state.doc.lines)))},updateSpacer(e,i){let l=_d(i.view,fb(i.view.state.doc.lines));return l==e.number?e:new qd(l)},domEventHandlers:s.facet(Us).domEventHandlers}));function BR(s={}){return[Us.of(s),lb(),NR]}function fb(s){let e=9;for(;e<s;)e=e*10+9;return e}const $R=new class extends Ir{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},jR=pc.compute(["selection"],s=>{let e=[],i=-1;for(let l of s.selection.ranges){let a=s.doc.lineAt(l.head).from;a>i&&(i=a,e.push($R.range(a)))}return it.of(e)});function WR(){return jR}function db(s){return It.define(e=>({decorations:s.createDeco(e),update(i){this.decorations=s.updateDeco(i,this.decorations)}}),{decorations:e=>e.decorations})}const VR=Re.mark({class:"cm-highlightTab"}),zR=Re.mark({class:"cm-highlightSpace"}),UR=db(new Kd({regexp:/\t| /g,decoration:s=>s[0]=="	"?VR:zR,boundary:/\S/}));function t3(){return UR}const HR=db(new Kd({regexp:/\s+$/g,decoration:Re.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function n3(){return HR}const r3={HeightMap:on,HeightOracle:Pv,MeasuredHeights:Tv,QueryType:At,ChangedRange:$n,computeOrder:Fy,moveVisually:$y,clearHeightChangeFlag:Fd,getHeightChangeFlag:()=>os},KR=1024;let GR=0;class Jn{constructor(e,i){this.from=e,this.to=i}}class qe{constructor(e={}){this.id=GR++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=bn.match(e)),i=>{let l=e(i);return l===void 0?null:[this,l]}}}qe.closedBy=new qe({deserialize:s=>s.split(" ")}),qe.openedBy=new qe({deserialize:s=>s.split(" ")}),qe.group=new qe({deserialize:s=>s.split(" ")}),qe.isolate=new qe({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}}),qe.contextHash=new qe({perNode:!0}),qe.lookAhead=new qe({perNode:!0}),qe.mounted=new qe({perNode:!0});class Sl{constructor(e,i,l){this.tree=e,this.overlay=i,this.parser=l}static get(e){return e&&e.props&&e.props[qe.mounted.id]}}const YR=Object.create(null);class bn{constructor(e,i,l,a=0){this.name=e,this.props=i,this.id=l,this.flags=a}static define(e){let i=e.props&&e.props.length?Object.create(null):YR,l=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),a=new bn(e.name||"",i,e.id,l);if(e.props){for(let c of e.props)if(Array.isArray(c)||(c=c(a)),c){if(c[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[c[0].id]=c[1]}}return a}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(qe.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let l in e)for(let a of l.split(" "))i[a]=e[l];return l=>{for(let a=l.prop(qe.group),c=-1;c<(a?a.length:0);c++){let u=i[c<0?l.name:a[c]];if(u)return u}}}}bn.none=new bn("",Object.create(null),0,8);class eh{constructor(e){this.types=e;for(let i=0;i<e.length;i++)if(e[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let i=[];for(let l of this.types){let a=null;for(let c of e){let u=c(l);u&&(a||(a=Object.assign({},l.props)),a[u[0].id]=u[1])}i.push(a?new bn(l.name,a,l.id,l.flags):l)}return new eh(i)}}const gc=new WeakMap,hb=new WeakMap;var Rt;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(Rt||(Rt={}));class wt{constructor(e,i,l,a,c){if(this.type=e,this.children=i,this.positions=l,this.length=a,this.props=null,c&&c.length){this.props=Object.create(null);for(let[u,f]of c)this.props[typeof u=="number"?u:u.id]=f}}toString(){let e=Sl.get(this);if(e&&!e.overlay)return e.tree.toString();let i="";for(let l of this.children){let a=l.toString();a&&(i&&(i+=","),i+=a)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new yc(this.topNode,e)}cursorAt(e,i=0,l=0){let a=gc.get(this)||this.topNode,c=new yc(a);return c.moveTo(e,i),gc.set(this,c._tree),c}get topNode(){return new ln(this,0,0,null)}resolve(e,i=0){let l=El(gc.get(this)||this.topNode,e,i,!1);return gc.set(this,l),l}resolveInner(e,i=0){let l=El(hb.get(this)||this.topNode,e,i,!0);return hb.set(this,l),l}resolveStack(e,i=0){return ZR(this,e,i)}iterate(e){let{enter:i,leave:l,from:a=0,to:c=this.length}=e,u=e.mode||0,f=(u&Rt.IncludeAnonymous)>0;for(let d=this.cursor(u|Rt.IncludeAnonymous);;){let h=!1;if(d.from<=c&&d.to>=a&&(!f&&d.type.isAnonymous||i(d)!==!1)){if(d.firstChild())continue;h=!0}for(;h&&l&&(f||!d.type.isAnonymous)&&l(d),!d.nextSibling();){if(!d.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:ih(bn.none,this.children,this.positions,0,this.children.length,0,this.length,(i,l,a)=>new wt(this.type,i,l,a,this.propValues),e.makeTree||((i,l,a)=>new wt(bn.none,i,l,a)))}static build(e){return QR(e)}}wt.empty=new wt(bn.none,[],[],0);class th{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new th(this.buffer,this.index)}}class Bi{constructor(e,i,l){this.buffer=e,this.length=i,this.set=l}get type(){return bn.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],l=this.buffer[e+3],a=this.set.types[i],c=a.name;if(/\W/.test(c)&&!a.isError&&(c=JSON.stringify(c)),e+=4,l==e)return c;let u=[];for(;e<l;)u.push(this.childString(e)),e=this.buffer[e+3];return c+"("+u.join(",")+")"}findChild(e,i,l,a,c){let{buffer:u}=this,f=-1;for(let d=e;d!=i&&!(mb(c,a,u[d+1],u[d+2])&&(f=d,l>0));d=u[d+3]);return f}slice(e,i,l){let a=this.buffer,c=new Uint16Array(i-e),u=0;for(let f=e,d=0;f<i;){c[d++]=a[f++],c[d++]=a[f++]-l;let h=c[d++]=a[f++]-l;c[d++]=a[f++]-e,u=Math.max(u,h)}return new Bi(c,u,this.set)}}function mb(s,e,i,l){switch(s){case-2:return i<e;case-1:return l>=e&&i<e;case 0:return i<e&&l>e;case 1:return i<=e&&l>e;case 2:return l>e;case 4:return!0}}function El(s,e,i,l){for(var a;s.from==s.to||(i<1?s.from>=e:s.from>e)||(i>-1?s.to<=e:s.to<e);){let u=!l&&s instanceof ln&&s.index<0?null:s.parent;if(!u)return s;s=u}let c=l?0:Rt.IgnoreOverlays;if(l)for(let u=s,f=u.parent;f;u=f,f=u.parent)u instanceof ln&&u.index<0&&((a=f.enter(e,i,c))===null||a===void 0?void 0:a.from)!=u.from&&(s=f);for(;;){let u=s.enter(e,i,c);if(!u)return s;s=u}}class pb{cursor(e=0){return new yc(this,e)}getChild(e,i=null,l=null){let a=gb(this,e,i,l);return a.length?a[0]:null}getChildren(e,i=null,l=null){return gb(this,e,i,l)}resolve(e,i=0){return El(this,e,i,!1)}resolveInner(e,i=0){return El(this,e,i,!0)}matchContext(e){return nh(this.parent,e)}enterUnfinishedNodesBefore(e){let i=this.childBefore(e),l=this;for(;i;){let a=i.lastChild;if(!a||a.to!=i.to)break;a.type.isError&&a.from==a.to?(l=i,i=a.prevSibling):i=a}return l}get node(){return this}get next(){return this.parent}}class ln extends pb{constructor(e,i,l,a){super(),this._tree=e,this.from=i,this.index=l,this._parent=a}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,l,a,c=0){for(let u=this;;){for(let{children:f,positions:d}=u._tree,h=i>0?f.length:-1;e!=h;e+=i){let m=f[e],p=d[e]+u.from;if(mb(a,l,p,p+m.length)){if(m instanceof Bi){if(c&Rt.ExcludeBuffers)continue;let y=m.findChild(0,m.buffer.length,i,l-p,a);if(y>-1)return new Rr(new JR(u,m,e,p),null,y)}else if(c&Rt.IncludeAnonymous||!m.type.isAnonymous||rh(m)){let y;if(!(c&Rt.IgnoreMounts)&&(y=Sl.get(m))&&!y.overlay)return new ln(y.tree,p,e,u);let b=new ln(m,p,e,u);return c&Rt.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(i<0?m.children.length-1:0,i,l,a)}}}if(c&Rt.IncludeAnonymous||!u.type.isAnonymous||(u.index>=0?e=u.index+i:e=i<0?-1:u._parent._tree.children.length,u=u._parent,!u))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,l=0){let a;if(!(l&Rt.IgnoreOverlays)&&(a=Sl.get(this._tree))&&a.overlay){let c=e-this.from;for(let{from:u,to:f}of a.overlay)if((i>0?u<=c:u<c)&&(i<0?f>=c:f>c))return new ln(a.tree,a.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,l)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function gb(s,e,i,l){let a=s.cursor(),c=[];if(!a.firstChild())return c;if(i!=null){for(let u=!1;!u;)if(u=a.type.is(i),!a.nextSibling())return c}for(;;){if(l!=null&&a.type.is(l))return c;if(a.type.is(e)&&c.push(a.node),!a.nextSibling())return l==null?c:[]}}function nh(s,e,i=e.length-1){for(let l=s;i>=0;l=l.parent){if(!l)return!1;if(!l.type.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}class JR{constructor(e,i,l,a){this.parent=e,this.buffer=i,this.index=l,this.start=a}}class Rr extends pb{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,l){super(),this.context=e,this._parent=i,this.index=l,this.type=e.buffer.set.types[e.buffer.buffer[l]]}child(e,i,l){let{buffer:a}=this.context,c=a.findChild(this.index+4,a.buffer[this.index+3],e,i-this.context.start,l);return c<0?null:new Rr(this.context,this,c)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,l=0){if(l&Rt.ExcludeBuffers)return null;let{buffer:a}=this.context,c=a.findChild(this.index+4,a.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return c<0?null:new Rr(this.context,this,c)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Rr(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new Rr(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],i=[],{buffer:l}=this.context,a=this.index+4,c=l.buffer[this.index+3];if(c>a){let u=l.buffer[this.index+1];e.push(l.slice(a,c,u)),i.push(0)}return new wt(this.type,e,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function yb(s){if(!s.length)return null;let e=0,i=s[0];for(let c=1;c<s.length;c++){let u=s[c];(u.from>i.from||u.to<i.to)&&(i=u,e=c)}let l=i instanceof ln&&i.index<0?null:i.parent,a=s.slice();return l?a[e]=l:a.splice(e,1),new XR(a,i)}class XR{constructor(e,i){this.heads=e,this.node=i}get next(){return yb(this.heads)}}function ZR(s,e,i){let l=s.resolveInner(e,i),a=null;for(let c=l instanceof ln?l:l.context.parent;c;c=c.parent)if(c.index<0){let u=c.parent;(a||(a=[l])).push(u.resolve(e,i)),c=u}else{let u=Sl.get(c.tree);if(u&&u.overlay&&u.overlay[0].from<=e&&u.overlay[u.overlay.length-1].to>=e){let f=new ln(u.tree,u.overlay[0].from+c.from,-1,c);(a||(a=[l])).push(El(f,e,i,!1))}}return a?yb(a):l}class yc{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ln)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let l=e._parent;l;l=l._parent)this.stack.unshift(l.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:l,buffer:a}=this.buffer;return this.type=i||a.set.types[a.buffer[e]],this.from=l+a.buffer[e+1],this.to=l+a.buffer[e+2],!0}yield(e){return e?e instanceof ln?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,l){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,l,this.mode));let{buffer:a}=this.buffer,c=a.findChild(this.index+4,a.buffer[this.index+3],e,i-this.buffer.start,l);return c<0?!1:(this.stack.push(this.index),this.yieldBuf(c))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,l=this.mode){return this.buffer?l&Rt.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,l))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Rt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Rt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,l=this.stack.length-1;if(e<0){let a=l<0?0:this.stack[l]+4;if(this.index!=a)return this.yieldBuf(i.findChild(a,this.index,-1,0,4))}else{let a=i.buffer[this.index+3];if(a<(l<0?i.buffer.length:i.buffer[this.stack[l]+3]))return this.yieldBuf(a)}return l<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,l,{buffer:a}=this;if(a){if(e>0){if(this.index<a.buffer.buffer.length)return!1}else for(let c=0;c<this.index;c++)if(a.buffer.buffer[c+3]<this.index)return!1;({index:i,parent:l}=a)}else({index:i,_parent:l}=this._tree);for(;l;{index:i,_parent:l}=l)if(i>-1)for(let c=i+e,u=e<0?-1:l._tree.children.length;c!=u;c+=e){let f=l._tree.children[c];if(this.mode&Rt.IncludeAnonymous||f instanceof Bi||!f.type.isAnonymous||rh(f))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,l=0;if(e&&e.context==this.buffer)e:for(let a=this.index,c=this.stack.length;c>=0;){for(let u=e;u;u=u._parent)if(u.index==a){if(a==this.index)return u;i=u,l=c+1;break e}a=this.stack[--c]}for(let a=l;a<this.stack.length;a++)i=new Rr(this.buffer,i,this.stack[a]);return this.bufferNode=new Rr(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let l=0;;){let a=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){l++;continue}this.type.isAnonymous||(a=!0)}for(;;){if(a&&i&&i(this),a=this.type.isAnonymous,!l)return;if(this.nextSibling())break;this.parent(),l--,a=!0}}}matchContext(e){if(!this.buffer)return nh(this.node.parent,e);let{buffer:i}=this.buffer,{types:l}=i.set;for(let a=e.length-1,c=this.stack.length-1;a>=0;c--){if(c<0)return nh(this._tree,e,a);let u=l[i.buffer[this.stack[c]]];if(!u.isAnonymous){if(e[a]&&e[a]!=u.name)return!1;a--}}return!0}}function rh(s){return s.children.some(e=>e instanceof Bi||!e.type.isAnonymous||rh(e))}function QR(s){var e;let{buffer:i,nodeSet:l,maxBufferLength:a=KR,reused:c=[],minRepeatType:u=l.types.length}=s,f=Array.isArray(i)?new th(i,i.length):i,d=l.types,h=0,m=0;function p(U,X,ee,oe,ue,fe){let{id:ge,start:he,end:me,size:be}=f,ye=m,Te=h;for(;be<0;)if(f.next(),be==-1){let dt=c[ge];ee.push(dt),oe.push(he-U);return}else if(be==-3){h=ge;return}else if(be==-4){m=ge;return}else throw new RangeError(`Unrecognized record size: ${be}`);let We=d[ge],De,ve,_e=he-U;if(me-he<=a&&(ve=E(f.pos-X,ue))){let dt=new Uint16Array(ve.size-ve.skip),tt=f.pos-ve.size,ht=dt.length;for(;f.pos>tt;)ht=w(ve.start,dt,ht);De=new Bi(dt,me-ve.start,l),_e=ve.start-U}else{let dt=f.pos-be;f.next();let tt=[],ht=[],Tt=ge>=u?ge:-1,St=0,Et=me;for(;f.pos>dt;)Tt>=0&&f.id==Tt&&f.size>=0?(f.end<=Et-a&&(x(tt,ht,he,St,f.end,Et,Tt,ye,Te),St=tt.length,Et=f.end),f.next()):fe>2500?y(he,dt,tt,ht):p(he,dt,tt,ht,Tt,fe+1);if(Tt>=0&&St>0&&St<tt.length&&x(tt,ht,he,St,he,Et,Tt,ye,Te),tt.reverse(),ht.reverse(),Tt>-1&&St>0){let Ot=b(We,Te);De=ih(We,tt,ht,0,tt.length,0,me-he,Ot,Ot)}else De=A(We,tt,ht,me-he,ye-me,Te)}ee.push(De),oe.push(_e)}function y(U,X,ee,oe){let ue=[],fe=0,ge=-1;for(;f.pos>X;){let{id:he,start:me,end:be,size:ye}=f;if(ye>4)f.next();else{if(ge>-1&&me<ge)break;ge<0&&(ge=be-a),ue.push(he,me,be),fe++,f.next()}}if(fe){let he=new Uint16Array(fe*4),me=ue[ue.length-2];for(let be=ue.length-3,ye=0;be>=0;be-=3)he[ye++]=ue[be],he[ye++]=ue[be+1]-me,he[ye++]=ue[be+2]-me,he[ye++]=ye;ee.push(new Bi(he,ue[2]-me,l)),oe.push(me-U)}}function b(U,X){return(ee,oe,ue)=>{let fe=0,ge=ee.length-1,he,me;if(ge>=0&&(he=ee[ge])instanceof wt){if(!ge&&he.type==U&&he.length==ue)return he;(me=he.prop(qe.lookAhead))&&(fe=oe[ge]+he.length+me)}return A(U,ee,oe,ue,fe,X)}}function x(U,X,ee,oe,ue,fe,ge,he,me){let be=[],ye=[];for(;U.length>oe;)be.push(U.pop()),ye.push(X.pop()+ee-ue);U.push(A(l.types[ge],be,ye,fe-ue,he-fe,me)),X.push(ue-ee)}function A(U,X,ee,oe,ue,fe,ge){if(fe){let he=[qe.contextHash,fe];ge=ge?[he].concat(ge):[he]}if(ue>25){let he=[qe.lookAhead,ue];ge=ge?[he].concat(ge):[he]}return new wt(U,X,ee,oe,ge)}function E(U,X){let ee=f.fork(),oe=0,ue=0,fe=0,ge=ee.end-a,he={size:0,start:0,skip:0};e:for(let me=ee.pos-U;ee.pos>me;){let be=ee.size;if(ee.id==X&&be>=0){he.size=oe,he.start=ue,he.skip=fe,fe+=4,oe+=4,ee.next();continue}let ye=ee.pos-be;if(be<0||ye<me||ee.start<ge)break;let Te=ee.id>=u?4:0,We=ee.start;for(ee.next();ee.pos>ye;){if(ee.size<0)if(ee.size==-3)Te+=4;else break e;else ee.id>=u&&(Te+=4);ee.next()}ue=We,oe+=be,fe+=Te}return(X<0||oe==U)&&(he.size=oe,he.start=ue,he.skip=fe),he.size>4?he:void 0}function w(U,X,ee){let{id:oe,start:ue,end:fe,size:ge}=f;if(f.next(),ge>=0&&oe<u){let he=ee;if(ge>4){let me=f.pos-(ge-4);for(;f.pos>me;)ee=w(U,X,ee)}X[--ee]=he,X[--ee]=fe-U,X[--ee]=ue-U,X[--ee]=oe}else ge==-3?h=oe:ge==-4&&(m=oe);return ee}let k=[],L=[];for(;f.pos>0;)p(s.start||0,s.bufferStart||0,k,L,-1,0);let z=(e=s.length)!==null&&e!==void 0?e:k.length?L[0]+k[0].length:0;return new wt(d[s.topID],k.reverse(),L.reverse(),z)}const vb=new WeakMap;function vc(s,e){if(!s.isAnonymous||e instanceof Bi||e.type!=s)return 1;let i=vb.get(e);if(i==null){i=1;for(let l of e.children){if(l.type!=s||!(l instanceof wt)){i=1;break}i+=vc(s,l)}vb.set(e,i)}return i}function ih(s,e,i,l,a,c,u,f,d){let h=0;for(let x=l;x<a;x++)h+=vc(s,e[x]);let m=Math.ceil(h*1.5/8),p=[],y=[];function b(x,A,E,w,k){for(let L=E;L<w;){let z=L,U=A[L],X=vc(s,x[L]);for(L++;L<w;L++){let ee=vc(s,x[L]);if(X+ee>=m)break;X+=ee}if(L==z+1){if(X>m){let ee=x[z];b(ee.children,ee.positions,0,ee.children.length,A[z]+k);continue}p.push(x[z])}else{let ee=A[L-1]+x[L-1].length-U;p.push(ih(s,x,A,z,L,U,ee,null,d))}y.push(U+k-c)}}return b(e,i,l,a,0),(f||d)(p,y,u)}class i3{constructor(){this.map=new WeakMap}setBuffer(e,i,l){let a=this.map.get(e);a||this.map.set(e,a=new Map),a.set(i,l)}getBuffer(e,i){let l=this.map.get(e);return l&&l.get(i)}set(e,i){e instanceof Rr?this.setBuffer(e.context.buffer,e.index,i):e instanceof ln&&this.map.set(e.tree,i)}get(e){return e instanceof Rr?this.getBuffer(e.context.buffer,e.index):e instanceof ln?this.map.get(e.tree):void 0}cursorSet(e,i){e.buffer?this.setBuffer(e.buffer.buffer,e.index,i):this.map.set(e.tree,i)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ci{constructor(e,i,l,a,c=!1,u=!1){this.from=e,this.to=i,this.tree=l,this.offset=a,this.open=(c?1:0)|(u?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],l=!1){let a=[new ci(0,e.length,e,0,!1,l)];for(let c of i)c.to>e.length&&a.push(c);return a}static applyChanges(e,i,l=128){if(!i.length)return e;let a=[],c=1,u=e.length?e[0]:null;for(let f=0,d=0,h=0;;f++){let m=f<i.length?i[f]:null,p=m?m.fromA:1e9;if(p-d>=l)for(;u&&u.from<p;){let y=u;if(d>=y.from||p<=y.to||h){let b=Math.max(y.from,d)-h,x=Math.min(y.to,p)-h;y=b>=x?null:new ci(b,x,y.tree,y.offset+h,f>0,!!m)}if(y&&a.push(y),u.to>p)break;u=c<e.length?e[c++]:null}if(!m)break;d=m.toA,h=m.toA-m.toB}return a}}class bb{startParse(e,i,l){return typeof e=="string"&&(e=new qR(e)),l=l?l.length?l.map(a=>new Jn(a.from,a.to)):[new Jn(0,0)]:[new Jn(0,e.length)],this.createParse(e,i||[],l)}parse(e,i,l){let a=this.startParse(e,i,l);for(;;){let c=a.advance();if(c)return c}}}class qR{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}function s3(s){return(e,i,l,a)=>new eL(e,s,i,l,a)}class xb{constructor(e,i,l,a,c){this.parser=e,this.parse=i,this.overlay=l,this.target=a,this.from=c}}function Sb(s){if(!s.length||s.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(s))}class _R{constructor(e,i,l,a,c,u,f){this.parser=e,this.predicate=i,this.mounts=l,this.index=a,this.start=c,this.target=u,this.prev=f,this.depth=0,this.ranges=[]}}const sh=new qe({perNode:!0});class eL{constructor(e,i,l,a,c){this.nest=i,this.input=l,this.fragments=a,this.ranges=c,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let l=this.baseParse.advance();if(!l)return null;if(this.baseParse=null,this.baseTree=l,this.startInner(),this.stoppedAt!=null)for(let a of this.inner)a.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let l=this.baseTree;return this.stoppedAt!=null&&(l=new wt(l.type,l.children,l.positions,l.length,l.propValues.concat([[sh,this.stoppedAt]]))),l}let e=this.inner[this.innerDone],i=e.parse.advance();if(i){this.innerDone++;let l=Object.assign(Object.create(null),e.target.props);l[qe.mounted.id]=new Sl(i,e.overlay,e.parser),e.target.props=l}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].from<e&&(e=Math.min(e,this.inner[i].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].parse.stopAt(e)}startInner(){let e=new rL(this.fragments),i=null,l=null,a=new yc(new ln(this.baseTree,this.ranges[0].from,0,null),Rt.IncludeAnonymous|Rt.IgnoreMounts);e:for(let c,u;;){let f=!0,d;if(this.stoppedAt!=null&&a.from>=this.stoppedAt)f=!1;else if(e.hasNode(a)){if(i){let h=i.mounts.find(m=>m.frag.from<=a.from&&m.frag.to>=a.to&&m.mount.overlay);if(h)for(let m of h.mount.overlay){let p=m.from+h.pos,y=m.to+h.pos;p>=a.from&&y<=a.to&&!i.ranges.some(b=>b.from<y&&b.to>p)&&i.ranges.push({from:p,to:y})}}f=!1}else if(l&&(u=tL(l.ranges,a.from,a.to)))f=u!=2;else if(!a.type.isAnonymous&&(c=this.nest(a,this.input))&&(a.from<a.to||!c.overlay)){a.tree||nL(a);let h=e.findMounts(a.from,c.parser);if(typeof c.overlay=="function")i=new _R(c.parser,c.overlay,h,this.inner.length,a.from,a.tree,i);else{let m=wb(this.ranges,c.overlay||(a.from<a.to?[new Jn(a.from,a.to)]:[]));m.length&&Sb(m),(m.length||!c.overlay)&&this.inner.push(new xb(c.parser,m.length?c.parser.startParse(this.input,Cb(h,m),m):c.parser.startParse(""),c.overlay?c.overlay.map(p=>new Jn(p.from-a.from,p.to-a.from)):null,a.tree,m.length?m[0].from:a.from)),c.overlay?m.length&&(l={ranges:m,depth:0,prev:l}):f=!1}}else if(i&&(d=i.predicate(a))&&(d===!0&&(d=new Jn(a.from,a.to)),d.from<d.to)){let h=i.ranges.length-1;h>=0&&i.ranges[h].to==d.from?i.ranges[h]={from:i.ranges[h].from,to:d.to}:i.ranges.push(d)}if(f&&a.firstChild())i&&i.depth++,l&&l.depth++;else for(;!a.nextSibling();){if(!a.parent())break e;if(i&&!--i.depth){let h=wb(this.ranges,i.ranges);h.length&&(Sb(h),this.inner.splice(i.index,0,new xb(i.parser,i.parser.startParse(this.input,Cb(i.mounts,h),h),i.ranges.map(m=>new Jn(m.from-i.start,m.to-i.start)),i.target,h[0].from))),i=i.prev}l&&!--l.depth&&(l=l.prev)}}}}function tL(s,e,i){for(let l of s){if(l.from>=i)break;if(l.to>e)return l.from<=e&&l.to>=i?2:1}return 0}function Eb(s,e,i,l,a,c){if(e<i){let u=s.buffer[e+1];l.push(s.slice(e,i,u)),a.push(u-c)}}function nL(s){let{node:e}=s,i=[],l=e.context.buffer;do i.push(s.index),s.parent();while(!s.tree);let a=s.tree,c=a.children.indexOf(l),u=a.children[c],f=u.buffer,d=[c];function h(m,p,y,b,x,A){let E=i[A],w=[],k=[];Eb(u,m,E,w,k,b);let L=f[E+1],z=f[E+2];d.push(w.length);let U=A?h(E+4,f[E+3],u.set.types[f[E]],L,z-L,A-1):e.toTree();return w.push(U),k.push(L-b),Eb(u,f[E+3],p,w,k,b),new wt(y,w,k,x)}a.children[c]=h(0,f.length,bn.none,0,u.length,i.length-1);for(let m of d){let p=s.tree.children[m],y=s.tree.positions[m];s.yield(new ln(p,y+s.from,m,s._tree))}}class Ab{constructor(e,i){this.offset=i,this.done=!1,this.cursor=e.cursor(Rt.IncludeAnonymous|Rt.IgnoreMounts)}moveTo(e){let{cursor:i}=this,l=e-this.offset;for(;!this.done&&i.from<l;)i.to>=e&&i.enter(l,1,Rt.IgnoreOverlays|Rt.ExcludeBuffers)||i.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let i=this.cursor.tree;;){if(i==e.tree)return!0;if(i.children.length&&i.positions[0]==0&&i.children[0]instanceof wt)i=i.children[0];else break}return!1}}class rL{constructor(e){var i;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let l=this.curFrag=e[0];this.curTo=(i=l.tree.prop(sh))!==null&&i!==void 0?i:l.to,this.inner=new Ab(l.tree,-l.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let i=this.curFrag=this.fragments[this.fragI];this.curTo=(e=i.tree.prop(sh))!==null&&e!==void 0?e:i.to,this.inner=new Ab(i.tree,-i.offset)}}findMounts(e,i){var l;let a=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let c=this.inner.cursor.node;c;c=c.parent){let u=(l=c.tree)===null||l===void 0?void 0:l.prop(qe.mounted);if(u&&u.parser==i)for(let f=this.fragI;f<this.fragments.length;f++){let d=this.fragments[f];if(d.from>=c.to)break;d.tree==this.curFrag.tree&&a.push({frag:d,pos:c.from-d.offset,mount:u})}}}return a}}function wb(s,e){let i=null,l=e;for(let a=1,c=0;a<s.length;a++){let u=s[a-1].to,f=s[a].from;for(;c<l.length;c++){let d=l[c];if(d.from>=f)break;d.to<=u||(i||(l=i=e.slice()),d.from<u?(i[c]=new Jn(d.from,u),d.to>f&&i.splice(c+1,0,new Jn(f,d.to))):d.to>f?i[c--]=new Jn(f,d.to):i.splice(c--,1))}}return l}function iL(s,e,i,l){let a=0,c=0,u=!1,f=!1,d=-1e9,h=[];for(;;){let m=a==s.length?1e9:u?s[a].to:s[a].from,p=c==e.length?1e9:f?e[c].to:e[c].from;if(u!=f){let y=Math.max(d,i),b=Math.min(m,p,l);y<b&&h.push(new Jn(y,b))}if(d=Math.min(m,p),d==1e9)break;m==d&&(u?(u=!1,a++):u=!0),p==d&&(f?(f=!1,c++):f=!0)}return h}function Cb(s,e){let i=[];for(let{pos:l,mount:a,frag:c}of s){let u=l+(a.overlay?a.overlay[0].from:0),f=u+a.tree.length,d=Math.max(c.from,u),h=Math.min(c.to,f);if(a.overlay){let m=a.overlay.map(y=>new Jn(y.from+l,y.to+l)),p=iL(e,m,d,h);for(let y=0,b=d;;y++){let x=y==p.length,A=x?h:p[y].from;if(A>b&&i.push(new ci(b,A,a.tree,-u,c.from>=b||c.openStart,c.to<=A||c.openEnd)),x)break;b=p[y].to}}else i.push(new ci(d,h,a.tree,-u,c.from>=u||c.openStart,c.to<=f||c.openEnd))}return i}let sL=0;class Xn{constructor(e,i,l,a){this.name=e,this.set=i,this.base=l,this.modified=a,this.id=sL++}toString(){let{name:e}=this;for(let i of this.modified)i.name&&(e=`${i.name}(${e})`);return e}static define(e,i){let l=typeof e=="string"?e:"?";if(e instanceof Xn&&(i=e),i?.base)throw new Error("Can not derive from a modified tag");let a=new Xn(l,[],null,[]);if(a.set.push(a),i)for(let c of i.set)a.set.push(c);return a}static defineModifier(e){let i=new bc(e);return l=>l.modified.indexOf(i)>-1?l:bc.get(l.base||l,l.modified.concat(i).sort((a,c)=>a.id-c.id))}}let oL=0;class bc{constructor(e){this.name=e,this.instances=[],this.id=oL++}static get(e,i){if(!i.length)return e;let l=i[0].instances.find(f=>f.base==e&&lL(i,f.modified));if(l)return l;let a=[],c=new Xn(e.name,a,e,i);for(let f of i)f.instances.push(c);let u=aL(i);for(let f of e.set)if(!f.modified.length)for(let d of u)a.push(bc.get(f,d));return c}}function lL(s,e){return s.length==e.length&&s.every((i,l)=>i==e[l])}function aL(s){let e=[[]];for(let i=0;i<s.length;i++)for(let l=0,a=e.length;l<a;l++)e.push(e[l].concat(s[i]));return e.sort((i,l)=>l.length-i.length)}function cL(s){let e=Object.create(null);for(let i in s){let l=s[i];Array.isArray(l)||(l=[l]);for(let a of i.split(" "))if(a){let c=[],u=2,f=a;for(let p=0;;){if(f=="..."&&p>0&&p+3==a.length){u=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(f);if(!y)throw new RangeError("Invalid path: "+a);if(c.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),p+=y[0].length,p==a.length)break;let b=a[p++];if(p==a.length&&b=="!"){u=0;break}if(b!="/")throw new RangeError("Invalid path: "+a);f=a.slice(p)}let d=c.length-1,h=c[d];if(!h)throw new RangeError("Invalid path: "+a);let m=new xc(l,u,d>0?c.slice(0,d):null);e[h]=m.sort(e[h])}}return Ob.add(e)}const Ob=new qe;class xc{constructor(e,i,l,a){this.tags=e,this.mode=i,this.context=l,this.next=a}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}xc.empty=new xc([],2,null);function kb(s,e){let i=Object.create(null);for(let c of s)if(!Array.isArray(c.tag))i[c.tag.id]=c.class;else for(let u of c.tag)i[u.id]=c.class;let{scope:l,all:a=null}=e||{};return{style:c=>{let u=a;for(let f of c)for(let d of f.set){let h=i[d.id];if(h){u=u?u+" "+h:h;break}}return u},scope:l}}function uL(s,e){let i=null;for(let l of s){let a=l.style(e);a&&(i=i?i+" "+a:a)}return i}function Pb(s,e,i,l=0,a=s.length){let c=new fL(l,Array.isArray(e)?e:[e],i);c.highlightRange(s.cursor(),l,a,"",c.highlighters),c.flush(a)}function o3(s,e,i,l,a,c=0,u=s.length){let f=c;function d(h,m){if(!(h<=f)){for(let p=s.slice(f,h),y=0;;){let b=p.indexOf(`
`,y),x=b<0?p.length:b;if(x>y&&l(p.slice(y,x),m),b<0)break;a(),y=b+1}f=h}}Pb(e,i,(h,m,p)=>{d(h,""),d(m,p)},c,u),d(u,"")}class fL{constructor(e,i,l){this.at=e,this.highlighters=i,this.span=l,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,l,a,c){let{type:u,from:f,to:d}=e;if(f>=l||d<=i)return;u.isTop&&(c=this.highlighters.filter(b=>!b.scope||b.scope(u)));let h=a,m=dL(e)||xc.empty,p=uL(c,m.tags);if(p&&(h&&(h+=" "),h+=p,m.mode==1&&(a+=(a?" ":"")+p)),this.startSpan(Math.max(i,f),h),m.opaque)return;let y=e.tree&&e.tree.prop(qe.mounted);if(y&&y.overlay){let b=e.node.enter(y.overlay[0].from+f,1),x=this.highlighters.filter(E=>!E.scope||E.scope(y.tree.type)),A=e.firstChild();for(let E=0,w=f;;E++){let k=E<y.overlay.length?y.overlay[E]:null,L=k?k.from+f:d,z=Math.max(i,w),U=Math.min(l,L);if(z<U&&A)for(;e.from<U&&(this.highlightRange(e,z,U,a,c),this.startSpan(Math.min(U,e.to),h),!(e.to>=L||!e.nextSibling())););if(!k||L>l)break;w=k.to+f,w>i&&(this.highlightRange(b.cursor(),Math.max(i,k.from+f),Math.min(l,w),"",x),this.startSpan(Math.min(l,w),h))}A&&e.parent()}else if(e.firstChild()){y&&(a="");do if(!(e.to<=i)){if(e.from>=l)break;this.highlightRange(e,i,l,a,c),this.startSpan(Math.min(l,e.to),h)}while(e.nextSibling());e.parent()}}}function dL(s){let e=s.type.prop(Ob);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const Ae=Xn.define,Sc=Ae(),$i=Ae(),Tb=Ae($i),Db=Ae($i),ji=Ae(),Ec=Ae(ji),oh=Ae(ji),Lr=Ae(),as=Ae(Lr),Fr=Ae(),Nr=Ae(),lh=Ae(),Al=Ae(lh),Ac=Ae(),ce={comment:Sc,lineComment:Ae(Sc),blockComment:Ae(Sc),docComment:Ae(Sc),name:$i,variableName:Ae($i),typeName:Tb,tagName:Ae(Tb),propertyName:Db,attributeName:Ae(Db),className:Ae($i),labelName:Ae($i),namespace:Ae($i),macroName:Ae($i),literal:ji,string:Ec,docString:Ae(Ec),character:Ae(Ec),attributeValue:Ae(Ec),number:oh,integer:Ae(oh),float:Ae(oh),bool:Ae(ji),regexp:Ae(ji),escape:Ae(ji),color:Ae(ji),url:Ae(ji),keyword:Fr,self:Ae(Fr),null:Ae(Fr),atom:Ae(Fr),unit:Ae(Fr),modifier:Ae(Fr),operatorKeyword:Ae(Fr),controlKeyword:Ae(Fr),definitionKeyword:Ae(Fr),moduleKeyword:Ae(Fr),operator:Nr,derefOperator:Ae(Nr),arithmeticOperator:Ae(Nr),logicOperator:Ae(Nr),bitwiseOperator:Ae(Nr),compareOperator:Ae(Nr),updateOperator:Ae(Nr),definitionOperator:Ae(Nr),typeOperator:Ae(Nr),controlOperator:Ae(Nr),punctuation:lh,separator:Ae(lh),bracket:Al,angleBracket:Ae(Al),squareBracket:Ae(Al),paren:Ae(Al),brace:Ae(Al),content:Lr,heading:as,heading1:Ae(as),heading2:Ae(as),heading3:Ae(as),heading4:Ae(as),heading5:Ae(as),heading6:Ae(as),contentSeparator:Ae(Lr),list:Ae(Lr),quote:Ae(Lr),emphasis:Ae(Lr),strong:Ae(Lr),link:Ae(Lr),monospace:Ae(Lr),strikethrough:Ae(Lr),inserted:Ae(),deleted:Ae(),changed:Ae(),invalid:Ae(),meta:Ac,documentMeta:Ae(Ac),annotation:Ae(Ac),processingInstruction:Ae(Ac),definition:Xn.defineModifier("definition"),constant:Xn.defineModifier("constant"),function:Xn.defineModifier("function"),standard:Xn.defineModifier("standard"),local:Xn.defineModifier("local"),special:Xn.defineModifier("special")};for(let s in ce){let e=ce[s];e instanceof Xn&&(e.name=s)}const l3=kb([{tag:ce.link,class:"tok-link"},{tag:ce.heading,class:"tok-heading"},{tag:ce.emphasis,class:"tok-emphasis"},{tag:ce.strong,class:"tok-strong"},{tag:ce.keyword,class:"tok-keyword"},{tag:ce.atom,class:"tok-atom"},{tag:ce.bool,class:"tok-bool"},{tag:ce.url,class:"tok-url"},{tag:ce.labelName,class:"tok-labelName"},{tag:ce.inserted,class:"tok-inserted"},{tag:ce.deleted,class:"tok-deleted"},{tag:ce.literal,class:"tok-literal"},{tag:ce.string,class:"tok-string"},{tag:ce.number,class:"tok-number"},{tag:[ce.regexp,ce.escape,ce.special(ce.string)],class:"tok-string2"},{tag:ce.variableName,class:"tok-variableName"},{tag:ce.local(ce.variableName),class:"tok-variableName tok-local"},{tag:ce.definition(ce.variableName),class:"tok-variableName tok-definition"},{tag:ce.special(ce.variableName),class:"tok-variableName2"},{tag:ce.definition(ce.propertyName),class:"tok-propertyName tok-definition"},{tag:ce.typeName,class:"tok-typeName"},{tag:ce.namespace,class:"tok-namespace"},{tag:ce.className,class:"tok-className"},{tag:ce.macroName,class:"tok-macroName"},{tag:ce.propertyName,class:"tok-propertyName"},{tag:ce.operator,class:"tok-operator"},{tag:ce.comment,class:"tok-comment"},{tag:ce.meta,class:"tok-meta"},{tag:ce.invalid,class:"tok-invalid"},{tag:ce.punctuation,class:"tok-punctuation"}]);var ah;const cs=new qe;function Mb(s){return Oe.define({combine:s?e=>e.concat(s):void 0})}const hL=new qe;class Dn{constructor(e,i,l=[],a=""){this.data=e,this.name=a,rt.prototype.hasOwnProperty("tree")||Object.defineProperty(rt.prototype,"tree",{get(){return Yt(this)}}),this.parser=i,this.extension=[Wi.of(this),rt.languageData.of((c,u,f)=>{let d=Ib(c,u,f),h=d.type.prop(cs);if(!h)return[];let m=c.facet(h),p=d.type.prop(hL);if(p){let y=d.resolve(u-d.from,f);for(let b of p)if(b.test(y,c)){let x=c.facet(b.facet);return b.type=="replace"?x:x.concat(m)}}return m})].concat(l)}isActiveAt(e,i,l=-1){return Ib(e,i,l).type.prop(cs)==this.data}findRegions(e){let i=e.facet(Wi);if(i?.data==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let l=[],a=(c,u)=>{if(c.prop(cs)==this.data){l.push({from:u,to:u+c.length});return}let f=c.prop(qe.mounted);if(f){if(f.tree.prop(cs)==this.data){if(f.overlay)for(let d of f.overlay)l.push({from:d.from+u,to:d.to+u});else l.push({from:u,to:u+c.length});return}else if(f.overlay){let d=l.length;if(a(f.tree,f.overlay[0].from+u),l.length>d)return}}for(let d=0;d<c.children.length;d++){let h=c.children[d];h instanceof wt&&a(h,c.positions[d]+u)}};return a(Yt(e),0),l}get allowsNesting(){return!0}}Dn.setState=He.define();function Ib(s,e,i){let l=s.facet(Wi),a=Yt(s).topNode;if(!l||l.allowsNesting)for(let c=a;c;c=c.enter(e,i,Rt.ExcludeBuffers))c.type.isTop&&(a=c);return a}class ch extends Dn{constructor(e,i,l){super(e,i,[],l),this.parser=i}static define(e){let i=Mb(e.languageData);return new ch(i,e.parser.configure({props:[cs.add(l=>l.isTop?i:void 0)]}),e.name)}configure(e,i){return new ch(this.data,this.parser.configure(e),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Yt(s){let e=s.field(Dn.state,!1);return e?e.tree:wt.empty}function mL(s,e,i=50){var l;let a=(l=s.field(Dn.state,!1))===null||l===void 0?void 0:l.context;if(!a)return null;let c=a.viewport;a.updateViewport({from:0,to:e});let u=a.isDone(e)||a.work(i,e)?a.tree:null;return a.updateViewport(c),u}function a3(s,e=s.doc.length){var i;return((i=s.field(Dn.state,!1))===null||i===void 0?void 0:i.context.isDone(e))||!1}function c3(s,e=s.viewport.to,i=100){let l=mL(s.state,e,i);return l!=Yt(s.state)&&s.dispatch({}),!!l}function u3(s){var e;return((e=s.plugin(Fb))===null||e===void 0?void 0:e.isWorking())||!1}class pL{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let l=this.cursorPos-this.string.length;return e<l||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-l,i-l)}}let wl=null;class Hs{constructor(e,i,l=[],a,c,u,f,d){this.parser=e,this.state=i,this.fragments=l,this.tree=a,this.treeLen=c,this.viewport=u,this.skipped=f,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(e,i,l){return new Hs(e,i,[],wt.empty,0,l,[],null)}startParse(){return this.parser.startParse(new pL(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=wt.empty&&this.isDone(i??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var l;if(typeof e=="number"){let a=Date.now()+e;e=()=>Date.now()>a}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let a=this.parse.advance();if(a)if(this.fragments=this.withoutTempSkipped(ci.addTree(a,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(l=this.parse.stoppedAt)!==null&&l!==void 0?l:this.state.doc.length,this.tree=a,this.parse=null,this.treeLen<(i??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(ci.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=wl;wl=this;try{return e()}finally{wl=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=Rb(e,i.from,i.to);return e}changes(e,i){let{fragments:l,tree:a,treeLen:c,viewport:u,skipped:f}=this;if(this.takeTree(),!e.empty){let d=[];if(e.iterChangedRanges((h,m,p,y)=>d.push({fromA:h,toA:m,fromB:p,toB:y})),l=ci.applyChanges(l,d),a=wt.empty,c=0,u={from:e.mapPos(u.from,-1),to:e.mapPos(u.to,1)},this.skipped.length){f=[];for(let h of this.skipped){let m=e.mapPos(h.from,1),p=e.mapPos(h.to,-1);m<p&&f.push({from:m,to:p})}}}return new Hs(this.parser,i,l,a,c,u,f,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let l=0;l<this.skipped.length;l++){let{from:a,to:c}=this.skipped[l];a<e.to&&c>e.from&&(this.fragments=Rb(this.fragments,a,c),this.skipped.splice(l--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends bb{createParse(i,l,a){let c=a[0].from,u=a[a.length-1].to;return{parsedPos:c,advance(){let d=wl;if(d){for(let h of a)d.tempSkipped.push(h);e&&(d.scheduleOn=d.scheduleOn?Promise.all([d.scheduleOn,e]):e)}return this.parsedPos=u,new wt(bn.none,[],[],u-c)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return wl}}function Rb(s,e,i){return ci.applyChanges(s,[{fromA:e,toA:i,fromB:e,toB:i}])}class Ks{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),l=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,l)||i.takeTree(),new Ks(i)}static init(e){let i=Math.min(3e3,e.doc.length),l=Hs.create(e.facet(Wi).parser,e,{from:0,to:i});return l.work(20,i)||l.takeTree(),new Ks(l)}}Dn.state=jt.define({create:Ks.init,update(s,e){for(let i of e.effects)if(i.is(Dn.setState))return i.value;return e.startState.facet(Wi)!=e.state.facet(Wi)?Ks.init(e.state):s.apply(e)}});let Lb=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Lb=s=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const uh=typeof navigator<"u"&&(!((ah=navigator.scheduling)===null||ah===void 0)&&ah.isInputPending)?()=>navigator.scheduling.isInputPending():null,Fb=It.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(Dn.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(Dn.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=Lb(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:l,viewport:{to:a}}=this.view,c=l.field(Dn.state);if(c.tree==c.context.tree&&c.context.isDone(a+1e5))return;let u=Date.now()+Math.min(this.chunkBudget,100,e&&!uh?Math.max(25,e.timeRemaining()-5):1e9),f=c.context.treeLen<a&&l.doc.length>a+1e3,d=c.context.work(()=>uh&&uh()||Date.now()>u,a+(f?0:1e5));this.chunkBudget-=Date.now()-i,(d||this.chunkBudget<=0)&&(c.context.takeTree(),this.view.dispatch({effects:Dn.setState.of(new Ks(c.context))})),this.chunkBudget>0&&!(d&&!f)&&this.scheduleWork(),this.checkAsyncSchedule(c.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>Tn(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Wi=Oe.define({combine(s){return s.length?s[0]:null},enables:s=>[Dn.state,Fb,Se.contentAttributes.compute([s],e=>{let i=e.facet(s);return i&&i.name?{"data-language":i.name}:{}})]});class f3{constructor(e,i=[]){this.language=e,this.support=i,this.extension=[e,i]}}class Nb{constructor(e,i,l,a,c,u=void 0){this.name=e,this.alias=i,this.extensions=l,this.filename=a,this.loadFunc=c,this.support=u,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:i,support:l}=e;if(!i){if(!l)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");i=()=>Promise.resolve(l)}return new Nb(e.name,(e.alias||[]).concat(e.name).map(a=>a.toLowerCase()),e.extensions||[],e.filename,i,l)}static matchFilename(e,i){for(let a of e)if(a.filename&&a.filename.test(i))return a;let l=/\.([^.]+)$/.exec(i);if(l){for(let a of e)if(a.extensions.indexOf(l[1])>-1)return a}return null}static matchLanguageName(e,i,l=!0){i=i.toLowerCase();for(let a of e)if(a.alias.some(c=>c==i))return a;if(l)for(let a of e)for(let c of a.alias){let u=i.indexOf(c);if(u>-1&&(c.length>2||!/\w/.test(i[u-1])&&!/\w/.test(i[u+c.length])))return a}return null}}const gL=Oe.define(),wc=Oe.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function us(s){let e=s.facet(wc);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Gs(s,e){let i="",l=s.tabSize,a=s.facet(wc)[0];if(a=="	"){for(;e>=l;)i+="	",e-=l;a=" "}for(let c=0;c<e;c++)i+=a;return i}function Cc(s,e){s instanceof rt&&(s=new Cl(s));for(let l of s.state.facet(gL)){let a=l(s,e);if(a!==void 0)return a}let i=Yt(s.state);return i.length>=e?yL(s,i,e):null}function d3(s,e,i){let l=Object.create(null),a=new Cl(s,{overrideIndentation:u=>{var f;return(f=l[u])!==null&&f!==void 0?f:-1}}),c=[];for(let u=e;u<=i;){let f=s.doc.lineAt(u);u=f.to+1;let d=Cc(a,f.from);if(d==null)continue;/\S/.test(f.text)||(d=0);let h=/^\s*/.exec(f.text)[0],m=Gs(s,d);h!=m&&(l[f.from]=d,c.push({from:f.from,to:f.from+h.length,insert:m}))}return s.changes(c)}class Cl{constructor(e,i={}){this.state=e,this.options=i,this.unit=us(e)}lineAt(e,i=1){let l=this.state.doc.lineAt(e),{simulateBreak:a,simulateDoubleBreak:c}=this.options;return a!=null&&a>=l.from&&a<=l.to?c&&a==e?{text:"",from:e}:(i<0?a<e:a<=e)?{text:l.text.slice(a-l.from),from:a}:{text:l.text.slice(0,a-l.from),from:l.from}:l}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:l,from:a}=this.lineAt(e,i);return l.slice(e-a,Math.min(l.length,e+100-a))}column(e,i=1){let{text:l,from:a}=this.lineAt(e,i),c=this.countColumn(l,e-a),u=this.options.overrideIndentation?this.options.overrideIndentation(a):-1;return u>-1&&(c+=u-this.countColumn(l,l.search(/\S|$/))),c}countColumn(e,i=e.length){return Fs(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:l,from:a}=this.lineAt(e,i),c=this.options.overrideIndentation;if(c){let u=c(a);if(u>-1)return u}return this.countColumn(l,l.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Bb=new qe;function yL(s,e,i){let l=e.resolveStack(i),a=l.node.enterUnfinishedNodesBefore(i);if(a!=l.node){let c=[];for(let u=a;u!=l.node;u=u.parent)c.push(u);for(let u=c.length-1;u>=0;u--)l={node:c[u],next:l}}return $b(l,s,i)}function $b(s,e,i){for(let l=s;l;l=l.next){let a=bL(l.node);if(a)return a(fh.create(e,i,l))}return 0}function vL(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function bL(s){let e=s.type.prop(Bb);if(e)return e;let i=s.firstChild,l;if(i&&(l=i.type.prop(qe.closedBy))){let a=s.lastChild,c=a&&l.indexOf(a.name)>-1;return u=>jb(u,!0,1,void 0,c&&!vL(u)?a.from:void 0)}return s.parent==null?xL:null}function xL(){return 0}class fh extends Cl{constructor(e,i,l){super(e.state,e.options),this.base=e,this.pos=i,this.context=l}get node(){return this.context.node}static create(e,i,l){return new fh(e,i,l)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let l=e.resolve(i.from);for(;l.parent&&l.parent.from==l.from;)l=l.parent;if(SL(l,e))break;i=this.state.doc.lineAt(l.from)}return this.lineIndent(i.from)}continue(){return $b(this.context.next,this.base,this.pos)}}function SL(s,e){for(let i=e;i;i=i.parent)if(s==i)return!0;return!1}function EL(s){let e=s.node,i=e.childAfter(e.from),l=e.lastChild;if(!i)return null;let a=s.options.simulateBreak,c=s.state.doc.lineAt(i.from),u=a==null||a<=c.from?c.to:Math.min(c.to,a);for(let f=i.to;;){let d=e.childAfter(f);if(!d||d==l)return null;if(!d.type.isSkipped){if(d.from>=u)return null;let h=/^ */.exec(c.text.slice(i.to-c.from))[0].length;return{from:i.from,to:i.to+h}}f=d.to}}function h3({closing:s,align:e=!0,units:i=1}){return l=>jb(l,e,i,s)}function jb(s,e,i,l,a){let c=s.textAfter,u=c.match(/^\s*/)[0].length,f=l&&c.slice(u,u+l.length)==l||a==s.pos+u,d=e?EL(s):null;return d?f?s.column(d.from):s.column(d.to):s.baseIndent+(f?0:s.unit*i)}const m3=s=>s.baseIndent;function p3({except:s,units:e=1}={}){return i=>{let l=s&&s.test(i.textAfter);return i.baseIndent+(l?0:e*i.unit)}}const AL=200;function wL(){return rt.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let i=s.newDoc,{head:l}=s.newSelection.main,a=i.lineAt(l);if(l>a.from+AL)return s;let c=i.sliceString(a.from,l);if(!e.some(h=>h.test(c)))return s;let{state:u}=s,f=-1,d=[];for(let{head:h}of u.selection.ranges){let m=u.doc.lineAt(h);if(m.from==f)continue;f=m.from;let p=Cc(u,m.from);if(p==null)continue;let y=/^\s*/.exec(m.text)[0],b=Gs(u,p);y!=b&&d.push({from:m.from,to:m.from+y.length,insert:b})}return d.length?[s,{changes:d,sequential:!0}]:s})}const CL=Oe.define(),OL=new qe;function g3(s){let e=s.firstChild,i=s.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?s.to:i.from}:null}function kL(s,e,i){let l=Yt(s);if(l.length<i)return null;let a=l.resolveStack(i,1),c=null;for(let u=a;u;u=u.next){let f=u.node;if(f.to<=i||f.from>i)continue;if(c&&f.from<e)break;let d=f.type.prop(OL);if(d&&(f.to<l.length-50||l.length==s.doc.length||!PL(f))){let h=d(f,s);h&&h.from<=i&&h.from>=e&&h.to>i&&(c=h)}}return c}function PL(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function Ol(s,e,i){for(let l of s.facet(CL)){let a=l(s,e,i);if(a)return a}return kL(s,e,i)}function Wb(s,e){let i=e.mapPos(s.from,1),l=e.mapPos(s.to,-1);return i>=l?void 0:{from:i,to:l}}const kl=He.define({map:Wb}),Ys=He.define({map:Wb});function dh(s){let e=[];for(let{head:i}of s.state.selection.ranges)e.some(l=>l.from<=i&&l.to>=i)||e.push(s.lineBlockAt(i));return e}const Vi=jt.define({create(){return Re.none},update(s,e){s=s.map(e.changes);for(let i of e.effects)if(i.is(kl)&&!TL(s,i.value.from,i.value.to)){let{preparePlaceholder:l}=e.state.facet(mh),a=l?Re.replace({widget:new BL(l(e.state,i.value))}):Ub;s=s.update({add:[a.range(i.value.from,i.value.to)]})}else i.is(Ys)&&(s=s.update({filter:(l,a)=>i.value.from!=l||i.value.to!=a,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:l}=e.selection.main;s.between(l,l,(a,c)=>{a<l&&c>l&&(i=!0)}),i&&(s=s.update({filterFrom:l,filterTo:l,filter:(a,c)=>c<=l||a>=l}))}return s},provide:s=>Se.decorations.from(s),toJSON(s,e){let i=[];return s.between(0,e.doc.length,(l,a)=>{i.push(l,a)}),i},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<s.length;){let l=s[i++],a=s[i++];if(typeof l!="number"||typeof a!="number")throw new RangeError("Invalid JSON for fold state");e.push(Ub.range(l,a))}return Re.set(e,!0)}});function y3(s){return s.field(Vi,!1)||RangeSet.empty}function Pl(s,e,i){var l;let a=null;return(l=s.field(Vi,!1))===null||l===void 0||l.between(e,i,(c,u)=>{(!a||a.from>c)&&(a={from:c,to:u})}),a}function TL(s,e,i){let l=!1;return s.between(e,e,(a,c)=>{a==e&&c==i&&(l=!0)}),l}function hh(s,e){return s.field(Vi,!1)?e:e.concat(He.appendConfig.of(Vb()))}const DL=s=>{for(let e of dh(s)){let i=Ol(s.state,e.from,e.to);if(i)return s.dispatch({effects:hh(s.state,[kl.of(i),Oc(s,i)])}),!0}return!1},ML=s=>{if(!s.state.field(Vi,!1))return!1;let e=[];for(let i of dh(s)){let l=Pl(s.state,i.from,i.to);l&&e.push(Ys.of(l),Oc(s,l,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function Oc(s,e,i=!0){let l=s.state.doc.lineAt(e.from).number,a=s.state.doc.lineAt(e.to).number;return Se.announce.of(`${s.state.phrase(i?"Folded lines":"Unfolded lines")} ${l} ${s.state.phrase("to")} ${a}.`)}const IL=s=>{let{state:e}=s,i=[];for(let l=0;l<e.doc.length;){let a=s.lineBlockAt(l),c=Ol(e,a.from,a.to);c&&i.push(kl.of(c)),l=(c?s.lineBlockAt(c.to):a).to+1}return i.length&&s.dispatch({effects:hh(s.state,i)}),!!i.length},RL=s=>{let e=s.state.field(Vi,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,s.state.doc.length,(l,a)=>{i.push(Ys.of({from:l,to:a}))}),s.dispatch({effects:i}),!0};function LL(s,e){for(let i=e;;){let l=Ol(s.state,i.from,i.to);if(l&&l.to>e.from)return l;if(!i.from)return null;i=s.lineBlockAt(i.from-1)}}const v3=s=>{let e=[];for(let i of dh(s)){let l=Pl(s.state,i.from,i.to);if(l)e.push(Ys.of(l),Oc(s,l,!1));else{let a=LL(s,i);a&&e.push(kl.of(a),Oc(s,a))}}return e.length>0&&s.dispatch({effects:hh(s.state,e)}),!!e.length},FL=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:DL},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ML},{key:"Ctrl-Alt-[",run:IL},{key:"Ctrl-Alt-]",run:RL}],NL={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},mh=Oe.define({combine(s){return lr(s,NL)}});function Vb(s){let e=[Vi,WL];return s&&e.push(mh.of(s)),e}function zb(s,e){let{state:i}=s,l=i.facet(mh),a=u=>{let f=s.lineBlockAt(s.posAtDOM(u.target)),d=Pl(s.state,f.from,f.to);d&&s.dispatch({effects:Ys.of(d)}),u.preventDefault()};if(l.placeholderDOM)return l.placeholderDOM(s,a,e);let c=document.createElement("span");return c.textContent=l.placeholderText,c.setAttribute("aria-label",i.phrase("folded code")),c.title=i.phrase("unfold"),c.className="cm-foldPlaceholder",c.onclick=a,c}const Ub=Re.replace({widget:new class extends Tr{toDOM(s){return zb(s,null)}}});class BL extends Tr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return zb(e,this.value)}}const $L={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ph extends Ir{constructor(e,i){super(),this.config=e,this.open=i}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=e.state.phrase(this.open?"Fold line":"Unfold line"),i}}function jL(s={}){let e=Object.assign(Object.assign({},$L),s),i=new ph(e,!0),l=new ph(e,!1),a=It.fromClass(class{constructor(u){this.from=u.viewport.from,this.markers=this.buildMarkers(u)}update(u){(u.docChanged||u.viewportChanged||u.startState.facet(Wi)!=u.state.facet(Wi)||u.startState.field(Vi,!1)!=u.state.field(Vi,!1)||Yt(u.startState)!=Yt(u.state)||e.foldingChanged(u))&&(this.markers=this.buildMarkers(u.view))}buildMarkers(u){let f=new kr;for(let d of u.viewportLineBlocks){let h=Pl(u.state,d.from,d.to)?l:Ol(u.state,d.from,d.to)?i:null;h&&f.add(d.from,d.from,h)}return f.finish()}}),{domEventHandlers:c}=e;return[a,ob({class:"cm-foldGutter",markers(u){var f;return((f=u.plugin(a))===null||f===void 0?void 0:f.markers)||it.empty},initialSpacer(){return new ph(e,!1)},domEventHandlers:Object.assign(Object.assign({},c),{click:(u,f,d)=>{if(c.click&&c.click(u,f,d))return!0;let h=Pl(u.state,f.from,f.to);if(h)return u.dispatch({effects:Ys.of(h)}),!0;let m=Ol(u.state,f.from,f.to);return m?(u.dispatch({effects:kl.of(m)}),!0):!1}})}),Vb()]}const WL=Se.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Tl{constructor(e,i){this.specs=e;let l;function a(f){let d=Di.newName();return(l||(l=Object.create(null)))["."+d]=f,d}const c=typeof i.all=="string"?i.all:i.all?a(i.all):void 0,u=i.scope;this.scope=u instanceof Dn?f=>f.prop(cs)==u.data:u?f=>f==u:void 0,this.style=kb(e.map(f=>({tag:f.tag,class:f.class||a(Object.assign({},f,{tag:null}))})),{all:c}).style,this.module=l?new Di(l):null,this.themeType=i.themeType}static define(e,i){return new Tl(e,i||{})}}const gh=Oe.define(),Hb=Oe.define({combine(s){return s.length?[s[0]]:null}});function kc(s){let e=s.facet(gh);return e.length?e:s.facet(Hb)}function Kb(s,e){let i=[zL],l;return s instanceof Tl&&(s.module&&i.push(Se.styleModule.of(s.module)),l=s.themeType),e?.fallback?i.push(Hb.of(s)):l?i.push(gh.computeN([Se.darkTheme],a=>a.facet(Se.darkTheme)==(l=="dark")?[s]:[])):i.push(gh.of(s)),i}function b3(s,e,i){let l=kc(s),a=null;if(l){for(let c of l)if(!c.scope||i&&c.scope(i)){let u=c.style(e);u&&(a=a?a+" "+u:u)}}return a}class VL{constructor(e){this.markCache=Object.create(null),this.tree=Yt(e.state),this.decorations=this.buildDeco(e,kc(e.state)),this.decoratedTo=e.viewport.to}update(e){let i=Yt(e.state),l=kc(e.state),a=l!=kc(e.startState),{viewport:c}=e.view,u=e.changes.mapPos(this.decoratedTo,1);i.length<c.to&&!a&&i.type==this.tree.type&&u>=c.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=u):(i!=this.tree||e.viewportChanged||a)&&(this.tree=i,this.decorations=this.buildDeco(e.view,l),this.decoratedTo=c.to)}buildDeco(e,i){if(!i||!this.tree.length)return Re.none;let l=new kr;for(let{from:a,to:c}of e.visibleRanges)Pb(this.tree,i,(u,f,d)=>{l.add(u,f,this.markCache[d]||(this.markCache[d]=Re.mark({class:d})))},a,c);return l.finish()}}const zL=oi.high(It.fromClass(VL,{decorations:s=>s.decorations})),UL=Tl.define([{tag:ce.meta,color:"#404740"},{tag:ce.link,textDecoration:"underline"},{tag:ce.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ce.emphasis,fontStyle:"italic"},{tag:ce.strong,fontWeight:"bold"},{tag:ce.strikethrough,textDecoration:"line-through"},{tag:ce.keyword,color:"#708"},{tag:[ce.atom,ce.bool,ce.url,ce.contentSeparator,ce.labelName],color:"#219"},{tag:[ce.literal,ce.inserted],color:"#164"},{tag:[ce.string,ce.deleted],color:"#a11"},{tag:[ce.regexp,ce.escape,ce.special(ce.string)],color:"#e40"},{tag:ce.definition(ce.variableName),color:"#00f"},{tag:ce.local(ce.variableName),color:"#30a"},{tag:[ce.typeName,ce.namespace],color:"#085"},{tag:ce.className,color:"#167"},{tag:[ce.special(ce.variableName),ce.macroName],color:"#256"},{tag:ce.definition(ce.propertyName),color:"#00c"},{tag:ce.comment,color:"#940"},{tag:ce.invalid,color:"#f00"}]),HL=Se.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Gb=1e4,Yb="()[]{}",Jb=Oe.define({combine(s){return lr(s,{afterCursor:!0,brackets:Yb,maxScanDistance:Gb,renderMatch:YL})}}),KL=Re.mark({class:"cm-matchingBracket"}),GL=Re.mark({class:"cm-nonmatchingBracket"});function YL(s){let e=[],i=s.matched?KL:GL;return e.push(i.range(s.start.from,s.start.to)),s.end&&e.push(i.range(s.end.from,s.end.to)),e}const JL=[jt.define({create(){return Re.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let i=[],l=e.state.facet(Jb);for(let a of e.state.selection.ranges){if(!a.empty)continue;let c=Br(e.state,a.head,-1,l)||a.head>0&&Br(e.state,a.head-1,1,l)||l.afterCursor&&(Br(e.state,a.head,1,l)||a.head<e.state.doc.length&&Br(e.state,a.head+1,-1,l));c&&(i=i.concat(l.renderMatch(c,e.state)))}return Re.set(i,!0)},provide:s=>Se.decorations.from(s)}),HL];function XL(s={}){return[Jb.of(s),JL]}const ZL=new qe;function yh(s,e,i){let l=s.prop(e<0?qe.openedBy:qe.closedBy);if(l)return l;if(s.name.length==1){let a=i.indexOf(s.name);if(a>-1&&a%2==(e<0?1:0))return[i[a+e]]}return null}function vh(s){let e=s.type.prop(ZL);return e?e(s.node):s}function Br(s,e,i,l={}){let a=l.maxScanDistance||Gb,c=l.brackets||Yb,u=Yt(s),f=u.resolveInner(e,i);for(let d=f;d;d=d.parent){let h=yh(d.type,i,c);if(h&&d.from<d.to){let m=vh(d);if(m&&(i>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return QL(s,e,i,d,m,h,c)}}return qL(s,e,i,u,f.type,a,c)}function QL(s,e,i,l,a,c,u){let f=l.parent,d={from:a.from,to:a.to},h=0,m=f?.cursor();if(m&&(i<0?m.childBefore(l.from):m.childAfter(l.to)))do if(i<0?m.to<=l.from:m.from>=l.to){if(h==0&&c.indexOf(m.type.name)>-1&&m.from<m.to){let p=vh(m);return{start:d,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(yh(m.type,i,u))h++;else if(yh(m.type,-i,u)){if(h==0){let p=vh(m);return{start:d,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}h--}}while(i<0?m.prevSibling():m.nextSibling());return{start:d,matched:!1}}function qL(s,e,i,l,a,c,u){let f=i<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),d=u.indexOf(f);if(d<0||d%2==0!=i>0)return null;let h={from:i<0?e-1:e,to:i>0?e+1:e},m=s.doc.iterRange(e,i>0?s.doc.length:0),p=0;for(let y=0;!m.next().done&&y<=c;){let b=m.value;i<0&&(y+=b.length);let x=e+y*i;for(let A=i>0?0:b.length-1,E=i>0?b.length:-1;A!=E;A+=i){let w=u.indexOf(b[A]);if(!(w<0||l.resolveInner(x+A,1).type!=a))if(w%2==0==i>0)p++;else{if(p==1)return{start:h,end:{from:x+A,to:x+A+1},matched:w>>1==d>>1};p--}}i>0&&(y+=b.length)}return m.done?{start:h,matched:!1}:null}function Xb(s,e,i,l=0,a=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let c=a;for(let u=l;u<e;u++)s.charCodeAt(u)==9?c+=i-c%i:c++;return c}class Zb{constructor(e,i,l,a){this.string=e,this.tabSize=i,this.indentUnit=l,this.overrideIndent=a,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let i=this.string.charAt(this.pos),l;if(typeof e=="string"?l=i==e:l=i&&(e instanceof RegExp?e.test(i):e(i)),l)return++this.pos,i}eatWhile(e){let i=this.pos;for(;this.eat(e););return this.pos>i}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let i=this.string.indexOf(e,this.pos);if(i>-1)return this.pos=i,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Xb(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Xb(this.string,null,this.tabSize)}match(e,i,l){if(typeof e=="string"){let a=u=>l?u.toLowerCase():u,c=this.string.substr(this.pos,e.length);return a(c)==a(e)?(i!==!1&&(this.pos+=e.length),!0):null}else{let a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&i!==!1&&(this.pos+=a[0].length),a)}}current(){return this.string.slice(this.start,this.pos)}}function _L(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||eF,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||xh}}function eF(s){if(typeof s!="object")return s;let e={};for(let i in s){let l=s[i];e[i]=l instanceof Array?l.slice():l}return e}const Qb=new WeakMap;class fs extends Dn{constructor(e){let i=Mb(e.languageData),l=_L(e),a,c=new class extends bb{createParse(u,f,d){return new nF(a,u,f,d)}};super(i,c,[],e.name),this.topNode=sF(i,this),a=this,this.streamParser=l,this.stateAfter=new qe({perNode:!0}),this.tokenTable=e.tokenTable?new r1(l.tokenTable):iF}static define(e){return new fs(e)}getIndent(e){let i,{overrideIndentation:l}=e.options;l&&(i=Qb.get(e.state),i!=null&&i<e.pos-1e4&&(i=void 0));let a=bh(this,e.node.tree,0,e.node.from,i??e.pos),c,u;if(a?(u=a.state,c=a.pos+1):(u=this.streamParser.startState(e.unit),c=0),e.pos-c>1e4)return null;for(;c<e.pos;){let d=e.state.doc.lineAt(c),h=Math.min(e.pos,d.to);if(d.length){let m=l?l(d.from):-1,p=new Zb(d.text,e.state.tabSize,e.unit,m<0?void 0:m);for(;p.pos<h-d.from;)_b(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==e.pos)break;c=d.to+1}let f=e.lineAt(e.pos);return l&&i==null&&Qb.set(e.state,f.from),this.streamParser.indent(u,/^\s*(.*)/.exec(f.text)[1],e)}get allowsNesting(){return!1}}function bh(s,e,i,l,a){let c=i>=l&&i+e.length<=a&&e.prop(s.stateAfter);if(c)return{state:s.streamParser.copyState(c),pos:i+e.length};for(let u=e.children.length-1;u>=0;u--){let f=e.children[u],d=i+e.positions[u],h=f instanceof wt&&d<a&&bh(s,f,d,l,a);if(h)return h}return null}function qb(s,e,i,l,a){if(a&&i<=0&&l>=e.length)return e;!a&&i==0&&e.type==s.topNode&&(a=!0);for(let c=e.children.length-1;c>=0;c--){let u=e.positions[c],f=e.children[c],d;if(u<l&&f instanceof wt){if(!(d=qb(s,f,i-u,l-u,a)))break;return a?new wt(e.type,e.children.slice(0,c).concat(d),e.positions.slice(0,c+1),u+d.length):d}}return null}function tF(s,e,i,l,a){for(let c of e){let u=c.from+(c.openStart?25:0),f=c.to-(c.openEnd?25:0),d=u<=i&&f>i&&bh(s,c.tree,0-c.offset,i,f),h;if(d&&d.pos<=l&&(h=qb(s,c.tree,i+c.offset,d.pos+c.offset,!1)))return{state:d.state,tree:h}}return{state:s.streamParser.startState(a?us(a):4),tree:wt.empty}}class nF{constructor(e,i,l,a){this.lang=e,this.input=i,this.fragments=l,this.ranges=a,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=a[a.length-1].to;let c=Hs.get(),u=a[0].from,{state:f,tree:d}=tF(e,l,u,this.to,c?.state);this.state=f,this.parsedPos=this.chunkStart=u+d.length;for(let h=0;h<d.children.length;h++)this.chunks.push(d.children[h]),this.chunkPos.push(d.positions[h]);c&&this.parsedPos<c.viewport.from-1e5&&a.some(h=>h.from<=c.viewport.from&&h.to>=c.viewport.from)&&(this.state=this.lang.streamParser.startState(us(c.state)),c.skipUntilInView(this.parsedPos,c.viewport.from),this.parsedPos=c.viewport.from),this.moveRangeIndex()}advance(){let e=Hs.get(),i=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),l=Math.min(i,this.chunkStart+2048);for(e&&(l=Math.min(l,e.viewport.to));this.parsedPos<l;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=i?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,i),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let i=this.input.chunk(e);if(this.input.lineChunks)i==`
`&&(i="");else{let l=i.indexOf(`
`);l>-1&&(i=i.slice(0,l))}return e+i.length<=this.to?i:i.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,i=this.lineAfter(e),l=e+i.length;for(let a=this.rangeIndex;;){let c=this.ranges[a].to;if(c>=l||(i=i.slice(0,c-(l-i.length)),a++,a==this.ranges.length))break;let u=this.ranges[a].from,f=this.lineAfter(u);i+=f,l=u+f.length}return{line:i,end:l}}skipGapsTo(e,i,l){for(;;){let a=this.ranges[this.rangeIndex].to,c=e+i;if(l>0?a>c:a>=c)break;let u=this.ranges[++this.rangeIndex].from;i+=u-a}return i}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,i,l,a){let c=4;if(this.ranges.length>1){a=this.skipGapsTo(i,a,1),i+=a;let f=this.chunk.length;a=this.skipGapsTo(l,a,-1),l+=a,c+=this.chunk.length-f}let u=this.chunk.length-4;return c==4&&u>=0&&this.chunk[u]==e&&this.chunk[u+2]==i?this.chunk[u+2]=l:this.chunk.push(e,i,l,c),a}parseLine(e){let{line:i,end:l}=this.nextLine(),a=0,{streamParser:c}=this.lang,u=new Zb(i,e?e.state.tabSize:4,e?us(e.state):2);if(u.eol())c.blankLine(this.state,u.indentUnit);else for(;!u.eol();){let f=_b(c.token,u,this.state);if(f&&(a=this.emitToken(this.lang.tokenTable.resolve(f),this.parsedPos+u.start,this.parsedPos+u.pos,a)),u.start>1e4)break}this.parsedPos=l,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=wt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:rF,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new wt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new wt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function _b(s,e,i){e.start=e.pos;for(let l=0;l<10;l++){let a=s(e,i);if(e.pos>e.start)return a}throw new Error("Stream parser failed to advance stream.")}const xh=Object.create(null),Dl=[bn.none],rF=new eh(Dl),e1=[],t1=Object.create(null),n1=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])n1[s]=i1(xh,e);class r1{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),n1)}resolve(e){return e?this.table[e]||(this.table[e]=i1(this.extra,e)):0}}const iF=new r1(xh);function Sh(s,e){e1.indexOf(s)>-1||(e1.push(s),console.warn(e))}function i1(s,e){let i=[];for(let f of e.split(" ")){let d=[];for(let h of f.split(".")){let m=s[h]||ce[h];m?typeof m=="function"?d.length?d=d.map(m):Sh(h,`Modifier ${h} used at start of tag`):d.length?Sh(h,`Tag ${h} used as modifier`):d=Array.isArray(m)?m:[m]:Sh(h,`Unknown highlighting tag ${h}`)}for(let h of d)i.push(h)}if(!i.length)return 0;let l=e.replace(/ /g,"_"),a=l+" "+i.map(f=>f.id),c=t1[a];if(c)return c.id;let u=t1[a]=bn.define({id:Dl.length,name:l,props:[cL({[l]:i})]});return Dl.push(u),u.id}function sF(s,e){let i=bn.define({id:Dl.length,name:"Document",props:[cs.add(()=>s),Bb.add(()=>l=>e.getIndent(l))],top:!0});return Dl.push(i),i}function s1(s){return s.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(s)}function o1(s){for(let e=s.iter();!e.next().done;)if(s1(e.value))return!0;return!1}function oF(s){let e=!1;return s.iterChanges((i,l,a,c,u)=>{!e&&o1(u)&&(e=!0)}),e}const Eh=Oe.define({combine:s=>s.some(e=>e)});function S3(s={}){let e=[lF];return s.alwaysIsolate&&e.push(Eh.of(!0)),e}const lF=It.fromClass(class{constructor(s){this.always=s.state.facet(Eh)||s.textDirection!=bt.LTR||s.state.facet(Se.perLineTextDirection),this.hasRTL=!this.always&&o1(s.state.doc),this.tree=Yt(s.state),this.decorations=this.always||this.hasRTL?l1(s,this.tree,this.always):Re.none}update(s){let e=s.state.facet(Eh)||s.view.textDirection!=bt.LTR||s.state.facet(Se.perLineTextDirection);if(!e&&!this.hasRTL&&oF(s.changes)&&(this.hasRTL=!0),!e&&!this.hasRTL)return;let i=Yt(s.state);(e!=this.always||i!=this.tree||s.docChanged||s.viewportChanged)&&(this.tree=i,this.always=e,this.decorations=l1(s.view,i,e))}},{provide:s=>{function e(i){var l,a;return(a=(l=i.plugin(s))===null||l===void 0?void 0:l.decorations)!==null&&a!==void 0?a:Re.none}return[Se.outerDecorations.of(e),oi.lowest(Se.bidiIsolatedRanges.of(e))]}});function l1(s,e,i){let l=new kr,a=s.visibleRanges;i||(a=aF(a,s.state.doc));for(let{from:c,to:u}of a)e.iterate({enter:f=>{let d=f.type.prop(qe.isolate);d&&l.add(f.from,f.to,cF[d])},from:c,to:u});return l.finish()}function aF(s,e){let i=e.iter(),l=0,a=[],c=null;for(let{from:u,to:f}of s)if(!(c&&c.to>u&&(u=c.to,u>=f)))for(l+i.value.length<u&&(i.next(u-(l+i.value.length)),l=u);;){let d=l,h=l+i.value.length;if(!i.lineBreak&&s1(i.value)&&(c&&c.to>d-10?c.to=Math.min(f,h):a.push(c={from:d,to:Math.min(f,h)})),h>=f)break;l=h,i.next()}return a}const cF={rtl:Re.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:bt.RTL}),ltr:Re.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:bt.LTR}),auto:Re.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})},uF=s=>{let{state:e}=s,i=e.doc.lineAt(e.selection.main.from),l=wh(s.state,i.from);return l.line?fF(s):l.block?hF(s):!1};function Ah(s,e){return({state:i,dispatch:l})=>{if(i.readOnly)return!1;let a=s(e,i);return a?(l(i.update(a)),!0):!1}}const fF=Ah(gF,0),E3=null,A3=null,dF=Ah(a1,0),w3=null,C3=null,hF=Ah((s,e)=>a1(s,e,pF(e)),0);function wh(s,e){let i=s.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const Ml=50;function mF(s,{open:e,close:i},l,a){let c=s.sliceDoc(l-Ml,l),u=s.sliceDoc(a,a+Ml),f=/\s*$/.exec(c)[0].length,d=/^\s*/.exec(u)[0].length,h=c.length-f;if(c.slice(h-e.length,h)==e&&u.slice(d,d+i.length)==i)return{open:{pos:l-f,margin:f&&1},close:{pos:a+d,margin:d&&1}};let m,p;a-l<=2*Ml?m=p=s.sliceDoc(l,a):(m=s.sliceDoc(l,l+Ml),p=s.sliceDoc(a-Ml,a));let y=/^\s*/.exec(m)[0].length,b=/\s*$/.exec(p)[0].length,x=p.length-b-i.length;return m.slice(y,y+e.length)==e&&p.slice(x,x+i.length)==i?{open:{pos:l+y+e.length,margin:/\s/.test(m.charAt(y+e.length))?1:0},close:{pos:a-b-i.length,margin:/\s/.test(p.charAt(x-1))?1:0}}:null}function pF(s){let e=[];for(let i of s.selection.ranges){let l=s.doc.lineAt(i.from),a=i.to<=l.to?l:s.doc.lineAt(i.to);a.from>l.from&&a.from==i.to&&(a=i.to==l.to+1?l:s.doc.lineAt(i.to-1));let c=e.length-1;c>=0&&e[c].to>l.from?e[c].to=a.to:e.push({from:l.from+/^\s*/.exec(l.text)[0].length,to:a.to})}return e}function a1(s,e,i=e.selection.ranges){let l=i.map(c=>wh(e,c.from).block);if(!l.every(c=>c))return null;let a=i.map((c,u)=>mF(e,l[u],c.from,c.to));if(s!=2&&!a.every(c=>c))return{changes:e.changes(i.map((c,u)=>a[u]?[]:[{from:c.from,insert:l[u].open+" "},{from:c.to,insert:" "+l[u].close}]))};if(s!=1&&a.some(c=>c)){let c=[];for(let u=0,f;u<a.length;u++)if(f=a[u]){let d=l[u],{open:h,close:m}=f;c.push({from:h.pos-d.open.length,to:h.pos+h.margin},{from:m.pos-m.margin,to:m.pos+d.close.length})}return{changes:c}}return null}function gF(s,e,i=e.selection.ranges){let l=[],a=-1;for(let{from:c,to:u}of i){let f=l.length,d=1e9,h=wh(e,c).line;if(h){for(let m=c;m<=u;){let p=e.doc.lineAt(m);if(p.from>a&&(c==u||u>p.from)){a=p.from;let y=/^\s*/.exec(p.text)[0].length,b=y==p.length,x=p.text.slice(y,y+h.length)==h?y:-1;y<p.text.length&&y<d&&(d=y),l.push({line:p,comment:x,token:h,indent:y,empty:b,single:!1})}m=p.to+1}if(d<1e9)for(let m=f;m<l.length;m++)l[m].indent<l[m].line.text.length&&(l[m].indent=d);l.length==f+1&&(l[f].single=!0)}}if(s!=2&&l.some(c=>c.comment<0&&(!c.empty||c.single))){let c=[];for(let{line:f,token:d,indent:h,empty:m,single:p}of l)(p||!m)&&c.push({from:f.from+h,insert:d+" "});let u=e.changes(c);return{changes:u,selection:e.selection.map(u,1)}}else if(s!=1&&l.some(c=>c.comment>=0)){let c=[];for(let{line:u,comment:f,token:d}of l)if(f>=0){let h=u.from+f,m=h+d.length;u.text[m-u.from]==" "&&m++,c.push({from:h,to:m})}return{changes:c}}return null}const Ch=Or.define(),yF=Or.define(),vF=Oe.define(),c1=Oe.define({combine(s){return lr(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(l,a)=>e(l,a)||i(l,a)})}}),Oh=jt.define({create(){return $r.empty},update(s,e){let i=e.state.facet(c1),l=e.annotation(Ch);if(l){let d=Mn.fromTransaction(e,l.selection),h=l.side,m=h==0?s.undone:s.done;return d?m=Tc(m,m.length,i.minDepth,d):m=d1(m,e.startState.selection),new $r(h==0?l.rest:m,h==0?m:l.rest)}let a=e.annotation(yF);if((a=="full"||a=="before")&&(s=s.isolate()),e.annotation(Gt.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let c=Mn.fromTransaction(e),u=e.annotation(Gt.time),f=e.annotation(Gt.userEvent);return c?s=s.addChanges(c,u,f,i,e):e.selection&&(s=s.addSelection(e.startState.selection,u,f,i.newGroupDelay)),(a=="full"||a=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new $r(s.done.map(Mn.fromJSON),s.undone.map(Mn.fromJSON))}});function bF(s={}){return[Oh,c1.of(s),Se.domEventHandlers({beforeinput(e,i){let l=e.inputType=="historyUndo"?u1:e.inputType=="historyRedo"?kh:null;return l?(e.preventDefault(),l(i)):!1}})]}const O3=null;function Pc(s,e){return function({state:i,dispatch:l}){if(!e&&i.readOnly)return!1;let a=i.field(Oh,!1);if(!a)return!1;let c=a.pop(s,i,e);return c?(l(c),!0):!1}}const u1=Pc(0,!1),kh=Pc(1,!1),xF=Pc(0,!0),SF=Pc(1,!0);function k3(s){return function(e){let i=e.field(Oh,!1);if(!i)return 0;let l=s==0?i.done:i.undone;return l.length-(l.length&&!l[0].changes?1:0)}}const P3=null,T3=null;class Mn{constructor(e,i,l,a,c){this.changes=e,this.effects=i,this.mapped=l,this.startSelection=a,this.selectionsAfter=c}setSelAfter(e){return new Mn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,l;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(l=this.startSelection)===null||l===void 0?void 0:l.toJSON(),selectionsAfter:this.selectionsAfter.map(a=>a.toJSON())}}static fromJSON(e){return new Mn(e.changes&&Kt.fromJSON(e.changes),[],e.mapped&&Cr.fromJSON(e.mapped),e.startSelection&&de.fromJSON(e.startSelection),e.selectionsAfter.map(de.fromJSON))}static fromTransaction(e,i){let l=Zn;for(let a of e.startState.facet(vF)){let c=a(e);c.length&&(l=l.concat(c))}return!l.length&&e.changes.empty?null:new Mn(e.changes.invert(e.startState.doc),l,void 0,i||e.startState.selection,Zn)}static selection(e){return new Mn(void 0,Zn,void 0,void 0,e)}}function Tc(s,e,i,l){let a=e+1>i+20?e-i-1:0,c=s.slice(a,e);return c.push(l),c}function EF(s,e){let i=[],l=!1;return s.iterChangedRanges((a,c)=>i.push(a,c)),e.iterChangedRanges((a,c,u,f)=>{for(let d=0;d<i.length;){let h=i[d++],m=i[d++];f>=h&&u<=m&&(l=!0)}}),l}function AF(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((i,l)=>i.empty!=e.ranges[l].empty).length===0}function f1(s,e){return s.length?e.length?s.concat(e):s:e}const Zn=[],wF=200;function d1(s,e){if(s.length){let i=s[s.length-1],l=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-wF));return l.length&&l[l.length-1].eq(e)?s:(l.push(e),Tc(s,s.length-1,1e9,i.setSelAfter(l)))}else return[Mn.selection([e])]}function CF(s){let e=s[s.length-1],i=s.slice();return i[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function Ph(s,e){if(!s.length)return s;let i=s.length,l=Zn;for(;i;){let a=OF(s[i-1],e,l);if(a.changes&&!a.changes.empty||a.effects.length){let c=s.slice(0,i);return c[i-1]=a,c}else e=a.mapped,i--,l=a.selectionsAfter}return l.length?[Mn.selection(l)]:Zn}function OF(s,e,i){let l=f1(s.selectionsAfter.length?s.selectionsAfter.map(f=>f.map(e)):Zn,i);if(!s.changes)return Mn.selection(l);let a=s.changes.map(e),c=e.mapDesc(s.changes,!0),u=s.mapped?s.mapped.composeDesc(c):c;return new Mn(a,He.mapEffects(s.effects,e),u,s.startSelection.map(c),l)}const kF=/^(input\.type|delete)($|\.)/;class $r{constructor(e,i,l=0,a=void 0){this.done=e,this.undone=i,this.prevTime=l,this.prevUserEvent=a}isolate(){return this.prevTime?new $r(this.done,this.undone):this}addChanges(e,i,l,a,c){let u=this.done,f=u[u.length-1];return f&&f.changes&&!f.changes.empty&&e.changes&&(!l||kF.test(l))&&(!f.selectionsAfter.length&&i-this.prevTime<a.newGroupDelay&&a.joinToEvent(c,EF(f.changes,e.changes))||l=="input.type.compose")?u=Tc(u,u.length-1,a.minDepth,new Mn(e.changes.compose(f.changes),f1(He.mapEffects(e.effects,f.changes),f.effects),f.mapped,f.startSelection,Zn)):u=Tc(u,u.length,a.minDepth,e),new $r(u,Zn,i,l)}addSelection(e,i,l,a){let c=this.done.length?this.done[this.done.length-1].selectionsAfter:Zn;return c.length>0&&i-this.prevTime<a&&l==this.prevUserEvent&&l&&/^select($|\.)/.test(l)&&AF(c[c.length-1],e)?this:new $r(d1(this.done,e),this.undone,i,l)}addMapping(e){return new $r(Ph(this.done,e),Ph(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,l){let a=e==0?this.done:this.undone;if(a.length==0)return null;let c=a[a.length-1],u=c.selectionsAfter[0]||i.selection;if(l&&c.selectionsAfter.length)return i.update({selection:c.selectionsAfter[c.selectionsAfter.length-1],annotations:Ch.of({side:e,rest:CF(a),selection:u}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(c.changes){let f=a.length==1?Zn:a.slice(0,a.length-1);return c.mapped&&(f=Ph(f,c.mapped)),i.update({changes:c.changes,selection:c.startSelection,effects:c.effects,annotations:Ch.of({side:e,rest:f,selection:u}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}$r.empty=new $r(Zn,Zn);const PF=[{key:"Mod-z",run:u1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:kh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:kh,preventDefault:!0},{key:"Mod-u",run:xF,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:SF,preventDefault:!0}];function Js(s,e){return de.create(s.ranges.map(e),s.mainIndex)}function jr(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Wn({state:s,dispatch:e},i){let l=Js(s.selection,i);return l.eq(s.selection,!0)?!1:(e(jr(s,l)),!0)}function Xs(s,e){return de.cursor(e?s.to:s.from)}function Dc(s,e){return Wn(s,i=>i.empty?s.moveByChar(i,e):Xs(i,e))}function an(s){return s.textDirectionAt(s.state.selection.main.head)==bt.LTR}const h1=s=>Dc(s,!an(s)),m1=s=>Dc(s,an(s)),D3=s=>Dc(s,!0),M3=s=>Dc(s,!1);function Th(s,e,i){let l=e.head,a=s.doc.lineAt(l);return l==(i?a.to:a.from)?l=i?Math.min(s.doc.length,a.to+1):Math.max(0,a.from-1):l=a.from+findClusterBreak(a.text,l-a.from,i),EditorSelection.cursor(l,i?-1:1)}function p1(s,e){return Wn(s,i=>i.empty?Th(s.state,i,e):Xs(i,e))}const I3=s=>p1(s,!0),R3=s=>p1(s,!1);function Mc(s,e){return Wn(s,i=>i.empty?s.moveByGroup(i,e):Xs(i,e))}const TF=s=>Mc(s,!an(s)),DF=s=>Mc(s,an(s)),L3=s=>Mc(s,!0),F3=s=>Mc(s,!1),g1=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function y1(s,e,i){let l=s.state.charCategorizer(e.from),a=CharCategory.Space,c=e.from,u=0,f=!1,d=!1,h=!1,m=y=>{if(f)return!1;c+=i?y.length:-y.length;let b=l(y),x;if(b==CharCategory.Word&&y.charCodeAt(0)<128&&/[\W_]/.test(y)&&(b=-1),a==CharCategory.Space&&(a=b),a!=b)return!1;if(a==CharCategory.Word)if(y.toLowerCase()==y){if(!i&&d)return!1;h=!0}else if(h){if(i)return!1;f=!0}else{if(d&&i&&l(x=s.state.sliceDoc(c,c+1))==CharCategory.Word&&x.toLowerCase()==x)return!1;d=!0}return u++,!0},p=s.moveByChar(e,i,y=>(m(y),m));if(g1&&a==CharCategory.Word&&p.from==e.from+u*(i?1:-1)){let y=Math.min(e.head,p.head),b=Math.max(e.head,p.head),x=s.state.sliceDoc(y,b);if(x.length>1&&/[\u4E00-\uffff]/.test(x)){let A=Array.from(g1.segment(x));if(A.length>1)return i?EditorSelection.cursor(e.head+A[1].index,-1):EditorSelection.cursor(p.head+A[A.length-1].index,1)}}return p}function v1(s,e){return Wn(s,i=>i.empty?y1(s,i,e):Xs(i,e))}const N3=s=>v1(s,!0),B3=s=>v1(s,!1);function MF(s,e,i){if(e.type.prop(i))return!0;let l=e.to-e.from;return l&&(l>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function Ic(s,e,i){let l=Yt(s).resolveInner(e.head),a=i?qe.closedBy:qe.openedBy;for(let d=e.head;;){let h=i?l.childAfter(d):l.childBefore(d);if(!h)break;MF(s,h,a)?l=h:d=i?h.to:h.from}let c=l.type.prop(a),u,f;return c&&(u=i?Br(s,l.from,1):Br(s,l.to,-1))&&u.matched?f=i?u.end.to:u.end.from:f=i?l.to:l.from,de.cursor(f,i?-1:1)}const IF=s=>Wn(s,e=>Ic(s.state,e,!an(s))),RF=s=>Wn(s,e=>Ic(s.state,e,an(s)));function b1(s,e){return Wn(s,i=>{if(!i.empty)return Xs(i,e);let l=s.moveVertically(i,e);return l.head!=i.head?l:s.moveToLineBoundary(i,e)})}const x1=s=>b1(s,!1),S1=s=>b1(s,!0);function E1(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,i=0,l=0,a;if(e){for(let c of s.state.facet(Se.scrollMargins)){let u=c(s);u?.top&&(i=Math.max(u?.top,i)),u?.bottom&&(l=Math.max(u?.bottom,l))}a=s.scrollDOM.clientHeight-i-l}else a=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:l,selfScroll:e,height:Math.max(s.defaultLineHeight,a-5)}}function A1(s,e){let i=E1(s),{state:l}=s,a=Js(l.selection,u=>u.empty?s.moveVertically(u,e,i.height):Xs(u,e));if(a.eq(l.selection))return!1;let c;if(i.selfScroll){let u=s.coordsAtPos(l.selection.main.head),f=s.scrollDOM.getBoundingClientRect(),d=f.top+i.marginTop,h=f.bottom-i.marginBottom;u&&u.top>d&&u.bottom<h&&(c=Se.scrollIntoView(a.main.head,{y:"start",yMargin:u.top-d}))}return s.dispatch(jr(l,a),{effects:c}),!0}const w1=s=>A1(s,!1),Dh=s=>A1(s,!0);function zi(s,e,i){let l=s.lineBlockAt(e.head),a=s.moveToLineBoundary(e,i);if(a.head==e.head&&a.head!=(i?l.to:l.from)&&(a=s.moveToLineBoundary(e,i,!1)),!i&&a.head==l.from&&l.length){let c=/^\s*/.exec(s.state.sliceDoc(l.from,Math.min(l.from+100,l.to)))[0].length;c&&e.head!=l.from+c&&(a=de.cursor(l.from+c))}return a}const LF=s=>Wn(s,e=>zi(s,e,!0)),FF=s=>Wn(s,e=>zi(s,e,!1)),NF=s=>Wn(s,e=>zi(s,e,!an(s))),BF=s=>Wn(s,e=>zi(s,e,an(s))),$F=s=>Wn(s,e=>de.cursor(s.lineBlockAt(e.head).from,1)),jF=s=>Wn(s,e=>de.cursor(s.lineBlockAt(e.head).to,-1));function C1(s,e,i){let l=!1,a=Js(s.selection,c=>{let u=Br(s,c.head,-1)||Br(s,c.head,1)||c.head>0&&Br(s,c.head-1,1)||c.head<s.doc.length&&Br(s,c.head+1,-1);if(!u||!u.end)return c;l=!0;let f=u.start.from==c.head?u.end.to:u.end.from;return i?de.range(c.anchor,f):de.cursor(f)});return l?(e(jr(s,a)),!0):!1}const WF=({state:s,dispatch:e})=>C1(s,e,!1),$3=({state:s,dispatch:e})=>C1(s,e,!0);function xn(s,e){let i=Js(s.state.selection,l=>{let a=e(l);return de.range(l.anchor,a.head,a.goalColumn,a.bidiLevel||void 0)});return i.eq(s.state.selection)?!1:(s.dispatch(jr(s.state,i)),!0)}function Rc(s,e){return xn(s,i=>s.moveByChar(i,e))}const O1=s=>Rc(s,!an(s)),k1=s=>Rc(s,an(s)),j3=s=>Rc(s,!0),W3=s=>Rc(s,!1),V3=s=>xn(s,e=>Th(s.state,e,!0)),z3=s=>xn(s,e=>Th(s.state,e,!1));function Lc(s,e){return xn(s,i=>s.moveByGroup(i,e))}const VF=s=>Lc(s,!an(s)),zF=s=>Lc(s,an(s)),U3=s=>Lc(s,!0),H3=s=>Lc(s,!1);function P1(s,e){return xn(s,i=>y1(s,i,e))}const K3=s=>P1(s,!0),G3=s=>P1(s,!1),UF=s=>xn(s,e=>Ic(s.state,e,!an(s))),HF=s=>xn(s,e=>Ic(s.state,e,an(s)));function T1(s,e){return xn(s,i=>s.moveVertically(i,e))}const D1=s=>T1(s,!1),M1=s=>T1(s,!0);function I1(s,e){return xn(s,i=>s.moveVertically(i,e,E1(s).height))}const R1=s=>I1(s,!1),L1=s=>I1(s,!0),KF=s=>xn(s,e=>zi(s,e,!0)),GF=s=>xn(s,e=>zi(s,e,!1)),YF=s=>xn(s,e=>zi(s,e,!an(s))),JF=s=>xn(s,e=>zi(s,e,an(s))),XF=s=>xn(s,e=>de.cursor(s.lineBlockAt(e.head).from)),ZF=s=>xn(s,e=>de.cursor(s.lineBlockAt(e.head).to)),F1=({state:s,dispatch:e})=>(e(jr(s,{anchor:0})),!0),N1=({state:s,dispatch:e})=>(e(jr(s,{anchor:s.doc.length})),!0),B1=({state:s,dispatch:e})=>(e(jr(s,{anchor:s.selection.main.anchor,head:0})),!0),$1=({state:s,dispatch:e})=>(e(jr(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),QF=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),qF=({state:s,dispatch:e})=>{let i=Nc(s).map(({from:l,to:a})=>de.range(l,Math.min(a+1,s.doc.length)));return e(s.update({selection:de.create(i),userEvent:"select"})),!0},_F=({state:s,dispatch:e})=>{let i=Js(s.selection,l=>{let a=Yt(s),c=a.resolveStack(l.from,1);if(l.empty){let u=a.resolveStack(l.from,-1);u.node.from>=c.node.from&&u.node.to<=c.node.to&&(c=u)}for(let u=c;u;u=u.next){let{node:f}=u;if((f.from<l.from&&f.to>=l.to||f.to>l.to&&f.from<=l.from)&&u.next)return de.range(f.to,f.from)}return l});return i.eq(s.selection)?!1:(e(jr(s,i)),!0)},eN=({state:s,dispatch:e})=>{let i=s.selection,l=null;return i.ranges.length>1?l=de.create([i.main]):i.main.empty||(l=de.create([de.cursor(i.main.head)])),l?(e(jr(s,l)),!0):!1};function Zs(s,e){if(s.state.readOnly)return!1;let i="delete.selection",{state:l}=s,a=l.changeByRange(c=>{let{from:u,to:f}=c;if(u==f){let d=e(c);d<u?(i="delete.backward",d=Fc(s,d,!1)):d>u&&(i="delete.forward",d=Fc(s,d,!0)),u=Math.min(u,d),f=Math.max(f,d)}else u=Fc(s,u,!1),f=Fc(s,f,!0);return u==f?{range:c}:{changes:{from:u,to:f},range:de.cursor(u,u<c.head?-1:1)}});return a.changes.empty?!1:(s.dispatch(l.update(a,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?Se.announce.of(l.phrase("Selection deleted")):void 0})),!0)}function Fc(s,e,i){if(s instanceof Se)for(let l of s.state.facet(Se.atomicRanges).map(a=>a(s)))l.between(e,e,(a,c)=>{a<e&&c>e&&(e=i?c:a)});return e}const Mh=(s,e,i)=>Zs(s,l=>{let a=l.from,{state:c}=s,u=c.doc.lineAt(a),f,d;if(i&&!e&&a>u.from&&a<u.from+200&&!/[^ \t]/.test(f=u.text.slice(0,a-u.from))){if(f[f.length-1]=="	")return a-1;let h=Fs(f,c.tabSize),m=h%us(c)||us(c);for(let p=0;p<m&&f[f.length-1-p]==" ";p++)a--;d=a}else d=qt(u.text,a-u.from,e,e)+u.from,d==a&&u.number!=(e?c.doc.lines:1)?d+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(u.text.slice(d-u.from,a-u.from))&&(d=qt(u.text,d-u.from,!1,!1)+u.from);return d}),Ih=s=>Mh(s,!1,!0),Y3=s=>Mh(s,!1,!1),j1=s=>Mh(s,!0,!1),W1=(s,e)=>Zs(s,i=>{let l=i.head,{state:a}=s,c=a.doc.lineAt(l),u=a.charCategorizer(l);for(let f=null;;){if(l==(e?c.to:c.from)){l==i.head&&c.number!=(e?a.doc.lines:1)&&(l+=e?1:-1);break}let d=qt(c.text,l-c.from,e)+c.from,h=c.text.slice(Math.min(l,d)-c.from,Math.max(l,d)-c.from),m=u(h);if(f!=null&&m!=f)break;(h!=" "||l!=i.head)&&(f=m),l=d}return l}),V1=s=>W1(s,!1),tN=s=>W1(s,!0),nN=s=>Zs(s,e=>{let i=s.lineBlockAt(e.head).to;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),J3=s=>Zs(s,e=>{let i=s.lineBlockAt(e.head).from;return e.head>i?i:Math.max(0,e.head-1)}),rN=s=>Zs(s,e=>{let i=s.moveToLineBoundary(e,!1).head;return e.head>i?i:Math.max(0,e.head-1)}),iN=s=>Zs(s,e=>{let i=s.moveToLineBoundary(e,!0).head;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),X3=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=[];for(let l=0,a="",c=s.doc.iter();;){if(c.next(),c.lineBreak||c.done){let u=a.search(/\s+$/);if(u>-1&&i.push({from:l-(a.length-u),to:l}),c.done)break;a=""}else a=c.value;l+=c.value.length}return i.length?(e(s.update({changes:i,userEvent:"delete"})),!0):!1},sN=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(l=>({changes:{from:l.from,to:l.to,insert:ut.of(["",""])},range:de.cursor(l.from)}));return e(s.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},oN=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(l=>{if(!l.empty||l.from==0||l.from==s.doc.length)return{range:l};let a=l.from,c=s.doc.lineAt(a),u=a==c.from?a-1:qt(c.text,a-c.from,!1)+c.from,f=a==c.to?a+1:qt(c.text,a-c.from,!0)+c.from;return{changes:{from:u,to:f,insert:s.doc.slice(a,f).append(s.doc.slice(u,a))},range:de.cursor(f)}});return i.changes.empty?!1:(e(s.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Nc(s){let e=[],i=-1;for(let l of s.selection.ranges){let a=s.doc.lineAt(l.from),c=s.doc.lineAt(l.to);if(!l.empty&&l.to==c.from&&(c=s.doc.lineAt(l.to-1)),i>=a.number){let u=e[e.length-1];u.to=c.to,u.ranges.push(l)}else e.push({from:a.from,to:c.to,ranges:[l]});i=c.number+1}return e}function z1(s,e,i){if(s.readOnly)return!1;let l=[],a=[];for(let c of Nc(s)){if(i?c.to==s.doc.length:c.from==0)continue;let u=s.doc.lineAt(i?c.to+1:c.from-1),f=u.length+1;if(i){l.push({from:c.to,to:u.to},{from:c.from,insert:u.text+s.lineBreak});for(let d of c.ranges)a.push(de.range(Math.min(s.doc.length,d.anchor+f),Math.min(s.doc.length,d.head+f)))}else{l.push({from:u.from,to:c.from},{from:c.to,insert:s.lineBreak+u.text});for(let d of c.ranges)a.push(de.range(d.anchor-f,d.head-f))}}return l.length?(e(s.update({changes:l,scrollIntoView:!0,selection:de.create(a,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const lN=({state:s,dispatch:e})=>z1(s,e,!1),aN=({state:s,dispatch:e})=>z1(s,e,!0);function U1(s,e,i){if(s.readOnly)return!1;let l=[];for(let a of Nc(s))i?l.push({from:a.from,insert:s.doc.slice(a.from,a.to)+s.lineBreak}):l.push({from:a.to,insert:s.lineBreak+s.doc.slice(a.from,a.to)});return e(s.update({changes:l,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const cN=({state:s,dispatch:e})=>U1(s,e,!1),uN=({state:s,dispatch:e})=>U1(s,e,!0),fN=s=>{if(s.state.readOnly)return!1;let{state:e}=s,i=e.changes(Nc(e).map(({from:a,to:c})=>(a>0?a--:c<e.doc.length&&c++,{from:a,to:c}))),l=Js(e.selection,a=>{let c;if(s.lineWrapping){let u=s.lineBlockAt(a.head),f=s.coordsAtPos(a.head,a.assoc||1);f&&(c=u.bottom+s.documentTop-f.bottom+s.defaultLineHeight/2)}return s.moveVertically(a,!0,c)}).map(i);return s.dispatch({changes:i,selection:l,scrollIntoView:!0,userEvent:"delete.line"}),!0},Z3=({state:s,dispatch:e})=>(e(s.update(s.replaceSelection(s.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0),Q3=({state:s,dispatch:e})=>(e(s.update(s.changeByRange(i=>{let l=/^\s*/.exec(s.doc.lineAt(i.from).text)[0];return{changes:{from:i.from,to:i.to,insert:s.lineBreak+l},range:EditorSelection.cursor(i.from+l.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function dN(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=Yt(s).resolveInner(e),l=i.childBefore(e),a=i.childAfter(e),c;return l&&a&&l.to<=e&&a.from>=e&&(c=l.type.prop(qe.closedBy))&&c.indexOf(a.name)>-1&&s.doc.lineAt(l.to).from==s.doc.lineAt(a.from).from&&!/\S/.test(s.sliceDoc(l.to,a.from))?{from:l.to,to:a.from}:null}const H1=K1(!1),hN=K1(!0);function K1(s){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let l=e.changeByRange(a=>{let{from:c,to:u}=a,f=e.doc.lineAt(c),d=!s&&c==u&&dN(e,c);s&&(c=u=(u<=f.to?f:e.doc.lineAt(u)).to);let h=new Cl(e,{simulateBreak:c,simulateDoubleBreak:!!d}),m=Cc(h,c);for(m==null&&(m=Fs(/^\s*/.exec(e.doc.lineAt(c).text)[0],e.tabSize));u<f.to&&/\s/.test(f.text[u-f.from]);)u++;d?{from:c,to:u}=d:c>f.from&&c<f.from+100&&!/\S/.test(f.text.slice(0,c))&&(c=f.from);let p=["",Gs(e,m)];return d&&p.push(Gs(e,h.lineIndent(f.from,-1))),{changes:{from:c,to:u,insert:ut.of(p)},range:de.cursor(c+1+p[1].length)}});return i(e.update(l,{scrollIntoView:!0,userEvent:"input"})),!0}}function Rh(s,e){let i=-1;return s.changeByRange(l=>{let a=[];for(let u=l.from;u<=l.to;){let f=s.doc.lineAt(u);f.number>i&&(l.empty||l.to>f.from)&&(e(f,a,l),i=f.number),u=f.to+1}let c=s.changes(a);return{changes:a,range:de.range(c.mapPos(l.anchor,1),c.mapPos(l.head,1))}})}const mN=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=Object.create(null),l=new Cl(s,{overrideIndentation:c=>{let u=i[c];return u??-1}}),a=Rh(s,(c,u,f)=>{let d=Cc(l,c.from);if(d==null)return;/\S/.test(c.text)||(d=0);let h=/^\s*/.exec(c.text)[0],m=Gs(s,d);(h!=m||f.from<c.from+h.length)&&(i[c.from]=d,u.push({from:c.from,to:c.from+h.length,insert:m}))});return a.changes.empty||e(s.update(a,{userEvent:"indent"})),!0},Lh=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(Rh(s,(i,l)=>{l.push({from:i.from,insert:s.facet(wc)})}),{userEvent:"input.indent"})),!0),G1=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(Rh(s,(i,l)=>{let a=/^\s*/.exec(i.text)[0];if(!a)return;let c=Fs(a,s.tabSize),u=0,f=Gs(s,Math.max(0,c-us(s)));for(;u<a.length&&u<f.length&&a.charCodeAt(u)==f.charCodeAt(u);)u++;l.push({from:i.from+u,to:i.from+a.length,insert:f.slice(u)})}),{userEvent:"delete.dedent"})),!0),pN=s=>(s.setTabFocusMode(),!0),q3=s=>(s.setTabFocusMode(2e3),!0),_3=({state:s,dispatch:e})=>s.selection.ranges.some(i=>!i.empty)?Lh({state:s,dispatch:e}):(e(s.update(s.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),gN=[{key:"Ctrl-b",run:h1,shift:O1,preventDefault:!0},{key:"Ctrl-f",run:m1,shift:k1},{key:"Ctrl-p",run:x1,shift:D1},{key:"Ctrl-n",run:S1,shift:M1},{key:"Ctrl-a",run:$F,shift:XF},{key:"Ctrl-e",run:jF,shift:ZF},{key:"Ctrl-d",run:j1},{key:"Ctrl-h",run:Ih},{key:"Ctrl-k",run:nN},{key:"Ctrl-Alt-h",run:V1},{key:"Ctrl-o",run:sN},{key:"Ctrl-t",run:oN},{key:"Ctrl-v",run:Dh}],yN=[{key:"ArrowLeft",run:h1,shift:O1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:TF,shift:VF,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:NF,shift:YF,preventDefault:!0},{key:"ArrowRight",run:m1,shift:k1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:DF,shift:zF,preventDefault:!0},{mac:"Cmd-ArrowRight",run:BF,shift:JF,preventDefault:!0},{key:"ArrowUp",run:x1,shift:D1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:F1,shift:B1},{mac:"Ctrl-ArrowUp",run:w1,shift:R1},{key:"ArrowDown",run:S1,shift:M1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:N1,shift:$1},{mac:"Ctrl-ArrowDown",run:Dh,shift:L1},{key:"PageUp",run:w1,shift:R1},{key:"PageDown",run:Dh,shift:L1},{key:"Home",run:FF,shift:GF,preventDefault:!0},{key:"Mod-Home",run:F1,shift:B1},{key:"End",run:LF,shift:KF,preventDefault:!0},{key:"Mod-End",run:N1,shift:$1},{key:"Enter",run:H1,shift:H1},{key:"Mod-a",run:QF},{key:"Backspace",run:Ih,shift:Ih},{key:"Delete",run:j1},{key:"Mod-Backspace",mac:"Alt-Backspace",run:V1},{key:"Mod-Delete",mac:"Alt-Delete",run:tN},{mac:"Mod-Backspace",run:rN},{mac:"Mod-Delete",run:iN}].concat(gN.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),vN=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:IF,shift:UF},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:RF,shift:HF},{key:"Alt-ArrowUp",run:lN},{key:"Shift-Alt-ArrowUp",run:cN},{key:"Alt-ArrowDown",run:aN},{key:"Shift-Alt-ArrowDown",run:uN},{key:"Escape",run:eN},{key:"Mod-Enter",run:hN},{key:"Alt-l",mac:"Ctrl-l",run:qF},{key:"Mod-i",run:_F,preventDefault:!0},{key:"Mod-[",run:G1},{key:"Mod-]",run:Lh},{key:"Mod-Alt-\\",run:mN},{key:"Shift-Mod-k",run:fN},{key:"Shift-Mod-\\",run:WF},{key:"Mod-/",run:uF},{key:"Alt-A",run:dF},{key:"Ctrl-m",mac:"Shift-Alt-m",run:pN}].concat(yN),bN={key:"Tab",run:Lh,shift:G1};function Ct(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var l in i)if(Object.prototype.hasOwnProperty.call(i,l)){var a=i[l];typeof a=="string"?s.setAttribute(l,a):a!=null&&(s[l]=a)}e++}for(;e<arguments.length;e++)Y1(s,arguments[e]);return s}function Y1(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)Y1(s,e[i]);else throw new RangeError("Unsupported child node: "+e)}const J1=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class Qs{constructor(e,i,l=0,a=e.length,c,u){this.test=u,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(l,a),this.bufferStart=l,this.normalize=c?f=>c(J1(f)):J1,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return _t(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=Hf(e),l=this.bufferStart+this.bufferPos;this.bufferPos+=Gn(e);let a=this.normalize(i);if(a.length)for(let c=0,u=l;;c++){let f=a.charCodeAt(c),d=this.match(f,u,this.bufferPos+this.bufferStart);if(c==a.length-1){if(d)return this.value=d,this;break}u==l&&c<i.length&&i.charCodeAt(c)==f&&u++}}}match(e,i,l){let a=null;for(let c=0;c<this.matches.length;c+=2){let u=this.matches[c],f=!1;this.query.charCodeAt(u)==e&&(u==this.query.length-1?a={from:this.matches[c+1],to:l}:(this.matches[c]++,f=!0)),f||(this.matches.splice(c,2),c-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?a={from:i,to:l}:this.matches.push(1,i)),a&&this.test&&!this.test(a.from,a.to,this.buffer,this.bufferStart)&&(a=null),a}}typeof Symbol<"u"&&(Qs.prototype[Symbol.iterator]=function(){return this});const X1={from:-1,to:-1,match:/.*/.exec("")},Fh="gm"+(/x/.unicode==null?"":"u");class Z1{constructor(e,i,l,a=0,c=e.length){if(this.text=e,this.to=c,this.curLine="",this.done=!1,this.value=X1,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new Q1(e,i,l,a,c);this.re=new RegExp(i,Fh+(l?.ignoreCase?"i":"")),this.test=l?.test,this.iter=e.iter();let u=e.lineAt(a);this.curLineStart=u.from,this.matchPos=Bc(e,a),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let l=this.curLineStart+i.index,a=l+i[0].length;if(this.matchPos=Bc(this.text,a+(l==a?1:0)),l==this.curLineStart+this.curLine.length&&this.nextLine(),(l<a||l>this.value.to)&&(!this.test||this.test(l,a,i)))return this.value={from:l,to:a,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Nh=new WeakMap;class qs{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,l){let a=Nh.get(e);if(!a||a.from>=l||a.to<=i){let f=new qs(i,e.sliceString(i,l));return Nh.set(e,f),f}if(a.from==i&&a.to==l)return a;let{text:c,from:u}=a;return u>i&&(c=e.sliceString(i,u)+c,u=i),a.to<l&&(c+=e.sliceString(a.to,l)),Nh.set(e,new qs(u,c)),new qs(i,c.slice(i-u,l-u))}}class Q1{constructor(e,i,l,a,c){this.text=e,this.to=c,this.done=!1,this.value=X1,this.matchPos=Bc(e,a),this.re=new RegExp(i,Fh+(l?.ignoreCase?"i":"")),this.test=l?.test,this.flat=qs.get(e,a,this.chunkEnd(a+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let l=this.flat.from+i.index,a=l+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(l,a,i)))return this.value={from:l,to:a,match:i},this.matchPos=Bc(this.text,a+(l==a?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=qs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Z1.prototype[Symbol.iterator]=Q1.prototype[Symbol.iterator]=function(){return this});function xN(s){try{return new RegExp(s,Fh),!0}catch{return!1}}function Bc(s,e){if(e>=s.length)return e;let i=s.lineAt(e),l;for(;e<i.to&&(l=i.text.charCodeAt(e-i.from))>=56320&&l<57344;)e++;return e}function Bh(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),i=Ct("input",{class:"cm-textfield",name:"line",value:e}),l=Ct("form",{class:"cm-gotoLine",onkeydown:c=>{c.keyCode==27?(c.preventDefault(),s.dispatch({effects:$c.of(!1)}),s.focus()):c.keyCode==13&&(c.preventDefault(),a())},onsubmit:c=>{c.preventDefault(),a()}},Ct("label",s.state.phrase("Go to line"),": ",i)," ",Ct("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function a(){let c=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!c)return;let{state:u}=s,f=u.doc.lineAt(u.selection.main.head),[,d,h,m,p]=c,y=m?+m.slice(1):0,b=h?+h:f.number;if(h&&p){let E=b/100;d&&(E=E*(d=="-"?-1:1)+f.number/u.doc.lines),b=Math.round(u.doc.lines*E)}else h&&d&&(b=b*(d=="-"?-1:1)+f.number);let x=u.doc.line(Math.max(1,Math.min(u.doc.lines,b))),A=de.cursor(x.from+Math.max(0,Math.min(y,x.length)));s.dispatch({effects:[$c.of(!1),Se.scrollIntoView(A.from,{y:"center"})],selection:A}),s.focus()}return{dom:l}}const $c=He.define(),q1=jt.define({create(){return!0},update(s,e){for(let i of e.effects)i.is($c)&&(s=i.value);return s},provide:s=>ls.from(s,e=>e?Bh:null)}),SN=s=>{let e=bl(s,Bh);if(!e){let i=[$c.of(!0)];s.state.field(q1,!1)==null&&i.push(He.appendConfig.of([q1,EN])),s.dispatch({effects:i}),e=bl(s,Bh)}return e&&e.dom.querySelector("input").select(),!0},EN=Se.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),AN={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},_1=Oe.define({combine(s){return lr(s,AN,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function wN(s){let e=[TN,PN];return s&&e.push(_1.of(s)),e}const CN=Re.mark({class:"cm-selectionMatch"}),ON=Re.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function ex(s,e,i,l){return(i==0||s(e.sliceDoc(i-1,i))!=Pt.Word)&&(l==e.doc.length||s(e.sliceDoc(l,l+1))!=Pt.Word)}function kN(s,e,i,l){return s(e.sliceDoc(i,i+1))==Pt.Word&&s(e.sliceDoc(l-1,l))==Pt.Word}const PN=It.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(_1),{state:i}=s,l=i.selection;if(l.ranges.length>1)return Re.none;let a=l.main,c,u=null;if(a.empty){if(!e.highlightWordAroundCursor)return Re.none;let d=i.wordAt(a.head);if(!d)return Re.none;u=i.charCategorizer(a.head),c=i.sliceDoc(d.from,d.to)}else{let d=a.to-a.from;if(d<e.minSelectionLength||d>200)return Re.none;if(e.wholeWords){if(c=i.sliceDoc(a.from,a.to),u=i.charCategorizer(a.head),!(ex(u,i,a.from,a.to)&&kN(u,i,a.from,a.to)))return Re.none}else if(c=i.sliceDoc(a.from,a.to),!c)return Re.none}let f=[];for(let d of s.visibleRanges){let h=new Qs(i.doc,c,d.from,d.to);for(;!h.next().done;){let{from:m,to:p}=h.value;if((!u||ex(u,i,m,p))&&(a.empty&&m<=a.from&&p>=a.to?f.push(ON.range(m,p)):(m>=a.to||p<=a.from)&&f.push(CN.range(m,p)),f.length>e.maxMatches))return Re.none}}return Re.set(f)}},{decorations:s=>s.decorations}),TN=Se.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),DN=({state:s,dispatch:e})=>{let{selection:i}=s,l=de.create(i.ranges.map(a=>s.wordAt(a.head)||de.cursor(a.head)),i.mainIndex);return l.eq(i)?!1:(e(s.update({selection:l})),!0)};function MN(s,e){let{main:i,ranges:l}=s.selection,a=s.wordAt(i.head),c=a&&a.from==i.from&&a.to==i.to;for(let u=!1,f=new Qs(s.doc,e,l[l.length-1].to);;)if(f.next(),f.done){if(u)return null;f=new Qs(s.doc,e,0,Math.max(0,l[l.length-1].from-1)),u=!0}else{if(u&&l.some(d=>d.from==f.value.from))continue;if(c){let d=s.wordAt(f.value.from);if(!d||d.from!=f.value.from||d.to!=f.value.to)continue}return f.value}}const IN=({state:s,dispatch:e})=>{let{ranges:i}=s.selection;if(i.some(c=>c.from===c.to))return DN({state:s,dispatch:e});let l=s.sliceDoc(i[0].from,i[0].to);if(s.selection.ranges.some(c=>s.sliceDoc(c.from,c.to)!=l))return!1;let a=MN(s,l);return a?(e(s.update({selection:s.selection.addRange(de.range(a.from,a.to),!1),effects:Se.scrollIntoView(a.to)})),!0):!1},ds=Oe.define({combine(s){return lr(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new HN(e),scrollToMatch:e=>Se.scrollIntoView(e)})}});function e5(s){return s?[ds.of(s),zh]:zh}class tx{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||xN(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,l)=>l=="n"?`
`:l=="r"?"\r":l=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new NN(this):new LN(this)}getCursor(e,i=0,l){let a=e.doc?e:rt.create({doc:e});return l==null&&(l=a.doc.length),this.regexp?eo(this,a,i,l):_s(this,a,i,l)}}class nx{constructor(e){this.spec=e}}function _s(s,e,i,l){return new Qs(e.doc,s.unquoted,i,l,s.caseSensitive?void 0:a=>a.toLowerCase(),s.wholeWord?RN(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function RN(s,e){return(i,l,a,c)=>((c>i||c+a.length<l)&&(c=Math.max(0,i-2),a=s.sliceString(c,Math.min(s.length,l+2))),(e(jc(a,i-c))!=Pt.Word||e(Wc(a,i-c))!=Pt.Word)&&(e(Wc(a,l-c))!=Pt.Word||e(jc(a,l-c))!=Pt.Word))}class LN extends nx{constructor(e){super(e)}nextMatch(e,i,l){let a=_s(this.spec,e,l,e.doc.length).nextOverlapping();if(a.done){let c=Math.min(e.doc.length,i+this.spec.unquoted.length);a=_s(this.spec,e,0,c).nextOverlapping()}return a.done||a.value.from==i&&a.value.to==l?null:a.value}prevMatchInRange(e,i,l){for(let a=l;;){let c=Math.max(i,a-1e4-this.spec.unquoted.length),u=_s(this.spec,e,c,a),f=null;for(;!u.nextOverlapping().done;)f=u.value;if(f)return f;if(c==i)return null;a-=1e4}}prevMatch(e,i,l){let a=this.prevMatchInRange(e,0,i);return a||(a=this.prevMatchInRange(e,Math.max(0,l-this.spec.unquoted.length),e.doc.length)),a&&(a.from!=i||a.to!=l)?a:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let l=_s(this.spec,e,0,e.doc.length),a=[];for(;!l.next().done;){if(a.length>=i)return null;a.push(l.value)}return a}highlight(e,i,l,a){let c=_s(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(l+this.spec.unquoted.length,e.doc.length));for(;!c.next().done;)a(c.value.from,c.value.to)}}function eo(s,e,i,l){return new Z1(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?FN(e.charCategorizer(e.selection.main.head)):void 0},i,l)}function jc(s,e){return s.slice(qt(s,e,!1),e)}function Wc(s,e){return s.slice(e,qt(s,e))}function FN(s){return(e,i,l)=>!l[0].length||(s(jc(l.input,l.index))!=Pt.Word||s(Wc(l.input,l.index))!=Pt.Word)&&(s(Wc(l.input,l.index+l[0].length))!=Pt.Word||s(jc(l.input,l.index+l[0].length))!=Pt.Word)}class NN extends nx{nextMatch(e,i,l){let a=eo(this.spec,e,l,e.doc.length).next();return a.done&&(a=eo(this.spec,e,0,i).next()),a.done?null:a.value}prevMatchInRange(e,i,l){for(let a=1;;a++){let c=Math.max(i,l-a*1e4),u=eo(this.spec,e,c,l),f=null;for(;!u.next().done;)f=u.value;if(f&&(c==i||f.from>c+10))return f;if(c==i)return null}}prevMatch(e,i,l){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,l,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(i,l)=>l=="$"?"$":l=="&"?e.match[0]:l!="0"&&+l<e.match.length?e.match[l]:i)}matchAll(e,i){let l=eo(this.spec,e,0,e.doc.length),a=[];for(;!l.next().done;){if(a.length>=i)return null;a.push(l.value)}return a}highlight(e,i,l,a){let c=eo(this.spec,e,Math.max(0,i-250),Math.min(l+250,e.doc.length));for(;!c.next().done;)a(c.value.from,c.value.to)}}const Il=He.define(),$h=He.define(),Wr=jt.define({create(s){return new jh(Uc(s).create(),null)},update(s,e){for(let i of e.effects)i.is(Il)?s=new jh(i.value.create(),s.panel):i.is($h)&&(s=new jh(s.query,i.value?Wh:null));return s},provide:s=>ls.from(s,e=>e.panel)});function t5(s){let e=s.field(Wr,!1);return e?e.query.spec:Uc(s)}function n5(s){var e;return((e=s.field(Wr,!1))===null||e===void 0?void 0:e.panel)!=null}class jh{constructor(e,i){this.query=e,this.panel=i}}const BN=Re.mark({class:"cm-searchMatch"}),$N=Re.mark({class:"cm-searchMatch cm-searchMatch-selected"}),jN=It.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(Wr))}update(s){let e=s.state.field(Wr);(e!=s.startState.field(Wr)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Re.none;let{view:i}=this,l=new kr;for(let a=0,c=i.visibleRanges,u=c.length;a<u;a++){let{from:f,to:d}=c[a];for(;a<u-1&&d>c[a+1].from-2*250;)d=c[++a].to;s.highlight(i.state,f,d,(h,m)=>{let p=i.state.selection.ranges.some(y=>y.from==h&&y.to==m);l.add(h,m,p?$N:BN)})}return l.finish()}},{decorations:s=>s.decorations});function Rl(s){return e=>{let i=e.state.field(Wr,!1);return i&&i.query.spec.valid?s(e,i):ox(e)}}const Vc=Rl((s,{query:e})=>{let{to:i}=s.state.selection.main,l=e.nextMatch(s.state,i,i);if(!l)return!1;let a=de.single(l.from,l.to),c=s.state.facet(ds);return s.dispatch({selection:a,effects:[Vh(s,l),c.scrollToMatch(a.main,s)],userEvent:"select.search"}),sx(s),!0}),zc=Rl((s,{query:e})=>{let{state:i}=s,{from:l}=i.selection.main,a=e.prevMatch(i,l,l);if(!a)return!1;let c=de.single(a.from,a.to),u=s.state.facet(ds);return s.dispatch({selection:c,effects:[Vh(s,a),u.scrollToMatch(c.main,s)],userEvent:"select.search"}),sx(s),!0}),WN=Rl((s,{query:e})=>{let i=e.matchAll(s.state,1e3);return!i||!i.length?!1:(s.dispatch({selection:de.create(i.map(l=>de.range(l.from,l.to))),userEvent:"select.search.matches"}),!0)}),VN=({state:s,dispatch:e})=>{let i=s.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:l,to:a}=i.main,c=[],u=0;for(let f=new Qs(s.doc,s.sliceDoc(l,a));!f.next().done;){if(c.length>1e3)return!1;f.value.from==l&&(u=c.length),c.push(de.range(f.value.from,f.value.to))}return e(s.update({selection:de.create(c,u),userEvent:"select.search.matches"})),!0},rx=Rl((s,{query:e})=>{let{state:i}=s,{from:l,to:a}=i.selection.main;if(i.readOnly)return!1;let c=e.nextMatch(i,l,l);if(!c)return!1;let u=c,f=[],d,h,m=[];if(u.from==l&&u.to==a&&(h=i.toText(e.getReplacement(u)),f.push({from:u.from,to:u.to,insert:h}),u=e.nextMatch(i,u.from,u.to),m.push(Se.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(l).number)+"."))),u){let p=f.length==0||f[0].from>=c.to?0:c.to-c.from-h.length;d=de.single(u.from-p,u.to-p),m.push(Vh(s,u)),m.push(i.facet(ds).scrollToMatch(d.main,s))}return s.dispatch({changes:f,selection:d,effects:m,userEvent:"input.replace"}),!0}),zN=Rl((s,{query:e})=>{if(s.state.readOnly)return!1;let i=e.matchAll(s.state,1e9).map(a=>{let{from:c,to:u}=a;return{from:c,to:u,insert:e.getReplacement(a)}});if(!i.length)return!1;let l=s.state.phrase("replaced $ matches",i.length)+".";return s.dispatch({changes:i,effects:Se.announce.of(l),userEvent:"input.replace.all"}),!0});function Wh(s){return s.state.facet(ds).createPanel(s)}function Uc(s,e){var i,l,a,c,u;let f=s.selection.main,d=f.empty||f.to>f.from+100?"":s.sliceDoc(f.from,f.to);if(e&&!d)return e;let h=s.facet(ds);return new tx({search:((i=e?.literal)!==null&&i!==void 0?i:h.literal)?d:d.replace(/\n/g,"\\n"),caseSensitive:(l=e?.caseSensitive)!==null&&l!==void 0?l:h.caseSensitive,literal:(a=e?.literal)!==null&&a!==void 0?a:h.literal,regexp:(c=e?.regexp)!==null&&c!==void 0?c:h.regexp,wholeWord:(u=e?.wholeWord)!==null&&u!==void 0?u:h.wholeWord})}function ix(s){let e=bl(s,Wh);return e&&e.dom.querySelector("[main-field]")}function sx(s){let e=ix(s);e&&e==s.root.activeElement&&e.select()}const ox=s=>{let e=s.state.field(Wr,!1);if(e&&e.panel){let i=ix(s);if(i&&i!=s.root.activeElement){let l=Uc(s.state,e.query.spec);l.valid&&s.dispatch({effects:Il.of(l)}),i.focus(),i.select()}}else s.dispatch({effects:[$h.of(!0),e?Il.of(Uc(s.state,e.query.spec)):He.appendConfig.of(zh)]});return!0},lx=s=>{let e=s.state.field(Wr,!1);if(!e||!e.panel)return!1;let i=bl(s,Wh);return i&&i.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:$h.of(!1)}),!0},UN=[{key:"Mod-f",run:ox,scope:"editor search-panel"},{key:"F3",run:Vc,shift:zc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Vc,shift:zc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:lx,scope:"editor search-panel"},{key:"Mod-Shift-l",run:VN},{key:"Mod-Alt-g",run:SN},{key:"Mod-d",run:IN,preventDefault:!0}];class HN{constructor(e){this.view=e;let i=this.query=e.state.field(Wr).query.spec;this.commit=this.commit.bind(this),this.searchField=Ct("input",{value:i.search,placeholder:Vn(e,"Find"),"aria-label":Vn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ct("input",{value:i.replace,placeholder:Vn(e,"Replace"),"aria-label":Vn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ct("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=Ct("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=Ct("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function l(a,c,u){return Ct("button",{class:"cm-button",name:a,onclick:c,type:"button"},u)}this.dom=Ct("div",{onkeydown:a=>this.keydown(a),class:"cm-search"},[this.searchField,l("next",()=>Vc(e),[Vn(e,"next")]),l("prev",()=>zc(e),[Vn(e,"previous")]),l("select",()=>WN(e),[Vn(e,"all")]),Ct("label",null,[this.caseField,Vn(e,"match case")]),Ct("label",null,[this.reField,Vn(e,"regexp")]),Ct("label",null,[this.wordField,Vn(e,"by word")]),...e.state.readOnly?[]:[Ct("br"),this.replaceField,l("replace",()=>rx(e),[Vn(e,"replace")]),l("replaceAll",()=>zN(e),[Vn(e,"replace all")])],Ct("button",{name:"close",onclick:()=>lx(e),"aria-label":Vn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new tx({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Il.of(e)}))}keydown(e){WI(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?zc:Vc)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),rx(this.view))}update(e){for(let i of e.transactions)for(let l of i.effects)l.is(Il)&&!l.value.eq(this.query)&&this.setQuery(l.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ds).top}}function Vn(s,e){return s.state.phrase(e)}const Hc=30,Kc=/[\s\.,:;?!]/;function Vh(s,{from:e,to:i}){let l=s.state.doc.lineAt(e),a=s.state.doc.lineAt(i).to,c=Math.max(l.from,e-Hc),u=Math.min(a,i+Hc),f=s.state.sliceDoc(c,u);if(c!=l.from){for(let d=0;d<Hc;d++)if(!Kc.test(f[d+1])&&Kc.test(f[d])){f=f.slice(d);break}}if(u!=a){for(let d=f.length-1;d>f.length-Hc;d--)if(!Kc.test(f[d-1])&&Kc.test(f[d])){f=f.slice(0,d);break}}return Se.announce.of(`${s.state.phrase("current match")}. ${f} ${s.state.phrase("on line")} ${l.number}.`)}const KN=Se.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),zh=[Wr,oi.low(jN),KN];class ax{constructor(e,i,l,a){this.state=e,this.pos=i,this.explicit=l,this.view=a,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let i=Yt(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),l=Math.max(i.from,this.pos-250),a=i.text.slice(l-i.from,this.pos-i.from),c=a.search(fx(e,!1));return c<0?null:{from:l+c,to:this.pos,text:a.slice(c)}}get aborted(){return this.abortListeners==null}addEventListener(e,i,l){e=="abort"&&this.abortListeners&&(this.abortListeners.push(i),l&&l.onDocChange&&(this.abortOnDocChange=!0))}}function cx(s){let e=Object.keys(s).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function GN(s){let e=Object.create(null),i=Object.create(null);for(let{label:a}of s){e[a[0]]=!0;for(let c=1;c<a.length;c++)i[a[c]]=!0}let l=cx(e)+cx(i)+"*$";return[new RegExp("^"+l),new RegExp(l)]}function YN(s){let e=s.map(a=>typeof a=="string"?{label:a}:a),[i,l]=e.every(a=>/^\w+$/.test(a.label))?[/\w*$/,/\w+$/]:GN(e);return a=>{let c=a.matchBefore(l);return c||a.explicit?{from:c?c.from:a.pos,options:e,validFor:i}:null}}function r5(s,e){return i=>{for(let l=syntaxTree(i.state).resolveInner(i.pos,-1);l;l=l.parent){if(s.indexOf(l.name)>-1)return e(i);if(l.type.isTop)break}return null}}function i5(s,e){return i=>{for(let l=syntaxTree(i.state).resolveInner(i.pos,-1);l;l=l.parent){if(s.indexOf(l.name)>-1)return null;if(l.type.isTop)break}return e(i)}}class ux{constructor(e,i,l,a){this.completion=e,this.source=i,this.match=l,this.score=a}}function hs(s){return s.selection.main.from}function fx(s,e){var i;let{source:l}=s,a=e&&l[0]!="^",c=l[l.length-1]!="$";return!a&&!c?s:new RegExp(`${a?"^":""}(?:${l})${c?"$":""}`,(i=s.flags)!==null&&i!==void 0?i:s.ignoreCase?"i":"")}const Uh=Or.define();function JN(s,e,i,l){let{main:a}=s.selection,c=i-a.from,u=l-a.from;return Object.assign(Object.assign({},s.changeByRange(f=>{if(f!=a&&i!=l&&s.sliceDoc(f.from+c,f.from+u)!=s.sliceDoc(i,l))return{range:f};let d=s.toText(e);return{changes:{from:f.from+c,to:l==a.from?f.to:f.from+u,insert:d},range:de.cursor(f.from+c+d.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const dx=new WeakMap;function XN(s){if(!Array.isArray(s))return s;let e=dx.get(s);return e||dx.set(s,e=YN(s)),e}const Gc=He.define(),Ll=He.define();class ZN{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let l=_t(e,i),a=Gn(l);this.chars.push(l);let c=e.slice(i,i+a),u=c.toUpperCase();this.folded.push(_t(u==c?c.toLowerCase():u,0)),i+=a}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:i,folded:l,any:a,precise:c,byWord:u}=this;if(i.length==1){let k=_t(e,0),L=Gn(k),z=L==e.length?0:-100;if(k!=i[0])if(k==l[0])z+=-200;else return null;return this.ret(z,[0,L])}let f=e.indexOf(this.pattern);if(f==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let d=i.length,h=0;if(f<0){for(let k=0,L=Math.min(e.length,200);k<L&&h<d;){let z=_t(e,k);(z==i[h]||z==l[h])&&(a[h++]=k),k+=Gn(z)}if(h<d)return null}let m=0,p=0,y=!1,b=0,x=-1,A=-1,E=/[a-z]/.test(e),w=!0;for(let k=0,L=Math.min(e.length,200),z=0;k<L&&p<d;){let U=_t(e,k);f<0&&(m<d&&U==i[m]&&(c[m++]=k),b<d&&(U==i[b]||U==l[b]?(b==0&&(x=k),A=k+1,b++):b=0));let X,ee=U<255?U>=48&&U<=57||U>=97&&U<=122?2:U>=65&&U<=90?1:0:(X=Hf(U))!=X.toLowerCase()?1:X!=X.toUpperCase()?2:0;(!k||ee==1&&E||z==0&&ee!=0)&&(i[p]==U||l[p]==U&&(y=!0)?u[p++]=k:u.length&&(w=!1)),z=ee,k+=Gn(U)}return p==d&&u[0]==0&&w?this.result(-100+(y?-200:0),u,e):b==d&&x==0?this.ret(-200-e.length+(A==e.length?0:-100),[0,A]):f>-1?this.ret(-700-e.length,[f,f+this.pattern.length]):b==d?this.ret(-900-e.length,[x,A]):p==d?this.result(-100+(y?-200:0)+-700+(w?0:-1100),u,e):i.length==2?null:this.result((a[0]?-700:0)+-200+-1100,a,e)}result(e,i,l){let a=[],c=0;for(let u of i){let f=u+(this.astral?Gn(_t(l,u)):1);c&&a[c-1]==u?a[c-1]=f:(a[c++]=u,a[c++]=f)}return this.ret(e-l.length,a)}}class QN{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let i=e.slice(0,this.pattern.length),l=i==this.pattern?0:i.toLowerCase()==this.folded?-200:null;return l==null?null:(this.matched=[0,i.length],this.score=l+(e.length==this.pattern.length?0:-100),this)}}const Xt=Oe.define({combine(s){return lr(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:qN,filterStrict:!1,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>l=>hx(e(l),i(l)),optionClass:(e,i)=>l=>hx(e(l),i(l)),addToOptions:(e,i)=>e.concat(i),filterStrict:(e,i)=>e||i})}});function hx(s,e){return s?e?s+" "+e:s:e}function qN(s,e,i,l,a,c){let u=s.textDirection==bt.RTL,f=u,d=!1,h="top",m,p,y=e.left-a.left,b=a.right-e.right,x=l.right-l.left,A=l.bottom-l.top;if(f&&y<Math.min(x,b)?f=!1:!f&&b<Math.min(x,y)&&(f=!0),x<=(f?y:b))m=Math.max(a.top,Math.min(i.top,a.bottom-A))-e.top,p=Math.min(400,f?y:b);else{d=!0,p=Math.min(400,(u?e.right:a.right-e.left)-30);let k=a.bottom-e.bottom;k>=A||k>e.top?m=i.bottom-e.top:(h="bottom",m=e.bottom-i.top)}let E=(e.bottom-e.top)/c.offsetHeight,w=(e.right-e.left)/c.offsetWidth;return{style:`${h}: ${m/E}px; max-width: ${p/w}px`,class:"cm-completionInfo-"+(d?u?"left-narrow":"right-narrow":f?"left":"right")}}function _N(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(i){let l=document.createElement("div");return l.classList.add("cm-completionIcon"),i.type&&l.classList.add(...i.type.split(/\s+/g).map(a=>"cm-completionIcon-"+a)),l.setAttribute("aria-hidden","true"),l},position:20}),e.push({render(i,l,a,c){let u=document.createElement("span");u.className="cm-completionLabel";let f=i.displayLabel||i.label,d=0;for(let h=0;h<c.length;){let m=c[h++],p=c[h++];m>d&&u.appendChild(document.createTextNode(f.slice(d,m)));let y=u.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(f.slice(m,p))),y.className="cm-completionMatchedText",d=p}return d<f.length&&u.appendChild(document.createTextNode(f.slice(d))),u},position:50},{render(i){if(!i.detail)return null;let l=document.createElement("span");return l.className="cm-completionDetail",l.textContent=i.detail,l},position:80}),e.sort((i,l)=>i.position-l.position).map(i=>i.render)}function Hh(s,e,i){if(s<=i)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let a=Math.floor(e/i);return{from:a*i,to:(a+1)*i}}let l=Math.floor((s-e)/i);return{from:s-(l+1)*i,to:s-l*i}}class eB{constructor(e,i,l){this.view=e,this.stateField=i,this.applyCompletion=l,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:d=>this.placeInfo(d),key:this},this.space=null,this.currentClass="";let a=e.state.field(i),{options:c,selected:u}=a.open,f=e.state.facet(Xt);this.optionContent=_N(f),this.optionClass=f.optionClass,this.tooltipClass=f.tooltipClass,this.range=Hh(c.length,u,f.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",d=>{let{options:h}=e.state.field(i).open;for(let m=d.target,p;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(p=/-(\d+)$/.exec(m.id))&&+p[1]<h.length){this.applyCompletion(e,h[+p[1]]),d.preventDefault();return}}),this.dom.addEventListener("focusout",d=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Xt).closeOnBlur&&d.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ll.of(null)})}),this.showOptions(c,a.id)}mount(){this.updateSel()}showOptions(e,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var i;let l=e.state.field(this.stateField),a=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),l!=a){let{options:c,selected:u,disabled:f}=l.open;(!a.open||a.open.options!=c)&&(this.range=Hh(c.length,u,e.state.facet(Xt).maxRenderedOptions),this.showOptions(c,l.id)),this.updateSel(),f!=((i=a.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!f)}}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let l of this.currentClass.split(" "))l&&this.dom.classList.remove(l);for(let l of i.split(" "))l&&this.dom.classList.add(l);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=Hh(i.options.length,i.selected,this.view.state.facet(Xt).maxRenderedOptions),this.showOptions(i.options,e.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:l}=i.options[i.selected],{info:a}=l;if(!a)return;let c=typeof a=="string"?document.createTextNode(a):a(l);if(!c)return;"then"in c?c.then(u=>{u&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(u,l)}).catch(u=>Tn(this.view.state,u,"completion info")):this.addInfoPane(c,l)}}addInfoPane(e,i){this.destroyInfo();let l=this.info=document.createElement("div");if(l.className="cm-tooltip cm-completionInfo",e.nodeType!=null)l.appendChild(e),this.infoDestroy=null;else{let{dom:a,destroy:c}=e;l.appendChild(a),this.infoDestroy=c||null}this.dom.appendChild(l),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let l=this.list.firstChild,a=this.range.from;l;l=l.nextSibling,a++)l.nodeName!="LI"||!l.id?a--:a==e?l.hasAttribute("aria-selected")||(l.setAttribute("aria-selected","true"),i=l):l.hasAttribute("aria-selected")&&l.removeAttribute("aria-selected");return i&&nB(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),l=this.info.getBoundingClientRect(),a=e.getBoundingClientRect(),c=this.space;if(!c){let u=this.dom.ownerDocument.defaultView||window;c={left:0,top:0,right:u.innerWidth,bottom:u.innerHeight}}return a.top>Math.min(c.bottom,i.bottom)-10||a.bottom<Math.max(c.top,i.top)+10?null:this.view.state.facet(Xt).positionInfo(this.view,i,a,l,c,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,l){const a=document.createElement("ul");a.id=i,a.setAttribute("role","listbox"),a.setAttribute("aria-expanded","true"),a.setAttribute("aria-label",this.view.state.phrase("Completions"));let c=null;for(let u=l.from;u<l.to;u++){let{completion:f,match:d}=e[u],{section:h}=f;if(h){let y=typeof h=="string"?h:h.name;if(y!=c&&(u>l.from||l.from==0))if(c=y,typeof h!="string"&&h.header)a.appendChild(h.header(h));else{let b=a.appendChild(document.createElement("completion-section"));b.textContent=y}}const m=a.appendChild(document.createElement("li"));m.id=i+"-"+u,m.setAttribute("role","option");let p=this.optionClass(f);p&&(m.className=p);for(let y of this.optionContent){let b=y(f,this.view.state,this.view,d);b&&m.appendChild(b)}}return l.from&&a.classList.add("cm-completionListIncompleteTop"),l.to<e.length&&a.classList.add("cm-completionListIncompleteBottom"),a}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function tB(s,e){return i=>new eB(i,s,e)}function nB(s,e){let i=s.getBoundingClientRect(),l=e.getBoundingClientRect(),a=i.height/s.offsetHeight;l.top<i.top?s.scrollTop-=(i.top-l.top)/a:l.bottom>i.bottom&&(s.scrollTop+=(l.bottom-i.bottom)/a)}function mx(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function rB(s,e){let i=[],l=null,a=h=>{i.push(h);let{section:m}=h.completion;if(m){l||(l=[]);let p=typeof m=="string"?m:m.name;l.some(y=>y.name==p)||l.push(typeof m=="string"?{name:p}:m)}},c=e.facet(Xt);for(let h of s)if(h.hasResult()){let m=h.result.getMatch;if(h.result.filter===!1)for(let p of h.result.options)a(new ux(p,h.source,m?m(p):[],1e9-i.length));else{let p=e.sliceDoc(h.from,h.to),y,b=c.filterStrict?new QN(p):new ZN(p);for(let x of h.result.options)if(y=b.match(x.label)){let A=x.displayLabel?m?m(x,y.matched):[]:y.matched;a(new ux(x,h.source,A,y.score+(x.boost||0)))}}}if(l){let h=Object.create(null),m=0,p=(y,b)=>{var x,A;return((x=y.rank)!==null&&x!==void 0?x:1e9)-((A=b.rank)!==null&&A!==void 0?A:1e9)||(y.name<b.name?-1:1)};for(let y of l.sort(p))m-=1e5,h[y.name]=m;for(let y of i){let{section:b}=y.completion;b&&(y.score+=h[typeof b=="string"?b:b.name])}}let u=[],f=null,d=c.compareCompletions;for(let h of i.sort((m,p)=>p.score-m.score||d(m.completion,p.completion))){let m=h.completion;!f||f.label!=m.label||f.detail!=m.detail||f.type!=null&&m.type!=null&&f.type!=m.type||f.apply!=m.apply||f.boost!=m.boost?u.push(h):mx(h.completion)>mx(f)&&(u[u.length-1]=h),f=h.completion}return u}class to{constructor(e,i,l,a,c,u){this.options=e,this.attrs=i,this.tooltip=l,this.timestamp=a,this.selected=c,this.disabled=u}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new to(this.options,px(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,l,a,c,u){if(a&&!u&&e.some(h=>h.isPending))return a.setDisabled();let f=rB(e,i);if(!f.length)return a&&e.some(h=>h.isPending)?a.setDisabled():null;let d=i.facet(Xt).selectOnOpen?0:-1;if(a&&a.selected!=d&&a.selected!=-1){let h=a.options[a.selected].completion;for(let m=0;m<f.length;m++)if(f[m].completion==h){d=m;break}}return new to(f,px(l,d),{pos:e.reduce((h,m)=>m.hasResult()?Math.min(h,m.from):h,1e8),create:cB,above:c.aboveCursor},a?a.timestamp:Date.now(),d,!1)}map(e){return new to(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new to(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Yc{constructor(e,i,l){this.active=e,this.id=i,this.open=l}static start(){return new Yc(lB,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,l=i.facet(Xt),c=(l.override||i.languageDataAt("autocomplete",hs(i)).map(XN)).map(d=>(this.active.find(m=>m.source==d)||new Qn(d,this.active.some(m=>m.state!=0)?1:0)).update(e,l));c.length==this.active.length&&c.every((d,h)=>d==this.active[h])&&(c=this.active);let u=this.open,f=e.effects.some(d=>d.is(Kh));u&&e.docChanged&&(u=u.map(e.changes)),e.selection||c.some(d=>d.hasResult()&&e.changes.touchesRange(d.from,d.to))||!iB(c,this.active)||f?u=to.build(c,i,this.id,u,l,f):u&&u.disabled&&!c.some(d=>d.isPending)&&(u=null),!u&&c.every(d=>!d.isPending)&&c.some(d=>d.hasResult())&&(c=c.map(d=>d.hasResult()?new Qn(d.source,0):d));for(let d of e.effects)d.is(Gh)&&(u=u&&u.setSelected(d.value,this.id));return c==this.active&&u==this.open?this:new Yc(c,this.id,u)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?sB:oB}}function iB(s,e){if(s==e)return!0;for(let i=0,l=0;;){for(;i<s.length&&!s[i].hasResult();)i++;for(;l<e.length&&!e[l].hasResult();)l++;let a=i==s.length,c=l==e.length;if(a||c)return a==c;if(s[i++].result!=e[l++].result)return!1}}const sB={"aria-autocomplete":"list"},oB={};function px(s,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(i["aria-activedescendant"]=s+"-"+e),i}const lB=[];function gx(s,e){if(s.isUserEvent("input.complete")){let l=s.annotation(Uh);if(l&&e.activateOnCompletion(l))return 12}let i=s.isUserEvent("input.type");return i&&e.activateOnTyping?5:i?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class Qn{constructor(e,i,l=!1){this.source=e,this.state=i,this.explicit=l}hasResult(){return!1}get isPending(){return this.state==1}update(e,i){let l=gx(e,i),a=this;(l&8||l&16&&this.touches(e))&&(a=new Qn(a.source,0)),l&4&&a.state==0&&(a=new Qn(this.source,1)),a=a.updateFor(e,l);for(let c of e.effects)if(c.is(Gc))a=new Qn(a.source,1,c.value);else if(c.is(Ll))a=new Qn(a.source,0);else if(c.is(Kh))for(let u of c.value)u.source==a.source&&(a=u);return a}updateFor(e,i){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(hs(e.state))}}class no extends Qn{constructor(e,i,l,a,c,u){super(e,3,i),this.limit=l,this.result=a,this.from=c,this.to=u}hasResult(){return!0}updateFor(e,i){var l;if(!(i&3))return this.map(e.changes);let a=this.result;a.map&&!e.changes.empty&&(a=a.map(a,e.changes));let c=e.changes.mapPos(this.from),u=e.changes.mapPos(this.to,1),f=hs(e.state);if(f>u||!a||i&2&&(hs(e.startState)==this.from||f<this.limit))return new Qn(this.source,i&4?1:0);let d=e.changes.mapPos(this.limit);return aB(a.validFor,e.state,c,u)?new no(this.source,this.explicit,d,a,c,u):a.update&&(a=a.update(a,c,u,new ax(e.state,f,!1)))?new no(this.source,this.explicit,d,a,a.from,(l=a.to)!==null&&l!==void 0?l:hs(e.state)):new Qn(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new no(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Qn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function aB(s,e,i,l){if(!s)return!1;let a=e.sliceDoc(i,l);return typeof s=="function"?s(a,i,l,e):fx(s,!0).test(a)}const Kh=He.define({map(s,e){return s.map(i=>i.map(e))}}),Gh=He.define(),Zt=jt.define({create(){return Yc.start()},update(s,e){return s.update(e)},provide:s=>[fc.from(s,e=>e.tooltip),Se.contentAttributes.from(s,e=>e.attrs)]});function Yh(s,e){const i=e.completion.apply||e.completion.label;let l=s.state.field(Zt).active.find(a=>a.source==e.source);return l instanceof no?(typeof i=="string"?s.dispatch(Object.assign(Object.assign({},JN(s.state,i,l.from,l.to)),{annotations:Uh.of(e.completion)})):i(s,e.completion,l.from,l.to),!0):!1}const cB=tB(Zt,Yh);function Jc(s,e="option"){return i=>{let l=i.state.field(Zt,!1);if(!l||!l.open||l.open.disabled||Date.now()-l.open.timestamp<i.state.facet(Xt).interactionDelay)return!1;let a=1,c;e=="page"&&(c=rb(i,l.open.tooltip))&&(a=Math.max(2,Math.floor(c.dom.offsetHeight/c.dom.querySelector("li").offsetHeight)-1));let{length:u}=l.open.options,f=l.open.selected>-1?l.open.selected+a*(s?1:-1):s?0:u-1;return f<0?f=e=="page"?0:u-1:f>=u&&(f=e=="page"?u-1:0),i.dispatch({effects:Gh.of(f)}),!0}}const uB=s=>{let e=s.state.field(Zt,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(Xt).interactionDelay?!1:Yh(s,e.open.options[e.open.selected])},yx=s=>s.state.field(Zt,!1)?(s.dispatch({effects:Gc.of(!0)}),!0):!1,fB=s=>{let e=s.state.field(Zt,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(s.dispatch({effects:Ll.of(null)}),!0)};class dB{constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const hB=50,mB=1e3,pB=It.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(Zt).active)e.isPending&&this.startQuery(e)}update(s){let e=s.state.field(Zt),i=s.state.facet(Xt);if(!s.selectionSet&&!s.docChanged&&s.startState.field(Zt)==e)return;let l=s.transactions.some(c=>{let u=gx(c,i);return u&8||(c.selection||c.docChanged)&&!(u&3)});for(let c=0;c<this.running.length;c++){let u=this.running[c];if(l||u.context.abortOnDocChange&&s.docChanged||u.updates.length+s.transactions.length>hB&&Date.now()-u.time>mB){for(let f of u.context.abortListeners)try{f()}catch(d){Tn(this.view.state,d)}u.context.abortListeners=null,this.running.splice(c--,1)}else u.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(c=>c.effects.some(u=>u.is(Gc)))&&(this.pendingStart=!0);let a=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(c=>c.isPending&&!this.running.some(u=>u.active.source==c.source))?setTimeout(()=>this.startUpdate(),a):-1,this.composing!=0)for(let c of s.transactions)c.isUserEvent("input.type")?this.composing=2:this.composing==2&&c.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(Zt);for(let i of e.active)i.isPending&&!this.running.some(l=>l.active.source==i.source)&&this.startQuery(i);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Xt).updateSyncTime))}startQuery(s){let{state:e}=this.view,i=hs(e),l=new ax(e,i,s.explicit,this.view),a=new dB(s,l);this.running.push(a),Promise.resolve(s.source(l)).then(c=>{a.context.aborted||(a.done=c||null,this.scheduleAccept())},c=>{this.view.dispatch({effects:Ll.of(null)}),Tn(this.view.state,c)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Xt).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(Xt),l=this.view.state.field(Zt);for(let a=0;a<this.running.length;a++){let c=this.running[a];if(c.done===void 0)continue;if(this.running.splice(a--,1),c.done){let f=hs(c.updates.length?c.updates[0].startState:this.view.state),d=Math.min(f,c.done.from+(c.active.explicit?0:1)),h=new no(c.active.source,c.active.explicit,d,c.done,c.done.from,(s=c.done.to)!==null&&s!==void 0?s:f);for(let m of c.updates)h=h.update(m,i);if(h.hasResult()){e.push(h);continue}}let u=l.active.find(f=>f.source==c.active.source);if(u&&u.isPending)if(c.done==null){let f=new Qn(c.active.source,0);for(let d of c.updates)f=f.update(d,i);f.isPending||e.push(f)}else this.startQuery(u)}(e.length||l.open&&l.open.disabled)&&this.view.dispatch({effects:Kh.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(Zt,!1);if(e&&e.tooltip&&this.view.state.facet(Xt).closeOnBlur){let i=e.open&&rb(this.view,e.open.tooltip);(!i||!i.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ll.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Gc.of(!1)}),20),this.composing=0}}}),gB=typeof navigator=="object"&&/Win/.test(navigator.platform),yB=oi.highest(Se.domEventHandlers({keydown(s,e){let i=e.state.field(Zt,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||s.key.length>1||s.ctrlKey&&!(gB&&s.altKey)||s.metaKey)return!1;let l=i.open.options[i.open.selected],a=i.active.find(u=>u.source==l.source),c=l.completion.commitCharacters||a.result.commitCharacters;return c&&c.indexOf(s.key)>-1&&Yh(e,l),!1}})),vx=Se.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class vB{constructor(e,i,l,a){this.field=e,this.line=i,this.from=l,this.to=a}}class Jh{constructor(e,i,l){this.field=e,this.from=i,this.to=l}map(e){let i=e.mapPos(this.from,-1,MapMode.TrackDel),l=e.mapPos(this.to,1,MapMode.TrackDel);return i==null||l==null?null:new Jh(this.field,i,l)}}class Xh{constructor(e,i){this.lines=e,this.fieldPositions=i}instantiate(e,i){let l=[],a=[i],c=e.doc.lineAt(i),u=/^\s*/.exec(c.text)[0];for(let d of this.lines){if(l.length){let h=u,m=/^\t*/.exec(d)[0].length;for(let p=0;p<m;p++)h+=e.facet(indentUnit);a.push(i+h.length-m),d=h+d.slice(m)}l.push(d),i+=d.length+1}let f=this.fieldPositions.map(d=>new Jh(d.field,a[d.line]+d.from,a[d.line]+d.to));return{text:l,ranges:f}}static parse(e){let i=[],l=[],a=[],c;for(let u of e.split(/\r\n?|\n/)){for(;c=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(u);){let f=c[1]?+c[1]:null,d=c[2]||c[3]||"",h=-1,m=d.replace(/\\[{}]/g,p=>p[1]);for(let p=0;p<i.length;p++)(f!=null?i[p].seq==f:m&&i[p].name==m)&&(h=p);if(h<0){let p=0;for(;p<i.length&&(f==null||i[p].seq!=null&&i[p].seq<f);)p++;i.splice(p,0,{seq:f,name:m}),h=p;for(let y of a)y.field>=h&&y.field++}a.push(new vB(h,l.length,c.index,c.index+m.length)),u=u.slice(0,c.index)+d+u.slice(c.index+c[0].length)}u=u.replace(/\\([{}])/g,(f,d,h)=>{for(let m of a)m.line==l.length&&m.from>h&&(m.from--,m.to--);return d}),l.push(u)}return new Xh(l,a)}}let bB=Re.widget({widget:new class extends Tr{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),xB=Re.mark({class:"cm-snippetField"});class ro{constructor(e,i){this.ranges=e,this.active=i,this.deco=Re.set(e.map(l=>(l.from==l.to?bB:xB).range(l.from,l.to)))}map(e){let i=[];for(let l of this.ranges){let a=l.map(e);if(!a)return null;i.push(a)}return new ro(i,this.active)}selectionInsideField(e){return e.ranges.every(i=>this.ranges.some(l=>l.field==this.active&&l.from<=i.from&&l.to>=i.to))}}const Fl=He.define({map(s,e){return s&&s.map(e)}}),SB=He.define(),ms=jt.define({create(){return null},update(s,e){for(let i of e.effects){if(i.is(Fl))return i.value;if(i.is(SB)&&s)return new ro(s.ranges,i.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>Se.decorations.from(s,e=>e?e.deco:Re.none)});function Zh(s,e){return de.create(s.filter(i=>i.field==e).map(i=>de.range(i.from,i.to)))}function EB(s){let e=Xh.parse(s);return(i,l,a,c)=>{let{text:u,ranges:f}=e.instantiate(i.state,a),d={changes:{from:a,to:c,insert:Text.of(u)},scrollIntoView:!0,annotations:l?[Uh.of(l),Transaction.userEvent.of("input.complete")]:void 0};if(f.length&&(d.selection=Zh(f,0)),f.some(h=>h.field>0)){let h=new ro(f,0),m=d.effects=[Fl.of(h)];i.state.field(ms,!1)===void 0&&m.push(StateEffect.appendConfig.of([ms,kB,PB,vx]))}i.dispatch(i.state.update(d))}}function bx(s){return({state:e,dispatch:i})=>{let l=e.field(ms,!1);if(!l||s<0&&l.active==0)return!1;let a=l.active+s,c=s>0&&!l.ranges.some(u=>u.field==a+s);return i(e.update({selection:Zh(l.ranges,a),effects:Fl.of(c?null:new ro(l.ranges,a)),scrollIntoView:!0})),!0}}const AB=({state:s,dispatch:e})=>s.field(ms,!1)?(e(s.update({effects:Fl.of(null)})),!0):!1,wB=bx(1),CB=bx(-1);function s5(s){let e=s.field(ms,!1);return!!(e&&e.ranges.some(i=>i.field==e.active+1))}function o5(s){let e=s.field(ms,!1);return!!(e&&e.active>0)}const OB=[{key:"Tab",run:wB,shift:CB},{key:"Escape",run:AB}],xx=Oe.define({combine(s){return s.length?s[0]:OB}}),kB=oi.highest(ml.compute([xx],s=>s.facet(xx)));function l5(s,e){return Object.assign(Object.assign({},e),{apply:EB(s)})}const PB=Se.domEventHandlers({mousedown(s,e){let i=e.state.field(ms,!1),l;if(!i||(l=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let a=i.ranges.find(c=>c.from<=l&&c.to>=l);return!a||a.field==i.active?!1:(e.dispatch({selection:Zh(i.ranges,a.field),effects:Fl.of(i.ranges.some(c=>c.field>a.field)?new ro(i.ranges,a.field):null),scrollIntoView:!0}),!0)}});function TB(s){let e=s.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${e}]+`,"ug")}catch{return new RegExp(`[w${e}]`,"g")}}function Sx(s,e){return new RegExp(e(s.source),s.unicode?"u":"")}const Ex=null;function DB(s){return Ex[s]||(Ex[s]=new WeakMap)}function Ax(s,e,i,l,a){for(let c=s.iterLines(),u=0;!c.next().done;){let{value:f}=c,d;for(e.lastIndex=0;d=e.exec(f);)if(!l[d[0]]&&u+d.index!=a&&(i.push({type:"text",label:d[0]}),l[d[0]]=!0,i.length>=2e3))return;u+=f.length+1}}function wx(s,e,i,l,a){let c=s.length>=1e3,u=c&&e.get(s);if(u)return u;let f=[],d=Object.create(null);if(s.children){let h=0;for(let m of s.children){if(m.length>=1e3)for(let p of wx(m,e,i,l-h,a-h))d[p.label]||(d[p.label]=!0,f.push(p));else Ax(m,i,f,d,a-h);h+=m.length+1}}else Ax(s,i,f,d,a);return c&&f.length<2e3&&e.set(s,f),f}const a5=s=>{let e=s.state.languageDataAt("wordChars",s.pos).join(""),i=TB(e),l=s.matchBefore(Sx(i,u=>u+"$"));if(!l&&!s.explicit)return null;let a=l?l.from:s.pos,c=wx(s.state.doc,DB(e),i,5e4,a);return{from:a,options:c,validFor:Sx(i,u=>"^"+u)}},Nl={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ps=He.define({map(s,e){let i=e.mapPos(s,-1,yn.TrackAfter);return i??void 0}}),Qh=new class extends ns{};Qh.startSide=1,Qh.endSide=-1;const Cx=jt.define({create(){return it.empty},update(s,e){if(s=s.map(e.changes),e.selection){let i=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:l=>l>=i.from&&l<=i.to})}for(let i of e.effects)i.is(ps)&&(s=s.update({add:[Qh.range(i.value,i.value+1)]}));return s}});function MB(){return[RB,Cx]}const qh="()[]{}<>";function Ox(s){for(let e=0;e<qh.length;e+=2)if(qh.charCodeAt(e)==s)return qh.charAt(e+1);return Hf(s<128?s:s+1)}function kx(s,e){return s.languageDataAt("closeBrackets",e)[0]||Nl}const IB=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),RB=Se.inputHandler.of((s,e,i,l)=>{if((IB?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let a=s.state.selection.main;if(l.length>2||l.length==2&&Gn(_t(l,0))==1||e!=a.from||i!=a.to)return!1;let c=FB(s.state,l);return c?(s.dispatch(c),!0):!1}),LB=[{key:"Backspace",run:({state:s,dispatch:e})=>{if(s.readOnly)return!1;let l=kx(s,s.selection.main.head).brackets||Nl.brackets,a=null,c=s.changeByRange(u=>{if(u.empty){let f=NB(s.doc,u.head);for(let d of l)if(d==f&&Xc(s.doc,u.head)==Ox(_t(d,0)))return{changes:{from:u.head-d.length,to:u.head+d.length},range:de.cursor(u.head-d.length)}}return{range:a=u}});return a||e(s.update(c,{scrollIntoView:!0,userEvent:"delete.backward"})),!a}}];function FB(s,e){let i=kx(s,s.selection.main.head),l=i.brackets||Nl.brackets;for(let a of l){let c=Ox(_t(a,0));if(e==a)return c==a?jB(s,a,l.indexOf(a+a+a)>-1,i):BB(s,a,c,i.before||Nl.before);if(e==c&&Px(s,s.selection.main.from))return $B(s,a,c)}return null}function Px(s,e){let i=!1;return s.field(Cx).between(0,s.doc.length,l=>{l==e&&(i=!0)}),i}function Xc(s,e){let i=s.sliceString(e,e+2);return i.slice(0,Gn(_t(i,0)))}function NB(s,e){let i=s.sliceString(e-2,e);return Gn(_t(i,0))==i.length?i:i.slice(1)}function BB(s,e,i,l){let a=null,c=s.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:i,from:u.to}],effects:ps.of(u.to+e.length),range:de.range(u.anchor+e.length,u.head+e.length)};let f=Xc(s.doc,u.head);return!f||/\s/.test(f)||l.indexOf(f)>-1?{changes:{insert:e+i,from:u.head},effects:ps.of(u.head+e.length),range:de.cursor(u.head+e.length)}:{range:a=u}});return a?null:s.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function $B(s,e,i){let l=null,a=s.changeByRange(c=>c.empty&&Xc(s.doc,c.head)==i?{changes:{from:c.head,to:c.head+i.length,insert:i},range:de.cursor(c.head+i.length)}:l={range:c});return l?null:s.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function jB(s,e,i,l){let a=l.stringPrefixes||Nl.stringPrefixes,c=null,u=s.changeByRange(f=>{if(!f.empty)return{changes:[{insert:e,from:f.from},{insert:e,from:f.to}],effects:ps.of(f.to+e.length),range:de.range(f.anchor+e.length,f.head+e.length)};let d=f.head,h=Xc(s.doc,d),m;if(h==e){if(Tx(s,d))return{changes:{insert:e+e,from:d},effects:ps.of(d+e.length),range:de.cursor(d+e.length)};if(Px(s,d)){let y=i&&s.sliceDoc(d,d+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:d,to:d+y.length,insert:y},range:de.cursor(d+y.length)}}}else{if(i&&s.sliceDoc(d-2*e.length,d)==e+e&&(m=Dx(s,d-2*e.length,a))>-1&&Tx(s,m))return{changes:{insert:e+e+e+e,from:d},effects:ps.of(d+e.length),range:de.cursor(d+e.length)};if(s.charCategorizer(d)(h)!=Pt.Word&&Dx(s,d,a)>-1&&!WB(s,d,e,a))return{changes:{insert:e+e,from:d},effects:ps.of(d+e.length),range:de.cursor(d+e.length)}}return{range:c=f}});return c?null:s.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function Tx(s,e){let i=Yt(s).resolveInner(e+1);return i.parent&&i.from==e}function WB(s,e,i,l){let a=Yt(s).resolveInner(e,-1),c=l.reduce((u,f)=>Math.max(u,f.length),0);for(let u=0;u<5;u++){let f=s.sliceDoc(a.from,Math.min(a.to,a.from+i.length+c)),d=f.indexOf(i);if(!d||d>-1&&l.indexOf(f.slice(0,d))>-1){let m=a.firstChild;for(;m&&m.from==a.from&&m.to-m.from>i.length+d;){if(s.sliceDoc(m.to-i.length,m.to)==i)return!1;m=m.firstChild}return!0}let h=a.to==e&&a.parent;if(!h)break;a=h}return!1}function Dx(s,e,i){let l=s.charCategorizer(e);if(l(s.sliceDoc(e-1,e))!=Pt.Word)return e;for(let a of i){let c=e-a.length;if(s.sliceDoc(c,e)==a&&l(s.sliceDoc(c-1,c))!=Pt.Word)return c}return-1}function VB(s={}){return[yB,Zt,Xt.of(s),pB,zB,vx]}const Mx=[{key:"Ctrl-Space",run:yx},{mac:"Alt-`",run:yx},{key:"Escape",run:fB},{key:"ArrowDown",run:Jc(!0)},{key:"ArrowUp",run:Jc(!1)},{key:"PageDown",run:Jc(!0,"page")},{key:"PageUp",run:Jc(!1,"page")},{key:"Enter",run:uB}],zB=oi.highest(ml.computeN([Xt],s=>s.facet(Xt).defaultKeymap?[Mx]:[]));function u5(s){let e=s.field(Zt,!1);return e&&e.active.some(i=>i.isPending)?"pending":e&&e.active.some(i=>i.state!=0)?"active":null}const Ix=new WeakMap;function f5(s){var e;let i=(e=s.field(Zt,!1))===null||e===void 0?void 0:e.open;if(!i||i.disabled)return[];let l=Ix.get(i.options);return l||Ix.set(i.options,l=i.options.map(a=>a.completion)),l}function d5(s){var e;let i=(e=s.field(Zt,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.options[i.selected].completion:null}function h5(s){var e;let i=(e=s.field(Zt,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.selected:null}function m5(s){return Gh.of(s)}class Rx{constructor(e,i,l){this.from=e,this.to=i,this.diagnostic=l}}class gs{constructor(e,i,l){this.diagnostics=e,this.panel=i,this.selected=l}static init(e,i,l){let a=e,c=l.facet(so).markerFilter;c&&(a=c(a,l));let u=e.slice().sort((p,y)=>p.from-y.from||p.to-y.to),f=new kr,d=[],h=0;for(let p=0;;){let y=p==u.length?null:u[p];if(!y&&!d.length)break;let b,x;for(d.length?(b=h,x=d.reduce((E,w)=>Math.min(E,w.to),y&&y.from>b?y.from:1e8)):(b=y.from,x=y.to,d.push(y),p++);p<u.length;){let E=u[p];if(E.from==b&&(E.to>E.from||E.to==b))d.push(E),p++,x=Math.min(E.to,x);else{x=Math.min(E.from,x);break}}let A=Ux(d);if(d.some(E=>E.from==E.to||E.from==E.to-1&&l.doc.lineAt(E.from).to==E.from))f.add(b,b,Re.widget({widget:new JB(A),diagnostics:d.slice()}));else{let E=d.reduce((w,k)=>k.markClass?w+" "+k.markClass:w,"");f.add(b,x,Re.mark({class:"cm-lintRange cm-lintRange-"+A+E,diagnostics:d.slice(),inclusiveEnd:d.some(w=>w.to>x)}))}h=x;for(let E=0;E<d.length;E++)d[E].to<=h&&d.splice(E--,1)}let m=f.finish();return new gs(m,i,io(m))}}function io(s,e=null,i=0){let l=null;return s.between(i,1e9,(a,c,{spec:u})=>{if(!(e&&u.diagnostics.indexOf(e)<0))if(!l)l=new Rx(a,c,e||u.diagnostics[0]);else{if(u.diagnostics.indexOf(l.diagnostic)<0)return!1;l=new Rx(l.from,c,l.diagnostic)}}),l}function Lx(s,e){let i=e.pos,l=e.end||i,a=s.state.facet(so).hideOn(s,i,l);if(a!=null)return a;let c=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(u=>u.is(Zc))||s.changes.touchesRange(c.from,Math.max(c.to,l)))}function Fx(s,e){return s.field(cn,!1)?e:e.concat(He.appendConfig.of(Gx))}function p5(s,e){return{effects:Fx(s,[Zc.of(e)])}}const Zc=He.define(),_h=He.define(),Nx=He.define(),cn=jt.define({create(){return new gs(Re.none,null,null)},update(s,e){if(e.docChanged&&s.diagnostics.size){let i=s.diagnostics.map(e.changes),l=null,a=s.panel;if(s.selected){let c=e.changes.mapPos(s.selected.from,1);l=io(i,s.selected.diagnostic,c)||io(i,null,c)}!i.size&&a&&e.state.facet(so).autoPanel&&(a=null),s=new gs(i,a,l)}for(let i of e.effects)if(i.is(Zc)){let l=e.state.facet(so).autoPanel?i.value.length?Bl.open:null:s.panel;s=gs.init(i.value,l,e.state)}else i.is(_h)?s=new gs(s.diagnostics,i.value?Bl.open:null,s.selected):i.is(Nx)&&(s=new gs(s.diagnostics,s.panel,i.value));return s},provide:s=>[ls.from(s,e=>e.panel),Se.decorations.from(s,e=>e.diagnostics)]});function g5(s){let e=s.field(cn,!1);return e?e.diagnostics.size:0}const UB=Re.mark({class:"cm-lintRange cm-lintRange-active"});function HB(s,e,i){let{diagnostics:l}=s.state.field(cn),a,c=-1,u=-1;l.between(e-(i<0?1:0),e+(i>0?1:0),(d,h,{spec:m})=>{if(e>=d&&e<=h&&(d==h||(e>d||i>0)&&(e<h||i<0)))return a=m.diagnostics,c=d,u=h,!1});let f=s.state.facet(so).tooltipFilter;return a&&f&&(a=f(a,s.state)),a?{pos:c,end:u,above:s.state.doc.lineAt(c).to<u,create(){return{dom:Bx(s,a)}}}:null}function Bx(s,e){return Ct("ul",{class:"cm-tooltip-lint"},e.map(i=>Vx(s,i,!1)))}const KB=s=>{let e=s.state.field(cn,!1);(!e||!e.panel)&&s.dispatch({effects:Fx(s.state,[_h.of(!0)])});let i=bl(s,Bl.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},$x=s=>{let e=s.state.field(cn,!1);return!e||!e.panel?!1:(s.dispatch({effects:_h.of(!1)}),!0)},GB=s=>{let e=s.state.field(cn,!1);if(!e)return!1;let i=s.state.selection.main,l=e.diagnostics.iter(i.to+1);return!l.value&&(l=e.diagnostics.iter(0),!l.value||l.from==i.from&&l.to==i.to)?!1:(s.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0}),!0)},y5=s=>{let{state:e}=s,i=e.field(cn,!1);if(!i)return!1;let l=e.selection.main,a,c,u,f;return i.diagnostics.between(0,e.doc.length,(d,h)=>{h<l.to&&(a==null||a<d)&&(a=d,c=h),(u==null||d>u)&&(u=d,f=h)}),u==null||a==null&&u==l.from?!1:(s.dispatch({selection:{anchor:a??u,head:c??f},scrollIntoView:!0}),!0)},YB=[{key:"Mod-Shift-m",run:KB,preventDefault:!0},{key:"F8",run:GB}],jx=null;function v5(s,e,i){let l=[],a=-1;for(let c of s)c.then(u=>{l.push(u),clearTimeout(a),l.length==s.length?e(l):a=setTimeout(()=>e(l),200)},i)}const so=Oe.define({combine(s){return Object.assign({sources:s.map(e=>e.source).filter(e=>e!=null)},lr(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,i)=>e?i?l=>e(l)||i(l):e:i}))}});function b5(s,e={}){return[so.of({source:s,config:e}),jx,Gx]}function x5(s){let e=s.plugin(jx);e&&e.force()}function Wx(s){let e=[];if(s)e:for(let{name:i}of s){for(let l=0;l<i.length;l++){let a=i[l];if(/[a-zA-Z]/.test(a)&&!e.some(c=>c.toLowerCase()==a.toLowerCase())){e.push(a);continue e}}e.push("")}return e}function Vx(s,e,i){var l;let a=i?Wx(e.actions):[];return Ct("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ct("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(s):e.message),(l=e.actions)===null||l===void 0?void 0:l.map((c,u)=>{let f=!1,d=y=>{if(y.preventDefault(),f)return;f=!0;let b=io(s.state.field(cn).diagnostics,e);b&&c.apply(s,b.from,b.to)},{name:h}=c,m=a[u]?h.indexOf(a[u]):-1,p=m<0?h:[h.slice(0,m),Ct("u",h.slice(m,m+1)),h.slice(m+1)];return Ct("button",{type:"button",class:"cm-diagnosticAction",onclick:d,onmousedown:d,"aria-label":` Action: ${h}${m<0?"":` (access key "${a[u]})"`}.`},p)}),e.source&&Ct("div",{class:"cm-diagnosticSource"},e.source))}class JB extends Tr{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Ct("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class zx{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Vx(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Bl{constructor(e){this.view=e,this.items=[];let i=a=>{if(a.keyCode==27)$x(this.view),this.view.focus();else if(a.keyCode==38||a.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(a.keyCode==40||a.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(a.keyCode==36)this.moveSelection(0);else if(a.keyCode==35)this.moveSelection(this.items.length-1);else if(a.keyCode==13)this.view.focus();else if(a.keyCode>=65&&a.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:c}=this.items[this.selectedIndex],u=Wx(c.actions);for(let f=0;f<u.length;f++)if(u[f].toUpperCase().charCodeAt(0)==a.keyCode){let d=io(this.view.state.field(cn).diagnostics,c);d&&c.actions[f].apply(e,d.from,d.to)}}else return;a.preventDefault()},l=a=>{for(let c=0;c<this.items.length;c++)this.items[c].dom.contains(a.target)&&this.moveSelection(c)};this.list=Ct("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:l}),this.dom=Ct("div",{class:"cm-panel-lint"},this.list,Ct("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>$x(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(cn).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(cn),l=0,a=!1,c=null,u=new Set;for(e.between(0,this.view.state.doc.length,(f,d,{spec:h})=>{for(let m of h.diagnostics){if(u.has(m))continue;u.add(m);let p=-1,y;for(let b=l;b<this.items.length;b++)if(this.items[b].diagnostic==m){p=b;break}p<0?(y=new zx(this.view,m),this.items.splice(l,0,y),a=!0):(y=this.items[p],p>l&&(this.items.splice(l,p-l),a=!0)),i&&y.diagnostic==i.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),c=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),l++}});l<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)a=!0,this.items.pop();this.items.length==0&&(this.items.push(new zx(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),a=!0),c?(this.list.setAttribute("aria-activedescendant",c.id),this.view.requestMeasure({key:this,read:()=>({sel:c.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:f,panel:d})=>{let h=d.height/this.list.offsetHeight;f.top<d.top?this.list.scrollTop-=(d.top-f.top)/h:f.bottom>d.bottom&&(this.list.scrollTop+=(f.bottom-d.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),a&&this.sync()}sync(){let e=this.list.firstChild;function i(){let l=e;e=l.nextSibling,l.remove()}for(let l of this.items)if(l.dom.parentNode==this.list){for(;e!=l.dom;)i();e=l.dom.nextSibling}else this.list.insertBefore(l.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(cn),l=io(i.diagnostics,this.items[e].diagnostic);l&&this.view.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0,effects:Nx.of(l)})}static open(e){return new Bl(e)}}function Qc(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function qc(s){return Qc(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const XB=Se.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:qc("#d11")},".cm-lintRange-warning":{backgroundImage:qc("orange")},".cm-lintRange-info":{backgroundImage:qc("#999")},".cm-lintRange-hint":{backgroundImage:qc("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function ZB(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}function Ux(s){let e="hint",i=1;for(let l of s){let a=ZB(l.severity);a>i&&(i=a,e=l.severity)}return e}class Hx extends Ir{constructor(e){super(),this.diagnostics=e,this.severity=Ux(e)}toDOM(e){let i=document.createElement("div");i.className="cm-lint-marker cm-lint-marker-"+this.severity;let l=this.diagnostics,a=e.state.facet(_c).tooltipFilter;return a&&(l=a(l,e.state)),l.length&&(i.onmouseover=()=>qB(e,i,l)),i}}function QB(s,e){let i=l=>{let a=e.getBoundingClientRect();if(!(l.clientX>a.left-10&&l.clientX<a.right+10&&l.clientY>a.top-10&&l.clientY<a.bottom+10)){for(let c=l.target;c;c=c.parentNode)if(c.nodeType==1&&c.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",i),s.state.field(Kx)&&s.dispatch({effects:tm.of(null)})}};window.addEventListener("mousemove",i)}function qB(s,e,i){function l(){let u=s.elementAtHeight(e.getBoundingClientRect().top+5-s.documentTop);s.coordsAtPos(u.from)&&s.dispatch({effects:tm.of({pos:u.from,above:!1,clip:!1,create(){return{dom:Bx(s,i),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,QB(s,e)}let{hoverTime:a}=s.state.facet(_c),c=setTimeout(l,a);e.onmouseout=()=>{clearTimeout(c),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(c),c=setTimeout(l,a)}}function _B(s,e){let i=Object.create(null);for(let a of e){let c=s.lineAt(a.from);(i[c.from]||(i[c.from]=[])).push(a)}let l=[];for(let a in i)l.push(new Hx(i[a]).range(+a));return it.of(l,!0)}const e4=ob({class:"cm-gutter-lint",markers:s=>s.state.field(em),widgetMarker:(s,e,i)=>{let l=[];return s.state.field(em).between(i.from,i.to,(a,c,u)=>{a>i.from&&a<i.to&&l.push(...u.diagnostics)}),l.length?new Hx(l):null}}),em=jt.define({create(){return it.empty},update(s,e){s=s.map(e.changes);let i=e.state.facet(_c).markerFilter;for(let l of e.effects)if(l.is(Zc)){let a=l.value;i&&(a=i(a||[],e.state)),s=_B(e.state.doc,a.slice(0))}return s}}),tm=He.define(),Kx=jt.define({create(){return null},update(s,e){return s&&e.docChanged&&(s=Lx(e,s)?null:Object.assign(Object.assign({},s),{pos:e.changes.mapPos(s.pos)})),e.effects.reduce((i,l)=>l.is(tm)?l.value:i,s)},provide:s=>fc.from(s)}),t4=Se.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Qc('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Qc('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Qc('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Gx=[cn,Se.decorations.compute([cn],s=>{let{selected:e,panel:i}=s.field(cn);return!e||!i||e.from==e.to?Re.none:Re.set([UB.range(e.from,e.to)])}),kR(HB,{hideOn:Lx}),XB],_c=Oe.define({combine(s){return lr(s,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function S5(s={}){return[_c.of(s),em,e4,t4,Kx]}function E5(s,e){let i=s.field(cn,!1);if(i&&i.diagnostics.size){let l=[],a=[],c=-1;for(let u=RangeSet.iter([i.diagnostics]);;u.next()){for(let f=0;f<l.length;f++)(!u.value||u.value.spec.diagnostics.indexOf(l[f])<0)&&(e(l[f],a[f],c),l.splice(f,1),a.splice(f--,1));if(!u.value)break;for(let f of u.value.spec.diagnostics)l.indexOf(f)<0&&(l.push(f),a.push(u.from));c=u.to}}}var Yx=function(e){e===void 0&&(e={});var{crosshairCursor:i=!1}=e,l=[];e.closeBracketsKeymap!==!1&&(l=l.concat(LB)),e.defaultKeymap!==!1&&(l=l.concat(vN)),e.searchKeymap!==!1&&(l=l.concat(UN)),e.historyKeymap!==!1&&(l=l.concat(PF)),e.foldKeymap!==!1&&(l=l.concat(FL)),e.completionKeymap!==!1&&(l=l.concat(Mx)),e.lintKeymap!==!1&&(l=l.concat(YB));var a=[];return e.lineNumbers!==!1&&a.push(BR()),e.highlightActiveLineGutter!==!1&&a.push(WR()),e.highlightSpecialChars!==!1&&a.push(nR()),e.history!==!1&&a.push(bF()),e.foldGutter!==!1&&a.push(jL()),e.drawSelection!==!1&&a.push(GI()),e.dropCursor!==!1&&a.push(QI()),e.allowMultipleSelections!==!1&&a.push(rt.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&a.push(wL()),e.syntaxHighlighting!==!1&&a.push(Kb(UL,{fallback:!0})),e.bracketMatching!==!1&&a.push(XL()),e.closeBrackets!==!1&&a.push(MB()),e.autocompletion!==!1&&a.push(VB()),e.rectangularSelection!==!1&&a.push(gR()),i!==!1&&a.push(bR()),e.highlightActiveLine!==!1&&a.push(aR()),e.highlightSelectionMatches!==!1&&a.push(wN()),e.tabSize&&typeof e.tabSize=="number"&&a.push(wc.of(" ".repeat(e.tabSize))),a.concat([ml.of(l.flat())]).filter(Boolean)},A5=function(e){e===void 0&&(e={});var i=[];e.defaultKeymap!==!1&&(i=i.concat(defaultKeymap)),e.historyKeymap!==!1&&(i=i.concat(historyKeymap));var l=[];return e.highlightSpecialChars!==!1&&l.push(highlightSpecialChars()),e.history!==!1&&l.push(history()),e.drawSelection!==!1&&l.push(drawSelection()),e.syntaxHighlighting!==!1&&l.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),l.concat([keymap.of(i.flat())]).filter(Boolean)};const Jx="#e5c07b",nm="#e06c75",Xx="#56b6c2",Zx="#ffffff",$l="#abb2bf",eu="#7d8799",Qx="#61afef",qx="#98c379",rm="#d19a66",_x="#c678dd",eS="#21252b",im="#2c313a",sm="#282c34",tu="#353a42",tS="#3E4451",om="#528bff",w5={chalky:Jx,coral:nm,cyan:Xx,invalid:Zx,ivory:$l,stone:eu,malibu:Qx,sage:qx,whiskey:rm,violet:_x,darkBackground:eS,highlightBackground:im,background:sm,tooltipBackground:tu,selection:tS,cursor:om},n4=Se.theme({"&":{color:$l,backgroundColor:sm},".cm-content":{caretColor:om},".cm-cursor, .cm-dropCursor":{borderLeftColor:om},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:tS},".cm-panels":{backgroundColor:eS,color:$l},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:sm,color:eu,border:"none"},".cm-activeLineGutter":{backgroundColor:im},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tu,borderBottomColor:tu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:im,color:$l}}},{dark:!0}),r4=Tl.define([{tag:ce.keyword,color:_x},{tag:[ce.name,ce.deleted,ce.character,ce.propertyName,ce.macroName],color:nm},{tag:[ce.function(ce.variableName),ce.labelName],color:Qx},{tag:[ce.color,ce.constant(ce.name),ce.standard(ce.name)],color:rm},{tag:[ce.definition(ce.name),ce.separator],color:$l},{tag:[ce.typeName,ce.className,ce.number,ce.changed,ce.annotation,ce.modifier,ce.self,ce.namespace],color:Jx},{tag:[ce.operator,ce.operatorKeyword,ce.url,ce.escape,ce.regexp,ce.link,ce.special(ce.string)],color:Xx},{tag:[ce.meta,ce.comment],color:eu},{tag:ce.strong,fontWeight:"bold"},{tag:ce.emphasis,fontStyle:"italic"},{tag:ce.strikethrough,textDecoration:"line-through"},{tag:ce.link,color:eu,textDecoration:"underline"},{tag:ce.heading,fontWeight:"bold",color:nm},{tag:[ce.atom,ce.bool,ce.special(ce.variableName)],color:rm},{tag:[ce.processingInstruction,ce.string,ce.inserted],color:qx},{tag:ce.invalid,color:Zx}]),i4=[n4,Kb(r4)];var s4=Se.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),o4=function(e){e===void 0&&(e={});var{indentWithTab:i=!0,editable:l=!0,readOnly:a=!1,theme:c="light",placeholder:u="",basicSetup:f=!0}=e,d=[];switch(i&&d.unshift(ml.of([bN])),f&&(typeof f=="boolean"?d.unshift(Yx()):d.unshift(Yx(f))),u&&d.unshift(dR(u)),c){case"light":d.push(s4);break;case"dark":d.push(i4);break;case"none":break;default:d.push(c);break}return l===!1&&d.push(Se.editable.of(!1)),a&&d.push(rt.readOnly.of(!0)),[...d]},l4=s=>({line:s.state.doc.lineAt(s.state.selection.main.from),lineCount:s.state.doc.lines,lineBreak:s.state.lineBreak,length:s.state.doc.length,readOnly:s.state.readOnly,tabSize:s.state.tabSize,selection:s.state.selection,selectionAsSingle:s.state.selection.asSingle().main,ranges:s.state.selection.ranges,selectionCode:s.state.sliceDoc(s.state.selection.main.from,s.state.selection.main.to),selections:s.state.selection.ranges.map(e=>s.state.sliceDoc(e.from,e.to)),selectedText:s.state.selection.ranges.some(e=>!e.empty)}),nS=Or.define(),a4=[];function c4(s){var{value:e,selection:i,onChange:l,onStatistics:a,onCreateEditor:c,onUpdate:u,extensions:f=a4,autoFocus:d,theme:h="light",height:m=null,minHeight:p=null,maxHeight:y=null,width:b=null,minWidth:x=null,maxWidth:A=null,placeholder:E="",editable:w=!0,readOnly:k=!1,indentWithTab:L=!0,basicSetup:z=!0,root:U,initialState:X}=s,[ee,oe]=(0,g.useState)(),[ue,fe]=(0,g.useState)(),[ge,he]=(0,g.useState)(),me=Se.theme({"&":{height:m,minHeight:p,maxHeight:y,width:b,minWidth:x,maxWidth:A},"& .cm-scroller":{height:"100% !important"}}),be=Se.updateListener.of(We=>{if(We.docChanged&&typeof l=="function"&&!We.transactions.some(_e=>_e.annotation(nS))){var De=We.state.doc,ve=De.toString();l(ve,We)}a&&a(l4(We))}),ye=o4({theme:h,editable:w,readOnly:k,placeholder:E,indentWithTab:L,basicSetup:z}),Te=[be,me,...ye];return u&&typeof u=="function"&&Te.push(Se.updateListener.of(u)),Te=Te.concat(f),(0,g.useEffect)(()=>{if(ee&&!ge){var We={doc:e,selection:i,extensions:Te},De=X?rt.fromJSON(X.json,We,X.fields):rt.create(We);if(he(De),!ue){var ve=new Se({state:De,parent:ee,root:U});fe(ve),c&&c(ve,De)}}return()=>{ue&&(he(void 0),fe(void 0))}},[ee,ge]),(0,g.useEffect)(()=>oe(s.container),[s.container]),(0,g.useEffect)(()=>()=>{ue&&(ue.destroy(),fe(void 0))},[ue]),(0,g.useEffect)(()=>{d&&ue&&ue.focus()},[d,ue]),(0,g.useEffect)(()=>{ue&&ue.dispatch({effects:He.reconfigure.of(Te)})},[h,f,m,p,y,b,x,A,E,w,k,L,z,l,u]),(0,g.useEffect)(()=>{if(e!==void 0){var We=ue?ue.state.doc.toString():"";ue&&e!==We&&ue.dispatch({changes:{from:0,to:We.length,insert:e||""},annotations:[nS.of(!0)]})}},[e,ue]),{state:ge,setState:he,view:ue,setView:fe,container:ee,setContainer:oe}}var u4=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],rS=(0,g.forwardRef)((s,e)=>{var{className:i,value:l="",selection:a,extensions:c=[],onChange:u,onStatistics:f,onCreateEditor:d,onUpdate:h,autoFocus:m,theme:p="light",height:y,minHeight:b,maxHeight:x,width:A,minWidth:E,maxWidth:w,basicSetup:k,placeholder:L,indentWithTab:z,editable:U,readOnly:X,root:ee,initialState:oe}=s,ue=(0,Q2.A)(s,u4),fe=(0,g.useRef)(null),{state:ge,view:he,container:me}=c4({container:fe.current,root:ee,value:l,autoFocus:m,theme:p,height:y,minHeight:b,maxHeight:x,width:A,minWidth:E,maxWidth:w,basicSetup:k,placeholder:L,indentWithTab:z,editable:U,readOnly:X,selection:a,onChange:u,onStatistics:f,onCreateEditor:d,onUpdate:h,extensions:c,initialState:oe});if((0,g.useImperativeHandle)(e,()=>({editor:fe.current,state:ge,view:he}),[fe,me,ge,he]),typeof l!="string")throw new Error("value must be typeof string but got "+typeof l);var be=typeof p=="string"?"cm-theme-"+p:"cm-theme";return(0,$.jsx)("div",(0,si.A)({ref:fe,className:""+be+(i?" "+i:"")},ue))});rS.displayName="CodeMirror";const jl=rS;var f4=["true","false","on","off","yes","no"],d4=new RegExp("\\b(("+f4.join(")|(")+"))$","i");const Wl={name:"yaml",token:function(s,e){var i=s.peek(),l=e.escaped;if(e.escaped=!1,i=="#"&&(s.pos==0||/\s/.test(s.string.charAt(s.pos-1))))return s.skipToEnd(),"comment";if(s.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(e.literal&&s.indentation()>e.keyCol)return s.skipToEnd(),"string";if(e.literal&&(e.literal=!1),s.sol()){if(e.keyCol=0,e.pair=!1,e.pairStart=!1,s.match("---")||s.match("..."))return"def";if(s.match(/^\s*-\s+/))return"meta"}if(s.match(/^(\{|\}|\[|\])/))return i=="{"?e.inlinePairs++:i=="}"?e.inlinePairs--:i=="["?e.inlineList++:e.inlineList--,"meta";if(e.inlineList>0&&!l&&i==",")return s.next(),"meta";if(e.inlinePairs>0&&!l&&i==",")return e.keyCol=0,e.pair=!1,e.pairStart=!1,s.next(),"meta";if(e.pairStart){if(s.match(/^\s*(\||\>)\s*/))return e.literal=!0,"meta";if(s.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(e.inlinePairs==0&&s.match(/^\s*-?[0-9\.\,]+\s?$/)||e.inlinePairs>0&&s.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(s.match(d4))return"keyword"}return!e.pair&&s.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(e.pair=!0,e.keyCol=s.indentation(),"atom"):e.pair&&s.match(/^:\s*/)?(e.pairStart=!0,"meta"):(e.pairStart=!1,e.escaped=i=="\\",s.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}};var h4=S(22771);const m4=64*1024,iS=32*1024,sS=(0,g.createContext)(void 0);function p4(s){if(s.length>m4)return window.btoa("<file too large>");try{return window.btoa(s)}catch{const i=new TextEncoder().encode(s),l=new Array;for(let a=0;a<i.length;a+=iS)l.push(String.fromCharCode(...i.slice(a,a+iS)));return window.btoa(l.join(""))}}function g4(s){const e=(0,Nt.gf)(Ke.z),[i,l]=(0,g.useState)({results:[],selectedResult:void 0}),a=(0,g.useRef)(1),c=(0,g.useCallback)(h=>{l(m=>{const p=m.results.find(y=>y.id===h);return p===m.selectedResult?m:{results:m.results,selectedResult:p}})},[]),u=(0,g.useCallback)(h=>{l(m=>{const p=m.results.findIndex(x=>x.id===h);if(p===-1)return m;const y=m.results.slice(),[b]=y.splice(p,1);return{results:y,selectedResult:m.selectedResult?.id===b.id?y[0]:m.selectedResult}})},[]),f=(0,g.useCallback)(async h=>{if(!e.dryRun)throw new Error("Scaffolder API does not support dry-run");const m=Jo.Ay.parse(h.templateContent),y={...await e.dryRun({template:m,values:h.values,secrets:{},directoryContents:h.files.map(b=>({path:b.path,base64Content:p4(b.content)}))}),id:a.current++};l(b=>({results:[...b.results,y],selectedResult:b.selectedResult??y}))},[e]),d=(0,g.useMemo)(()=>({...i,selectResult:c,deleteResult:u,execute:f}),[i,c,u,f]);return g.createElement(sS.Provider,{value:d},s.children)}function oo(){const s=(0,g.useContext)(sS);if(!s)throw new Error("must be used within a DryRunProvider");return s}const y4=(0,D.A)({containerWrapper:{width:"100%"}});class v4 extends g.Component{state={shouldRender:!0};componentDidUpdate(e){e.invalidator!==this.props.invalidator&&this.setState({shouldRender:!0})}componentDidCatch(e){this.props.setErrorText(e.message),this.setState({shouldRender:!1})}render(){return this.state.shouldRender?this.props.children:null}}function lm(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function lo(s){const{content:e,contentIsSpec:i,onDryRun:l,setErrorText:a,fieldExtensions:c=[],layouts:u=[]}=s,f=y4(),d=(0,Nt.Q2)(),{t:h}=(0,mt.i)(pt.W),[m,p]=(0,g.useState)(),y=(0,g.useMemo)(()=>Object.fromEntries(c.map(({name:b,component:x})=>[b,x])),[c]);return(0,h4.A)(()=>{try{if(!e){p(void 0);return}const b=Jo.Ay.parseAllDocuments(e).filter(w=>w).map(w=>w.toJSON())[0];if(!lm(b)){p(void 0);return}let x=b;if(!i){if(!(String(b.kind).toLocaleLowerCase("en-US")==="template")){p(void 0);return}x=lm(b.spec)?b.spec:{}}const{parameters:A}=x;if(!Array.isArray(A)){a("Template parameters must be an array"),p(void 0);return}const E=Object.fromEntries(c.map(({name:w,validation:k})=>[w,k]));a(),p(A.flatMap(w=>lm(w)?[{title:String(w.title),schema:w,validate:Wp(w,E,{apiHolder:d})}]:[]))}catch(b){a(b.message)}},250,[i,e,d]),g.createElement("div",{className:f.containerWrapper},m?g.createElement(at.A,{variant:"outlined"},g.createElement(v4,{invalidator:m,setErrorText:a},g.createElement(f0,{manifest:{steps:m,title:"Template Editor"},extensions:c,components:y,onCreate:async b=>{await l?.(b)},layouts:u,formProps:s.formProps}))):g.createElement(Ge.A,{variant:"body1",color:"textSecondary"},h("templateEditorForm.stepper.emptyText")))}function b4(s){const{setErrorText:e,fieldExtensions:i=[],layouts:l}=s,a=oo(),c=Uf(),{selectedFile:u}=c??{},f=async h=>{if(u)try{await a.execute({templateContent:u.content,values:h,files:c?.files??[]}),e()}catch(m){throw e(String(m.cause||m)),m}},d=u&&u.path.match(/\.ya?ml$/)?u.content:void 0;return c?g.createElement(lo,{onDryRun:f,fieldExtensions:i,setErrorText:e,content:d,layouts:l,formProps:s.formProps}):null}lo.DirectoryEditorDryRun=b4;const x4=(0,D.A)(s=>({root:{gridArea:"pageContent",display:"grid",gridTemplateRows:"auto 1fr"},controls:{marginBottom:s.spacing(3)},code:{width:"100%"}}),{name:"ScaffolderCustomFieldExtensionsPlaygroud"}),S4=({fieldExtensions:s=[]})=>{const e=x4(),{t:i}=(0,mt.i)(pt.W),l=s.filter(x=>!!x.schema),[a,c]=(0,g.useState)(Date.now()),[u,f]=(0,g.useState)({}),[d,h]=(0,g.useState)(l[0]),m=(0,g.useMemo)(()=>Jo.Ay.stringify({parameters:[{title:`${d.name} Example`,properties:{[d.name]:{type:d.schema?.returnValue?.type,"ui:field":d.name,"ui:options":u}}}]}),[u,d]),p=(0,g.useMemo)(()=>Object.fromEntries(s.map(({name:x,component:A})=>[x,A])),[s]),y=(0,g.useCallback)(x=>{h(x),f({})},[f,h]),b=(0,g.useCallback)(x=>{f(x),c(Date.now())},[f,c]);return g.createElement("main",{className:e.root},g.createElement("div",{className:e.controls},g.createElement(Ss.Ay,{id:"custom-fields-autocomplete",value:d,options:l,getOptionLabel:x=>x.name,renderInput:x=>g.createElement(G.A,{...x,"aria-label":i("templateEditorPage.customFieldExplorer.selectFieldLabel"),placeholder:i("templateEditorPage.customFieldExplorer.selectFieldLabel"),variant:"outlined",InputProps:{...x.InputProps,startAdornment:g.createElement(fo.A,{position:"start"},g.createElement(ho.A,null))}}),onChange:(x,A)=>{A&&y(A)},disableClearable:!0,fullWidth:!0})),g.createElement("div",null,g.createElement(Ki.A,{defaultExpanded:!0},g.createElement(xe.A,{expandIcon:g.createElement(fn.A,null),"aria-controls":"panel-code-content",id:"panel-code-header"},g.createElement(Ge.A,{variant:"h6"},i("templateEditorPage.customFieldExplorer.preview.title"))),g.createElement(Ur.A,null,g.createElement("div",{className:e.code},g.createElement(jl,{readOnly:!0,theme:"dark",height:"100%",width:"100%",extensions:[fs.define(Wl)],value:m})))),g.createElement(Ki.A,{defaultExpanded:!0},g.createElement(xe.A,{expandIcon:g.createElement(fn.A,null),"aria-controls":"panel-preview-content",id:"panel-preview-header"},g.createElement(Ge.A,{variant:"h6"},i("templateEditorPage.customFieldExplorer.fieldPreview.title"))),g.createElement(Ur.A,null,g.createElement(lo,{key:a,content:m,contentIsSpec:!0,fieldExtensions:s,setErrorText:()=>null}))),g.createElement(Ki.A,{defaultExpanded:!0},g.createElement(xe.A,{expandIcon:g.createElement(fn.A,null),"aria-controls":"panel-options-content",id:"panel-options-header"},g.createElement(Ge.A,{variant:"h6"},i("templateEditorPage.customFieldExplorer.fieldForm.title"))),g.createElement(Ur.A,null,g.createElement(Cf,{showErrorList:!1,fields:{...p},noHtml5Validate:!0,formData:u,formContext:{fieldFormState:u},onSubmit:x=>b(x.formData),validator:Og,schema:d.schema?.uiOptions||{},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"}},g.createElement(Bt.A,{variant:"contained",color:"primary",type:"submit",disabled:!d.schema?.uiOptions},i("templateEditorPage.customFieldExplorer.fieldForm.applyButtonTitle")))))))},E4=(0,D.A)(s=>({paper:{width:"90%",padding:s.spacing(2),backgroundColor:s.palette.background.default,[s.breakpoints.up("sm")]:{width:"70%"},[s.breakpoints.up("md")]:{width:"50%"}},appbar:{zIndex:1},toolbar:{display:"grid",gridTemplateColumns:"auto 1fr",gridGap:s.spacing(1),padding:s.spacing(0,1),backgroundColor:s.palette.background.paper},toolbarCustomActions:{display:"grid",alignItems:"center",gridAutoFlow:"Column",gridGap:s.spacing(1)},toolbarDefaultActions:{justifySelf:"end"}}),{name:"ScaffolderTemplateEditorToolbar"});function oS(s){const{children:e,fieldExtensions:i}=s,l=E4(),{t:a}=(0,mt.i)(pt.W),[c,u]=(0,g.useState)(!1),[f,d]=(0,g.useState)(!1),[h,m]=(0,g.useState)(!1);return g.createElement(z2.A,{className:l.appbar,position:"relative"},g.createElement(U2.A,{className:l.toolbar},g.createElement("div",{className:l.toolbarCustomActions},e),g.createElement(H2.A,{className:l.toolbarDefaultActions,variant:"text"},g.createElement(Pi.Ay,{title:a("templateEditorToolbar.customFieldExplorerTooltip")},g.createElement(Bt.A,{onClick:()=>u(!0)},g.createElement(Z2.A,null))),g.createElement(Pi.Ay,{title:a("templateEditorToolbar.installedActionsDocumentationTooltip")},g.createElement(Bt.A,{onClick:()=>d(!0)},g.createElement(cu.A,null))),g.createElement(Bt.A,{onClick:()=>m(!0)},a("templateEditorToolbar.addToCatalogButton"))),g.createElement(F0.Ay,{classes:{paper:l.paper},anchor:"right",open:c,onClose:()=>u(!1)},g.createElement(S4,{fieldExtensions:i})),g.createElement(F0.Ay,{classes:{paper:l.paper},anchor:"right",open:f,onClose:()=>d(!1)},g.createElement(vm,null)),g.createElement(K2.A,{onClose:()=>m(!1),open:h,"aria-labelledby":"publish-dialog-title","aria-describedby":"publish-dialog-description"},g.createElement(G2.A,{id:"publish-dialog-title"},a("templateEditorToolbar.addToCatalogDialogTitle")),g.createElement(Y2.A,{dividers:!0},g.createElement(J2.A,{id:"publish-dialog-slide-description"},a("templateEditorToolbar.addToCatalogDialogContent.stepsIntroduction"),g.createElement("ul",null,a("templateEditorToolbar.addToCatalogDialogContent.stepsListItems").split(`
`).map((p,y)=>g.createElement("li",{key:y},p))))),g.createElement(X2.A,null,g.createElement(Bt.A,{color:"primary",href:a("templateEditorToolbar.addToCatalogDialogActions.documentationUrl"),target:"_blank"},a("templateEditorToolbar.addToCatalogDialogActions.documentationButton"))))))}var lS=S(37757);function aS(s){const{onOpenDirectory:e,onCreateDirectory:i,onCloseDirectory:l}=s,{t:a}=(0,mt.i)(pt.W),[c,u]=(0,g.useState)(null),f=(0,g.useCallback)(y=>{u(y.currentTarget)},[u]),d=(0,g.useCallback)(()=>{u(null)},[u]),h=(0,g.useCallback)(()=>{d(),e?.()},[d,e]),m=(0,g.useCallback)(()=>{d(),i?.()},[d,i]),p=(0,g.useCallback)(()=>{d(),l?.()},[d,l]);return g.createElement(g.Fragment,null,g.createElement(Bt.A,{"aria-controls":"file-menu","aria-haspopup":"true",onClick:f},a("templateEditorToolbarFileMenu.button")),g.createElement(lS.A,{id:"file-menu",anchorEl:c,open:!!c,onClose:d,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},g.createElement(Qt.A,{onClick:h,disabled:!e},a("templateEditorToolbarFileMenu.options.openDirectory")),g.createElement(Qt.A,{onClick:m,disabled:!i,divider:!0},a("templateEditorToolbarFileMenu.options.createDirectory")),g.createElement(Qt.A,{onClick:p,disabled:!l},a("templateEditorToolbarFileMenu.options.closeEditor"))))}var A4=S(32881),cS=S(10010),uS=S(71108),fS=S(90689),dS=S(39850),hS=S(9546),mS=S(45065),w4=g.createContext({});const pS=w4;var C4={root:{padding:0,margin:0,listStyle:"none"}};function O4(s,e){if(s.length!==e.length)return!0;for(var i=0;i<s.length;i+=1)if(s[i]!==e[i])return!0;return!1}var gS=function(e,i,l){for(var a=i;a<e.length;a+=1)if(l===e[a])return a;return-1},k4=[],P4=[],T4=g.forwardRef(function(e,i){var l=e.children,a=e.classes,c=e.className,u=e.defaultCollapseIcon,f=e.defaultEndIcon,d=e.defaultExpanded,h=d===void 0?k4:d,m=e.defaultExpandIcon,p=e.defaultParentIcon,y=e.defaultSelected,b=y===void 0?P4:y,x=e.disableSelection,A=x===void 0?!1:x,E=e.multiSelect,w=E===void 0?!1:E,k=e.expanded,L=e.onNodeSelect,z=e.onNodeToggle,U=e.selected,X=(0,dS.A)(e,["children","classes","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disableSelection","multiSelect","expanded","onNodeSelect","onNodeToggle","selected"]),ee=g.useState(null),oe=ee[0],ue=ee[1],fe=g.useState(null),ge=fe[0],he=fe[1],me=g.useRef({}),be=g.useRef({}),ye=g.useRef([]),Te=(0,mS.A)({controlled:k,default:h,name:"TreeView",state:"expanded"}),We=(0,fS.A)(Te,2),De=We[0],ve=We[1],_e=(0,mS.A)({controlled:U,default:b,name:"TreeView",state:"selected"}),dt=(0,fS.A)(_e,2),tt=dt[0],ht=dt[1],Tt=g.useCallback(function(Ve){return Array.isArray(De)?De.indexOf(Ve)!==-1:!1},[De]),St=g.useCallback(function(Ve){return Array.isArray(tt)?tt.indexOf(Ve)!==-1:tt===Ve},[tt]),Et=function(Ce){return oe===Ce},Ot=function(Ce){return ge===Ce},ui=function(Ce){var we=ye.current.indexOf(Ce);return we!==-1&&we+1<ye.current.length?ye.current[we+1]:null},Vr=function(Ce){var we=ye.current.indexOf(Ce);return we!==-1&&we-1>=0?ye.current[we-1]:null},fi=function(){return ye.current[ye.current.length-1]},qn=function(){return ye.current[0]},Ui=function(Ce){return me.current[Ce].parent},co=function(Ce,we){var $e=ye.current.indexOf(Ce),Xe=ye.current.indexOf(we),nt=Math.min($e,Xe),Mt=Math.max($e,Xe);return ye.current.slice(nt,Mt+1)},zr=function(Ce){Ce&&(ue(Ce),he(Ce))},ur=function(Ce){return zr(ui(Ce))},di=function(Ce){return zr(Vr(Ce))},fr=function(){return zr(qn())},In=function(){return zr(fi())},zl=function(Ce,we){var $e,Xe,nt=we.toLowerCase(),Mt=[],Ft=[];Object.keys(be.current).forEach(function(hr){var mm=be.current[hr],DS=me.current[hr],J$=DS.parent?Tt(DS.parent):!0;J$&&(Mt.push(hr),Ft.push(mm))}),$e=Mt.indexOf(Ce)+1,$e===me.current.length&&($e=0),Xe=gS(Ft,$e,nt),Xe===-1&&(Xe=gS(Ft,0,nt)),Xe>-1&&zr(Mt[Xe])},ys=function(Ce){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ge,$e;De.indexOf(we)!==-1?($e=De.filter(function(Xe){return Xe!==we}),ue(function(Xe){var nt=me.current[Xe];return Xe&&(nt&&nt.parent?nt.parent.id:null)===we?we:Xe})):$e=[we].concat(De),z&&z(Ce,$e),ve($e)},vs=function(Ce,we){var $e=me.current[we],Xe=me.current[$e.parent],nt;if(Xe)nt=Xe.children.filter(function(hr){return!Tt(hr)});else{var Mt=me.current[-1].children;nt=Mt.filter(function(hr){return!Tt(hr)})}var Ft=De.concat(nt);nt.length>0&&(ve(Ft),z&&z(Ce,Ft))},dr=g.useRef(null),Hi=g.useRef(!1),_n=g.useRef([]),iu=function(Ce,we){var $e=tt,Xe=we.start,nt=we.next,Mt=we.current;!nt||!Mt||(_n.current.indexOf(Mt)===-1&&(_n.current=[]),Hi.current?_n.current.indexOf(nt)!==-1?($e=$e.filter(function(Ft){return Ft===Xe||Ft!==Mt}),_n.current=_n.current.filter(function(Ft){return Ft===Xe||Ft!==Mt})):($e.push(nt),_n.current.push(nt)):($e.push(nt),_n.current.push(Mt,nt)),L&&L(Ce,$e),ht($e))},su=function(Ce,we){var $e=tt,Xe=we.start,nt=we.end;Hi.current&&($e=tt.filter(function(hr){return _n.current.indexOf(hr)===-1}));var Mt=co(Xe,nt);_n.current=Mt;var Ft=$e.concat(Mt);Ft=Ft.filter(function(hr,mm){return Ft.indexOf(hr)===mm}),L&&L(Ce,Ft),ht(Ft)},fm=function(Ce,we){var $e=[];tt.indexOf(we)!==-1?$e=tt.filter(function(Xe){return Xe!==we}):$e=[we].concat(tt),L&&L(Ce,$e),ht($e)},dm=function(Ce,we){var $e=w?[we]:we;L&&L(Ce,$e),ht($e)},Ul=function(Ce,we){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return we?($e?fm(Ce,we):dm(Ce,we),dr.current=we,Hi.current=!1,_n.current=[],!0):!1},Sn=function(Ce,we){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Xe=we.start,nt=Xe===void 0?dr.current:Xe,Mt=we.end,Ft=we.current;return $e?iu(Ce,{start:nt,next:Mt,current:Ft}):su(Ce,{start:nt,end:Mt}),Hi.current=!0,!0},Ie=function(Ce,we){dr.current||(dr.current=we);var $e=Hi.current?dr.current:we;return Sn(Ce,{start:$e,end:qn()})},Dt=function(Ce,we){dr.current||(dr.current=we);var $e=Hi.current?dr.current:we;return Sn(Ce,{start:$e,end:fi()})},bs=function(Ce,we){return Sn(Ce,{end:ui(we),current:we},!0)},uo=function(Ce,we){return Sn(Ce,{end:Vr(we),current:we},!0)},U$=function(Ce){return Sn(Ce,{start:qn(),end:fi()})},H$=function(Ce,we){var $e=me.current[Ce];me.current[Ce]=(0,si.A)({},$e,{children:we,id:Ce}),we.forEach(function(Xe){var nt=me.current[Xe];me.current[Xe]=(0,si.A)({},nt,{parent:Ce,id:Xe})})},hm=g.useCallback(function(Ve){var Ce=me.current[Ve],we=[];return Ce&&(we.push(Ve),Ce.children&&(we.concat(Ce.children),Ce.children.forEach(function($e){we.concat(hm($e))}))),we},[]),OS=g.useCallback(function(Ve){var Ce=(0,si.A)({},be.current);Ve.forEach(function(we){Ce[we]&&delete Ce[we]}),be.current=Ce},[]),K$=g.useCallback(function(Ve){var Ce=hm(Ve);OS(Ce);var we=(0,si.A)({},me.current);Ce.forEach(function($e){var Xe=we[$e];if(Xe){if(Xe.parent){var nt=we[Xe.parent];if(nt&&nt.children){var Mt=nt.children.filter(function(Ft){return Ft!==$e});we[Xe.parent]=(0,si.A)({},nt,{children:Mt})}}delete we[$e]}}),me.current=we,he(function($e){return $e===Ve?null:$e})},[hm,OS]),G$=function(Ce,we){be.current[Ce]=we},kS=g.useRef([]),PS=g.useState(!1),TS=PS[0],Y$=PS[1];g.useEffect(function(){var Ve=[];g.Children.forEach(l,function(Ce){g.isValidElement(Ce)&&Ce.props.nodeId&&Ve.push(Ce.props.nodeId)}),O4(kS.current,Ve)&&(me.current[-1]={parent:null,children:Ve},Ve.forEach(function(Ce,we){we===0&&ue(Ce)}),ye.current=me.current[-1].children,kS.current=Ve,Y$(!0))},[l]),g.useEffect(function(){var Ve=function Ce(we){for(var $e=[],Xe=0;Xe<we.length;Xe+=1){var nt=we[Xe];$e.push(nt);var Mt=me.current[nt].children;Tt(nt)&&Mt&&($e=$e.concat(Ce(Mt)))}return $e};TS&&(ye.current=Ve(me.current[-1].children))},[De,TS,Tt,l]);var xs=function(){return!1};return g.createElement(pS.Provider,{value:{icons:{defaultCollapseIcon:u,defaultExpandIcon:m,defaultParentIcon:p,defaultEndIcon:f},focus:zr,focusFirstNode:fr,focusLastNode:In,focusNextNode:ur,focusPreviousNode:di,focusByFirstCharacter:zl,expandAllSiblings:vs,toggleExpansion:ys,isExpanded:Tt,isFocused:Ot,isSelected:St,selectNode:A?xs:Ul,selectRange:A?xs:Sn,selectNextNode:A?xs:bs,selectPreviousNode:A?xs:uo,rangeSelectToFirst:A?xs:Ie,rangeSelectToLast:A?xs:Dt,selectAllNodes:A?xs:U$,isTabbable:Et,multiSelect:w,getParent:Ui,mapFirstChar:G$,addNodeToNodeMap:H$,removeNodeFromNodeMap:K$}},g.createElement("ul",(0,si.A)({role:"tree","aria-multiselectable":w,className:(0,hS.default)(a.root,c),ref:i},X),l))});const D4=(0,ki.A)(C4,{name:"MuiTreeView"})(T4);var M4=S(63798),yS=S(268),I4=S(19878),R4=function(e){return{root:{listStyle:"none",margin:0,padding:0,outline:0,WebkitTapHighlightColor:"transparent","&:focus > $content $label":{backgroundColor:e.palette.action.hover},"&$selected > $content $label":{backgroundColor:(0,yS.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)},"&$selected > $content $label:hover, &$selected:focus > $content $label":{backgroundColor:(0,yS.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},expanded:{},selected:{},group:{margin:0,padding:0,marginLeft:17},content:{width:"100%",display:"flex",alignItems:"center",cursor:"pointer"},iconContainer:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},label:{width:"100%",paddingLeft:4,position:"relative","&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}}},L4=function(e){return e&&e.length===1&&e.match(/\S/)},F4=g.forwardRef(function(e,i){var l=e.children,a=e.classes,c=e.className,u=e.collapseIcon,f=e.endIcon,d=e.expandIcon,h=e.icon,m=e.label,p=e.nodeId,y=e.onClick,b=e.onLabelClick,x=e.onIconClick,A=e.onFocus,E=e.onKeyDown,w=e.onMouseDown,k=e.TransitionComponent,L=k===void 0?Ye.A:k,z=e.TransitionProps,U=(0,dS.A)(e,["children","classes","className","collapseIcon","endIcon","expandIcon","icon","label","nodeId","onClick","onLabelClick","onIconClick","onFocus","onKeyDown","onMouseDown","TransitionComponent","TransitionProps"]),X=g.useContext(pS),ee=X.icons,oe=X.focus,ue=X.focusFirstNode,fe=X.focusLastNode,ge=X.focusNextNode,he=X.focusPreviousNode,me=X.focusByFirstCharacter,be=X.selectNode,ye=X.selectRange,Te=X.selectNextNode,We=X.selectPreviousNode,De=X.rangeSelectToFirst,ve=X.rangeSelectToLast,_e=X.selectAllNodes,dt=X.expandAllSiblings,tt=X.toggleExpansion,ht=X.isExpanded,Tt=X.isFocused,St=X.isSelected,Et=X.isTabbable,Ot=X.multiSelect,ui=X.getParent,Vr=X.mapFirstChar,fi=X.addNodeToNodeMap,qn=X.removeNodeFromNodeMap,Ui=g.useRef(null),co=g.useRef(null),zr=(0,I4.A)(Ui,i),ur=h,di=!!(Array.isArray(l)?l.length:l),fr=ht?ht(p):!1,In=Tt?Tt(p):!1,zl=Et?Et(p):!1,ys=St?St(p):!1,vs=ee||{},dr=(0,mu.A)();ur||(di?(fr?ur=u||vs.defaultCollapseIcon:ur=d||vs.defaultExpandIcon,ur||(ur=vs.defaultParentIcon)):ur=f||vs.defaultEndIcon);var Hi=function(Ie){In||oe(p);var Dt=Ot&&(Ie.shiftKey||Ie.ctrlKey||Ie.metaKey);di&&!Ie.defaultPrevented&&!(Dt&&ht(p))&&tt(Ie,p),Dt?Ie.shiftKey?ye(Ie,{end:p}):be(Ie,p,!0):be(Ie,p),y&&y(Ie)},_n=function(Ie){(Ie.shiftKey||Ie.ctrlKey||Ie.metaKey)&&Ie.preventDefault(),w&&w(Ie)},iu=function(Ie){return di&&(fr?ge(p):tt(Ie)),!0},su=function(Ie){if(fr)return tt(Ie,p),!0;var Dt=ui(p);return Dt?(oe(Dt),!0):!1},fm=function(Ie){var Dt=!1,bs=Ie.key;if(!(Ie.altKey||Ie.currentTarget!==Ie.target)){var uo=Ie.ctrlKey||Ie.metaKey;switch(bs){case" ":Ui.current===Ie.currentTarget&&(Ot&&Ie.shiftKey?Dt=ye(Ie,{end:p}):Ot?Dt=be(Ie,p,!0):Dt=be(Ie,p)),Ie.stopPropagation();break;case"Enter":Ui.current===Ie.currentTarget&&di&&(tt(Ie),Dt=!0),Ie.stopPropagation();break;case"ArrowDown":Ot&&Ie.shiftKey&&Te(Ie,p),ge(p),Dt=!0;break;case"ArrowUp":Ot&&Ie.shiftKey&&We(Ie,p),he(p),Dt=!0;break;case"ArrowRight":dr.direction==="rtl"?Dt=su(Ie):Dt=iu(Ie);break;case"ArrowLeft":dr.direction==="rtl"?Dt=iu(Ie):Dt=su(Ie);break;case"Home":Ot&&uo&&Ie.shiftKey&&De(Ie,p),ue(),Dt=!0;break;case"End":Ot&&uo&&Ie.shiftKey&&ve(Ie,p),fe(),Dt=!0;break;default:bs==="*"?(dt(Ie,p),Dt=!0):Ot&&uo&&bs.toLowerCase()==="a"?Dt=_e(Ie):!uo&&!Ie.shiftKey&&L4(bs)&&(me(p,bs),Dt=!0)}Dt&&(Ie.preventDefault(),Ie.stopPropagation()),E&&E(Ie)}},dm=function(Ie){!In&&Ie.currentTarget===Ie.target&&oe(p),A&&A(Ie)};g.useEffect(function(){if(fi){var Sn=[];g.Children.forEach(l,function(Ie){g.isValidElement(Ie)&&Ie.props.nodeId&&Sn.push(Ie.props.nodeId)}),fi(p,Sn)}},[l,p,fi]),g.useEffect(function(){if(qn)return function(){qn(p)}},[p,qn]),g.useEffect(function(){Vr&&m&&Vr(p,co.current.textContent.substring(0,1).toLowerCase())},[Vr,p,m]),g.useEffect(function(){In&&Ui.current.focus()},[In]);var Ul;return Ot?Ul=ys:ys&&(Ul=!0),g.createElement("li",(0,si.A)({className:(0,hS.default)(a.root,c,fr&&a.expanded,ys&&a.selected),role:"treeitem",onKeyDown:fm,onFocus:dm,"aria-expanded":di?fr:null,"aria-selected":Ul,ref:zr,tabIndex:zl?0:-1},U),g.createElement("div",{className:a.content,onClick:Hi,onMouseDown:_n,ref:co},g.createElement("div",{onClick:x,className:a.iconContainer},ur),g.createElement(Ge.A,{onClick:b,component:"div",className:a.label},m)),l&&g.createElement(L,(0,si.A)({unmountOnExit:!0,className:a.group,in:fr,component:"ul",role:"group"},z),l))});const vS=(0,ki.A)(R4,{name:"MuiTreeItem"})(F4),N4=(0,D.A)(s=>({root:{whiteSpace:"nowrap",overflowY:"auto",padding:s.spacing(1)}}));function B4(s){const e={type:"directory",name:"",path:"",children:[]};for(const i of s.slice().sort()){const l=i.split("/");let a=e;for(let c=0;c<l.length;c++){const u=l[c];if(u==="")throw new Error("Invalid path part: ''");const f=l.slice(0,c+1).join("/"),d=a.children.find(h=>h.name===u);if(d?.type==="file")throw new Error(`Duplicate filename at '${f}'`);if(d)a=d;else if(c<l.length-1){const h={type:"directory",name:u,path:f,children:[]},m=a.children.findIndex(p=>p.type==="file");a.children.splice(m,0,h),a=h}else a.children.push({type:"file",name:u,path:f})}}return e.children}function bS({entry:s}){return s.type==="file"?g.createElement(vS,{nodeId:s.path,label:s.name}):g.createElement(vS,{nodeId:s.path,label:s.name},s.children.map(e=>g.createElement(bS,{key:e.path,entry:e})))}function xS(s){const e=N4(),i=(0,g.useMemo)(()=>B4(s.filePaths),[s.filePaths]);return g.createElement(D4,{selected:s.selected,className:e.root,defaultCollapseIcon:g.createElement(fn.A,null),defaultExpandIcon:g.createElement(M4.A,null),onNodeSelect:(l,a)=>{s.onSelect&&s.filePaths.includes(a)&&s.onSelect(a)}},i.map(l=>g.createElement(bS,{key:l.path,entry:l})))}const $4=(0,D.A)(s=>({grid:{"& svg":{margin:s.spacing(1)}},closeButton:{marginLeft:"auto"}}),{name:"ScaffolderTemplateEditorBrowser"});function j4(s){const e=$4(),i=Uf(),l=i?.files.filter(u=>u.dirty),{t:a}=(0,mt.i)(pt.W),c=()=>{s.onClose&&(l?.length&&!window.confirm(a("templateEditorPage.templateEditorBrowser.closeConfirmMessage"))||s.onClose())};return i?g.createElement(g.Fragment,null,g.createElement(Ne.A,{className:e.grid,container:!0,spacing:0,alignItems:"center"},g.createElement(Pi.Ay,{title:a("templateEditorPage.templateEditorBrowser.saveIconTooltip")},g.createElement(Rn.A,{size:"small",disabled:i.files.every(u=>!u.dirty),onClick:()=>i.save()},g.createElement(uS.A,null))),g.createElement(Pi.Ay,{title:a("templateEditorPage.templateEditorBrowser.reloadIconTooltip")},g.createElement(Rn.A,{size:"small",onClick:()=>i.reload()},g.createElement(cS.A,null))),g.createElement(Pi.Ay,{title:a("templateEditorPage.templateEditorBrowser.closeIconTooltip")},g.createElement(Rn.A,{size:"small",className:e.closeButton,onClick:c},g.createElement(A4.A,null)))),g.createElement(Yr.A,null),g.createElement(xS,{selected:i.selectedFile?.path??"",onSelect:i.setSelectedFile,filePaths:i.files.map(u=>u.path)??[]})):null}function W4(s=!1){const e=(0,g.useRef)(s),i=(0,g.useCallback)(()=>e.current,[]);return(0,g.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),i}var SS=S(16261),Vl=S(71039);function V4(s,...e){const i=W4(),l=(0,SS.J)(e[1]),a=(0,g.useMemo)(()=>function(...c){i()&&(typeof l.current=="function"?l.current.apply(this,c):typeof l.current.handleEvent=="function"&&l.current.handleEvent.apply(this,c))},[]);(0,g.useEffect)(()=>{const c=z4(s)?s.current:s;if(!c)return;const u=e.slice(2);return(0,Vl.on)(c,e[0],a,...u),()=>{(0,Vl.AU)(c,e[0],a,...u)}},[s,e[0]])}function z4(s){return s!==null&&typeof s=="object"&&(0,Vl.mQ)(s,"current")}var U4=S(99416);const H4=s=>typeof s=="function"?s:typeof s=="string"?e=>e.key===s:s?Vl.ud:Vl.HD,K4=U4.Bd?window:null;function G4(s,e,i=[],l={}){const{event:a="keydown",target:c=K4,eventOptions:u}=l,f=(0,SS.J)(e),d=(0,g.useMemo)(()=>{const h=H4(s);return function(m){h(m)&&f.current.call(this,m)}},i);V4(c,a,d,u)}const ES=(0,D.A)(s=>({container:{position:"relative",width:"100%",height:"100%"},typography:{padding:s.spacing(1.5)},button:{verticalAlign:"top"},codeMirror:{height:"100%",[s.breakpoints.up("md")]:{position:"absolute",top:0,bottom:0,left:0,right:0}},errorPanel:{color:s.palette.error.main,lineHeight:2,margin:s.spacing(0,1)},floatingButtons:{position:"absolute",top:s.spacing(1),right:s.spacing(3)},floatingButton:{padding:s.spacing(1)}}));function nu(s){const{errorText:e}=s,i=ES(),{t:l}=(0,mt.i)(pt.W),a=(0,g.useMemo)(()=>{if(!e)return ls.of(null);const c=document.createElement("div");return c.classList.add(i.errorPanel),c.textContent=e,ls.of(()=>({dom:c,bottom:!0}))},[i,e]);return G4(c=>c.key==="s"&&(c.ctrlKey||c.metaKey),c=>{c.preventDefault(),s.onSave&&s.onSave()}),g.createElement("div",{className:i.container},g.createElement(jl,{className:i.codeMirror,theme:"dark",height:"100%",extensions:[fs.define(Wl),a],value:s.content,onChange:s.onUpdate}),(s.onSave||s.onReload)&&g.createElement("div",{className:i.floatingButtons},g.createElement(at.A,null,s.onSave&&g.createElement(Pi.Ay,{title:l("templateEditorPage.templateEditorTextArea.saveIconTooltip")},g.createElement(Rn.A,{className:i.floatingButton,onClick:()=>s.onSave?.()},g.createElement(uS.A,null))),s.onReload&&g.createElement(Pi.Ay,{title:l("templateEditorPage.templateEditorTextArea.refreshIconTooltip")},g.createElement(Rn.A,{className:i.floatingButton,onClick:()=>s.onReload?.()},g.createElement(cS.A,null))))))}function Y4(s){const e=ES(),i=Uf(),{t:l}=(0,mt.i)(pt.W);if(!i)return g.createElement(Ge.A,{className:e.typography,color:"textSecondary",align:"center"},l("templateEditorPage.templateEditorTextArea.emptyStateParagraph"));const a=i?.selectedFile?.dirty?{onSave:()=>i.save(),onReload:()=>i.reload()}:{onReload:()=>i.reload()};return g.createElement(nu,{errorText:s.errorText,content:i.selectedFile?.content,onUpdate:c=>i?.selectedFile?.updateContent(c),...a})}nu.DirectoryEditor=Y4;function J4(s){const e=(0,g.useRef)();return(0,g.useEffect)(()=>{e.current=s}),e.current}var X4=S(65569),AS=S(62461),Z4=S(39590),Q4=S(12326);function q4(s,e){const i=document.createElement("a");i.href=URL.createObjectURL(s),i.download=e,i.click(),URL.revokeObjectURL(i.href),i.remove()}const _4=(0,D.A)(s=>({root:{overflowY:"auto",background:s.palette.background.default},iconSuccess:{minWidth:0,marginRight:s.spacing(1),color:s.palette.status.ok},iconFailure:{minWidth:0,marginRight:s.spacing(1),color:s.palette.status.error}}));function e$(){const s=_4(),e=oo(),{t:i}=(0,mt.i)(pt.W);return g.createElement(po.A,{className:s.root,dense:!0},e.results.map(l=>{const a=l.log.some(f=>f.body.status==="failed");let c=!1;async function u(){c=!0,await t$(l.directoryContents,`dry-run-result-${l.id}.zip`),c=!1}return g.createElement(Aa.A,{button:!0,key:l.id,selected:e.selectedResult?.id===l.id,onClick:()=>e.selectResult(l.id)},g.createElement(wn.A,{className:a?s.iconFailure:s.iconSuccess},a?g.createElement(jf.A,null):g.createElement(AS.A,null)),g.createElement(Cn.A,{primary:i("templateEditorPage.dryRunResultsList.title",{resultId:`${l.id}`})}),g.createElement(X4.A,null,g.createElement(Rn.A,{edge:"end","aria-label":"download",title:i("templateEditorPage.dryRunResultsList.downloadButtonTitle"),disabled:c,onClick:()=>u()},g.createElement(Q4.A,null)),g.createElement(Rn.A,{edge:"end","aria-label":"delete",title:i("templateEditorPage.dryRunResultsList.deleteButtonTitle"),onClick:()=>e.deleteResult(l.id)},g.createElement(Z4.A,null))))}))}async function t$(s,e){const{default:i}=await S.e(2461).then(S.t.bind(S,32461,23)),l=new i;for(const c of s){const u=atob(c.base64Content);await l.file(c.path,u)}const a=await l.generateAsync({type:"blob"});q4(a,e)}var am=S(38605),n$=S(31653);const r$=(0,D.A)(s=>({root:{display:"grid",gridTemplateColumns:"280px auto 3fr",gridTemplateRows:"1fr"},child:{overflowY:"auto",height:"100%",minHeight:0},firstChild:{background:s.palette.background.paper}}));function cm(s){const e=r$(),i=g.Children.toArray(s.children);if(i.length!==2)throw new Error("must have exactly 2 children");return g.createElement("div",{className:e.root},g.createElement("div",{className:ct()(e.child,e.firstChild)},i[0]),g.createElement(Yr.A,{orientation:"horizontal"}),g.createElement("div",{className:e.child},i[1]))}const i$=(0,D.A)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),s$=s=>{const{href:e,text:i,Icon:l,...a}=s,c=i$();return g.createElement(Ne.A,{container:!0,direction:"row",spacing:1},g.createElement(Ne.A,{item:!0},g.createElement(Ge.A,{component:"div",className:c.svgIcon},l?g.createElement(l,null):g.createElement(vo.A,null))),g.createElement(Ne.A,{item:!0},g.createElement(Es.N_,{to:e,...a},i||e)))},o$=({output:s})=>{const{links:e=[]}=s,i=(0,go.n)(),l=(0,yt.S)(E0.s),a=c=>c?i.getSystemIcon(c)??vo.A:vo.A;return g.createElement(Ee.A,{px:3,pb:3},e.filter(({url:c,entityRef:u})=>c||u).map(({url:c,entityRef:u,title:f,icon:d})=>{if(u){const h=(0,nr.KU)(u,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),m=l(h);return{title:f,icon:d,url:m}}return{title:f,icon:d,url:c}}).map(({url:c,title:u,icon:f},d)=>g.createElement(s$,{key:`output-link-${d}`,href:c,text:u??c,Icon:a(f),target:"_blank"})))};var l$=S(3380);const a$=(0,D.A)(s=>(0,Of.A)({root:{width:"100%"},button:{marginBottom:s.spacing(2),marginLeft:s.spacing(2)},actionsContainer:{marginBottom:s.spacing(2)},resetContainer:{padding:s.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),c$=(0,D.A)(s=>(0,Of.A)({root:{color:s.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:s.palette.status.ok},error:{color:s.palette.status.error}})),u$=({step:s})=>{const[e,i]=(0,g.useState)("");return(0,C0.A)(()=>{if(!s.startedAt){i("");return}const l=s.endedAt?tr.c9.fromISO(s.endedAt):tr.c9.local(),a=tr.c9.fromISO(s.startedAt),c=tr.IX.fromDateTimes(a,l).toDuration().valueOf();i(O0()(c,{round:!0}))},1e3),g.createElement(Ge.A,{variant:"caption"},e)};function f$(s){const e=c$(),{active:i,completed:l,error:a}=s,c=()=>i?g.createElement(w0.A,{size:"24px"}):l?g.createElement(AS.A,null):a?g.createElement(jf.A,null):g.createElement(l$.A,null);return g.createElement("div",{className:ct()(e.root,{[e.completed]:l,[e.error]:a})},c())}const d$=(0,g.memo)(s=>{const{steps:e,currentStepId:i,onUserStepChange:l}=s,a=a$(s),{t:c}=(0,mt.i)(pt.W);return g.createElement("div",{className:a.root},g.createElement(pu.A,{activeStep:e.findIndex(u=>u.id===i),orientation:"vertical",nonLinear:!0},e.map((u,f)=>{const d=u.status==="cancelled",h=u.status==="processing",m=u.status==="completed",p=u.status==="failed",y=u.status==="skipped";return g.createElement(Jl.A,{key:String(f),expanded:!0},g.createElement(A0.A,{onClick:()=>l(u.id)},g.createElement(Xl.A,{StepIconProps:{completed:m,error:p||d,active:h},StepIconComponent:f$,className:a.stepWrapper},g.createElement("div",{className:a.labelWrapper},g.createElement(Ge.A,{variant:"subtitle2"},u.name),y?g.createElement(Ge.A,{variant:"caption"},c("templateEditorPage.taskStatusStepper.skippedStepTitle")):g.createElement(u$,{step:u})))))})))}),um=(0,D.A)({root:{display:"flex",flexFlow:"column nowrap"},contentWrapper:{flex:1,position:"relative"},content:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex","& > *":{flex:1}},codeMirror:{height:"100%",overflowY:"auto"}});function h$(){const s=um(),{selectedResult:e}=oo(),[i,l]=(0,g.useState)(""),a=e?.directoryContents.find(c=>c.path===i);return(0,g.useEffect)(()=>{if(e){const[c]=e.directoryContents;l(c?c.path:"")}},[e]),e?g.createElement(cm,null,g.createElement(xS,{selected:i,onSelect:l,filePaths:e.directoryContents.map(c=>c.path)}),g.createElement(jl,{className:s.codeMirror,theme:"dark",height:"100%",extensions:[fs.define(Wl)],readOnly:!0,value:a?.base64Content?atob(a.base64Content):""})):null}function m$(){const{selectedResult:s}=oo(),[e,i]=(0,g.useState)(),l=(0,g.useMemo)(()=>s?s.steps.map(c=>{const u=s.log.filter(f=>f.body.stepId===c.id);return{id:c.id,name:c.name,logString:u.map(f=>f.body.message).join(`
`),status:u[u.length-1]?.body.status??"completed"}})??[]:[],[s]);if(!s)return null;const a=l.find(c=>c.id===e)??l[0];return g.createElement(cm,null,g.createElement(d$,{steps:l,currentStepId:a.id,onUserStepChange:i}),g.createElement(k0.r,{text:a?.logString??""}))}function p$(){const s=um(),{selectedResult:e}=oo();return e?g.createElement(cm,null,g.createElement(Ee.A,{pt:2},e.output?.links?.length&&g.createElement(o$,{output:e.output})),g.createElement(jl,{className:s.codeMirror,theme:"dark",height:"100%",extensions:[fs.define(Wl)],readOnly:!0,value:JSON.stringify(e.output,null,2)})):null}function g$(){const s=um(),[e,i]=(0,g.useState)("files"),{t:l}=(0,mt.i)(pt.W);return g.createElement("div",{className:s.root},g.createElement(n$.A,{value:e,onChange:(a,c)=>i(c)},g.createElement(am.A,{value:"files",label:l("templateEditorPage.dryRunResultsView.tab.files")}),g.createElement(am.A,{value:"log",label:l("templateEditorPage.dryRunResultsView.tab.log")}),g.createElement(am.A,{value:"output",label:l("templateEditorPage.dryRunResultsView.tab.output")})),g.createElement(Yr.A,null),g.createElement("div",{className:s.contentWrapper},g.createElement("div",{className:s.content},e==="files"&&g.createElement(h$,null),e==="log"&&g.createElement(m$,null),e==="output"&&g.createElement(p$,null))))}const y$=(0,D.A)(s=>({header:{height:48,minHeight:0,"&.Mui-expanded":{height:48,minHeight:0}},content:{display:"grid",background:s.palette.background.default,gridTemplateColumns:"180px auto 1fr",gridTemplateRows:"1fr",padding:0,height:400}}));function v$(){const s=y$(),e=oo(),[i,l]=(0,g.useState)(!1),[a,c]=(0,g.useState)(!0),{t:u}=(0,mt.i)(pt.W),f=e.results.length,d=J4(f);return(0,g.useEffect)(()=>{d===0&&f===1?(c(!1),l(!0)):d===1&&f===0&&l(!1)},[d,f]),g.createElement(g.Fragment,null,g.createElement(Ki.A,{variant:"outlined",expanded:i,hidden:f===0&&a,onChange:(h,m)=>l(m),onTransitionEnd:()=>f===0&&c(!0)},g.createElement(xe.A,{className:s.header,expandIcon:g.createElement(Un.A,null)},g.createElement(Ge.A,null,u("templateEditorPage.dryRunResults.title"))),g.createElement(Yr.A,{orientation:"horizontal"}),g.createElement(Ur.A,{className:s.content},g.createElement(e$,null),g.createElement(Yr.A,{orientation:"horizontal"}),g.createElement(g$,null))))}const b$=s=>{const{layouts:e,formProps:i,fieldExtensions:l}=s,[a,c]=(0,g.useState)(),u=(0,Y.Zp)(),f=(0,yt.S)(Ue.Dg),{directory:d,openDirectory:h,createDirectory:m,closeDirectory:p}=T0(),y=(0,g.useCallback)(()=>{p().then(()=>u(f()))},[p,u,f]);return g.createElement(j2,{directory:d},g.createElement(g4,null,g.createElement(M0,null,g.createElement(I0,null,g.createElement(oS,{fieldExtensions:l},g.createElement(aS,{onOpenDirectory:h,onCreateDirectory:m,onCloseDirectory:y}))),g.createElement(W2,null,g.createElement(j4,{onClose:p})),g.createElement(R0,null,g.createElement(nu.DirectoryEditor,{errorText:a})),g.createElement(L0,null,g.createElement(lo.DirectoryEditorDryRun,{setErrorText:c,fieldExtensions:l,layouts:e,formProps:i})),g.createElement(V2,null,g.createElement(v$,null)))))},x$=(0,D.A)({content:{padding:0}},{name:"ScaffolderTemplateEditorToolbar"});function S$(s){const e=x$(),i=(0,yt.S)(Ue.Dg),{t:l}=(0,mt.i)(pt.W);return g.createElement(Kr.Y,{themeId:"home"},g.createElement(Gr.Y,{title:l("templateEditorPage.title"),subtitle:l("templateEditorPage.subtitle"),type:l("templateIntroPage.title"),typeLink:i()}),g.createElement(gr.U,{className:e.content},g.createElement(b$,{layouts:s.layouts,formProps:s.formProps,fieldExtensions:s.fieldExtensions})))}var E$=S(53318);const A$=(0,D.A)({menu:{maxHeight:48*5}});function w$(s){const{options:e,selectedOption:i,onSelectOption:l}=s,a=A$(),[c,u]=(0,g.useState)(null),{t:f}=(0,mt.i)(pt.W),d=(0,g.useCallback)(y=>!!i&&i.value===y.value,[i]),h=(0,g.useCallback)(y=>{u(y.currentTarget)},[u]),m=(0,g.useCallback)(()=>{u(null)},[u]),p=(0,g.useCallback)(y=>{m(),l(y)},[m,l]);return g.createElement(g.Fragment,null,g.createElement(Bt.A,{"aria-controls":"templates-menu","aria-haspopup":"true",onClick:h},f("templateEditorToolbarTemplatesMenu.button")),g.createElement(lS.A,{id:"templates-menu",anchorEl:c,open:!!c,onClose:m,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{className:a.menu}},e.map((y,b)=>g.createElement(Qt.A,{key:b,selected:d(y),"aria-selected":d(y),onClick:()=>p(y)},y.label))))}const C$=`# Edit the template parameters below to see how they will render in the scaffolder form UI
parameters:
  - title: Fill in some steps
    required:
      - name
    properties:
      name:
        title: Name
        type: string
        description: Unique name of the component
      owner:
        title: Owner
        type: string
        description: Owner of the component
        ui:field: OwnerPicker
        ui:options:
          catalogFilter:
            kind: Group
  - title: Choose a location
    required:
      - repoUrl
    properties:
      repoUrl:
        title: Repository Location
        type: string
        ui:field: RepoUrlPicker
        ui:options:
          allowedHosts:
            - github.com
steps:
  - id: fetch-base
    name: Fetch Base
    action: fetch:template
    input:
      url: ./template
      values:
        name: \${{parameters.name}}
`,O$=(0,D.A)(s=>({root:{height:"100%",gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "toolbar"
      "textArea"
      "preview"
    `,[s.breakpoints.up("md")]:{gridTemplateAreas:`
      "toolbar toolbar"
      "textArea preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"}},files:{gridArea:"textArea"}}),{name:"ScaffolderTemplateFormPreviewer"}),k$=({defaultPreviewTemplate:s=C$,customFieldExtensions:e=[],layouts:i=[],formProps:l})=>{const a=O$(),c=(0,Nt.gf)(Am.k),u=(0,Nt.gf)(Kl.v),f=(0,Y.Zp)(),d=(0,yt.S)(Ue.Dg),[h,m]=(0,g.useState)(),[p,y]=(0,g.useState)(),[b,x]=(0,g.useState)([]),[A,E]=(0,g.useState)(s),w=(0,g.useCallback)(()=>{f(d())},[f,d]);(0,An.A)(()=>u.getEntities({filter:{kind:"template"},fields:["kind","metadata.namespace","metadata.name","metadata.title","spec.parameters","spec.steps","spec.output"]}).then(({items:L})=>x(L.map(z=>({label:z.metadata.title??(0,E$.S)(z,{defaultKind:"template"}),value:z})))).catch(L=>c.post({message:`Error loading exisiting templates: ${L.message}`,severity:"error"})),[u]);const k=(0,g.useCallback)(L=>{y(L),E(Jo.Ay.stringify(L.value.spec))},[y,E]);return g.createElement(M0,{classes:{root:a.root}},g.createElement(I0,null,g.createElement(oS,{fieldExtensions:e},g.createElement(aS,{onCloseDirectory:w}),g.createElement(w$,{options:b,selectedOption:p,onSelectOption:k}))),g.createElement(R0,{classes:{root:a.files}},g.createElement(nu,{content:A,onUpdate:E,errorText:h})),g.createElement(L0,null,g.createElement(lo,{content:A,contentIsSpec:!0,fieldExtensions:e,setErrorText:m,layouts:i,formProps:l})))},P$=(0,D.A)({root:{padding:0}});function T$(s){const e=P$(),i=(0,Y.Zp)(),l=(0,yt.S)(Ue.Dg),{t:a}=(0,mt.i)(pt.W),c=(0,g.useCallback)(()=>{i(l())},[i,l]);return g.createElement(Kr.Y,{themeId:"home"},g.createElement(Gr.Y,{title:a("templateFormPage.title"),subtitle:a("templateFormPage.subtitle"),type:a("templateIntroPage.title"),typeLink:l()}),g.createElement(gr.U,{className:e.root},g.createElement(k$,{layouts:s.layouts,formProps:s.formProps,customFieldExtensions:s.fieldExtensions,defaultPreviewTemplate:s.defaultPreviewTemplate,onClose:c})))}var D$=S(67349),M$=S(20947),I$=S(80342),R$=S(58055),L$=S(89031),F$=S(57369),N$=S(68482);const wS=(0,D.A)(s=>({gridRoot:{display:"flex",flex:1,alignItems:"center",justifyContent:"center"},cardGrid:{maxWidth:1e3,display:"grid",gridGap:s.spacing(2),gridAutoFlow:"row",[s.breakpoints.up("md")]:{gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr 1fr"}},card:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"1fr",alignItems:"center",margin:s.spacing(0,1),marginTop:s.spacing(2),padding:s.spacing(2)},icon:{justifySelf:"center",paddingTop:s.spacing(1),fontSize:48},introText:{textAlign:"center",marginTop:s.spacing(2)},infoIcon:{position:"absolute",top:s.spacing(1),right:s.spacing(1)},cardContent:{padding:s.spacing(1)}}));function ru(s){const e=s.requireLoad?Ra.isSupported():!0,{t:i}=(0,mt.i)(pt.W),l=wS(),{Icon:a,title:c,description:u,action:f}=s;return g.createElement(ws.A,{className:l.card},!e&&g.createElement(Pi.Ay,{placement:"top",title:i("templateEditorPage.templateEditorIntro.loadLocal.unsupportedTooltip")},g.createElement(L$.A,null)),g.createElement(D$.A,{onClick:f},g.createElement(F$.A,null,g.createElement(a,{className:l.icon,color:e?void 0:"disabled"})),g.createElement(Yl.A,{className:l.cardContent},g.createElement(Ge.A,{gutterBottom:!0,variant:"h5",component:"h2",color:e?void 0:"textSecondary"},c),g.createElement(Ge.A,{variant:"body2",color:"textSecondary",component:"p"},u))))}function B$(s){const e=wS(),{t:i}=(0,mt.i)(pt.W);return g.createElement("div",{style:s.style},g.createElement(Ge.A,{variant:"h4",component:"h2",className:e.introText},i("templateEditorPage.templateEditorIntro.title")),g.createElement("div",{className:e.gridRoot},g.createElement("div",{className:e.cardGrid},g.createElement(ru,{title:i("templateEditorPage.templateEditorIntro.loadLocal.title"),description:i("templateEditorPage.templateEditorIntro.loadLocal.description"),requireLoad:!0,Icon:N$.A,action:()=>s.onSelect?.("local")}),g.createElement(ru,{title:i("templateEditorPage.templateEditorIntro.createLocal.title"),description:i("templateEditorPage.templateEditorIntro.createLocal.description"),requireLoad:!0,action:()=>s.onSelect?.("create-template"),Icon:M$.A}),g.createElement(ru,{title:i("templateEditorPage.templateEditorIntro.formEditor.title"),description:i("templateEditorPage.templateEditorIntro.formEditor.description"),Icon:I$.A,action:()=>s.onSelect?.("form")}),g.createElement(ru,{title:i("templateEditorPage.templateEditorIntro.fieldExplorer.title"),description:i("templateEditorPage.templateEditorIntro.fieldExplorer.description"),Icon:R$.A,action:()=>s.onSelect?.("field-explorer")}))))}function $$(){const s=(0,Y.Zp)(),e=(0,yt.S)(Ue.rQ),i=(0,yt.S)(Ue.GH),l=(0,yt.S)(Ue.P),a=(0,yt.S)(Ue.t6),{t:c}=(0,mt.i)(pt.W),{openDirectory:u,createDirectory:f}=T0(),d=(0,g.useCallback)(h=>{h==="local"?u().then(()=>s(i())).catch(()=>{}):h==="create-template"?f().then(()=>s(i())).catch(()=>{}):h==="form"?s(l()):h==="field-explorer"&&s(a())},[u,f,s,i,l,a]);return g.createElement(Kr.Y,{themeId:"home"},g.createElement(Gr.Y,{title:c("templateIntroPage.title"),type:"Scaffolder",typeLink:e(),subtitle:c("templateIntroPage.subtitle")}),g.createElement(gr.U,null,g.createElement(B$,{onSelect:d})))}var CS=S(45685);const j$=(0,D.A)(s=>({root:{gridArea:"pageContent",display:"grid",gridGap:s.spacing(2),gridTemplateAreas:`
      "controls"
      "fieldForm"
      "preview"
    `,[s.breakpoints.up("md")]:{gridTemplateAreas:`
      "controls controls"
      "fieldForm preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"}},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center"},fieldForm:{gridArea:"fieldForm"},preview:{gridArea:"preview",display:"grid",gridGap:s.spacing(2),alignContent:"start"}}),{name:"ScaffolderCustomFieldExplorer"}),W$=({customFieldExtensions:s=[]})=>{const e=j$(),{t:i}=(0,mt.i)(pt.W),l=s.filter(x=>!!x.schema),[a,c]=(0,g.useState)(l?.[0]),[u,f]=(0,g.useState)({}),[d,h]=(0,g.useState)(Date.now()),m=(0,g.useMemo)(()=>a?Jo.Ay.stringify({parameters:[{title:`${a.name} Example`,properties:{[a.name]:{type:a.schema?.returnValue?.type,"ui:field":a.name,"ui:options":u}}}]}):"",[u,a]),p=(0,g.useMemo)(()=>Object.fromEntries(s.map(({name:x,component:A})=>[x,A])),[s]),y=(0,g.useCallback)(x=>{c(x),f({})},[f,c]),b=(0,g.useCallback)(x=>{f(x),h(Date.now())},[f,h]);return g.createElement("main",{className:e.root},g.createElement("div",{className:e.controls},g.createElement(Ss.Ay,{id:"custom-fields-autocomplete",value:a,options:l,getOptionLabel:x=>x.name,renderInput:x=>g.createElement(G.A,{...x,"aria-label":i("templateEditorPage.customFieldExplorer.selectFieldLabel"),placeholder:i("templateEditorPage.customFieldExplorer.selectFieldLabel"),variant:"outlined",InputProps:{...x.InputProps,startAdornment:g.createElement(fo.A,{position:"start"},g.createElement(ho.A,null))}}),onChange:(x,A)=>{A&&y(A)},disableClearable:!0,fullWidth:!0})),g.createElement("div",{className:e.fieldForm},g.createElement(ws.A,null,g.createElement(CS.A,{title:i("templateEditorPage.customFieldExplorer.fieldForm.title")}),g.createElement(Yl.A,null,g.createElement(Cf,{showErrorList:!1,fields:{...p},noHtml5Validate:!0,formData:u,formContext:{fieldFormState:u},onSubmit:x=>b(x.formData),validator:Og,schema:a?.schema?.uiOptions||{},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"}},g.createElement(Bt.A,{variant:"contained",color:"primary",type:"submit",disabled:!a?.schema?.uiOptions},i("templateEditorPage.customFieldExplorer.fieldForm.applyButtonTitle")))))),g.createElement("div",{className:e.preview},g.createElement(ws.A,null,g.createElement(CS.A,{title:i("templateEditorPage.customFieldExplorer.preview.title")}),g.createElement(Yl.A,null,g.createElement(jl,{readOnly:!0,theme:"dark",height:"100%",extensions:[fs.define(Wl)],value:m}))),g.createElement(lo,{key:d,content:m,contentIsSpec:!0,fieldExtensions:s,setErrorText:()=>null})))};function V$(s){const e=(0,yt.S)(Ue.Dg),{t:i}=(0,mt.i)(pt.W);return g.createElement(Kr.Y,{themeId:"home"},g.createElement(Gr.Y,{title:i("templateCustomFieldPage.title"),subtitle:i("templateCustomFieldPage.subtitle"),type:i("templateIntroPage.title"),typeLink:e()}),g.createElement(gr.U,null,g.createElement(W$,{customFieldExtensions:s.fieldExtensions})))}var ao=S(75014);const z$=s=>{const{components:{TemplateCardComponent:e,TaskPageComponent:i=A2,ReviewStepComponent:l,EXPERIMENTAL_TemplateOutputsComponent:a,EXPERIMENTAL_TemplateListPageComponent:c=TE,EXPERIMENTAL_TemplateWizardPageComponent:u=ND}={}}=s,f=(0,Y.P1)()||s.children,d=N(f),h=[...d,...un.filter(({name:p})=>!d.some(y=>y.name===p))],m=C(f);return g.createElement(Y.BV,null,g.createElement(Y.qh,{path:"/",element:g.createElement(c,{TemplateCardComponent:e,contextMenu:s.contextMenu,groups:s.groups,templateFilter:s.templateFilter,headerOptions:s.headerOptions})}),g.createElement(Y.qh,{path:Ue.sP.path,element:g.createElement(F.Q,null,g.createElement(u,{headerOptions:s.headerOptions,customFieldExtensions:h,layouts:m,components:{ReviewStepComponent:l},formProps:s.formProps}))}),g.createElement(Y.qh,{path:Ue.bW.path,element:g.createElement(ao.T,{permission:dn.Xw},g.createElement(i,{TemplateOutputsComponent:a}))}),g.createElement(Y.qh,{path:Ue.Dg.path,element:g.createElement(ao.T,{permission:dn.$},g.createElement(F.Q,null,g.createElement($$,null)))}),g.createElement(Y.qh,{path:Ue.t6.path,element:g.createElement(ao.T,{permission:dn.$},g.createElement(F.Q,null,g.createElement(V$,{fieldExtensions:h})))}),g.createElement(Y.qh,{path:Ue.P.path,element:g.createElement(ao.T,{permission:dn.$},g.createElement(F.Q,null,g.createElement(T$,{layouts:m,formProps:s.formProps,fieldExtensions:h})))}),g.createElement(Y.qh,{path:Ue.GF.path,element:g.createElement(NS,{contextMenu:s.contextMenu})}),g.createElement(Y.qh,{path:Ue.JX.path,element:g.createElement(ao.T,{permission:dn.Xw},g.createElement(JS,{contextMenu:s.contextMenu}))}),g.createElement(Y.qh,{path:Ue.GH.path,element:g.createElement(ao.T,{permission:dn.$},g.createElement(F.Q,null,g.createElement(S$,{layouts:m,formProps:s.formProps,fieldExtensions:h})))}),g.createElement(Y.qh,{path:"*",element:g.createElement(En.M,{status:"404",statusMessage:"Page not found"})}))}},68594:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");H.A=N},86868:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"ControlPoint");H.A=N},39590:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");H.A=N},7147:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");H.A=N},23164:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");H.A=N},3380:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord");H.A=N},58055:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),"FormatListBulleted");H.A=N},12326:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp");H.A=N},89031:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");H.A=N},20353:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");H.A=N},80342:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M19 5v14H5V5h14m1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt");H.A=N},25711:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"PanoramaFishEye");H.A=N},68482:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"}),"Publish");H.A=N},10010:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");H.A=N},51767:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline");H.A=N},55534:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"}),"Repeat");H.A=N},64118:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");H.A=N},71108:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");H.A=N},25283:(ie,H,S)=>{"use strict";var T,g=S(4293),Y=S(78920);T={value:!0},H.A=void 0;var R=Y(S(14041)),Z=g(S(74044)),N=(0,Z.default)(R.createElement("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}),"Toc");H.A=N},95716:function(ie){(function(H,S){ie.exports=S()})(typeof self<"u"?self:this,()=>(()=>{"use strict";var H={d:(j,se)=>{for(var ae in se)H.o(se,ae)&&!H.o(j,ae)&&Object.defineProperty(j,ae,{enumerable:!0,get:se[ae]})},o:(j,se)=>Object.prototype.hasOwnProperty.call(j,se),r:j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},S={};function T(j){return j==="#"||j===""||Array.isArray(j)&&j.length===0||!1}H.r(S),H.d(S,{default:()=>G,get:()=>C,isRoot:()=>T,join:()=>I,remove:()=>P,removeUndefinedItems:()=>K,set:()=>te,split:()=>W,splitLast:()=>M});const g=/~1/g,Y=/~0/g,R=/\/+/g,Z=/(^[#/]*|\/+$)/g;function N(j){return j.replace(g,"/").replace(Y,"~")}function B(j){return N(decodeURIComponent(j))}function W(j){if(j==null||typeof j!="string"||T(j))return Array.isArray(j)?j:[];const se=j.indexOf("#")>=0?B:N,ae=(j=(j=j.replace(R,"/")).replace(Z,"")).split("/");for(let le=0,re=ae.length;le<re;le+=1)ae[le]=se(ae[le]);return ae}function C(j,se,ae=void 0){if(se==null||j==null)return ae;if(T(se))return j;const le=F(j,W(se));return le===void 0?ae:le}function F(j,se){const ae=se.shift();if(j!==void 0)return ae!==void 0?F(j[ae],se):j}const J=/^\[.*\]$/,Q=/^\[(.+)\]$/;function _(j,se){return j==="__proto__"||j=="constructor"&&se.length>0&&se[0]=="prototype"}function te(j,se,ae){if(se==null)return j;const le=W(se);if(le.length===0)return j;j==null&&(j=J.test(le[0])?[]:{});let re,pe,Fe=j;for(;le.length>1;)re=le.shift(),pe=J.test(le[0]),_(re,le)||(Fe=q(Fe,re,pe));return re=le.pop(),ne(Fe,re,ae),j}function ne(j,se,ae){let le;const re=se.match(Q);se==="[]"&&Array.isArray(j)?j.push(ae):re?(le=re.pop(),j[le]=ae):j[se]=ae}function q(j,se,ae){if(j[se]!=null)return j[se];const le=ae?[]:{};return ne(j,se,le),le}function K(j){let se=0,ae=0;for(;se+ae<j.length;)j[se+ae]===void 0&&(ae+=1),j[se]=j[se+ae],se+=1;return j.length=j.length-ae,j}function P(j,se,ae){const le=W(se),re=le.pop(),pe=C(j,le);return pe&&delete pe[re],Array.isArray(pe)&&ae!==!0&&K(pe),j}const V=/\/+/g,v=/~/g,O=/\//g;function D(j,se){if(j.length===0)return se?"#":"";for(let ae=0,le=j.length;ae<le;ae+=1)j[ae]=j[ae].replace(v,"~0").replace(O,"~1"),se&&(j[ae]=encodeURIComponent(j[ae]));return((se?"#/":"/")+j.join("/")).replace(V,"/")}function I(j,...se){const ae=[];if(Array.isArray(j))return D(j,arguments[1]===!0);const le=arguments[arguments.length-1],re=typeof le=="boolean"?le:j&&j[0]==="#";for(let Fe=0,ze=arguments.length;Fe<ze;Fe+=1)ae.push.apply(ae,W(arguments[Fe]));const pe=[];for(let Fe=0,ze=ae.length;Fe<ze;Fe+=1)if(ae[Fe]===".."){if(pe.length===0)return re?"#":"";pe.pop()}else pe.push(ae[Fe]);return D(pe,re)}function M(j){const se=W(j);if(se.length===0)return typeof j=="string"&&j[0]==="#"?["#",se[0]]:["",void 0];if(se.length===1)return j[0]==="#"?["#",se[0]]:["",se[0]];const ae=se.pop();return[I(se,j[0]==="#"),ae]}const G={get:C,set:te,remove:P,join:I,split:W,splitLast:M,isRoot:T,removeUndefinedItems:K};return S})())},49004:(ie,H,S)=>{"use strict";var T=S(10646),g=S(50709),Y=S(43225),R=Math.pow(2,31)-1;function Z(W,C){var F=1,J;if(W===0)return C;if(C===0)return W;for(;W%2===0&&C%2===0;)W=W/2,C=C/2,F=F*2;for(;W%2===0;)W=W/2;for(;C;){for(;C%2===0;)C=C/2;W>C&&(J=C,C=W,W=J),C=C-W}return F*W}function N(W,C){var F=0,J;if(W===0)return C;if(C===0)return W;for(;!(W&1)&&!(C&1);)W>>>=1,C>>>=1,F++;for(;!(W&1);)W>>>=1;for(;C;){for(;!(C&1);)C>>>=1;W>C&&(J=C,C=W,W=J),C=C-W}return W<<F}function B(){var W=arguments.length,C,F,J,Q,_,te,ne;for(C=new Array(W),ne=0;ne<W;ne++)C[ne]=arguments[ne];if(g(C)){if(W===2)return _=C[0],te=C[1],_<0&&(_=-_),te<0&&(te=-te),_<=R&&te<=R?N(_,te):Z(_,te);J=C}else if(T(C[0]))if(W>1){if(J=C[0],F=C[1],!Y(F))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+F+"`.")}else J=C[0];else throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+C[0]+"`.");if(Q=J.length,Q<2)return null;if(F){for(_=new Array(Q),ne=0;ne<Q;ne++)_[ne]=F(J[ne],ne);J=_}if(W<3&&!g(J))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+J+"`.");for(ne=0;ne<Q;ne++)_=J[ne],_<0&&(J[ne]=-_);for(_=J[0],ne=1;ne<Q;ne++)te=J[ne],te<=R&&_<=R?_=N(_,te):_=Z(_,te);return _}ie.exports=B},23050:(ie,H,S)=>{"use strict";var T=S(49004),g=S(10646),Y=S(50709),R=S(43225);function Z(){var N=arguments.length,B,W,C,F,J,Q,_;for(B=new Array(N),_=0;_<N;_++)B[_]=arguments[_];if(Y(B)){if(N===2)return J=B[0],Q=B[1],J<0&&(J=-J),Q<0&&(Q=-Q),J===0||Q===0?0:J/T(J,Q)*Q;C=B}else if(g(B[0]))if(N>1){if(C=B[0],W=B[1],!R(W))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+W+"`.")}else C=B[0];else throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+B[0]+"`.");if(F=C.length,F<2)return null;if(W){for(J=new Array(F),_=0;_<F;_++)J[_]=W(C[_],_);C=J}if(N<3&&!Y(C))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+C+"`.");for(_=0;_<F;_++)J=C[_],J<0&&(C[_]=-J);for(J=C[0],_=1;_<F;_++){if(Q=C[_],J===0||Q===0)return 0;J=J/T(J,Q)*Q}return J}ie.exports=Z},52743:ie=>{"use strict";var H=function(K){return S(K)&&!T(K)};function S(q){return!!q&&typeof q=="object"}function T(q){var K=Object.prototype.toString.call(q);return K==="[object RegExp]"||K==="[object Date]"||R(q)}var g=typeof Symbol=="function"&&Symbol.for,Y=g?Symbol.for("react.element"):60103;function R(q){return q.$$typeof===Y}function Z(q){return Array.isArray(q)?[]:{}}function N(q,K){return K.clone!==!1&&K.isMergeableObject(q)?te(Z(q),q,K):q}function B(q,K,P){return q.concat(K).map(function(V){return N(V,P)})}function W(q,K){if(!K.customMerge)return te;var P=K.customMerge(q);return typeof P=="function"?P:te}function C(q){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(q).filter(function(K){return Object.propertyIsEnumerable.call(q,K)}):[]}function F(q){return Object.keys(q).concat(C(q))}function J(q,K){try{return K in q}catch{return!1}}function Q(q,K){return J(q,K)&&!(Object.hasOwnProperty.call(q,K)&&Object.propertyIsEnumerable.call(q,K))}function _(q,K,P){var V={};return P.isMergeableObject(q)&&F(q).forEach(function(v){V[v]=N(q[v],P)}),F(K).forEach(function(v){Q(q,v)||(J(q,v)&&P.isMergeableObject(K[v])?V[v]=W(v,P)(q[v],K[v],P):V[v]=N(K[v],P))}),V}function te(q,K,P){P=P||{},P.arrayMerge=P.arrayMerge||B,P.isMergeableObject=P.isMergeableObject||H,P.cloneUnlessOtherwiseSpecified=N;var V=Array.isArray(K),v=Array.isArray(q),O=V===v;return O?V?P.arrayMerge(q,K,P):_(q,K,P):N(K,P)}te.all=function(K,P){if(!Array.isArray(K))throw new Error("first argument should be an array");return K.reduce(function(V,v){return te(V,v,P)},{})};var ne=te;ie.exports=ne},22193:(ie,H,S)=>{"use strict";var T;T={value:!0};const g=S(65280);var Y;(function(R){R.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],R.defaultParser=new g.Parser(R.RULES,{debug:!1});const Z=/^(!|&)/,N=/(\?|\+|\*)$/,B=/^%/;function W(O,D){if(typeof O=="string"){if(Z.test(O))return"";if(B.test(O)){let M=N.exec(O),G=M?M[0]+" ":"";return C(O,D)?J(O,D)+G:"("+J(O,D)+")"+G}return O}else return O.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function C(O,D){let I=g.findRuleByName(O,D);return I&&I.bnf.length==1&&I.bnf[0].length==1&&(I.bnf[0][0]instanceof RegExp||I.bnf[0][0][0]=='"'||I.bnf[0][0][0]=="'")}function F(O,D){return O.map(I=>W(I,D)).join(" ")}function J(O,D){let I=g.findRuleByName(O,D);return I?I.bnf.map(M=>F(M,D)).join(" | "):"RULE_NOT_FOUND {"+O+"}"}function Q(O){let D=[];return O.grammarRules.forEach(I=>{if(!/^%/.test(I.name)){let M=I.recover?" /* { recoverUntil="+I.recover+" } */":"";D.push(I.name+" ::= "+J(I.name,O)+M)}}),D.join(`
`)}R.emit=Q;let _=0;function te(O,D){throw console.log("reberia restar "+D+" a "+O),new Error("Difference not supported yet")}function ne(O){return new RegExp(O.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function q(O,D,I){let M=null,G=[];return D.children.forEach((j,se)=>{j.type=="Minus"&&te(M,j);let ae=D.children[se+1];ae=ae&&ae.type=="PrimaryDecoration"&&ae.text||"";let le="";switch(j.type){case"SubItem":let re="%"+(I+_++);K(O,j,re),G.push(le+re+ae);break;case"NCName":case"StringLiteral":G.push(le+j.text+ae);break;case"CharCode":case"CharClass":if(ae||le){let pe={name:"%"+(I+_++),bnf:[[ne(j.text)]]};O.push(pe),G.push(le+pe.name+ae)}else G.push(ne(j.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+j.type+" -> "+JSON.stringify(j.text))}M=j}),G}function K(O,D,I){let M=D.children.filter(se=>se.type=="SequenceOrDifference").map(se=>q(O,se,I)),G={name:I,bnf:M},j=null;M.forEach(se=>{j=j||se.recover,delete se.recover}),I.indexOf("%")==0&&(G.fragment=!0),j&&(G.recover=j),O.push(G)}function P(O,D=R.defaultParser){let I=D.getAST(O);if(!I)throw new Error("Could not parse "+O);if(I.errors&&I.errors.length)throw I.errors[0];let M=[];return I.children.filter(G=>G.type=="Production").map(G=>{let j=G.children.filter(se=>se.type=="NCName")[0].text;K(M,G,j)}),M}R.getRules=P;function V(O,D=R.defaultParser){return P(O.join(""),D)}R.Transform=V;class v extends g.Parser{constructor(D,I){const M=I&&I.debugRulesParser===!0?new g.Parser(R.RULES,{debug:!0}):R.defaultParser;super(P(D,M),I)}emitSource(){return Q(this)}}R.Parser=v})(Y||(Y={})),H.A=Y},65280:(ie,H,S)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Parser=H.findRuleByName=H.parseRuleName=H.escapeRegExp=H.readToken=void 0;const T=/^[A-Z0-9_]+$/,g=/(\?|\+|\*)$/,Y=/^(@|&|!)/,R="WS",Z=S(89849);function N(q,K){let P=K.exec(q);return P&&P.index==0?P[0].length==0&&K.source.length>0?null:{type:null,text:P[0],rest:q.substr(P[0].length),start:0,end:P[0].length-1,fullText:P[0],errors:[],children:[],parent:null}:null}H.readToken=N;function B(q){return q.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}H.escapeRegExp=B;function W(q){q.rest="",q.children&&q.children.forEach(K=>W(K))}function C(q,K){q.start+=K,q.end+=K,q.children&&q.children.forEach(P=>C(P,q.start))}function F(q,K){K.errors&&K.errors.length&&K.errors.forEach(P=>q.push(P)),K.children&&K.children.forEach(P=>F(q,P))}function J(q){let K=g.exec(q),P=Y.exec(q),V=K&&K[0]||"",v=P&&P[0]||"",O={raw:q,name:q.replace(g,"").replace(Y,""),isOptional:V=="?"||V=="*",allowRepetition:V=="+"||V=="*",atLeastOne:V=="+",lookupPositive:v=="&",lookupNegative:v=="!",pinned:v=="@",lookup:!1,isLiteral:!1};return O.isLiteral=O.name[0]=="'"||O.name[0]=='"',O.lookup=O.lookupNegative||O.lookupPositive,O}H.parseRuleName=J;function Q(q,K){let P=J(q);return K.cachedRules[P.name]||null}H.findRuleByName=Q;function _(q,K){if(q.children){let P=q.children.filter(V=>V.type&&K.test(V.type));for(let V=0;V<P.length;V++){let v=q.children.indexOf(P[V]);v!=-1&&q.children.splice(v,1)}q.children.forEach(V=>_(V,K))}}const te=["EOF"];class ne{constructor(K,P){this.grammarRules=K,this.options=P,this.cachedRules={},this.debug=P?P.debug===!0:!1;let V=[],v=[];if(K.forEach(O=>{let D=J(O.name);if(D.name in this.cachedRules){V.push("Duplicated rule "+D.name);return}else this.cachedRules[D.name]=O;if(!O.bnf||!O.bnf.length){let I="Missing rule content, rule: "+O.name;V.indexOf(I)==-1&&V.push(I)}else O.bnf.forEach(I=>{if(typeof I[0]=="string"&&J(I[0]).name==O.name){let G="Left recursion is not allowed, rule: "+O.name;V.indexOf(G)==-1&&V.push(G)}I.forEach(M=>{if(typeof M=="string"){let G=J(M);!G.isLiteral&&v.indexOf(G.name)==-1&&te.indexOf(G.name)==-1&&v.push(G.name)}})});R==O.name&&(O.implicitWs=!1),O.implicitWs&&v.indexOf(R)==-1&&v.push(R),O.recover&&v.indexOf(O.recover)==-1&&v.push(O.recover)}),v.forEach(O=>{O in this.cachedRules||V.push("Missing rule "+O)}),V.length)throw new Error(V.join(`
`))}getAST(K,P){P||(P=this.grammarRules.filter(v=>!v.fragment&&v.name.indexOf("%")!=0)[0].name);let V=this.parse(K,P);if(V){F(V.errors,V),C(V,0),_(V,/^%/),(!this.options||!this.options.keepUpperRules)&&_(V,T);let v=V.rest;v&&new Z.TokenError(`Unexpected end of input: 
`+v,V),W(V),V.rest=v}return V}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(K,P,V=0){let v=null,O=J(P),D,I=this.debug&&!T.test(O.name);I&&console.log(new Array(V).join("\u2502  ")+"Trying to get "+P+" from "+JSON.stringify(K.split(`
`)[0]));let M=O.name,G=Q(O.name,this);if(O.name=="EOF"){if(K.length)return null;if(K.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!G&&O.isLiteral){let j=O.name.trim();if(j.startsWith('"')?j=JSON.parse(j):j.startsWith("'")&&(j=j.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),j==="")return{type:"%%EMPTY%%",text:"",rest:K,start:0,end:0,fullText:"",errors:[],children:[],parent:null};D=new RegExp(B(j)),M=null}}catch(j){return j instanceof ReferenceError&&console.error(j),null}if(D){let j=N(K,D);if(j)return j.type=M,j}else{let j=G.bnf;j instanceof Array&&j.forEach(se=>{if(v)return;let ae=null,le={type:O.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:K};G.fragment&&(le.fragment=!0);let re=K,pe=0,Fe=se.length>0,ze=!1;for(let Ze=0;Ze<se.length;Ze++)if(typeof se[Ze]=="string"){let Me=J(se[Ze]);Fe=Fe&&Me.isOptional;let Pe,gt=!1;do{if(Pe=null,G.implicitWs&&(Pe=this.parse(re,Me.name,V+1),!Pe)){let ot;do if(ot=this.parse(re,R,V+1),ot)le.text=le.text+ot.text,le.end=le.text.length,ot.parent=le,le.children.push(ot),re=re.substr(ot.text.length),pe+=ot.text.length;else break;while(ot&&ot.text.length)}if(Pe=Pe||this.parse(re,Me.name,V+1),Me.lookupNegative){if(Pe)return;break}if(Me.lookupPositive&&!Pe)return;if(!Pe&&(Me.isOptional||Me.atLeastOne&&gt))break;if(Pe&&G.pinned==Ze+1&&(ae=Pe,I&&console.log(new Array(V+1).join("\u2502  ")+"\u2514\u2500 "+Pe.type+" PINNED")),Pe||(Pe=this.parseRecovery(G,re,V+1)),!Pe)if(ae)v=le,Pe={type:"SyntaxError",text:re,children:[],end:re.length,errors:[],fullText:"",parent:null,start:0,rest:""},re.length?new Z.TokenError(`Unexpected end of input. Expecting ${Me.name} Got: ${re}`,Pe):new Z.TokenError(`Unexpected end of input. Missing ${Me.name}`,Pe),I&&console.log(new Array(V+1).join("\u2502  ")+"\u2514\u2500 "+Pe.type+" "+JSON.stringify(Pe.text));else return;if(gt=!0,ze=!0,Pe.type=="%%EMPTY%%")break;Pe.start+=pe,Pe.end+=pe,!Me.lookupPositive&&Pe.type&&(Pe.fragment?Pe.children&&Pe.children.forEach(ot=>{ot.start+=pe,ot.end+=pe,ot.parent=le,le.children.push(ot)}):(Pe.parent=le,le.children.push(Pe))),Me.lookup&&(Pe.lookup=!0),I&&console.log(new Array(V+1).join("\u2502  ")+"\u2514\u2500 "+Pe.type+" "+JSON.stringify(Pe.text)),!Me.lookup&&!Pe.lookup&&(le.text=le.text+Pe.text,le.end=le.text.length,re=re.substr(Pe.text.length),pe+=Pe.text.length),le.rest=re}while(Pe&&Me.allowRepetition&&re.length&&!Pe.lookup)}else{let Me=N(re,se[Ze]);if(!Me)return;I&&console.log(new Array(V+1).join("\u2502  ")+"\u2514> "+JSON.stringify(Me.text)+se[Ze].source),ze=!0,Me.start+=pe,Me.end+=pe,le.text=le.text+Me.text,le.end=le.text.length,re=re.substr(Me.text.length),pe+=Me.text.length,le.rest=re}ze&&(v=le,I&&console.log(new Array(V).join("\u2502  ")+"\u251C<\u2500\u2534< PUSHING "+v.type+" "+JSON.stringify(v.text)))}),v&&G.simplifyWhenOneChildren&&v.children.length==1&&(v=v.children[0])}return v||I&&console.log(P+" NOT RESOLVED FROM "+K),v}parseRecovery(K,P,V){if(K.recover&&P.length){let v=this.debug;v&&console.log(new Array(V+1).join("\u2502  ")+"Trying to recover until token "+K.recover+" from "+JSON.stringify(P.split(`
`)[0]+P.split(`
`)[1]));let O={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},D;do if(D=this.parse(P,K.recover,V+1),D){new Z.TokenError('Unexpected input: "'+O.text+`" Expecting: ${K.name}`,O);break}else O.text=O.text+P[0],O.end=O.text.length,P=P.substr(1);while(!D&&P.length>0);if(O.text.length>0&&D)return v&&console.log(new Array(V+1).join("\u2502  ")+"Recovered text: "+JSON.stringify(O.text)),O}return null}}H.Parser=ne,H.default=ne},89849:(ie,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.TokenError=void 0;class S extends Error{constructor(g,Y){if(super(g),this.message=g,this.token=Y,Y&&Y.errors)Y.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}H.TokenError=S},4794:(ie,H,S)=>{var T;(function(){var g=Object.assign||function(v){for(var O,D=1;D<arguments.length;D++){O=arguments[D];for(var I in O)_(O,I)&&(v[I]=O[I])}return v},Y=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"},R=N(function(v){return v===1?"\u03C7\u03C1\u03CC\u03BD\u03BF\u03C2":"\u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"},function(v){return v===1?"\u03BC\u03AE\u03BD\u03B1\u03C2":"\u03BC\u03AE\u03BD\u03B5\u03C2"},function(v){return v===1?"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1":"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"},function(v){return v===1?"\u03BC\u03AD\u03C1\u03B1":"\u03BC\u03AD\u03C1\u03B5\u03C2"},function(v){return v===1?"\u03CE\u03C1\u03B1":"\u03CE\u03C1\u03B5\u03C2"},function(v){return v===1?"\u03BB\u03B5\u03C0\u03C4\u03CC":"\u03BB\u03B5\u03C0\u03C4\u03AC"},function(v){return v===1?"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03BF":"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"},function(v){return(v===1?"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03CC":"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03AC")+" \u03C4\u03BF\u03C5 \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03BF\u03BB\u03AD\u03C0\u03C4\u03BF\u03C5"},","),Z={af:N("jaar",function(v){return"maand"+(v===1?"":"e")},function(v){return v===1?"week":"weke"},function(v){return v===1?"dag":"dae"},function(v){return v===1?"uur":"ure"},function(v){return v===1?"minuut":"minute"},function(v){return"sekonde"+(v===1?"":"s")},function(v){return"millisekonde"+(v===1?"":"s")},","),am:N("\u12D3\u1218\u1275","\u12C8\u122D","\u1233\u121D\u1295\u1275","\u1240\u1295","\u1230\u12D3\u1275","\u12F0\u1242\u1243","\u1230\u12A8\u1295\u12F5","\u121A\u120A\u1230\u12A8\u1295\u12F5"),ar:g(N(function(v){return["\u0633\u0646\u0629","\u0633\u0646\u062A\u0627\u0646","\u0633\u0646\u0648\u0627\u062A"][B(v)]},function(v){return["\u0634\u0647\u0631","\u0634\u0647\u0631\u0627\u0646","\u0623\u0634\u0647\u0631"][B(v)]},function(v){return["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","\u0623\u0633\u0627\u0628\u064A\u0639"][B(v)]},function(v){return["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","\u0623\u064A\u0627\u0645"][B(v)]},function(v){return["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","\u0633\u0627\u0639\u0627\u062A"][B(v)]},function(v){return["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u0627\u0646","\u062F\u0642\u0627\u0626\u0642"][B(v)]},function(v){return["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u0627\u0646","\u062B\u0648\u0627\u0646\u064A"][B(v)]},function(v){return["\u062C\u0632\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u062C\u0632\u0622\u0646 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u0623\u062C\u0632\u0627\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629"][B(v)]},","),{delimiter:" \uFEED ",_hideCountIf2:!0,_digitReplacements:["\u06F0","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"]}),bg:N(function(v){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][C(v)]},function(v){return["\u043C\u0435\u0441\u0435\u0446\u0430","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][C(v)]},function(v){return["\u0441\u0435\u0434\u043C\u0438\u0446\u0438","\u0441\u0435\u0434\u043C\u0438\u0446\u0430","\u0441\u0435\u0434\u043C\u0438\u0446\u0438"][C(v)]},function(v){return["\u0434\u043D\u0438","\u0434\u0435\u043D","\u0434\u043D\u0438"][C(v)]},function(v){return["\u0447\u0430\u0441\u0430","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][C(v)]},function(v){return["\u043C\u0438\u043D\u0443\u0442\u0438","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u0438"][C(v)]},function(v){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][C(v)]},function(v){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][C(v)]},","),bn:N("\u09AC\u099B\u09B0","\u09AE\u09BE\u09B8","\u09B8\u09AA\u09CD\u09A4\u09BE\u09B9","\u09A6\u09BF\u09A8","\u0998\u09A8\u09CD\u099F\u09BE","\u09AE\u09BF\u09A8\u09BF\u099F","\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1","\u09AE\u09BF\u09B2\u09BF\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1"),ca:N(function(v){return"any"+(v===1?"":"s")},function(v){return"mes"+(v===1?"":"os")},function(v){return"setman"+(v===1?"a":"es")},function(v){return"di"+(v===1?"a":"es")},function(v){return"hor"+(v===1?"a":"es")},function(v){return"minut"+(v===1?"":"s")},function(v){return"segon"+(v===1?"":"s")},function(v){return"milisegon"+(v===1?"":"s")},","),ckb:N("\u0633\u0627\u06B5","\u0645\u0627\u0646\u06AF","\u0647\u06D5\u0641\u062A\u06D5","\u0695\u06C6\u0698","\u06A9\u0627\u0698\u06CE\u0631","\u062E\u0648\u0644\u06D5\u06A9","\u0686\u0631\u06A9\u06D5","\u0645\u06CC\u0644\u06CC \u0686\u0631\u06A9\u06D5","."),cs:N(function(v){return["rok","roku","roky","let"][F(v)]},function(v){return["m\u011Bs\xEDc","m\u011Bs\xEDce","m\u011Bs\xEDce","m\u011Bs\xEDc\u016F"][F(v)]},function(v){return["t\xFDden","t\xFDdne","t\xFDdny","t\xFDdn\u016F"][F(v)]},function(v){return["den","dne","dny","dn\xED"][F(v)]},function(v){return["hodina","hodiny","hodiny","hodin"][F(v)]},function(v){return["minuta","minuty","minuty","minut"][F(v)]},function(v){return["sekunda","sekundy","sekundy","sekund"][F(v)]},function(v){return["milisekunda","milisekundy","milisekundy","milisekund"][F(v)]},","),cy:N("flwyddyn","mis","wythnos","diwrnod","awr","munud","eiliad","milieiliad"),da:N("\xE5r",function(v){return"m\xE5ned"+(v===1?"":"er")},function(v){return"uge"+(v===1?"":"r")},function(v){return"dag"+(v===1?"":"e")},function(v){return"time"+(v===1?"":"r")},function(v){return"minut"+(v===1?"":"ter")},function(v){return"sekund"+(v===1?"":"er")},function(v){return"millisekund"+(v===1?"":"er")},","),de:N(function(v){return"Jahr"+(v===1?"":"e")},function(v){return"Monat"+(v===1?"":"e")},function(v){return"Woche"+(v===1?"":"n")},function(v){return"Tag"+(v===1?"":"e")},function(v){return"Stunde"+(v===1?"":"n")},function(v){return"Minute"+(v===1?"":"n")},function(v){return"Sekunde"+(v===1?"":"n")},function(v){return"Millisekunde"+(v===1?"":"n")},","),el:R,en:N(function(v){return"year"+(v===1?"":"s")},function(v){return"month"+(v===1?"":"s")},function(v){return"week"+(v===1?"":"s")},function(v){return"day"+(v===1?"":"s")},function(v){return"hour"+(v===1?"":"s")},function(v){return"minute"+(v===1?"":"s")},function(v){return"second"+(v===1?"":"s")},function(v){return"millisecond"+(v===1?"":"s")}),eo:N(function(v){return"jaro"+(v===1?"":"j")},function(v){return"monato"+(v===1?"":"j")},function(v){return"semajno"+(v===1?"":"j")},function(v){return"tago"+(v===1?"":"j")},function(v){return"horo"+(v===1?"":"j")},function(v){return"minuto"+(v===1?"":"j")},function(v){return"sekundo"+(v===1?"":"j")},function(v){return"milisekundo"+(v===1?"":"j")},","),es:N(function(v){return"a\xF1o"+(v===1?"":"s")},function(v){return"mes"+(v===1?"":"es")},function(v){return"semana"+(v===1?"":"s")},function(v){return"d\xEDa"+(v===1?"":"s")},function(v){return"hora"+(v===1?"":"s")},function(v){return"minuto"+(v===1?"":"s")},function(v){return"segundo"+(v===1?"":"s")},function(v){return"milisegundo"+(v===1?"":"s")},","),et:N(function(v){return"aasta"+(v===1?"":"t")},function(v){return"kuu"+(v===1?"":"d")},function(v){return"n\xE4dal"+(v===1?"":"at")},function(v){return"p\xE4ev"+(v===1?"":"a")},function(v){return"tund"+(v===1?"":"i")},function(v){return"minut"+(v===1?"":"it")},function(v){return"sekund"+(v===1?"":"it")},function(v){return"millisekund"+(v===1?"":"it")},","),eu:N("urte","hilabete","aste","egun","ordu","minutu","segundo","milisegundo",","),fa:N("\u0633\u0627\u0644","\u0645\u0627\u0647","\u0647\u0641\u062A\u0647","\u0631\u0648\u0632","\u0633\u0627\u0639\u062A","\u062F\u0642\u06CC\u0642\u0647","\u062B\u0627\u0646\u06CC\u0647","\u0645\u06CC\u0644\u06CC \u062B\u0627\u0646\u06CC\u0647"),fi:N(function(v){return v===1?"vuosi":"vuotta"},function(v){return v===1?"kuukausi":"kuukautta"},function(v){return"viikko"+(v===1?"":"a")},function(v){return"p\xE4iv\xE4"+(v===1?"":"\xE4")},function(v){return"tunti"+(v===1?"":"a")},function(v){return"minuutti"+(v===1?"":"a")},function(v){return"sekunti"+(v===1?"":"a")},function(v){return"millisekunti"+(v===1?"":"a")},","),fo:N("\xE1r",function(v){return v===1?"m\xE1na\xF0ur":"m\xE1na\xF0ir"},function(v){return v===1?"vika":"vikur"},function(v){return v===1?"dagur":"dagar"},function(v){return v===1?"t\xEDmi":"t\xEDmar"},function(v){return v===1?"minuttur":"minuttir"},"sekund","millisekund",","),fr:N(function(v){return"an"+(v>=2?"s":"")},"mois",function(v){return"semaine"+(v>=2?"s":"")},function(v){return"jour"+(v>=2?"s":"")},function(v){return"heure"+(v>=2?"s":"")},function(v){return"minute"+(v>=2?"s":"")},function(v){return"seconde"+(v>=2?"s":"")},function(v){return"milliseconde"+(v>=2?"s":"")},","),gr:R,he:N(function(v){return v===1?"\u05E9\u05E0\u05D4":"\u05E9\u05E0\u05D9\u05DD"},function(v){return v===1?"\u05D7\u05D5\u05D3\u05E9":"\u05D7\u05D5\u05D3\u05E9\u05D9\u05DD"},function(v){return v===1?"\u05E9\u05D1\u05D5\u05E2":"\u05E9\u05D1\u05D5\u05E2\u05D5\u05EA"},function(v){return v===1?"\u05D9\u05D5\u05DD":"\u05D9\u05DE\u05D9\u05DD"},function(v){return v===1?"\u05E9\u05E2\u05D4":"\u05E9\u05E2\u05D5\u05EA"},function(v){return v===1?"\u05D3\u05E7\u05D4":"\u05D3\u05E7\u05D5\u05EA"},function(v){return v===1?"\u05E9\u05E0\u05D9\u05D4":"\u05E9\u05E0\u05D9\u05D5\u05EA"},function(v){return v===1?"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D9\u05D4":"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D5\u05EA"}),hr:N(function(v){return v%10===2||v%10===3||v%10===4?"godine":"godina"},function(v){return v===1?"mjesec":v===2||v===3||v===4?"mjeseca":"mjeseci"},function(v){return v%10===1&&v!==11?"tjedan":"tjedna"},function(v){return v===1?"dan":"dana"},function(v){return v===1?"sat":v===2||v===3||v===4?"sata":"sati"},function(v){var O=v%10;return(O===2||O===3||O===4)&&(v<10||v>14)?"minute":"minuta"},function(v){var O=v%10;return O===5||Math.floor(v)===v&&v>=10&&v<=19?"sekundi":O===1?"sekunda":O===2||O===3||O===4?"sekunde":"sekundi"},function(v){return v===1?"milisekunda":v%10===2||v%10===3||v%10===4?"milisekunde":"milisekundi"},","),hi:N("\u0938\u093E\u0932",function(v){return v===1?"\u092E\u0939\u0940\u0928\u093E":"\u092E\u0939\u0940\u0928\u0947"},function(v){return v===1?"\u0939\u095E\u094D\u0924\u093E":"\u0939\u092B\u094D\u0924\u0947"},"\u0926\u093F\u0928",function(v){return v===1?"\u0918\u0902\u091F\u093E":"\u0918\u0902\u091F\u0947"},"\u092E\u093F\u0928\u091F","\u0938\u0947\u0915\u0902\u0921","\u092E\u093F\u0932\u0940\u0938\u0947\u0915\u0902\u0921"),hu:N("\xE9v","h\xF3nap","h\xE9t","nap","\xF3ra","perc","m\xE1sodperc","ezredm\xE1sodperc",","),id:N("tahun","bulan","minggu","hari","jam","menit","detik","milidetik"),is:N("\xE1r",function(v){return"m\xE1nu\xF0"+(v===1?"ur":"ir")},function(v){return"vik"+(v===1?"a":"ur")},function(v){return"dag"+(v===1?"ur":"ar")},function(v){return"klukkut\xEDm"+(v===1?"i":"ar")},function(v){return"m\xEDn\xFAt"+(v===1?"a":"ur")},function(v){return"sek\xFAnd"+(v===1?"a":"ur")},function(v){return"millisek\xFAnd"+(v===1?"a":"ur")}),it:N(function(v){return"ann"+(v===1?"o":"i")},function(v){return"mes"+(v===1?"e":"i")},function(v){return"settiman"+(v===1?"a":"e")},function(v){return"giorn"+(v===1?"o":"i")},function(v){return"or"+(v===1?"a":"e")},function(v){return"minut"+(v===1?"o":"i")},function(v){return"second"+(v===1?"o":"i")},function(v){return"millisecond"+(v===1?"o":"i")},","),ja:N("\u5E74","\u30F6\u6708","\u9031","\u65E5","\u6642\u9593","\u5206","\u79D2","\u30DF\u30EA\u79D2"),km:N("\u1786\u17D2\u1793\u17B6\u17C6","\u1781\u17C2","\u179F\u1794\u17D2\u178F\u17B6\u17A0\u17CD","\u1790\u17D2\u1784\u17C3","\u1798\u17C9\u17C4\u1784","\u1793\u17B6\u1791\u17B8","\u179C\u17B7\u1793\u17B6\u1791\u17B8","\u1798\u17B7\u179B\u17D2\u179B\u17B8\u179C\u17B7\u1793\u17B6\u1791\u17B8"),kn:N(function(v){return v===1?"\u0CB5\u0CB0\u0CCD\u0CB7":"\u0CB5\u0CB0\u0CCD\u0CB7\u0C97\u0CB3\u0CC1"},function(v){return v===1?"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1":"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1\u0C97\u0CB3\u0CC1"},function(v){return v===1?"\u0CB5\u0CBE\u0CB0":"\u0CB5\u0CBE\u0CB0\u0C97\u0CB3\u0CC1"},function(v){return v===1?"\u0CA6\u0CBF\u0CA8":"\u0CA6\u0CBF\u0CA8\u0C97\u0CB3\u0CC1"},function(v){return v===1?"\u0C97\u0C82\u0C9F\u0CC6":"\u0C97\u0C82\u0C9F\u0CC6\u0C97\u0CB3\u0CC1"},function(v){return v===1?"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7":"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7\u0C97\u0CB3\u0CC1"},function(v){return v===1?"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"},function(v){return v===1?"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"}),ko:N("\uB144","\uAC1C\uC6D4","\uC8FC\uC77C","\uC77C","\uC2DC\uAC04","\uBD84","\uCD08","\uBC00\uB9AC \uCD08"),ku:N("sal","meh","hefte","roj","seet","deqe","saniye","m\xEEl\xEE\xE7irk",","),lo:N("\u0E9B\u0EB5","\u0EC0\u0E94\u0EB7\u0EAD\u0E99","\u0EAD\u0EB2\u0E97\u0EB4\u0E94","\u0EA1\u0EB7\u0EC9","\u0E8A\u0EBB\u0EC8\u0EA7\u0EC2\u0EA1\u0E87","\u0E99\u0EB2\u0E97\u0EB5","\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5","\u0EA1\u0EB4\u0E99\u0EA5\u0EB4\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5",","),lt:N(function(v){return v%10===0||v%100>=10&&v%100<=20?"met\u0173":"metai"},function(v){return["m\u0117nuo","m\u0117nesiai","m\u0117nesi\u0173"][J(v)]},function(v){return["savait\u0117","savait\u0117s","savai\u010Di\u0173"][J(v)]},function(v){return["diena","dienos","dien\u0173"][J(v)]},function(v){return["valanda","valandos","valand\u0173"][J(v)]},function(v){return["minut\u0117","minut\u0117s","minu\u010Di\u0173"][J(v)]},function(v){return["sekund\u0117","sekund\u0117s","sekund\u017Ei\u0173"][J(v)]},function(v){return["milisekund\u0117","milisekund\u0117s","milisekund\u017Ei\u0173"][J(v)]},","),lv:N(function(v){return Q(v)?"gads":"gadi"},function(v){return Q(v)?"m\u0113nesis":"m\u0113ne\u0161i"},function(v){return Q(v)?"ned\u0113\u013Ca":"ned\u0113\u013Cas"},function(v){return Q(v)?"diena":"dienas"},function(v){return Q(v)?"stunda":"stundas"},function(v){return Q(v)?"min\u016Bte":"min\u016Btes"},function(v){return Q(v)?"sekunde":"sekundes"},function(v){return Q(v)?"milisekunde":"milisekundes"},","),mk:N(function(v){return v===1?"\u0433\u043E\u0434\u0438\u043D\u0430":"\u0433\u043E\u0434\u0438\u043D\u0438"},function(v){return v===1?"\u043C\u0435\u0441\u0435\u0446":"\u043C\u0435\u0441\u0435\u0446\u0438"},function(v){return v===1?"\u043D\u0435\u0434\u0435\u043B\u0430":"\u043D\u0435\u0434\u0435\u043B\u0438"},function(v){return v===1?"\u0434\u0435\u043D":"\u0434\u0435\u043D\u0430"},function(v){return v===1?"\u0447\u0430\u0441":"\u0447\u0430\u0441\u0430"},function(v){return v===1?"\u043C\u0438\u043D\u0443\u0442\u0430":"\u043C\u0438\u043D\u0443\u0442\u0438"},function(v){return v===1?"\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},function(v){return v===1?"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},","),mn:N("\u0436\u0438\u043B","\u0441\u0430\u0440","\u0434\u043E\u043B\u043E\u043E \u0445\u043E\u043D\u043E\u0433","\u04E9\u0434\u04E9\u0440","\u0446\u0430\u0433","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),mr:N(function(v){return v===1?"\u0935\u0930\u094D\u0937":"\u0935\u0930\u094D\u0937\u0947"},function(v){return v===1?"\u092E\u0939\u093F\u0928\u093E":"\u092E\u0939\u093F\u0928\u0947"},function(v){return v===1?"\u0906\u0920\u0935\u0921\u093E":"\u0906\u0920\u0935\u0921\u0947"},"\u0926\u093F\u0935\u0938","\u0924\u093E\u0938",function(v){return v===1?"\u092E\u093F\u0928\u093F\u091F":"\u092E\u093F\u0928\u093F\u091F\u0947"},"\u0938\u0947\u0915\u0902\u0926","\u092E\u093F\u0932\u093F\u0938\u0947\u0915\u0902\u0926"),ms:N("tahun","bulan","minggu","hari","jam","minit","saat","milisaat"),nl:N("jaar",function(v){return v===1?"maand":"maanden"},function(v){return v===1?"week":"weken"},function(v){return v===1?"dag":"dagen"},"uur",function(v){return v===1?"minuut":"minuten"},function(v){return v===1?"seconde":"seconden"},function(v){return v===1?"milliseconde":"milliseconden"},","),no:N("\xE5r",function(v){return"m\xE5ned"+(v===1?"":"er")},function(v){return"uke"+(v===1?"":"r")},function(v){return"dag"+(v===1?"":"er")},function(v){return"time"+(v===1?"":"r")},function(v){return"minutt"+(v===1?"":"er")},function(v){return"sekund"+(v===1?"":"er")},function(v){return"millisekund"+(v===1?"":"er")},","),pl:N(function(v){return["rok","roku","lata","lat"][W(v)]},function(v){return["miesi\u0105c","miesi\u0105ca","miesi\u0105ce","miesi\u0119cy"][W(v)]},function(v){return["tydzie\u0144","tygodnia","tygodnie","tygodni"][W(v)]},function(v){return["dzie\u0144","dnia","dni","dni"][W(v)]},function(v){return["godzina","godziny","godziny","godzin"][W(v)]},function(v){return["minuta","minuty","minuty","minut"][W(v)]},function(v){return["sekunda","sekundy","sekundy","sekund"][W(v)]},function(v){return["milisekunda","milisekundy","milisekundy","milisekund"][W(v)]},","),pt:N(function(v){return"ano"+(v===1?"":"s")},function(v){return v===1?"m\xEAs":"meses"},function(v){return"semana"+(v===1?"":"s")},function(v){return"dia"+(v===1?"":"s")},function(v){return"hora"+(v===1?"":"s")},function(v){return"minuto"+(v===1?"":"s")},function(v){return"segundo"+(v===1?"":"s")},function(v){return"milissegundo"+(v===1?"":"s")},","),ro:N(function(v){return v===1?"an":"ani"},function(v){return v===1?"lun\u0103":"luni"},function(v){return v===1?"s\u0103pt\u0103m\xE2n\u0103":"s\u0103pt\u0103m\xE2ni"},function(v){return v===1?"zi":"zile"},function(v){return v===1?"or\u0103":"ore"},function(v){return v===1?"minut":"minute"},function(v){return v===1?"secund\u0103":"secunde"},function(v){return v===1?"milisecund\u0103":"milisecunde"},","),ru:N(function(v){return["\u043B\u0435\u0442","\u0433\u043E\u0434","\u0433\u043E\u0434\u0430"][C(v)]},function(v){return["\u043C\u0435\u0441\u044F\u0446\u0435\u0432","\u043C\u0435\u0441\u044F\u0446","\u043C\u0435\u0441\u044F\u0446\u0430"][C(v)]},function(v){return["\u043D\u0435\u0434\u0435\u043B\u044C","\u043D\u0435\u0434\u0435\u043B\u044F","\u043D\u0435\u0434\u0435\u043B\u0438"][C(v)]},function(v){return["\u0434\u043D\u0435\u0439","\u0434\u0435\u043D\u044C","\u0434\u043D\u044F"][C(v)]},function(v){return["\u0447\u0430\u0441\u043E\u0432","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][C(v)]},function(v){return["\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u044B"][C(v)]},function(v){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][C(v)]},function(v){return["\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][C(v)]},","),sq:N(function(v){return v===1?"vit":"vjet"},"muaj","jav\xEB","dit\xEB","or\xEB",function(v){return"minut"+(v===1?"\xEB":"a")},function(v){return"sekond"+(v===1?"\xEB":"a")},function(v){return"milisekond"+(v===1?"\xEB":"a")},","),sr:N(function(v){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0435"][C(v)]},function(v){return["\u043C\u0435\u0441\u0435\u0446\u0438","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][C(v)]},function(v){return["\u043D\u0435\u0434\u0435\u0459\u0438","\u043D\u0435\u0434\u0435\u0459\u0430","\u043D\u0435\u0434\u0435\u0459\u0435"][C(v)]},function(v){return["\u0434\u0430\u043D\u0438","\u0434\u0430\u043D","\u0434\u0430\u043D\u0430"][C(v)]},function(v){return["\u0441\u0430\u0442\u0438","\u0441\u0430\u0442","\u0441\u0430\u0442\u0430"][C(v)]},function(v){return["\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430"][C(v)]},function(v){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][C(v)]},function(v){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][C(v)]},","),ta:N(function(v){return v===1?"\u0BB5\u0BB0\u0BC1\u0B9F\u0BAE\u0BCD":"\u0B86\u0BA3\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD"},function(v){return v===1?"\u0BAE\u0BBE\u0BA4\u0BAE\u0BCD":"\u0BAE\u0BBE\u0BA4\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(v){return v===1?"\u0BB5\u0BBE\u0BB0\u0BAE\u0BCD":"\u0BB5\u0BBE\u0BB0\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(v){return v===1?"\u0BA8\u0BBE\u0BB3\u0BCD":"\u0BA8\u0BBE\u0B9F\u0BCD\u0B95\u0BB3\u0BCD"},function(v){return v===1?"\u0BAE\u0BA3\u0BBF":"\u0BAE\u0BA3\u0BBF\u0BA8\u0BC7\u0BB0\u0BAE\u0BCD"},function(v){return"\u0BA8\u0BBF\u0BAE\u0BBF\u0B9F"+(v===1?"\u0BAE\u0BCD":"\u0B99\u0BCD\u0B95\u0BB3\u0BCD")},function(v){return"\u0BB5\u0BBF\u0BA9\u0BBE\u0B9F\u0BBF"+(v===1?"":"\u0B95\u0BB3\u0BCD")},function(v){return"\u0BAE\u0BBF\u0BB2\u0BCD\u0BB2\u0BBF \u0BB5\u0BBF\u0BA8\u0BBE\u0B9F\u0BBF"+(v===1?"":"\u0B95\u0BB3\u0BCD")}),te:N(function(v){return"\u0C38\u0C02\u0C35\u0C24\u0C4D\u0C38"+(v===1?"\u0C30\u0C02":"\u0C30\u0C3E\u0C32")},function(v){return"\u0C28\u0C46\u0C32"+(v===1?"":"\u0C32")},function(v){return v===1?"\u0C35\u0C3E\u0C30\u0C02":"\u0C35\u0C3E\u0C30\u0C3E\u0C32\u0C41"},function(v){return"\u0C30\u0C4B\u0C1C\u0C41"+(v===1?"":"\u0C32\u0C41")},function(v){return"\u0C17\u0C02\u0C1F"+(v===1?"":"\u0C32\u0C41")},function(v){return v===1?"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C02":"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C3E\u0C32\u0C41"},function(v){return v===1?"\u0C38\u0C46\u0C15\u0C28\u0C41":"\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"},function(v){return v===1?"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D":"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"}),uk:N(function(v){return["\u0440\u043E\u043A\u0456\u0432","\u0440\u0456\u043A","\u0440\u043E\u043A\u0438"][C(v)]},function(v){return["\u043C\u0456\u0441\u044F\u0446\u0456\u0432","\u043C\u0456\u0441\u044F\u0446\u044C","\u043C\u0456\u0441\u044F\u0446\u0456"][C(v)]},function(v){return["\u0442\u0438\u0436\u043D\u0456\u0432","\u0442\u0438\u0436\u0434\u0435\u043D\u044C","\u0442\u0438\u0436\u043D\u0456"][C(v)]},function(v){return["\u0434\u043D\u0456\u0432","\u0434\u0435\u043D\u044C","\u0434\u043D\u0456"][C(v)]},function(v){return["\u0433\u043E\u0434\u0438\u043D","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][C(v)]},function(v){return["\u0445\u0432\u0438\u043B\u0438\u043D","\u0445\u0432\u0438\u043B\u0438\u043D\u0430","\u0445\u0432\u0438\u043B\u0438\u043D\u0438"][C(v)]},function(v){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][C(v)]},function(v){return["\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][C(v)]},","),ur:N("\u0633\u0627\u0644",function(v){return v===1?"\u0645\u06C1\u06CC\u0646\u06C1":"\u0645\u06C1\u06CC\u0646\u06D2"},function(v){return v===1?"\u06C1\u0641\u062A\u06C1":"\u06C1\u0641\u062A\u06D2"},"\u062F\u0646",function(v){return v===1?"\u06AF\u06BE\u0646\u0679\u06C1":"\u06AF\u06BE\u0646\u0679\u06D2"},"\u0645\u0646\u0679","\u0633\u06CC\u06A9\u0646\u0688","\u0645\u0644\u06CC \u0633\u06CC\u06A9\u0646\u0688"),sk:N(function(v){return["rok","roky","roky","rokov"][F(v)]},function(v){return["mesiac","mesiace","mesiace","mesiacov"][F(v)]},function(v){return["t\xFD\u017Ede\u0148","t\xFD\u017Edne","t\xFD\u017Edne","t\xFD\u017Ed\u0148ov"][F(v)]},function(v){return["de\u0148","dni","dni","dn\xED"][F(v)]},function(v){return["hodina","hodiny","hodiny","hod\xEDn"][F(v)]},function(v){return["min\xFAta","min\xFAty","min\xFAty","min\xFAt"][F(v)]},function(v){return["sekunda","sekundy","sekundy","sek\xFAnd"][F(v)]},function(v){return["milisekunda","milisekundy","milisekundy","milisek\xFAnd"][F(v)]},","),sl:N(function(v){return v%10===1?"leto":v%100===2?"leti":v%100===3||v%100===4||Math.floor(v)!==v&&v%100<=5?"leta":"let"},function(v){return v%10===1?"mesec":v%100===2||Math.floor(v)!==v&&v%100<=5?"meseca":v%10===3||v%10===4?"mesece":"mesecev"},function(v){return v%10===1?"teden":v%10===2||Math.floor(v)!==v&&v%100<=4?"tedna":v%10===3||v%10===4?"tedne":"tednov"},function(v){return v%100===1?"dan":"dni"},function(v){return v%10===1?"ura":v%100===2?"uri":v%10===3||v%10===4||Math.floor(v)!==v?"ure":"ur"},function(v){return v%10===1?"minuta":v%10===2?"minuti":v%10===3||v%10===4||Math.floor(v)!==v&&v%100<=4?"minute":"minut"},function(v){return v%10===1?"sekunda":v%100===2?"sekundi":v%100===3||v%100===4||Math.floor(v)!==v?"sekunde":"sekund"},function(v){return v%10===1?"milisekunda":v%100===2?"milisekundi":v%100===3||v%100===4||Math.floor(v)!==v?"milisekunde":"milisekund"},","),sv:N("\xE5r",function(v){return"m\xE5nad"+(v===1?"":"er")},function(v){return"veck"+(v===1?"a":"or")},function(v){return"dag"+(v===1?"":"ar")},function(v){return"timm"+(v===1?"e":"ar")},function(v){return"minut"+(v===1?"":"er")},function(v){return"sekund"+(v===1?"":"er")},function(v){return"millisekund"+(v===1?"":"er")},","),sw:g(N(function(v){return v===1?"mwaka":"miaka"},function(v){return v===1?"mwezi":"miezi"},"wiki",function(v){return v===1?"siku":"masiku"},function(v){return v===1?"saa":"masaa"},"dakika","sekunde","milisekunde"),{_numberFirst:!0}),tr:N("y\u0131l","ay","hafta","g\xFCn","saat","dakika","saniye","milisaniye",","),th:N("\u0E1B\u0E35","\u0E40\u0E14\u0E37\u0E2D\u0E19","\u0E2A\u0E31\u0E1B\u0E14\u0E32\u0E2B\u0E4C","\u0E27\u0E31\u0E19","\u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07","\u0E19\u0E32\u0E17\u0E35","\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35","\u0E21\u0E34\u0E25\u0E25\u0E34\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"),uz:N("yil","oy","hafta","kun","soat","minut","sekund","millisekund"),uz_CYR:N("\u0439\u0438\u043B","\u043E\u0439","\u04B3\u0430\u0444\u0442\u0430","\u043A\u0443\u043D","\u0441\u043E\u0430\u0442","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),vi:N("n\u0103m","th\xE1ng","tu\u1EA7n","ng\xE0y","gi\u1EDD","ph\xFAt","gi\xE2y","mili gi\xE2y",","),zh_CN:N("\u5E74","\u4E2A\u6708","\u5468","\u5929","\u5C0F\u65F6","\u5206\u949F","\u79D2","\u6BEB\u79D2"),zh_TW:N("\u5E74","\u500B\u6708","\u5468","\u5929","\u5C0F\u6642","\u5206\u9418","\u79D2","\u6BEB\u79D2")};function N(v,O,D,I,M,G,j,se,ae){var le={y:v,mo:O,w:D,d:I,h:M,m:G,s:j,ms:se};return typeof ae<"u"&&(le.decimal=ae),le}function B(v){return v===2?1:v>2&&v<11?2:0}function W(v){return v===1?0:Math.floor(v)!==v?1:v%10>=2&&v%10<=4&&!(v%100>10&&v%100<20)?2:3}function C(v){return Math.floor(v)!==v?2:v%100>=5&&v%100<=20||v%10>=5&&v%10<=9||v%10===0?0:v%10===1?1:v>1?2:0}function F(v){return v===1?0:Math.floor(v)!==v?1:v%10>=2&&v%10<=4&&v%100<10?2:3}function J(v){return v===1||v%10===1&&v%100>20?0:Math.floor(v)!==v||v%10>=2&&v%100>20||v%10>=2&&v%100<10?1:2}function Q(v){return v%10===1&&v%100!==11}function _(v,O){return Object.prototype.hasOwnProperty.call(v,O)}function te(v){var O=[v.language];if(_(v,"fallbacks"))if(Y(v.fallbacks)&&v.fallbacks.length)O=O.concat(v.fallbacks);else throw new Error("fallbacks must be an array with at least one element");for(var D=0;D<O.length;D++){var I=O[D];if(_(v.languages,I))return v.languages[I];if(_(Z,I))return Z[I]}throw new Error("No language found.")}function ne(v,O,D){var I=v.unitName,M=v.unitCount,G=D.spacer,j=D.maxDecimalPoints,se;_(D,"decimal")?se=D.decimal:_(O,"decimal")?se=O.decimal:se=".";var ae;"digitReplacements"in D?ae=D.digitReplacements:"_digitReplacements"in O&&(ae=O._digitReplacements);var le,re=j===void 0?M:Math.floor(M*Math.pow(10,j))/Math.pow(10,j),pe=re.toString();if(O._hideCountIf2&&M===2)le="",G="";else if(ae){le="";for(var Fe=0;Fe<pe.length;Fe++){var ze=pe[Fe];ze==="."?le+=se:le+=ae[ze]}}else le=pe.replace(".",se);var Ze=O[I],Me;return typeof Ze=="function"?Me=Ze(M):Me=Ze,O._numberFirst?Me+G+le:le+G+Me}function q(v,O){var D,I,M,G,j=O.units,se=O.unitMeasures,ae="largest"in O?O.largest:1/0;if(!j.length)return[];var le={};for(G=v,I=0;I<j.length;I++){D=j[I];var re=se[D],pe=I===j.length-1;M=pe?G/re:Math.floor(G/re),le[D]=M,G-=M*re}if(O.round){var Fe=ae;for(I=0;I<j.length;I++)if(D=j[I],M=le[D],M!==0&&(Fe--,Fe===0)){for(var ze=I+1;ze<j.length;ze++){var Ze=j[ze],Me=le[Ze];le[D]+=Me*se[Ze]/se[D],le[Ze]=0}break}for(I=j.length-1;I>=0;I--)if(D=j[I],M=le[D],M!==0){var Pe=Math.round(M);if(le[D]=Pe,I===0)break;var gt=j[I-1],ot=se[gt],un=Math.floor(Pe*se[D]/ot);if(un)le[gt]+=un,le[D]=0;else break}}var Ue=[];for(I=0;I<j.length&&Ue.length<ae;I++)D=j[I],M=le[D],M&&Ue.push({unitName:D,unitCount:M});return Ue}function K(v,O){var D=te(O);if(!v.length){var I=O.units,M=I[I.length-1];return ne({unitName:M,unitCount:0},D,O)}var G=O.conjunction,j=O.serialComma,se;_(O,"delimiter")?se=O.delimiter:_(D,"delimiter")?se=D.delimiter:se=", ";for(var ae=[],le=0;le<v.length;le++)ae.push(ne(v[le],D,O));return!G||v.length===1?ae.join(se):v.length===2?ae.join(G):ae.slice(0,-1).join(se)+(j?",":"")+G+ae.slice(-1)}function P(v){var O=function(I,M){I=Math.abs(I);var G=g({},O,M||{}),j=q(I,G);return K(j,G)};return g(O,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},v)}var V=g(P({}),{getSupportedLanguages:function(){var O=[];for(var D in Z)_(Z,D)&&D!=="gr"&&O.push(D);return O},humanizer:P});T=function(){return V}.call(H,S,H,ie),T!==void 0&&(ie.exports=T)})()},12651:(ie,H,S)=>{var T=S(46343),g=S(40074),Y=S(82438),R=S(19106),Z=S(32293),N=S(30306),B=S(48360),W=S(22563),C=re=>Array.isArray(re)?re:[re],F=re=>re===void 0,J=re=>B(re)||Array.isArray(re)?Object.keys(re):[],Q=(re,pe)=>re.hasOwnProperty(pe),_=re=>g(Y(re)),te=re=>F(re)||Array.isArray(re)&&re.length===0,ne=(re,pe,Fe,ze)=>pe&&Q(pe,Fe)&&re&&Q(re,Fe)&&ze(re[Fe],pe[Fe]),q=(re,pe)=>F(re)&&pe===0||F(pe)&&re===0||T(re,pe),K=(re,pe)=>F(re)&&pe===!1||F(pe)&&re===!1||T(re,pe),P=re=>F(re)||T(re,{})||re===!0,V=re=>F(re)||T(re,{}),v=re=>F(re)||B(re)||re===!0||re===!1;function O(re,pe){return te(re)&&te(pe)?!0:T(_(re),_(pe))}function D(re,pe){return re=C(re),pe=C(pe),T(_(re),_(pe))}function I(re,pe,Fe,ze){var Ze=Y(J(re).concat(J(pe)));return V(re)&&V(pe)?!0:V(re)&&J(pe).length||V(pe)&&J(re).length?!1:Ze.every(function(Me){var Pe=re[Me],gt=pe[Me];return Array.isArray(Pe)&&Array.isArray(gt)?T(_(re),_(pe)):Array.isArray(Pe)&&!Array.isArray(gt)||Array.isArray(gt)&&!Array.isArray(Pe)?!1:ne(re,pe,Me,ze)})}function M(re,pe,Fe,ze){return B(re)&&B(pe)?ze(re,pe):Array.isArray(re)&&Array.isArray(pe)?I(re,pe,Fe,ze):T(re,pe)}function G(re,pe,Fe,ze){var Ze=R(re,ze),Me=R(pe,ze),Pe=N(Ze,Me,ze);return Pe.length===Math.max(Ze.length,Me.length)}var j={title:T,uniqueItems:K,minLength:q,minItems:q,minProperties:q,required:O,enum:O,type:D,items:M,anyOf:G,allOf:G,oneOf:G,properties:I,patternProperties:I,dependencies:I},se=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],ae=["additionalProperties","additionalItems","contains","propertyNames","not"];function le(re,pe,Fe){if(Fe=Z(Fe,{ignore:[]}),P(re)&&P(pe))return!0;if(!v(re)||!v(pe))throw new Error("Either of the values are not a JSON schema.");if(re===pe)return!0;if(W(re)&&W(pe))return re===pe;if(re===void 0&&pe===!1||pe===void 0&&re===!1||F(re)&&!F(pe)||!F(re)&&F(pe))return!1;var ze=Y(Object.keys(re).concat(Object.keys(pe)));if(Fe.ignore.length&&(ze=ze.filter(Me=>Fe.ignore.indexOf(Me)===-1)),!ze.length)return!0;function Ze(Me,Pe){return le(Me,Pe,Fe)}return ze.every(function(Me){var Pe=re[Me],gt=pe[Me];if(ae.indexOf(Me)!==-1)return le(Pe,gt,Fe);var ot=j[Me];if(ot||(ot=T),T(Pe,gt))return!0;if(se.indexOf(Me)===-1&&(!Q(re,Me)&&Q(pe,Me)||Q(re,Me)&&!Q(pe,Me)))return Pe===gt;var un=ot(Pe,gt,Me,Ze);if(!W(un))throw new Error("Comparer must return true or false");return un})}ie.exports=le},11543:(ie,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});function S(R){return R[0]}const T=R=>[].concat(...R.map(Z=>Array.isArray(Z)?T(Z):Z));function g(R){return R?Array.isArray(R)?T(R).join(""):R:""}const Y={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:R=>R.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(R){return R.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(R){return R.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:S},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:R=>R[0].concat([R[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:R=>R[0].concat([R[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:S},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:R=>R[0].concat([R[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:S},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:R=>R[0].concat([R[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:S},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(R){return{DomainName:g(R[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(R){return{AddressLiteral:g(R[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(R){return{localPart:g(R[0]),domainPart:g(R[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(R){return{DotString:g(R[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(R){return{QuotedString:g(R[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:R=>R[0].concat([R[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:R=>R[0].concat([R[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:R=>R[0].concat([R[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:S},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(R){return R.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:R=>R[0].concat([R[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:S},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:S},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:R=>R.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:S},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:S},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:R=>R.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:S},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:S},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:S},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:S},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:S},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:S},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:S},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:S}],ParserStart:"Reverse_path"};H.default=Y},96542:function(ie,H,S){"use strict";var T=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(H,"__esModule",{value:!0}),H.canonicalize=H.canonicalize_quoted_string=H.normalize=H.normalize_dot_string=H.parse=void 0;const g=S(63662),Y=T(S(11543));Y.default.ParserStart="Mailbox";const R=g.Grammar.fromCompiled(Y.default);function Z(F){const J=new g.Parser(R);if(J.feed(F),J.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return J.results[0]}H.parse=Z;function N(F){return function(){const _=F.indexOf("+");return _===-1?F:F.substr(0,_)}().replace(/\./g,"").toLowerCase()}H.normalize_dot_string=N;function B(F){var J,Q;const _=Z(F),te=(J=_.domainPart.AddressLiteral)!==null&&J!==void 0?J:_.domainPart.DomainName.toLowerCase();return`${(Q=_.localPart.QuotedString)!==null&&Q!==void 0?Q:N(_.localPart.DotString)}@${te}`}H.normalize=B;function W(F){return`"${F.substr(1).substr(0,F.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}H.canonicalize_quoted_string=W;function C(F){var J;const Q=Z(F),_=(J=Q.domainPart.AddressLiteral)!==null&&J!==void 0?J:Q.domainPart.DomainName.toLowerCase();return`${Q.localPart.QuotedString?W(Q.localPart.QuotedString):Q.localPart.DotString}@${_}`}H.canonicalize=C},28690:(ie,H,S)=>{const T=S(75857),g=S(53435),Y=S(48360),R=S(82438),Z=S(19106),N=S(30795);function B(q){for(const K in q)F(q,K)&&te(q[K])&&delete q[K];return q}const W=q=>R(g(q.map(J))),C=(q,K)=>q.map(P=>P&&P[K]),F=(q,K)=>Object.prototype.hasOwnProperty.call(q,K),J=q=>Y(q)||Array.isArray(q)?Object.keys(q):[],Q=q=>q!==void 0,_=q=>Y(q)||q===!0||q===!1,te=q=>!J(q).length&&q!==!1&&q!==!0,ne=(q,...K)=>N.apply(null,[q].concat(T(K)));ie.exports={allUniqueKeys:W,deleteUndefinedProps:B,getValues:C,has:F,isEmptySchema:te,isSchema:_,keys:J,notUndefined:Q,uniqWith:Z,withoutArr:ne}},52474:(ie,H,S)=>{const T=S(12651),g=S(83657),{allUniqueKeys:Y,deleteUndefinedProps:R,has:Z,isSchema:N,notUndefined:B,uniqWith:W}=S(28690);function C(_){g(_,function(te,ne){te===!1&&_.splice(ne,1)})}function F(_,te){return _.map(function(ne){if(ne)if(Array.isArray(ne.items)){const q=ne.items[te];if(N(q))return q;if(Z(ne,"additionalItems"))return ne.additionalItems}else return ne.items})}function J(_){return _.map(function(te){if(te)return Array.isArray(te.items)?te.additionalItems:te.items})}function Q(_,te,ne){return Y(ne).reduce(function(K,P){const V=F(_,P),v=W(V.filter(B),T);return K[P]=te(v,P),K},[])}ie.exports={keywords:["items","additionalItems"],resolver(_,te,ne){const q=_.map(v=>v.items),K=q.filter(B),P={};K.every(N)?P.items=ne.items(q):P.items=Q(_,ne.items,q);let V;return K.every(Array.isArray)?V=_.map(v=>v.additionalItems):K.some(Array.isArray)&&(V=J(_)),V&&(P.additionalItems=ne.additionalItems(V)),P.additionalItems===!1&&Array.isArray(P.items)&&C(P.items),R(P)}}},51537:(ie,H,S)=>{const T=S(12651),g=S(83657),{allUniqueKeys:Y,deleteUndefinedProps:R,getValues:Z,keys:N,notUndefined:B,uniqWith:W,withoutArr:C}=S(28690);function F(Q){g(Q,function(_,te){_===!1&&delete Q[te]})}function J(Q,_){return Y(Q).reduce(function(ne,q){const K=Z(Q,q),P=W(K.filter(B),T);return ne[q]=_(P,q),ne},{})}ie.exports={keywords:["properties","patternProperties","additionalProperties"],resolver(Q,_,te,ne){ne.ignoreAdditionalProperties||(Q.forEach(function(K){const P=Q.filter(D=>D!==K),V=N(K.properties),O=N(K.patternProperties).map(D=>new RegExp(D));P.forEach(function(D){const I=N(D.properties),M=I.filter(j=>O.some(se=>se.test(j)));C(I,V,M).forEach(function(j){D.properties[j]=te.properties([D.properties[j],K.additionalProperties],j)})})}),Q.forEach(function(K){const P=Q.filter(v=>v!==K),V=N(K.patternProperties);K.additionalProperties===!1&&P.forEach(function(v){const O=N(v.patternProperties);C(O,V).forEach(I=>delete v.patternProperties[I])})}));const q={additionalProperties:te.additionalProperties(Q.map(K=>K.additionalProperties)),patternProperties:J(Q.map(K=>K.patternProperties),te.patternProperties),properties:J(Q.map(K=>K.properties),te.properties)};return q.additionalProperties===!1&&F(q.properties),R(q)}}},587:(ie,H,S)=>{const T=S(46108),g=S(12651),Y=S(23050),R=S(69383),Z=S(75857),N=S(53435),B=S(58150),W=S(30306),C=S(46343),F=S(48360),J=S(92962),Q=S(40074),_=S(82438),te=S(19106),ne=S(51537),q=S(52474),K=(xe,Ee)=>xe.indexOf(Ee)!==-1,P=xe=>F(xe)||xe===!0||xe===!1,V=xe=>xe===!1,v=xe=>xe===!0,O=(xe,Ee,Ye)=>Ye(xe),D=xe=>Q(_(N(xe))),I=xe=>xe!==void 0,M=xe=>_(N(xe.map(Me))),G=xe=>xe[0],j=xe=>D(xe),se=xe=>Math.max.apply(Math,xe),ae=xe=>Math.min.apply(Math,xe),le=xe=>xe.some(v),re=xe=>te(Z(xe),C);function pe(xe){return function(Ee,Ye){return g({[xe]:Ee},{[xe]:Ye})}}function Fe(xe){let{allOf:Ee=[],...Ye}=xe;return Ye=F(xe)?Ye:xe,[Ye,...Ee.map(Fe)]}function ze(xe,Ee){return xe.map(Ye=>Ye&&Ye[Ee])}function Ze(xe,Ee){return xe.map(function(Ye,Ne){try{return Ee(Ye,Ne)}catch{return}}).filter(I)}function Me(xe){return F(xe)||Array.isArray(xe)?Object.keys(xe):[]}function Pe(xe,Ee){if(Ee=Ee||[],!xe.length)return Ee;const Ye=xe.slice(0).shift(),Ne=xe.slice(1);return Ee.length?Pe(Ne,Z(Ee.map(at=>Ye.map(Vt=>[Vt].concat(at))))):Pe(Ne,Ye.map(at=>at))}function gt(xe,Ee){let Ye;try{Ye=xe.map(function(Ne){return JSON.stringify(Ne,null,2)}).join(`
`)}catch{Ye=xe.join(", ")}throw new Error('Could not resolve values for path:"'+Ee.join(".")+`". They are probably incompatible. Values: 
`+Ye)}function ot(xe,Ee,Ye,Ne,at,Vt){if(xe.length){const Hr=at.complexResolvers[Ee];if(!Hr||!Hr.resolver)throw new Error("No resolver found for "+Ee);const ft=Ye.map(Ge=>xe.reduce((mr,ct)=>(Ge[ct]!==void 0&&(mr[ct]=Ge[ct]),mr),{})),er=te(ft,g),zn=Hr.keywords.reduce((Ge,mr)=>({...Ge,[mr]:(ct,fn=[])=>Ne(ct,null,Vt.concat(mr,fn))}),{}),nn=Hr.resolver(er,Vt.concat(Ee),zn,at);return F(nn)||gt(er,Vt.concat(Ee)),nn}}function un(xe){return{required:xe}}const Ue=["properties","patternProperties","definitions","dependencies"],En=["anyOf","oneOf"],An=["additionalProperties","additionalItems","contains","propertyNames","not","items"],Ke={type(xe){if(xe.some(Array.isArray)){const Ee=xe.map(function(Ne){return Array.isArray(Ne)?Ne:[Ne]}),Ye=B.apply(null,Ee);if(Ye.length===1)return Ye[0];if(Ye.length>1)return _(Ye)}},dependencies(xe,Ee,Ye){return M(xe).reduce(function(at,Vt){const Hr=ze(xe,Vt);let ft=te(Hr.filter(I),C);const er=ft.filter(Array.isArray);if(er.length){if(er.length===ft.length)at[Vt]=D(ft);else{const zn=ft.filter(P),nn=er.map(un);at[Vt]=Ye(zn.concat(nn),Vt)}return at}return ft=te(ft,g),at[Vt]=Ye(ft,Vt),at},{})},oneOf(xe,Ee,Ye){const Ne=Pe(T(xe)),at=Ze(Ne,Ye),Vt=te(at,g);if(Vt.length)return Vt},not(xe){return{anyOf:xe}},pattern(xe){return xe.map(Ee=>"(?="+Ee+")").join("")},multipleOf(xe){let Ee=xe.slice(0),Ye=1;for(;Ee.some(Ne=>!Number.isInteger(Ne));)Ee=Ee.map(Ne=>Ne*10),Ye=Ye*10;return Y(Ee)/Ye},enum(xe){const Ee=W.apply(null,xe.concat(C));if(Ee.length)return Q(Ee)}};Ke.$id=G,Ke.$ref=G,Ke.$schema=G,Ke.additionalItems=O,Ke.additionalProperties=O,Ke.anyOf=Ke.oneOf,Ke.contains=O,Ke.default=G,Ke.definitions=Ke.dependencies,Ke.description=G,Ke.examples=re,Ke.exclusiveMaximum=ae,Ke.exclusiveMinimum=se,Ke.items=q,Ke.maximum=ae,Ke.maxItems=ae,Ke.maxLength=ae,Ke.maxProperties=ae,Ke.minimum=se,Ke.minItems=se,Ke.minLength=se,Ke.minProperties=se,Ke.properties=ne,Ke.propertyNames=O,Ke.required=j,Ke.title=G,Ke.uniqueItems=le;const Ki={properties:ne,items:q};function Ur(xe,Ee,Ye){Ye=Ye||[],Ee=R(Ee,{ignoreAdditionalProperties:!1,resolvers:Ke,complexResolvers:Ki,deep:!0});const Ne=Object.entries(Ee.complexResolvers);function at(ft,er,zn){ft=T(ft.filter(I)),zn=zn||[];const nn=F(er)?er:{};if(!ft.length)return;if(ft.some(V))return!1;if(ft.every(v))return!0;ft=ft.filter(F);const Ge=M(ft);if(Ee.deep&&K(Ge,"allOf"))return Ur({allOf:ft},Ee,Ye);const mr=Ne.map(([ct,fn])=>Ge.filter(Un=>fn.keywords.includes(Un)));return mr.forEach(ct=>J(Ge,ct)),Ge.forEach(function(ct){const fn=ze(ft,ct),Un=te(fn.filter(I),pe(ct));if(Un.length===1&&K(En,ct))nn[ct]=Un[0].map(pr=>at([pr],pr));else if(Un.length===1&&!K(Ue,ct)&&!K(An,ct))nn[ct]=Un[0];else{const pr=Ee.resolvers[ct]||Ee.resolvers.defaultResolver;if(!pr)throw new Error("No resolver found for key "+ct+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const Ss=(fo,ho=[])=>at(fo,null,zn.concat(ct,ho));nn[ct]=pr(Un,zn.concat(ct),Ss,Ee),nn[ct]===void 0?gt(Un,zn.concat(ct)):nn[ct]===void 0&&delete nn[ct]}}),Ne.reduce((ct,[fn,Un],pr)=>({...ct,...ot(mr[pr],fn,ft,at,Ee,zn)}),nn)}const Vt=N(Fe(xe));return at(Vt)}Ur.options={resolvers:Ke},ie.exports=Ur},96576:(ie,H,S)=>{var T=S(23212),g=S(59756),Y=S(43316),R=S(65111),Z=S(49460),N=S(65568),B=200;function W(C,F,J,Q){var _=-1,te=g,ne=!0,q=C.length,K=[],P=F.length;if(!q)return K;J&&(F=R(F,Z(J))),Q?(te=Y,ne=!1):F.length>=B&&(te=N,ne=!1,F=new T(F));e:for(;++_<q;){var V=C[_],v=J==null?V:J(V);if(V=Q||V!==0?V:0,ne&&v===v){for(var O=P;O--;)if(F[O]===v)continue e;K.push(V)}else te(F,v,Q)||K.push(V)}return K}ie.exports=W},38250:ie=>{function H(S,T,g,Y){for(var R=g-1,Z=S.length;++R<Z;)if(Y(S[R],T))return R;return-1}ie.exports=H},93854:(ie,H,S)=>{var T=S(23212),g=S(59756),Y=S(43316),R=S(65111),Z=S(49460),N=S(65568),B=Math.min;function W(C,F,J){for(var Q=J?Y:g,_=C[0].length,te=C.length,ne=te,q=Array(te),K=1/0,P=[];ne--;){var V=C[ne];ne&&F&&(V=R(V,Z(F))),K=B(V.length,K),q[ne]=!J&&(F||_>=120&&V.length>=120)?new T(ne&&V):void 0}V=C[0];var v=-1,O=q[0];e:for(;++v<_&&P.length<K;){var D=V[v],I=F?F(D):D;if(D=J||D!==0?D:0,!(O?N(O,I):Q(P,I,J))){for(ne=te;--ne;){var M=q[ne];if(!(M?N(M,I):Q(C[ne],I,J)))continue e}O&&O.push(I),P.push(D)}}return P}ie.exports=W},49261:(ie,H,S)=>{var T=S(65111),g=S(2478),Y=S(38250),R=S(49460),Z=S(84354),N=Array.prototype,B=N.splice;function W(C,F,J,Q){var _=Q?Y:g,te=-1,ne=F.length,q=C;for(C===F&&(F=Z(F)),J&&(q=T(C,R(J)));++te<ne;)for(var K=0,P=F[te],V=J?J(P):P;(K=_(q,V,K,Q))>-1;)q!==C&&B.call(q,K,1),B.call(C,K,1);return C}ie.exports=W},81586:(ie,H,S)=>{var T=S(93526),g=S(98087),Y=S(13398),R=S(66040);function Z(N,B){return B=T(B,N),N=Y(N,B),N==null||delete N[R(g(B))]}ie.exports=Z},47648:(ie,H,S)=>{var T=S(65406);function g(Y){return T(Y)?Y:[]}ie.exports=g},52107:(ie,H,S)=>{var T=S(40091),g=S(41580);function Y(R,Z,N,B,W,C){return g(R)&&g(Z)&&(C.set(Z,R),T(R,Z,void 0,Y,C),C.delete(Z)),R}ie.exports=Y},29259:(ie,H,S)=>{var T=S(48360);function g(Y){return T(Y)?void 0:Y}ie.exports=g},13398:(ie,H,S)=>{var T=S(57923),g=S(73501);function Y(R,Z){return Z.length<2?R:T(R,g(Z,0,-1))}ie.exports=Y},56005:(ie,H,S)=>{var T=S(95243),g=S(5485);function Y(R){return g(T(R).toLowerCase())}ie.exports=Y},69383:(ie,H,S)=>{var T=S(86912),g=S(23945),Y=S(52107),R=S(48875),Z=g(function(N){return N.push(void 0,Y),T(R,void 0,N)});ie.exports=Z},53435:(ie,H,S)=>{var T=S(90313),g=1/0;function Y(R){var Z=R==null?0:R.length;return Z?T(R,g):[]}ie.exports=Y},58150:(ie,H,S)=>{var T=S(65111),g=S(93854),Y=S(23945),R=S(47648),Z=Y(function(N){var B=T(N,R);return B.length&&B[0]===N[0]?g(B):[]});ie.exports=Z},30306:(ie,H,S)=>{var T=S(65111),g=S(93854),Y=S(23945),R=S(47648),Z=S(98087),N=Y(function(B){var W=Z(B),C=T(B,R);return W=typeof W=="function"?W:void 0,W&&C.pop(),C.length&&C[0]===B[0]?g(C,void 0,W):[]});ie.exports=N},22563:(ie,H,S)=>{var T=S(87379),g=S(80547),Y="[object Boolean]";function R(Z){return Z===!0||Z===!1||g(Z)&&T(Z)==Y}ie.exports=R},40575:(ie,H,S)=>{var T=S(94687);function g(Y,R,Z){Z=typeof Z=="function"?Z:void 0;var N=Z?Z(Y,R):void 0;return N===void 0?T(Y,R,void 0,Z):!!N}ie.exports=g},3668:ie=>{function H(S){return S==null}ie.exports=H},60986:(ie,H,S)=>{var T=S(87379),g=S(80547),Y="[object Number]";function R(Z){return typeof Z=="number"||g(Z)&&T(Z)==Y}ie.exports=R},48875:(ie,H,S)=>{var T=S(40091),g=S(77848),Y=g(function(R,Z,N,B){T(R,Z,N,B)});ie.exports=Y},3326:(ie,H,S)=>{var T=S(65111),g=S(69334),Y=S(81586),R=S(93526),Z=S(39032),N=S(29259),B=S(41439),W=S(93650),C=1,F=2,J=4,Q=B(function(_,te){var ne={};if(_==null)return ne;var q=!1;te=T(te,function(P){return P=R(P,_),q||(q=P.length>1),P}),Z(_,W(_),ne),q&&(ne=g(ne,C|F|J,N));for(var K=te.length;K--;)Y(ne,te[K]);return ne});ie.exports=Q},92962:(ie,H,S)=>{var T=S(49261);function g(Y,R){return Y&&Y.length&&R&&R.length?T(Y,R):Y}ie.exports=g},92551:(ie,H,S)=>{var T=S(87655);function g(Y,R,Z,N){return N=typeof N=="function"?N:void 0,Y==null?Y:T(Y,R,Z,N)}ie.exports=g},55009:(ie,H,S)=>{var T=S(26137),g=S(23997),Y=S(67642),R=9007199254740991,Z=4294967295,N=Math.min;function B(W,C){if(W=Y(W),W<1||W>R)return[];var F=Z,J=N(W,Z);C=g(C),W-=Z;for(var Q=T(J,C);++F<W;)C(F);return Q}ie.exports=B},42613:(ie,H,S)=>{var T=S(65111),g=S(84354),Y=S(53142),R=S(51187),Z=S(96493),N=S(66040),B=S(95243);function W(C){return Y(C)?T(C,N):R(C)?[C]:g(Z(B(C)))}ie.exports=W},82438:(ie,H,S)=>{var T=S(15630);function g(Y){return Y&&Y.length?T(Y):[]}ie.exports=g},19106:(ie,H,S)=>{var T=S(15630);function g(Y,R){return R=typeof R=="function"?R:void 0,Y&&Y.length?T(Y,void 0,R):[]}ie.exports=g},73450:(ie,H,S)=>{var T=S(81586);function g(Y,R){return Y==null?!0:T(Y,R)}ie.exports=g},30795:(ie,H,S)=>{var T=S(96576),g=S(23945),Y=S(65406),R=g(function(Z,N){return Y(Z)?T(Z,N):[]});ie.exports=R},63662:function(ie){(function(H,S){ie.exports?ie.exports=S():H.nearley=S()})(this,function(){function H(B,W,C){return this.id=++H.highestId,this.name=B,this.symbols=W,this.postprocess=C,this}H.highestId=0,H.prototype.toString=function(B){var W=typeof B>"u"?this.symbols.map(N).join(" "):this.symbols.slice(0,B).map(N).join(" ")+" \u25CF "+this.symbols.slice(B).map(N).join(" ");return this.name+" \u2192 "+W};function S(B,W,C,F){this.rule=B,this.dot=W,this.reference=C,this.data=[],this.wantedBy=F,this.isComplete=this.dot===B.symbols.length}S.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},S.prototype.nextState=function(B){var W=new S(this.rule,this.dot+1,this.reference,this.wantedBy);return W.left=this,W.right=B,W.isComplete&&(W.data=W.build(),W.right=void 0),W},S.prototype.build=function(){var B=[],W=this;do B.push(W.right.data),W=W.left;while(W.left);return B.reverse(),B},S.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,R.fail))};function T(B,W){this.grammar=B,this.index=W,this.states=[],this.wants={},this.scannable=[],this.completed={}}T.prototype.process=function(B){for(var W=this.states,C=this.wants,F=this.completed,J=0;J<W.length;J++){var Q=W[J];if(Q.isComplete){if(Q.finish(),Q.data!==R.fail){for(var _=Q.wantedBy,te=_.length;te--;){var ne=_[te];this.complete(ne,Q)}if(Q.reference===this.index){var q=Q.rule.name;(this.completed[q]=this.completed[q]||[]).push(Q)}}}else{var q=Q.rule.symbols[Q.dot];if(typeof q!="string"){this.scannable.push(Q);continue}if(C[q]){if(C[q].push(Q),F.hasOwnProperty(q))for(var K=F[q],te=0;te<K.length;te++){var P=K[te];this.complete(Q,P)}}else C[q]=[Q],this.predict(q)}}},T.prototype.predict=function(B){for(var W=this.grammar.byName[B]||[],C=0;C<W.length;C++){var F=W[C],J=this.wants[B],Q=new S(F,0,this.index,J);this.states.push(Q)}},T.prototype.complete=function(B,W){var C=B.nextState(W);this.states.push(C)};function g(B,W){this.rules=B,this.start=W||this.rules[0].name;var C=this.byName={};this.rules.forEach(function(F){C.hasOwnProperty(F.name)||(C[F.name]=[]),C[F.name].push(F)})}g.fromCompiled=function(F,W){var C=F.Lexer;F.ParserStart&&(W=F.ParserStart,F=F.ParserRules);var F=F.map(function(Q){return new H(Q.name,Q.symbols,Q.postprocess)}),J=new g(F,W);return J.lexer=C,J};function Y(){this.reset("")}Y.prototype.reset=function(B,W){this.buffer=B,this.index=0,this.line=W?W.line:1,this.lastLineBreak=W?-W.col:0},Y.prototype.next=function(){if(this.index<this.buffer.length){var B=this.buffer[this.index++];return B===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:B}}},Y.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},Y.prototype.formatError=function(B,W){var C=this.buffer;if(typeof C=="string"){var F=C.split(`
`).slice(Math.max(0,this.line-5),this.line),J=C.indexOf(`
`,this.index);J===-1&&(J=C.length);var Q=this.index-this.lastLineBreak,_=String(this.line).length;return W+=" at line "+this.line+" col "+Q+`:

`,W+=F.map(function(ne,q){return te(this.line-F.length+q+1,_)+" "+ne},this).join(`
`),W+=`
`+te("",_+Q)+`^
`,W}else return W+" at index "+(this.index-1);function te(ne,q){var K=String(ne);return Array(q-K.length+1).join(" ")+K}};function R(B,W,C){if(B instanceof g)var F=B,C=W;else var F=g.fromCompiled(B,W);this.grammar=F,this.options={keepHistory:!1,lexer:F.lexer||new Y};for(var J in C||{})this.options[J]=C[J];this.lexer=this.options.lexer,this.lexerState=void 0;var Q=new T(F,0),_=this.table=[Q];Q.wants[F.start]=[],Q.predict(F.start),Q.process(),this.current=0}R.fail={},R.prototype.feed=function(B){var W=this.lexer;W.reset(B,this.lexerState);for(var C;;){try{if(C=W.next(),!C)break}catch(O){var _=new T(this.grammar,this.current+1);this.table.push(_);var F=new Error(this.reportLexerError(O));throw F.offset=this.current,F.token=O.token,F}var J=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var Q=this.current+1,_=new T(this.grammar,Q);this.table.push(_);for(var te=C.text!==void 0?C.text:C.value,ne=W.constructor===Y?C.value:C,q=J.scannable,K=q.length;K--;){var P=q[K],V=P.rule.symbols[P.dot];if(V.test?V.test(ne):V.type?V.type===C.type:V.literal===te){var v=P.nextState({data:ne,token:C,isToken:!0,reference:Q-1});_.states.push(v)}}if(_.process(),_.states.length===0){var F=new Error(this.reportError(C));throw F.offset=this.current,F.token=C,F}this.options.keepHistory&&(J.lexerState=W.save()),this.current++}return J&&(this.lexerState=W.save()),this.results=this.finish(),this},R.prototype.reportLexerError=function(B){var W,C,F=B.token;return F?(W="input "+JSON.stringify(F.text[0])+" (lexer error)",C=this.lexer.formatError(F,"Syntax error")):(W="input (lexer error)",C=B.message),this.reportErrorCommon(C,W)},R.prototype.reportError=function(B){var W=(B.type?B.type+" token: ":"")+JSON.stringify(B.value!==void 0?B.value:B),C=this.lexer.formatError(B,"Syntax error");return this.reportErrorCommon(C,W)},R.prototype.reportErrorCommon=function(B,W){var C=[];C.push(B);var F=this.table.length-2,J=this.table[F],Q=J.states.filter(function(te){var ne=te.rule.symbols[te.dot];return ne&&typeof ne!="string"});if(Q.length===0)C.push("Unexpected "+W+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(J.states,C);else{C.push("Unexpected "+W+`. Instead, I was expecting to see one of the following:
`);var _=Q.map(function(te){return this.buildFirstStateStack(te,[])||[te]},this);_.forEach(function(te){var ne=te[0],q=ne.rule.symbols[ne.dot],K=this.getSymbolDisplay(q);C.push("A "+K+" based on:"),this.displayStateStack(te,C)},this)}return C.push(""),C.join(`
`)},R.prototype.displayStateStack=function(B,W){for(var C,F=0,J=0;J<B.length;J++){var Q=B[J],_=Q.rule.toString(Q.dot);_===C?F++:(F>0&&W.push("    ^ "+F+" more lines identical to this"),F=0,W.push("    "+_)),C=_}},R.prototype.getSymbolDisplay=function(B){return Z(B)},R.prototype.buildFirstStateStack=function(B,W){if(W.indexOf(B)!==-1)return null;if(B.wantedBy.length===0)return[B];var C=B.wantedBy[0],F=[B].concat(W),J=this.buildFirstStateStack(C,F);return J===null?null:[B].concat(J)},R.prototype.save=function(){var B=this.table[this.current];return B.lexerState=this.lexerState,B},R.prototype.restore=function(B){var W=B.index;this.current=W,this.table[W]=B,this.table.splice(W+1),this.lexerState=B.lexerState,this.results=this.finish()},R.prototype.rewind=function(B){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[B])},R.prototype.finish=function(){var B=[],W=this.grammar.start,C=this.table[this.table.length-1];return C.states.forEach(function(F){F.rule.name===W&&F.dot===F.rule.symbols.length&&F.reference===0&&F.data!==R.fail&&B.push(F)}),B.map(function(F){return F.data})};function Z(B){var W=typeof B;if(W==="string")return B;if(W==="object"){if(B.literal)return JSON.stringify(B.literal);if(B instanceof RegExp)return"character matching "+B;if(B.type)return B.type+" token";if(B.test)return"token matching "+String(B.test);throw new Error("Unknown symbol type: "+B)}}function N(B){var W=typeof B;if(W==="string")return B;if(W==="object"){if(B.literal)return JSON.stringify(B.literal);if(B instanceof RegExp)return B.toString();if(B.type)return"%"+B.type;if(B.test)return"<"+String(B.test)+">";throw new Error("Unknown symbol type: "+B)}}return{Parser:R,Grammar:g,Rule:H}})},11442:(ie,H,S)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),Object.defineProperty(H,"DraggableCore",{enumerable:!0,get:function(){return W.default}}),H.default=void 0;var T=Q(S(14041)),g=F(S(39067)),Y=F(S(43144)),R=F(S(9546)),Z=S(1154),N=S(69951),B=S(37201),W=F(S(43605)),C=F(S(48013));function F(P){return P&&P.__esModule?P:{default:P}}function J(P){if(typeof WeakMap!="function")return null;var V=new WeakMap,v=new WeakMap;return(J=function(O){return O?v:V})(P)}function Q(P,V){if(!V&&P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var v=J(V);if(v&&v.has(P))return v.get(P);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in P)if(I!=="default"&&Object.prototype.hasOwnProperty.call(P,I)){var M=D?Object.getOwnPropertyDescriptor(P,I):null;M&&(M.get||M.set)?Object.defineProperty(O,I,M):O[I]=P[I]}return O.default=P,v&&v.set(P,O),O}function _(){return _=Object.assign?Object.assign.bind():function(P){for(var V=1;V<arguments.length;V++){var v=arguments[V];for(var O in v)Object.prototype.hasOwnProperty.call(v,O)&&(P[O]=v[O])}return P},_.apply(this,arguments)}function te(P,V,v){return V=ne(V),V in P?Object.defineProperty(P,V,{value:v,enumerable:!0,configurable:!0,writable:!0}):P[V]=v,P}function ne(P){var V=q(P,"string");return typeof V=="symbol"?V:String(V)}function q(P,V){if(typeof P!="object"||P===null)return P;var v=P[Symbol.toPrimitive];if(v!==void 0){var O=v.call(P,V||"default");if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(P)}class K extends T.Component{static getDerivedStateFromProps(V,v){let{position:O}=V,{prevPropsPosition:D}=v;return O&&(!D||O.x!==D.x||O.y!==D.y)?((0,C.default)("Draggable: getDerivedStateFromProps %j",{position:O,prevPropsPosition:D}),{x:O.x,y:O.y,prevPropsPosition:{...O}}):null}constructor(V){super(V),te(this,"onDragStart",(v,O)=>{if((0,C.default)("Draggable: onDragStart: %j",O),this.props.onStart(v,(0,N.createDraggableData)(this,O))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),te(this,"onDrag",(v,O)=>{if(!this.state.dragging)return!1;(0,C.default)("Draggable: onDrag: %j",O);const D=(0,N.createDraggableData)(this,O),I={x:D.x,y:D.y,slackX:0,slackY:0};if(this.props.bounds){const{x:G,y:j}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[se,ae]=(0,N.getBoundPosition)(this,I.x,I.y);I.x=se,I.y=ae,I.slackX=this.state.slackX+(G-I.x),I.slackY=this.state.slackY+(j-I.y),D.x=I.x,D.y=I.y,D.deltaX=I.x-this.state.x,D.deltaY=I.y-this.state.y}if(this.props.onDrag(v,D)===!1)return!1;this.setState(I)}),te(this,"onDragStop",(v,O)=>{if(!this.state.dragging||this.props.onStop(v,(0,N.createDraggableData)(this,O))===!1)return!1;(0,C.default)("Draggable: onDragStop: %j",O);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:G,y:j}=this.props.position;I.x=G,I.y=j}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:V.position?V.position.x:V.defaultPosition.x,y:V.position?V.position.y:V.defaultPosition.y,prevPropsPosition:{...V.position},slackX:0,slackY:0,isElementSVG:!1},V.position&&!(V.onDrag||V.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var V,v;return(V=(v=this.props)===null||v===void 0||(v=v.nodeRef)===null||v===void 0?void 0:v.current)!==null&&V!==void 0?V:Y.default.findDOMNode(this)}render(){const{axis:V,bounds:v,children:O,defaultPosition:D,defaultClassName:I,defaultClassNameDragging:M,defaultClassNameDragged:G,position:j,positionOffset:se,scale:ae,...le}=this.props;let re={},pe=null;const ze=!!!j||this.state.dragging,Ze=j||D,Me={x:(0,N.canDragX)(this)&&ze?this.state.x:Ze.x,y:(0,N.canDragY)(this)&&ze?this.state.y:Ze.y};this.state.isElementSVG?pe=(0,Z.createSVGTransform)(Me,se):re=(0,Z.createCSSTransform)(Me,se);const Pe=(0,R.default)(O.props.className||"",I,{[M]:this.state.dragging,[G]:this.state.dragged});return T.createElement(W.default,_({},le,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),T.cloneElement(T.Children.only(O),{className:Pe,style:{...O.props.style,...re},transform:pe}))}}H.default=K,te(K,"displayName","Draggable"),te(K,"propTypes",{...W.default.propTypes,axis:g.default.oneOf(["both","x","y","none"]),bounds:g.default.oneOfType([g.default.shape({left:g.default.number,right:g.default.number,top:g.default.number,bottom:g.default.number}),g.default.string,g.default.oneOf([!1])]),defaultClassName:g.default.string,defaultClassNameDragging:g.default.string,defaultClassNameDragged:g.default.string,defaultPosition:g.default.shape({x:g.default.number,y:g.default.number}),positionOffset:g.default.shape({x:g.default.oneOfType([g.default.number,g.default.string]),y:g.default.oneOfType([g.default.number,g.default.string])}),position:g.default.shape({x:g.default.number,y:g.default.number}),className:B.dontSetMe,style:B.dontSetMe,transform:B.dontSetMe}),te(K,"defaultProps",{...W.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},43605:(ie,H,S)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var T=F(S(14041)),g=W(S(39067)),Y=W(S(43144)),R=S(1154),Z=S(69951),N=S(37201),B=W(S(48013));function W(K){return K&&K.__esModule?K:{default:K}}function C(K){if(typeof WeakMap!="function")return null;var P=new WeakMap,V=new WeakMap;return(C=function(v){return v?V:P})(K)}function F(K,P){if(!P&&K&&K.__esModule)return K;if(K===null||typeof K!="object"&&typeof K!="function")return{default:K};var V=C(P);if(V&&V.has(K))return V.get(K);var v={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in K)if(D!=="default"&&Object.prototype.hasOwnProperty.call(K,D)){var I=O?Object.getOwnPropertyDescriptor(K,D):null;I&&(I.get||I.set)?Object.defineProperty(v,D,I):v[D]=K[D]}return v.default=K,V&&V.set(K,v),v}function J(K,P,V){return P=Q(P),P in K?Object.defineProperty(K,P,{value:V,enumerable:!0,configurable:!0,writable:!0}):K[P]=V,K}function Q(K){var P=_(K,"string");return typeof P=="symbol"?P:String(P)}function _(K,P){if(typeof K!="object"||K===null)return K;var V=K[Symbol.toPrimitive];if(V!==void 0){var v=V.call(K,P||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(K)}const te={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ne=te.mouse;class q extends T.Component{constructor(){super(...arguments),J(this,"dragging",!1),J(this,"lastX",NaN),J(this,"lastY",NaN),J(this,"touchIdentifier",null),J(this,"mounted",!1),J(this,"handleDragStart",P=>{if(this.props.onMouseDown(P),!this.props.allowAnyClick&&typeof P.button=="number"&&P.button!==0)return!1;const V=this.findDOMNode();if(!V||!V.ownerDocument||!V.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:v}=V;if(this.props.disabled||!(P.target instanceof v.defaultView.Node)||this.props.handle&&!(0,R.matchesSelectorAndParentsTo)(P.target,this.props.handle,V)||this.props.cancel&&(0,R.matchesSelectorAndParentsTo)(P.target,this.props.cancel,V))return;P.type==="touchstart"&&P.preventDefault();const O=(0,R.getTouchIdentifier)(P);this.touchIdentifier=O;const D=(0,Z.getControlPosition)(P,O,this);if(D==null)return;const{x:I,y:M}=D,G=(0,Z.createCoreData)(this,I,M);(0,B.default)("DraggableCore: handleDragStart: %j",G),(0,B.default)("calling",this.props.onStart),!(this.props.onStart(P,G)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,R.addUserSelectStyles)(v),this.dragging=!0,this.lastX=I,this.lastY=M,(0,R.addEvent)(v,ne.move,this.handleDrag),(0,R.addEvent)(v,ne.stop,this.handleDragStop))}),J(this,"handleDrag",P=>{const V=(0,Z.getControlPosition)(P,this.touchIdentifier,this);if(V==null)return;let{x:v,y:O}=V;if(Array.isArray(this.props.grid)){let M=v-this.lastX,G=O-this.lastY;if([M,G]=(0,Z.snapToGrid)(this.props.grid,M,G),!M&&!G)return;v=this.lastX+M,O=this.lastY+G}const D=(0,Z.createCoreData)(this,v,O);if((0,B.default)("DraggableCore: handleDrag: %j",D),this.props.onDrag(P,D)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const G=document.createEvent("MouseEvents");G.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(G)}return}this.lastX=v,this.lastY=O}),J(this,"handleDragStop",P=>{if(!this.dragging)return;const V=(0,Z.getControlPosition)(P,this.touchIdentifier,this);if(V==null)return;let{x:v,y:O}=V;if(Array.isArray(this.props.grid)){let G=v-this.lastX||0,j=O-this.lastY||0;[G,j]=(0,Z.snapToGrid)(this.props.grid,G,j),v=this.lastX+G,O=this.lastY+j}const D=(0,Z.createCoreData)(this,v,O);if(this.props.onStop(P,D)===!1||this.mounted===!1)return!1;const M=this.findDOMNode();M&&this.props.enableUserSelectHack&&(0,R.removeUserSelectStyles)(M.ownerDocument),(0,B.default)("DraggableCore: handleDragStop: %j",D),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,M&&((0,B.default)("DraggableCore: Removing handlers"),(0,R.removeEvent)(M.ownerDocument,ne.move,this.handleDrag),(0,R.removeEvent)(M.ownerDocument,ne.stop,this.handleDragStop))}),J(this,"onMouseDown",P=>(ne=te.mouse,this.handleDragStart(P))),J(this,"onMouseUp",P=>(ne=te.mouse,this.handleDragStop(P))),J(this,"onTouchStart",P=>(ne=te.touch,this.handleDragStart(P))),J(this,"onTouchEnd",P=>(ne=te.touch,this.handleDragStop(P)))}componentDidMount(){this.mounted=!0;const P=this.findDOMNode();P&&(0,R.addEvent)(P,te.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const P=this.findDOMNode();if(P){const{ownerDocument:V}=P;(0,R.removeEvent)(V,te.mouse.move,this.handleDrag),(0,R.removeEvent)(V,te.touch.move,this.handleDrag),(0,R.removeEvent)(V,te.mouse.stop,this.handleDragStop),(0,R.removeEvent)(V,te.touch.stop,this.handleDragStop),(0,R.removeEvent)(P,te.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,R.removeUserSelectStyles)(V)}}findDOMNode(){var P,V;return(P=this.props)!==null&&P!==void 0&&P.nodeRef?(V=this.props)===null||V===void 0||(V=V.nodeRef)===null||V===void 0?void 0:V.current:Y.default.findDOMNode(this)}render(){return T.cloneElement(T.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}H.default=q,J(q,"displayName","DraggableCore"),J(q,"propTypes",{allowAnyClick:g.default.bool,children:g.default.node.isRequired,disabled:g.default.bool,enableUserSelectHack:g.default.bool,offsetParent:function(K,P){if(K[P]&&K[P].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:g.default.arrayOf(g.default.number),handle:g.default.string,cancel:g.default.string,nodeRef:g.default.object,onStart:g.default.func,onDrag:g.default.func,onStop:g.default.func,onMouseDown:g.default.func,scale:g.default.number,className:N.dontSetMe,style:N.dontSetMe,transform:N.dontSetMe}),J(q,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},89463:(ie,H,S)=>{"use strict";const{default:T,DraggableCore:g}=S(11442);ie.exports=T,ie.exports.default=T,ie.exports.DraggableCore=g},1154:(ie,H,S)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.addClassName=D,H.addEvent=W,H.addUserSelectStyles=v,H.createCSSTransform=ne,H.createSVGTransform=q,H.getTouch=P,H.getTouchIdentifier=V,H.getTranslation=K,H.innerHeight=Q,H.innerWidth=_,H.matchesSelector=N,H.matchesSelectorAndParentsTo=B,H.offsetXYFromParent=te,H.outerHeight=F,H.outerWidth=J,H.removeClassName=I,H.removeEvent=C,H.removeUserSelectStyles=O;var T=S(37201),g=R(S(25615));function Y(M){if(typeof WeakMap!="function")return null;var G=new WeakMap,j=new WeakMap;return(Y=function(se){return se?j:G})(M)}function R(M,G){if(!G&&M&&M.__esModule)return M;if(M===null||typeof M!="object"&&typeof M!="function")return{default:M};var j=Y(G);if(j&&j.has(M))return j.get(M);var se={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in M)if(le!=="default"&&Object.prototype.hasOwnProperty.call(M,le)){var re=ae?Object.getOwnPropertyDescriptor(M,le):null;re&&(re.get||re.set)?Object.defineProperty(se,le,re):se[le]=M[le]}return se.default=M,j&&j.set(M,se),se}let Z="";function N(M,G){return Z||(Z=(0,T.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(j){return(0,T.isFunction)(M[j])})),(0,T.isFunction)(M[Z])?M[Z](G):!1}function B(M,G,j){let se=M;do{if(N(se,G))return!0;if(se===j)return!1;se=se.parentNode}while(se);return!1}function W(M,G,j,se){if(!M)return;const ae={capture:!0,...se};M.addEventListener?M.addEventListener(G,j,ae):M.attachEvent?M.attachEvent("on"+G,j):M["on"+G]=j}function C(M,G,j,se){if(!M)return;const ae={capture:!0,...se};M.removeEventListener?M.removeEventListener(G,j,ae):M.detachEvent?M.detachEvent("on"+G,j):M["on"+G]=null}function F(M){let G=M.clientHeight;const j=M.ownerDocument.defaultView.getComputedStyle(M);return G+=(0,T.int)(j.borderTopWidth),G+=(0,T.int)(j.borderBottomWidth),G}function J(M){let G=M.clientWidth;const j=M.ownerDocument.defaultView.getComputedStyle(M);return G+=(0,T.int)(j.borderLeftWidth),G+=(0,T.int)(j.borderRightWidth),G}function Q(M){let G=M.clientHeight;const j=M.ownerDocument.defaultView.getComputedStyle(M);return G-=(0,T.int)(j.paddingTop),G-=(0,T.int)(j.paddingBottom),G}function _(M){let G=M.clientWidth;const j=M.ownerDocument.defaultView.getComputedStyle(M);return G-=(0,T.int)(j.paddingLeft),G-=(0,T.int)(j.paddingRight),G}function te(M,G,j){const ae=G===G.ownerDocument.body?{left:0,top:0}:G.getBoundingClientRect(),le=(M.clientX+G.scrollLeft-ae.left)/j,re=(M.clientY+G.scrollTop-ae.top)/j;return{x:le,y:re}}function ne(M,G){const j=K(M,G,"px");return{[(0,g.browserPrefixToKey)("transform",g.default)]:j}}function q(M,G){return K(M,G,"")}function K(M,G,j){let{x:se,y:ae}=M,le="translate(".concat(se).concat(j,",").concat(ae).concat(j,")");if(G){const re="".concat(typeof G.x=="string"?G.x:G.x+j),pe="".concat(typeof G.y=="string"?G.y:G.y+j);le="translate(".concat(re,", ").concat(pe,")")+le}return le}function P(M,G){return M.targetTouches&&(0,T.findInArray)(M.targetTouches,j=>G===j.identifier)||M.changedTouches&&(0,T.findInArray)(M.changedTouches,j=>G===j.identifier)}function V(M){if(M.targetTouches&&M.targetTouches[0])return M.targetTouches[0].identifier;if(M.changedTouches&&M.changedTouches[0])return M.changedTouches[0].identifier}function v(M){if(!M)return;let G=M.getElementById("react-draggable-style-el");G||(G=M.createElement("style"),G.type="text/css",G.id="react-draggable-style-el",G.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,G.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,M.getElementsByTagName("head")[0].appendChild(G)),M.body&&D(M.body,"react-draggable-transparent-selection")}function O(M){if(M)try{if(M.body&&I(M.body,"react-draggable-transparent-selection"),M.selection)M.selection.empty();else{const G=(M.defaultView||window).getSelection();G&&G.type!=="Caret"&&G.removeAllRanges()}}catch{}}function D(M,G){M.classList?M.classList.add(G):M.className.match(new RegExp("(?:^|\\s)".concat(G,"(?!\\S)")))||(M.className+=" ".concat(G))}function I(M,G){M.classList?M.classList.remove(G):M.className=M.className.replace(new RegExp("(?:^|\\s)".concat(G,"(?!\\S)"),"g"),"")}},25615:(ie,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.browserPrefixToKey=g,H.browserPrefixToStyle=Y,H.default=void 0,H.getPrefix=T;const S=["Moz","Webkit","O","ms"];function T(){var N;let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const W=(N=window.document)===null||N===void 0||(N=N.documentElement)===null||N===void 0?void 0:N.style;if(!W||B in W)return"";for(let C=0;C<S.length;C++)if(g(B,S[C])in W)return S[C];return""}function g(N,B){return B?"".concat(B).concat(R(N)):N}function Y(N,B){return B?"-".concat(B.toLowerCase(),"-").concat(N):N}function R(N){let B="",W=!0;for(let C=0;C<N.length;C++)W?(B+=N[C].toUpperCase(),W=!1):N[C]==="-"?W=!0:B+=N[C];return B}var Z=H.default=T()},48013:(ie,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=S;function S(){}},69951:(ie,H,S)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.canDragX=Z,H.canDragY=N,H.createCoreData=W,H.createDraggableData=C,H.getBoundPosition=Y,H.getControlPosition=B,H.snapToGrid=R;var T=S(37201),g=S(1154);function Y(Q,_,te){if(!Q.props.bounds)return[_,te];let{bounds:ne}=Q.props;ne=typeof ne=="string"?ne:F(ne);const q=J(Q);if(typeof ne=="string"){const{ownerDocument:K}=q,P=K.defaultView;let V;if(ne==="parent"?V=q.parentNode:V=K.querySelector(ne),!(V instanceof P.HTMLElement))throw new Error('Bounds selector "'+ne+'" could not find an element.');const v=V,O=P.getComputedStyle(q),D=P.getComputedStyle(v);ne={left:-q.offsetLeft+(0,T.int)(D.paddingLeft)+(0,T.int)(O.marginLeft),top:-q.offsetTop+(0,T.int)(D.paddingTop)+(0,T.int)(O.marginTop),right:(0,g.innerWidth)(v)-(0,g.outerWidth)(q)-q.offsetLeft+(0,T.int)(D.paddingRight)-(0,T.int)(O.marginRight),bottom:(0,g.innerHeight)(v)-(0,g.outerHeight)(q)-q.offsetTop+(0,T.int)(D.paddingBottom)-(0,T.int)(O.marginBottom)}}return(0,T.isNum)(ne.right)&&(_=Math.min(_,ne.right)),(0,T.isNum)(ne.bottom)&&(te=Math.min(te,ne.bottom)),(0,T.isNum)(ne.left)&&(_=Math.max(_,ne.left)),(0,T.isNum)(ne.top)&&(te=Math.max(te,ne.top)),[_,te]}function R(Q,_,te){const ne=Math.round(_/Q[0])*Q[0],q=Math.round(te/Q[1])*Q[1];return[ne,q]}function Z(Q){return Q.props.axis==="both"||Q.props.axis==="x"}function N(Q){return Q.props.axis==="both"||Q.props.axis==="y"}function B(Q,_,te){const ne=typeof _=="number"?(0,g.getTouch)(Q,_):null;if(typeof _=="number"&&!ne)return null;const q=J(te),K=te.props.offsetParent||q.offsetParent||q.ownerDocument.body;return(0,g.offsetXYFromParent)(ne||Q,K,te.props.scale)}function W(Q,_,te){const ne=!(0,T.isNum)(Q.lastX),q=J(Q);return ne?{node:q,deltaX:0,deltaY:0,lastX:_,lastY:te,x:_,y:te}:{node:q,deltaX:_-Q.lastX,deltaY:te-Q.lastY,lastX:Q.lastX,lastY:Q.lastY,x:_,y:te}}function C(Q,_){const te=Q.props.scale;return{node:_.node,x:Q.state.x+_.deltaX/te,y:Q.state.y+_.deltaY/te,deltaX:_.deltaX/te,deltaY:_.deltaY/te,lastX:Q.state.x,lastY:Q.state.y}}function F(Q){return{left:Q.left,top:Q.top,right:Q.right,bottom:Q.bottom}}function J(Q){const _=Q.findDOMNode();if(!_)throw new Error("<DraggableCore>: Unmounted during event!");return _}},37201:(ie,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.dontSetMe=R,H.findInArray=S,H.int=Y,H.isFunction=T,H.isNum=g;function S(Z,N){for(let B=0,W=Z.length;B<W;B++)if(N.apply(N,[Z[B],B,Z]))return Z[B]}function T(Z){return typeof Z=="function"||Object.prototype.toString.call(Z)==="[object Function]"}function g(Z){return typeof Z=="number"&&!isNaN(Z)}function Y(Z){return parseInt(Z,10)}function R(Z,N,B){if(Z[N])return new Error("Invalid prop ".concat(N," passed to ").concat(B," - do not set this, set it on the child."))}},40311:(ie,H,S)=>{"use strict";H.__esModule=!0,H.default=void 0;var T=B(S(14041)),g=S(89463),Y=S(62927),R=S(14691),Z=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function N(P){if(typeof WeakMap!="function")return null;var V=new WeakMap,v=new WeakMap;return(N=function(D){return D?v:V})(P)}function B(P,V){if(!V&&P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var v=N(V);if(v&&v.has(P))return v.get(P);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in P)if(I!=="default"&&Object.prototype.hasOwnProperty.call(P,I)){var M=D?Object.getOwnPropertyDescriptor(P,I):null;M&&(M.get||M.set)?Object.defineProperty(O,I,M):O[I]=P[I]}return O.default=P,v&&v.set(P,O),O}function W(){return W=Object.assign?Object.assign.bind():function(P){for(var V=1;V<arguments.length;V++){var v=arguments[V];for(var O in v)Object.prototype.hasOwnProperty.call(v,O)&&(P[O]=v[O])}return P},W.apply(this,arguments)}function C(P,V){if(P==null)return{};var v={},O=Object.keys(P),D,I;for(I=0;I<O.length;I++)D=O[I],!(V.indexOf(D)>=0)&&(v[D]=P[D]);return v}function F(P,V){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(P);V&&(O=O.filter(function(D){return Object.getOwnPropertyDescriptor(P,D).enumerable})),v.push.apply(v,O)}return v}function J(P){for(var V=1;V<arguments.length;V++){var v=arguments[V]!=null?arguments[V]:{};V%2?F(Object(v),!0).forEach(function(O){Q(P,O,v[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(v)):F(Object(v)).forEach(function(O){Object.defineProperty(P,O,Object.getOwnPropertyDescriptor(v,O))})}return P}function Q(P,V,v){return V=_(V),V in P?Object.defineProperty(P,V,{value:v,enumerable:!0,configurable:!0,writable:!0}):P[V]=v,P}function _(P){var V=te(P,"string");return typeof V=="symbol"?V:String(V)}function te(P,V){if(typeof P!="object"||P===null)return P;var v=P[Symbol.toPrimitive];if(v!==void 0){var O=v.call(P,V||"default");if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(P)}function ne(P,V){P.prototype=Object.create(V.prototype),P.prototype.constructor=P,q(P,V)}function q(P,V){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,D){return O.__proto__=D,O},q(P,V)}var K=function(P){ne(V,P);function V(){for(var O,D=arguments.length,I=new Array(D),M=0;M<D;M++)I[M]=arguments[M];return O=P.call.apply(P,[this].concat(I))||this,O.handleRefs={},O.lastHandleRect=null,O.slack=null,O}var v=V.prototype;return v.componentWillUnmount=function(){this.resetData()},v.resetData=function(){this.lastHandleRect=this.slack=null},v.runConstraints=function(D,I){var M=this.props,G=M.minConstraints,j=M.maxConstraints,se=M.lockAspectRatio;if(!G&&!j&&!se)return[D,I];if(se){var ae=this.props.width/this.props.height,le=D-this.props.width,re=I-this.props.height;Math.abs(le)>Math.abs(re*ae)?I=D/ae:D=I*ae}var pe=D,Fe=I,ze=this.slack||[0,0],Ze=ze[0],Me=ze[1];return D+=Ze,I+=Me,G&&(D=Math.max(G[0],D),I=Math.max(G[1],I)),j&&(D=Math.min(j[0],D),I=Math.min(j[1],I)),this.slack=[Ze+(pe-D),Me+(Fe-I)],[D,I]},v.resizeHandler=function(D,I){var M=this;return function(G,j){var se=j.node,ae=j.deltaX,le=j.deltaY;D==="onResizeStart"&&M.resetData();var re=(M.props.axis==="both"||M.props.axis==="x")&&I!=="n"&&I!=="s",pe=(M.props.axis==="both"||M.props.axis==="y")&&I!=="e"&&I!=="w";if(!(!re&&!pe)){var Fe=I[0],ze=I[I.length-1],Ze=se.getBoundingClientRect();if(M.lastHandleRect!=null){if(ze==="w"){var Me=Ze.left-M.lastHandleRect.left;ae+=Me}if(Fe==="n"){var Pe=Ze.top-M.lastHandleRect.top;le+=Pe}}M.lastHandleRect=Ze,ze==="w"&&(ae=-ae),Fe==="n"&&(le=-le);var gt=M.props.width+(re?ae/M.props.transformScale:0),ot=M.props.height+(pe?le/M.props.transformScale:0),un=M.runConstraints(gt,ot);gt=un[0],ot=un[1];var Ue=gt!==M.props.width||ot!==M.props.height,En=typeof M.props[D]=="function"?M.props[D]:null,An=D==="onResize"&&!Ue;En&&!An&&(G.persist==null||G.persist(),En(G,{node:se,size:{width:gt,height:ot},handle:I})),D==="onResizeStop"&&M.resetData()}}},v.renderResizeHandle=function(D,I){var M=this.props.handle;if(!M)return T.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+D,ref:I});if(typeof M=="function")return M(D,I);var G=typeof M.type=="string",j=J({ref:I},G?{}:{handleAxis:D});return T.cloneElement(M,j)},v.render=function(){var D=this,I=this.props,M=I.children,G=I.className,j=I.draggableOpts,se=I.width,ae=I.height,le=I.handle,re=I.handleSize,pe=I.lockAspectRatio,Fe=I.axis,ze=I.minConstraints,Ze=I.maxConstraints,Me=I.onResize,Pe=I.onResizeStop,gt=I.onResizeStart,ot=I.resizeHandles,un=I.transformScale,Ue=C(I,Z);return(0,Y.cloneElement)(M,J(J({},Ue),{},{className:(G?G+" ":"")+"react-resizable",children:[].concat(M.props.children,ot.map(function(En){var An,Ke=(An=D.handleRefs[En])!=null?An:D.handleRefs[En]=T.createRef();return T.createElement(g.DraggableCore,W({},j,{nodeRef:Ke,key:"resizableHandle-"+En,onStop:D.resizeHandler("onResizeStop",En),onStart:D.resizeHandler("onResizeStart",En),onDrag:D.resizeHandler("onResize",En)}),D.renderResizeHandle(En,Ke))}))}))},V}(T.Component);H.default=K,K.propTypes=R.resizableProps,K.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},87706:(ie,H,S)=>{"use strict";var T;T=!0,H.default=void 0;var g=C(S(14041)),Y=B(S(39067)),R=B(S(40311)),Z=S(14691),N=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function B(v){return v&&v.__esModule?v:{default:v}}function W(v){if(typeof WeakMap!="function")return null;var O=new WeakMap,D=new WeakMap;return(W=function(M){return M?D:O})(v)}function C(v,O){if(!O&&v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var D=W(O);if(D&&D.has(v))return D.get(v);var I={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in v)if(G!=="default"&&Object.prototype.hasOwnProperty.call(v,G)){var j=M?Object.getOwnPropertyDescriptor(v,G):null;j&&(j.get||j.set)?Object.defineProperty(I,G,j):I[G]=v[G]}return I.default=v,D&&D.set(v,I),I}function F(){return F=Object.assign?Object.assign.bind():function(v){for(var O=1;O<arguments.length;O++){var D=arguments[O];for(var I in D)Object.prototype.hasOwnProperty.call(D,I)&&(v[I]=D[I])}return v},F.apply(this,arguments)}function J(v,O){var D=Object.keys(v);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(v);O&&(I=I.filter(function(M){return Object.getOwnPropertyDescriptor(v,M).enumerable})),D.push.apply(D,I)}return D}function Q(v){for(var O=1;O<arguments.length;O++){var D=arguments[O]!=null?arguments[O]:{};O%2?J(Object(D),!0).forEach(function(I){_(v,I,D[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(D)):J(Object(D)).forEach(function(I){Object.defineProperty(v,I,Object.getOwnPropertyDescriptor(D,I))})}return v}function _(v,O,D){return O=te(O),O in v?Object.defineProperty(v,O,{value:D,enumerable:!0,configurable:!0,writable:!0}):v[O]=D,v}function te(v){var O=ne(v,"string");return typeof O=="symbol"?O:String(O)}function ne(v,O){if(typeof v!="object"||v===null)return v;var D=v[Symbol.toPrimitive];if(D!==void 0){var I=D.call(v,O||"default");if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(v)}function q(v,O){if(v==null)return{};var D={},I=Object.keys(v),M,G;for(G=0;G<I.length;G++)M=I[G],!(O.indexOf(M)>=0)&&(D[M]=v[M]);return D}function K(v,O){v.prototype=Object.create(O.prototype),v.prototype.constructor=v,P(v,O)}function P(v,O){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,M){return I.__proto__=M,I},P(v,O)}var V=function(v){K(O,v);function O(){for(var I,M=arguments.length,G=new Array(M),j=0;j<M;j++)G[j]=arguments[j];return I=v.call.apply(v,[this].concat(G))||this,I.state={width:I.props.width,height:I.props.height,propsWidth:I.props.width,propsHeight:I.props.height},I.onResize=function(se,ae){var le=ae.size;I.props.onResize?(se.persist==null||se.persist(),I.setState(le,function(){return I.props.onResize&&I.props.onResize(se,ae)})):I.setState(le)},I}O.getDerivedStateFromProps=function(M,G){return G.propsWidth!==M.width||G.propsHeight!==M.height?{width:M.width,height:M.height,propsWidth:M.width,propsHeight:M.height}:null};var D=O.prototype;return D.render=function(){var M=this.props,G=M.handle,j=M.handleSize,se=M.onResize,ae=M.onResizeStart,le=M.onResizeStop,re=M.draggableOpts,pe=M.minConstraints,Fe=M.maxConstraints,ze=M.lockAspectRatio,Ze=M.axis,Me=M.width,Pe=M.height,gt=M.resizeHandles,ot=M.style,un=M.transformScale,Ue=q(M,N);return g.createElement(R.default,{axis:Ze,draggableOpts:re,handle:G,handleSize:j,height:this.state.height,lockAspectRatio:ze,maxConstraints:Fe,minConstraints:pe,onResizeStart:ae,onResize:this.onResize,onResizeStop:le,resizeHandles:gt,transformScale:un,width:this.state.width},g.createElement("div",F({},Ue,{style:Q(Q({},ot),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},O}(g.Component);H.default=V,V.propTypes=Q(Q({},Z.resizableProps),{},{children:Y.default.element})},14691:(ie,H,S)=>{"use strict";H.__esModule=!0,H.resizableProps=void 0;var T=Y(S(39067)),g=S(89463);function Y(Z){return Z&&Z.__esModule?Z:{default:Z}}var R={axis:T.default.oneOf(["both","x","y","none"]),className:T.default.string,children:T.default.element.isRequired,draggableOpts:T.default.shape({allowAnyClick:T.default.bool,cancel:T.default.string,children:T.default.node,disabled:T.default.bool,enableUserSelectHack:T.default.bool,offsetParent:T.default.node,grid:T.default.arrayOf(T.default.number),handle:T.default.string,nodeRef:T.default.object,onStart:T.default.func,onDrag:T.default.func,onStop:T.default.func,onMouseDown:T.default.func,scale:T.default.number}),height:function(){for(var N=arguments.length,B=new Array(N),W=0;W<N;W++)B[W]=arguments[W];var C=B[0];if(C.axis==="both"||C.axis==="y"){var F;return(F=T.default.number).isRequired.apply(F,B)}return T.default.number.apply(T.default,B)},handle:T.default.oneOfType([T.default.node,T.default.func]),handleSize:T.default.arrayOf(T.default.number),lockAspectRatio:T.default.bool,maxConstraints:T.default.arrayOf(T.default.number),minConstraints:T.default.arrayOf(T.default.number),onResizeStop:T.default.func,onResizeStart:T.default.func,onResize:T.default.func,resizeHandles:T.default.arrayOf(T.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:T.default.number,width:function(){for(var N=arguments.length,B=new Array(N),W=0;W<N;W++)B[W]=arguments[W];var C=B[0];if(C.axis==="both"||C.axis==="x"){var F;return(F=T.default.number).isRequired.apply(F,B)}return T.default.number.apply(T.default,B)}};H.resizableProps=R},62927:(ie,H,S)=>{"use strict";H.__esModule=!0,H.cloneElement=W;var T=g(S(14041));function g(C){return C&&C.__esModule?C:{default:C}}function Y(C,F){var J=Object.keys(C);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(C);F&&(Q=Q.filter(function(_){return Object.getOwnPropertyDescriptor(C,_).enumerable})),J.push.apply(J,Q)}return J}function R(C){for(var F=1;F<arguments.length;F++){var J=arguments[F]!=null?arguments[F]:{};F%2?Y(Object(J),!0).forEach(function(Q){Z(C,Q,J[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(J)):Y(Object(J)).forEach(function(Q){Object.defineProperty(C,Q,Object.getOwnPropertyDescriptor(J,Q))})}return C}function Z(C,F,J){return F=N(F),F in C?Object.defineProperty(C,F,{value:J,enumerable:!0,configurable:!0,writable:!0}):C[F]=J,C}function N(C){var F=B(C,"string");return typeof F=="symbol"?F:String(F)}function B(C,F){if(typeof C!="object"||C===null)return C;var J=C[Symbol.toPrimitive];if(J!==void 0){var Q=J.call(C,F||"default");if(typeof Q!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(C)}function W(C,F){return F.style&&C.props.style&&(F.style=R(R({},C.props.style),F.style)),F.className&&C.props.className&&(F.className=C.props.className+" "+F.className),T.default.cloneElement(C,F)}},11097:(ie,H,S)=>{"use strict";ie.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},ie.exports.Resizable=S(40311).default,ie.exports.ResizableBox=S(87706).default},16983:(ie,H,S)=>{"use strict";var T;T={value:!0};var g=S(85608),Y=S(14041),R=g.__importDefault(S(49069));function Z(N,B,W){B===void 0&&(B=0),W===void 0&&(W=[]);var C=R.default(N,B),F=C[0],J=C[1],Q=C[2];return Y.useEffect(Q,W),[F,J]}H.A=Z},49069:(ie,H,S)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});var T=S(14041);function g(Y,R){R===void 0&&(R=0);var Z=T.useRef(!1),N=T.useRef(),B=T.useRef(Y),W=T.useCallback(function(){return Z.current},[]),C=T.useCallback(function(){Z.current=!1,N.current&&clearTimeout(N.current),N.current=setTimeout(function(){Z.current=!0,B.current()},R)},[R]),F=T.useCallback(function(){Z.current=null,N.current&&clearTimeout(N.current)},[]);return T.useEffect(function(){B.current=Y},[Y]),T.useEffect(function(){return C(),F},[R]),[W,F,C]}H.default=g},47112:(ie,H,S)=>{ie=S.nmd(ie),function(T){"use strict";T.exports.is_uri=Y,T.exports.is_http_uri=R,T.exports.is_https_uri=Z,T.exports.is_web_uri=N,T.exports.isUri=Y,T.exports.isHttpUri=R,T.exports.isHttpsUri=Z,T.exports.isWebUri=N;var g=function(B){var W=B.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return W};function Y(B){if(B&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(B)&&!/%[^0-9a-f]/i.test(B)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(B)){var W=[],C="",F="",J="",Q="",_="",te="";if(W=g(B),C=W[1],F=W[2],J=W[3],Q=W[4],_=W[5],!!(C&&C.length&&J.length>=0)){if(F&&F.length){if(!(J.length===0||/^\//.test(J)))return}else if(/^\/\//.test(J))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(C.toLowerCase()))return te+=C+":",F&&F.length&&(te+="//"+F),te+=J,Q&&Q.length&&(te+="?"+Q),_&&_.length&&(te+="#"+_),te}}}function R(B,W){if(Y(B)){var C=[],F="",J="",Q="",_="",te="",ne="",q="";if(C=g(B),F=C[1],J=C[2],Q=C[3],te=C[4],ne=C[5],!!F){if(W){if(F.toLowerCase()!="https")return}else if(F.toLowerCase()!="http")return;if(J)return/:(\d+)$/.test(J)&&(_=J.match(/:(\d+)$/)[0],J=J.replace(/:\d+$/,"")),q+=F+":",q+="//"+J,_&&(q+=_),q+=Q,te&&te.length&&(q+="?"+te),ne&&ne.length&&(q+="#"+ne),q}}}function Z(B){return R(B,!0)}function N(B){return R(B)||Z(B)}}(ie)},10646:ie=>{"use strict";function H(S){return Object.prototype.toString.call(S)==="[object Array]"}ie.exports=Array.isArray||H},43225:ie=>{"use strict";function H(S){return typeof S=="function"}ie.exports=H},50709:(ie,H,S)=>{"use strict";var T=S(10646),g=S(70925);function Y(R){var Z;if(!T(R)||(Z=R.length,!Z))return!1;for(var N=0;N<Z;N++)if(!g(R[N]))return!1;return!0}ie.exports=Y},70925:(ie,H,S)=>{"use strict";var T=S(72100);function g(Y){return T(Y)&&Y%1===0}ie.exports=g},72100:ie=>{"use strict";function H(S){return(typeof S=="number"||Object.prototype.toString.call(S)==="[object Number]")&&S.valueOf()===S.valueOf()}ie.exports=H},91042:(ie,H,S)=>{"use strict";S.d(H,{Y:()=>Y});var T=S(14041),g=S(16261);function Y(R,Z){const[N,B]=(0,T.useState)({status:"not-executed",error:void 0,result:Z}),W=(0,T.useRef)(),C=(0,T.useRef)(),F=(0,g.J)({execute(...J){C.current=J;const Q=R(...J);return W.current=Q,B(_=>({..._,status:"loading"})),Q.then(_=>{Q===W.current&&B(te=>({...te,status:"success",error:void 0,result:_}))},_=>{Q===W.current&&B(te=>({...te,status:"error",error:_}))}),Q},reset(){B({status:"not-executed",error:void 0,result:Z}),W.current=void 0,C.current=void 0}});return[N,(0,T.useMemo)(()=>({reset(){F.current.reset()},execute:(...J)=>F.current.execute(...J)}),[]),{promise:W.current,lastArgs:C.current}]}}}]);})();

//# sourceMappingURL=4840.f0cb2042.chunk.js.map